(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function Rg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var XM={exports:{}},Lg={},YM={exports:{}},nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wh=Symbol.for("react.element"),NP=Symbol.for("react.portal"),FP=Symbol.for("react.fragment"),OP=Symbol.for("react.strict_mode"),zP=Symbol.for("react.profiler"),UP=Symbol.for("react.provider"),BP=Symbol.for("react.context"),HP=Symbol.for("react.forward_ref"),VP=Symbol.for("react.suspense"),WP=Symbol.for("react.memo"),GP=Symbol.for("react.lazy"),L1=Symbol.iterator;function XP(n){return n===null||typeof n!="object"?null:(n=L1&&n[L1]||n["@@iterator"],typeof n=="function"?n:null)}var jM={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qM=Object.assign,ZM={};function Fc(n,e,t){this.props=n,this.context=e,this.refs=ZM,this.updater=t||jM}Fc.prototype.isReactComponent={};Fc.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Fc.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function KM(){}KM.prototype=Fc.prototype;function dy(n,e,t){this.props=n,this.context=e,this.refs=ZM,this.updater=t||jM}var fy=dy.prototype=new KM;fy.constructor=dy;qM(fy,Fc.prototype);fy.isPureReactComponent=!0;var I1=Array.isArray,JM=Object.prototype.hasOwnProperty,py={current:null},$M={key:!0,ref:!0,__self:!0,__source:!0};function QM(n,e,t){var i,s={},o=null,c=null;if(e!=null)for(i in e.ref!==void 0&&(c=e.ref),e.key!==void 0&&(o=""+e.key),e)JM.call(e,i)&&!$M.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=t;else if(1<h){for(var m=Array(h),x=0;x<h;x++)m[x]=arguments[x+2];s.children=m}if(n&&n.defaultProps)for(i in h=n.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Wh,type:n,key:o,ref:c,props:s,_owner:py.current}}function YP(n,e){return{$$typeof:Wh,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function gy(n){return typeof n=="object"&&n!==null&&n.$$typeof===Wh}function jP(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var D1=/\/+/g;function Cv(n,e){return typeof n=="object"&&n!==null&&n.key!=null?jP(""+n.key):e.toString(36)}function cp(n,e,t,i,s){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var c=!1;if(n===null)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(n.$$typeof){case Wh:case NP:c=!0}}if(c)return c=n,s=s(c),n=i===""?"."+Cv(c,0):i,I1(s)?(t="",n!=null&&(t=n.replace(D1,"$&/")+"/"),cp(s,e,t,"",function(x){return x})):s!=null&&(gy(s)&&(s=YP(s,t+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(D1,"$&/")+"/")+n)),e.push(s)),1;if(c=0,i=i===""?".":i+":",I1(n))for(var h=0;h<n.length;h++){o=n[h];var m=i+Cv(o,h);c+=cp(o,e,t,m,s)}else if(m=XP(n),typeof m=="function")for(n=m.call(n),h=0;!(o=n.next()).done;)o=o.value,m=i+Cv(o,h++),c+=cp(o,e,t,m,s);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return c}function Kd(n,e,t){if(n==null)return n;var i=[],s=0;return cp(n,i,"","",function(o){return e.call(t,o,s++)}),i}function qP(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Wi={current:null},up={transition:null},ZP={ReactCurrentDispatcher:Wi,ReactCurrentBatchConfig:up,ReactCurrentOwner:py};function eA(){throw Error("act(...) is not supported in production builds of React.")}nn.Children={map:Kd,forEach:function(n,e,t){Kd(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Kd(n,function(){e++}),e},toArray:function(n){return Kd(n,function(e){return e})||[]},only:function(n){if(!gy(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};nn.Component=Fc;nn.Fragment=FP;nn.Profiler=zP;nn.PureComponent=dy;nn.StrictMode=OP;nn.Suspense=VP;nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZP;nn.act=eA;nn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=qM({},n.props),s=n.key,o=n.ref,c=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,c=py.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var h=n.type.defaultProps;for(m in e)JM.call(e,m)&&!$M.hasOwnProperty(m)&&(i[m]=e[m]===void 0&&h!==void 0?h[m]:e[m])}var m=arguments.length-2;if(m===1)i.children=t;else if(1<m){h=Array(m);for(var x=0;x<m;x++)h[x]=arguments[x+2];i.children=h}return{$$typeof:Wh,type:n.type,key:s,ref:o,props:i,_owner:c}};nn.createContext=function(n){return n={$$typeof:BP,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:UP,_context:n},n.Consumer=n};nn.createElement=QM;nn.createFactory=function(n){var e=QM.bind(null,n);return e.type=n,e};nn.createRef=function(){return{current:null}};nn.forwardRef=function(n){return{$$typeof:HP,render:n}};nn.isValidElement=gy;nn.lazy=function(n){return{$$typeof:GP,_payload:{_status:-1,_result:n},_init:qP}};nn.memo=function(n,e){return{$$typeof:WP,type:n,compare:e===void 0?null:e}};nn.startTransition=function(n){var e=up.transition;up.transition={};try{n()}finally{up.transition=e}};nn.unstable_act=eA;nn.useCallback=function(n,e){return Wi.current.useCallback(n,e)};nn.useContext=function(n){return Wi.current.useContext(n)};nn.useDebugValue=function(){};nn.useDeferredValue=function(n){return Wi.current.useDeferredValue(n)};nn.useEffect=function(n,e){return Wi.current.useEffect(n,e)};nn.useId=function(){return Wi.current.useId()};nn.useImperativeHandle=function(n,e,t){return Wi.current.useImperativeHandle(n,e,t)};nn.useInsertionEffect=function(n,e){return Wi.current.useInsertionEffect(n,e)};nn.useLayoutEffect=function(n,e){return Wi.current.useLayoutEffect(n,e)};nn.useMemo=function(n,e){return Wi.current.useMemo(n,e)};nn.useReducer=function(n,e,t){return Wi.current.useReducer(n,e,t)};nn.useRef=function(n){return Wi.current.useRef(n)};nn.useState=function(n){return Wi.current.useState(n)};nn.useSyncExternalStore=function(n,e,t){return Wi.current.useSyncExternalStore(n,e,t)};nn.useTransition=function(){return Wi.current.useTransition()};nn.version="18.3.1";YM.exports=nn;var dt=YM.exports;const tA=Rg(dt);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KP=dt,JP=Symbol.for("react.element"),$P=Symbol.for("react.fragment"),QP=Object.prototype.hasOwnProperty,ek=KP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tk={key:!0,ref:!0,__self:!0,__source:!0};function nA(n,e,t){var i,s={},o=null,c=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(c=e.ref);for(i in e)QP.call(e,i)&&!tk.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:JP,type:n,key:o,ref:c,props:s,_owner:ek.current}}Lg.Fragment=$P;Lg.jsx=nA;Lg.jsxs=nA;XM.exports=Lg;var Kt=XM.exports,Jx={},iA={exports:{}},xr={},rA={exports:{}},sA={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ce,we){var be=ce.length;ce.push(we);e:for(;0<be;){var Ie=be-1>>>1,Ke=ce[Ie];if(0<s(Ke,we))ce[Ie]=we,ce[be]=Ke,be=Ie;else break e}}function t(ce){return ce.length===0?null:ce[0]}function i(ce){if(ce.length===0)return null;var we=ce[0],be=ce.pop();if(be!==we){ce[0]=be;e:for(var Ie=0,Ke=ce.length,rt=Ke>>>1;Ie<rt;){var Te=2*(Ie+1)-1,Ve=ce[Te],Je=Te+1,Ye=ce[Je];if(0>s(Ve,be))Je<Ke&&0>s(Ye,Ve)?(ce[Ie]=Ye,ce[Je]=be,Ie=Je):(ce[Ie]=Ve,ce[Te]=be,Ie=Te);else if(Je<Ke&&0>s(Ye,be))ce[Ie]=Ye,ce[Je]=be,Ie=Je;else break e}}return we}function s(ce,we){var be=ce.sortIndex-we.sortIndex;return be!==0?be:ce.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],x=[],b=1,S=null,M=3,P=!1,L=!1,z=!1,F=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(ce){for(var we=t(x);we!==null;){if(we.callback===null)i(x);else if(we.startTime<=ce)i(x),we.sortIndex=we.expirationTime,e(m,we);else break;we=t(x)}}function W(ce){if(z=!1,O(ce),!L)if(t(m)!==null)L=!0,Ae(Z);else{var we=t(x);we!==null&&ze(W,we.startTime-ce)}}function Z(ce,we){L=!1,z&&(z=!1,k(re),re=-1),P=!0;var be=M;try{for(O(we),S=t(m);S!==null&&(!(S.expirationTime>we)||ce&&!se());){var Ie=S.callback;if(typeof Ie=="function"){S.callback=null,M=S.priorityLevel;var Ke=Ie(S.expirationTime<=we);we=n.unstable_now(),typeof Ke=="function"?S.callback=Ke:S===t(m)&&i(m),O(we)}else i(m);S=t(m)}if(S!==null)var rt=!0;else{var Te=t(x);Te!==null&&ze(W,Te.startTime-we),rt=!1}return rt}finally{S=null,M=be,P=!1}}var J=!1,te=null,re=-1,ee=5,K=-1;function se(){return!(n.unstable_now()-K<ee)}function ge(){if(te!==null){var ce=n.unstable_now();K=ce;var we=!0;try{we=te(!0,ce)}finally{we?xe():(J=!1,te=null)}}else J=!1}var xe;if(typeof R=="function")xe=function(){R(ge)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Le=Re.port2;Re.port1.onmessage=ge,xe=function(){Le.postMessage(null)}}else xe=function(){F(ge,0)};function Ae(ce){te=ce,J||(J=!0,xe())}function ze(ce,we){re=F(function(){ce(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){L||P||(L=!0,Ae(Z))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(ce){switch(M){case 1:case 2:case 3:var we=3;break;default:we=M}var be=M;M=we;try{return ce()}finally{M=be}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,we){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var be=M;M=ce;try{return we()}finally{M=be}},n.unstable_scheduleCallback=function(ce,we,be){var Ie=n.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ie+be:Ie):be=Ie,ce){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=be+Ke,ce={id:b++,callback:we,priorityLevel:ce,startTime:be,expirationTime:Ke,sortIndex:-1},be>Ie?(ce.sortIndex=be,e(x,ce),t(m)===null&&ce===t(x)&&(z?(k(re),re=-1):z=!0,ze(W,be-Ie))):(ce.sortIndex=Ke,e(m,ce),L||P||(L=!0,Ae(Z))),ce},n.unstable_shouldYield=se,n.unstable_wrapCallback=function(ce){var we=M;return function(){var be=M;M=we;try{return ce.apply(this,arguments)}finally{M=be}}}})(sA);rA.exports=sA;var nk=rA.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ik=dt,vr=nk;function $e(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var aA=new Set,ch={};function nl(n,e){yc(n,e),yc(n+"Capture",e)}function yc(n,e){for(ch[n]=e,n=0;n<e.length;n++)aA.add(e[n])}var $s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),$x=Object.prototype.hasOwnProperty,rk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,N1={},F1={};function sk(n){return $x.call(F1,n)?!0:$x.call(N1,n)?!1:rk.test(n)?F1[n]=!0:(N1[n]=!0,!1)}function ak(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function ok(n,e,t,i){if(e===null||typeof e>"u"||ak(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Gi(n,e,t,i,s,o,c){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=c}var mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){mi[n]=new Gi(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];mi[e]=new Gi(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){mi[n]=new Gi(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){mi[n]=new Gi(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){mi[n]=new Gi(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){mi[n]=new Gi(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){mi[n]=new Gi(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){mi[n]=new Gi(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){mi[n]=new Gi(n,5,!1,n.toLowerCase(),null,!1,!1)});var my=/[\-:]([a-z])/g;function vy(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(my,vy);mi[e]=new Gi(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(my,vy);mi[e]=new Gi(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(my,vy);mi[e]=new Gi(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){mi[n]=new Gi(n,1,!1,n.toLowerCase(),null,!1,!1)});mi.xlinkHref=new Gi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){mi[n]=new Gi(n,1,!1,n.toLowerCase(),null,!0,!0)});function xy(n,e,t,i){var s=mi.hasOwnProperty(e)?mi[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(ok(e,t,s,i)&&(t=null),i||s===null?sk(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var aa=ik.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jd=Symbol.for("react.element"),Zl=Symbol.for("react.portal"),Kl=Symbol.for("react.fragment"),yy=Symbol.for("react.strict_mode"),Qx=Symbol.for("react.profiler"),oA=Symbol.for("react.provider"),lA=Symbol.for("react.context"),by=Symbol.for("react.forward_ref"),e0=Symbol.for("react.suspense"),t0=Symbol.for("react.suspense_list"),wy=Symbol.for("react.memo"),Ea=Symbol.for("react.lazy"),cA=Symbol.for("react.offscreen"),O1=Symbol.iterator;function fu(n){return n===null||typeof n!="object"?null:(n=O1&&n[O1]||n["@@iterator"],typeof n=="function"?n:null)}var Dn=Object.assign,Ev;function Fu(n){if(Ev===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Ev=e&&e[1]||""}return`
`+Ev+n}var Tv=!1;function Pv(n,e){if(!n||Tv)return"";Tv=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(x){var i=x}Reflect.construct(n,[],e)}else{try{e.call()}catch(x){i=x}n.call(e.prototype)}else{try{throw Error()}catch(x){i=x}n()}}catch(x){if(x&&i&&typeof x.stack=="string"){for(var s=x.stack.split(`
`),o=i.stack.split(`
`),c=s.length-1,h=o.length-1;1<=c&&0<=h&&s[c]!==o[h];)h--;for(;1<=c&&0<=h;c--,h--)if(s[c]!==o[h]){if(c!==1||h!==1)do if(c--,h--,0>h||s[c]!==o[h]){var m=`
`+s[c].replace(" at new "," at ");return n.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",n.displayName)),m}while(1<=c&&0<=h);break}}}finally{Tv=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Fu(n):""}function lk(n){switch(n.tag){case 5:return Fu(n.type);case 16:return Fu("Lazy");case 13:return Fu("Suspense");case 19:return Fu("SuspenseList");case 0:case 2:case 15:return n=Pv(n.type,!1),n;case 11:return n=Pv(n.type.render,!1),n;case 1:return n=Pv(n.type,!0),n;default:return""}}function n0(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Kl:return"Fragment";case Zl:return"Portal";case Qx:return"Profiler";case yy:return"StrictMode";case e0:return"Suspense";case t0:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case lA:return(n.displayName||"Context")+".Consumer";case oA:return(n._context.displayName||"Context")+".Provider";case by:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case wy:return e=n.displayName||null,e!==null?e:n0(n.type)||"Memo";case Ea:e=n._payload,n=n._init;try{return n0(n(e))}catch{}}return null}function ck(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return n0(e);case 8:return e===yy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xa(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function uA(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function uk(n){var e=uA(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(c){i=""+c,o.call(this,c)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function $d(n){n._valueTracker||(n._valueTracker=uk(n))}function hA(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=uA(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Mp(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function i0(n,e){var t=e.checked;return Dn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function z1(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Xa(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function dA(n,e){e=e.checked,e!=null&&xy(n,"checked",e,!1)}function r0(n,e){dA(n,e);var t=Xa(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?s0(n,e.type,t):e.hasOwnProperty("defaultValue")&&s0(n,e.type,Xa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function U1(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function s0(n,e,t){(e!=="number"||Mp(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ou=Array.isArray;function dc(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Xa(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function a0(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error($e(91));return Dn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function B1(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error($e(92));if(Ou(t)){if(1<t.length)throw Error($e(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Xa(t)}}function fA(n,e){var t=Xa(e.value),i=Xa(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function H1(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function pA(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function o0(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?pA(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Qd,gA=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Qd=Qd||document.createElement("div"),Qd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Qd.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function uh(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Vu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hk=["Webkit","ms","Moz","O"];Object.keys(Vu).forEach(function(n){hk.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Vu[e]=Vu[n]})});function mA(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Vu.hasOwnProperty(n)&&Vu[n]?(""+e).trim():e+"px"}function vA(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=mA(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var dk=Dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function l0(n,e){if(e){if(dk[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($e(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($e(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($e(61))}if(e.style!=null&&typeof e.style!="object")throw Error($e(62))}}function c0(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var u0=null;function Sy(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var h0=null,fc=null,pc=null;function V1(n){if(n=Yh(n)){if(typeof h0!="function")throw Error($e(280));var e=n.stateNode;e&&(e=Og(e),h0(n.stateNode,n.type,e))}}function xA(n){fc?pc?pc.push(n):pc=[n]:fc=n}function yA(){if(fc){var n=fc,e=pc;if(pc=fc=null,V1(n),e)for(n=0;n<e.length;n++)V1(e[n])}}function bA(n,e){return n(e)}function wA(){}var kv=!1;function SA(n,e,t){if(kv)return n(e,t);kv=!0;try{return bA(n,e,t)}finally{kv=!1,(fc!==null||pc!==null)&&(wA(),yA())}}function hh(n,e){var t=n.stateNode;if(t===null)return null;var i=Og(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error($e(231,e,typeof t));return t}var d0=!1;if($s)try{var pu={};Object.defineProperty(pu,"passive",{get:function(){d0=!0}}),window.addEventListener("test",pu,pu),window.removeEventListener("test",pu,pu)}catch{d0=!1}function fk(n,e,t,i,s,o,c,h,m){var x=Array.prototype.slice.call(arguments,3);try{e.apply(t,x)}catch(b){this.onError(b)}}var Wu=!1,Ap=null,Cp=!1,f0=null,pk={onError:function(n){Wu=!0,Ap=n}};function gk(n,e,t,i,s,o,c,h,m){Wu=!1,Ap=null,fk.apply(pk,arguments)}function mk(n,e,t,i,s,o,c,h,m){if(gk.apply(this,arguments),Wu){if(Wu){var x=Ap;Wu=!1,Ap=null}else throw Error($e(198));Cp||(Cp=!0,f0=x)}}function il(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function _A(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function W1(n){if(il(n)!==n)throw Error($e(188))}function vk(n){var e=n.alternate;if(!e){if(e=il(n),e===null)throw Error($e(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===t)return W1(s),n;if(o===i)return W1(s),e;o=o.sibling}throw Error($e(188))}if(t.return!==i.return)t=s,i=o;else{for(var c=!1,h=s.child;h;){if(h===t){c=!0,t=s,i=o;break}if(h===i){c=!0,i=s,t=o;break}h=h.sibling}if(!c){for(h=o.child;h;){if(h===t){c=!0,t=o,i=s;break}if(h===i){c=!0,i=o,t=s;break}h=h.sibling}if(!c)throw Error($e(189))}}if(t.alternate!==i)throw Error($e(190))}if(t.tag!==3)throw Error($e(188));return t.stateNode.current===t?n:e}function MA(n){return n=vk(n),n!==null?AA(n):null}function AA(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=AA(n);if(e!==null)return e;n=n.sibling}return null}var CA=vr.unstable_scheduleCallback,G1=vr.unstable_cancelCallback,xk=vr.unstable_shouldYield,yk=vr.unstable_requestPaint,Wn=vr.unstable_now,bk=vr.unstable_getCurrentPriorityLevel,_y=vr.unstable_ImmediatePriority,EA=vr.unstable_UserBlockingPriority,Ep=vr.unstable_NormalPriority,wk=vr.unstable_LowPriority,TA=vr.unstable_IdlePriority,Ig=null,Ss=null;function Sk(n){if(Ss&&typeof Ss.onCommitFiberRoot=="function")try{Ss.onCommitFiberRoot(Ig,n,void 0,(n.current.flags&128)===128)}catch{}}var ts=Math.clz32?Math.clz32:Ak,_k=Math.log,Mk=Math.LN2;function Ak(n){return n>>>=0,n===0?32:31-(_k(n)/Mk|0)|0}var ef=64,tf=4194304;function zu(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Tp(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,o=n.pingedLanes,c=t&268435455;if(c!==0){var h=c&~s;h!==0?i=zu(h):(o&=c,o!==0&&(i=zu(o)))}else c=t&~s,c!==0?i=zu(c):o!==0&&(i=zu(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-ts(e),s=1<<t,i|=n[t],e&=~s;return i}function Ck(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ek(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,o=n.pendingLanes;0<o;){var c=31-ts(o),h=1<<c,m=s[c];m===-1?(!(h&t)||h&i)&&(s[c]=Ck(h,e)):m<=e&&(n.expiredLanes|=h),o&=~h}}function p0(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function PA(){var n=ef;return ef<<=1,!(ef&4194240)&&(ef=64),n}function Rv(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Gh(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-ts(e),n[e]=t}function Tk(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-ts(t),o=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~o}}function My(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-ts(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var mn=0;function kA(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var RA,Ay,LA,IA,DA,g0=!1,nf=[],Oa=null,za=null,Ua=null,dh=new Map,fh=new Map,ka=[],Pk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function X1(n,e){switch(n){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":za=null;break;case"mouseover":case"mouseout":Ua=null;break;case"pointerover":case"pointerout":dh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fh.delete(e.pointerId)}}function gu(n,e,t,i,s,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Yh(e),e!==null&&Ay(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function kk(n,e,t,i,s){switch(e){case"focusin":return Oa=gu(Oa,n,e,t,i,s),!0;case"dragenter":return za=gu(za,n,e,t,i,s),!0;case"mouseover":return Ua=gu(Ua,n,e,t,i,s),!0;case"pointerover":var o=s.pointerId;return dh.set(o,gu(dh.get(o)||null,n,e,t,i,s)),!0;case"gotpointercapture":return o=s.pointerId,fh.set(o,gu(fh.get(o)||null,n,e,t,i,s)),!0}return!1}function NA(n){var e=Ro(n.target);if(e!==null){var t=il(e);if(t!==null){if(e=t.tag,e===13){if(e=_A(t),e!==null){n.blockedOn=e,DA(n.priority,function(){LA(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function hp(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=m0(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);u0=i,t.target.dispatchEvent(i),u0=null}else return e=Yh(t),e!==null&&Ay(e),n.blockedOn=t,!1;e.shift()}return!0}function Y1(n,e,t){hp(n)&&t.delete(e)}function Rk(){g0=!1,Oa!==null&&hp(Oa)&&(Oa=null),za!==null&&hp(za)&&(za=null),Ua!==null&&hp(Ua)&&(Ua=null),dh.forEach(Y1),fh.forEach(Y1)}function mu(n,e){n.blockedOn===e&&(n.blockedOn=null,g0||(g0=!0,vr.unstable_scheduleCallback(vr.unstable_NormalPriority,Rk)))}function ph(n){function e(s){return mu(s,n)}if(0<nf.length){mu(nf[0],n);for(var t=1;t<nf.length;t++){var i=nf[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Oa!==null&&mu(Oa,n),za!==null&&mu(za,n),Ua!==null&&mu(Ua,n),dh.forEach(e),fh.forEach(e),t=0;t<ka.length;t++)i=ka[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<ka.length&&(t=ka[0],t.blockedOn===null);)NA(t),t.blockedOn===null&&ka.shift()}var gc=aa.ReactCurrentBatchConfig,Pp=!0;function Lk(n,e,t,i){var s=mn,o=gc.transition;gc.transition=null;try{mn=1,Cy(n,e,t,i)}finally{mn=s,gc.transition=o}}function Ik(n,e,t,i){var s=mn,o=gc.transition;gc.transition=null;try{mn=4,Cy(n,e,t,i)}finally{mn=s,gc.transition=o}}function Cy(n,e,t,i){if(Pp){var s=m0(n,e,t,i);if(s===null)Hv(n,e,i,kp,t),X1(n,i);else if(kk(s,n,e,t,i))i.stopPropagation();else if(X1(n,i),e&4&&-1<Pk.indexOf(n)){for(;s!==null;){var o=Yh(s);if(o!==null&&RA(o),o=m0(n,e,t,i),o===null&&Hv(n,e,i,kp,t),o===s)break;s=o}s!==null&&i.stopPropagation()}else Hv(n,e,i,null,t)}}var kp=null;function m0(n,e,t,i){if(kp=null,n=Sy(i),n=Ro(n),n!==null)if(e=il(n),e===null)n=null;else if(t=e.tag,t===13){if(n=_A(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return kp=n,null}function FA(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bk()){case _y:return 1;case EA:return 4;case Ep:case wk:return 16;case TA:return 536870912;default:return 16}default:return 16}}var Ia=null,Ey=null,dp=null;function OA(){if(dp)return dp;var n,e=Ey,t=e.length,i,s="value"in Ia?Ia.value:Ia.textContent,o=s.length;for(n=0;n<t&&e[n]===s[n];n++);var c=t-n;for(i=1;i<=c&&e[t-i]===s[o-i];i++);return dp=s.slice(n,1<i?1-i:void 0)}function fp(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function rf(){return!0}function j1(){return!1}function yr(n){function e(t,i,s,o,c){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=c,this.currentTarget=null;for(var h in n)n.hasOwnProperty(h)&&(t=n[h],this[h]=t?t(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?rf:j1,this.isPropagationStopped=j1,this}return Dn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=rf)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=rf)},persist:function(){},isPersistent:rf}),e}var Oc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ty=yr(Oc),Xh=Dn({},Oc,{view:0,detail:0}),Dk=yr(Xh),Lv,Iv,vu,Dg=Dn({},Xh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Py,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vu&&(vu&&n.type==="mousemove"?(Lv=n.screenX-vu.screenX,Iv=n.screenY-vu.screenY):Iv=Lv=0,vu=n),Lv)},movementY:function(n){return"movementY"in n?n.movementY:Iv}}),q1=yr(Dg),Nk=Dn({},Dg,{dataTransfer:0}),Fk=yr(Nk),Ok=Dn({},Xh,{relatedTarget:0}),Dv=yr(Ok),zk=Dn({},Oc,{animationName:0,elapsedTime:0,pseudoElement:0}),Uk=yr(zk),Bk=Dn({},Oc,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Hk=yr(Bk),Vk=Dn({},Oc,{data:0}),Z1=yr(Vk),Wk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yk(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=Xk[n])?!!e[n]:!1}function Py(){return Yk}var jk=Dn({},Xh,{key:function(n){if(n.key){var e=Wk[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=fp(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Gk[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Py,charCode:function(n){return n.type==="keypress"?fp(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?fp(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),qk=yr(jk),Zk=Dn({},Dg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K1=yr(Zk),Kk=Dn({},Xh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Py}),Jk=yr(Kk),$k=Dn({},Oc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qk=yr($k),eR=Dn({},Dg,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),tR=yr(eR),nR=[9,13,27,32],ky=$s&&"CompositionEvent"in window,Gu=null;$s&&"documentMode"in document&&(Gu=document.documentMode);var iR=$s&&"TextEvent"in window&&!Gu,zA=$s&&(!ky||Gu&&8<Gu&&11>=Gu),J1=" ",$1=!1;function UA(n,e){switch(n){case"keyup":return nR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function BA(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Jl=!1;function rR(n,e){switch(n){case"compositionend":return BA(e);case"keypress":return e.which!==32?null:($1=!0,J1);case"textInput":return n=e.data,n===J1&&$1?null:n;default:return null}}function sR(n,e){if(Jl)return n==="compositionend"||!ky&&UA(n,e)?(n=OA(),dp=Ey=Ia=null,Jl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zA&&e.locale!=="ko"?null:e.data;default:return null}}var aR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Q1(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!aR[n.type]:e==="textarea"}function HA(n,e,t,i){xA(i),e=Rp(e,"onChange"),0<e.length&&(t=new Ty("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Xu=null,gh=null;function oR(n){$A(n,0)}function Ng(n){var e=ec(n);if(hA(e))return n}function lR(n,e){if(n==="change")return e}var VA=!1;if($s){var Nv;if($s){var Fv="oninput"in document;if(!Fv){var eS=document.createElement("div");eS.setAttribute("oninput","return;"),Fv=typeof eS.oninput=="function"}Nv=Fv}else Nv=!1;VA=Nv&&(!document.documentMode||9<document.documentMode)}function tS(){Xu&&(Xu.detachEvent("onpropertychange",WA),gh=Xu=null)}function WA(n){if(n.propertyName==="value"&&Ng(gh)){var e=[];HA(e,gh,n,Sy(n)),SA(oR,e)}}function cR(n,e,t){n==="focusin"?(tS(),Xu=e,gh=t,Xu.attachEvent("onpropertychange",WA)):n==="focusout"&&tS()}function uR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Ng(gh)}function hR(n,e){if(n==="click")return Ng(e)}function dR(n,e){if(n==="input"||n==="change")return Ng(e)}function fR(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var is=typeof Object.is=="function"?Object.is:fR;function mh(n,e){if(is(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!$x.call(e,s)||!is(n[s],e[s]))return!1}return!0}function nS(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function iS(n,e){var t=nS(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=nS(t)}}function GA(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?GA(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function XA(){for(var n=window,e=Mp();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Mp(n.document)}return e}function Ry(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function pR(n){var e=XA(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&GA(t.ownerDocument.documentElement,t)){if(i!==null&&Ry(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!n.extend&&o>i&&(s=i,i=o,o=s),s=iS(t,o);var c=iS(t,i);s&&c&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==c.node||n.focusOffset!==c.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),o>i?(n.addRange(e),n.extend(c.node,c.offset)):(e.setEnd(c.node,c.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var gR=$s&&"documentMode"in document&&11>=document.documentMode,$l=null,v0=null,Yu=null,x0=!1;function rS(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;x0||$l==null||$l!==Mp(i)||(i=$l,"selectionStart"in i&&Ry(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Yu&&mh(Yu,i)||(Yu=i,i=Rp(v0,"onSelect"),0<i.length&&(e=new Ty("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=$l)))}function sf(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Ql={animationend:sf("Animation","AnimationEnd"),animationiteration:sf("Animation","AnimationIteration"),animationstart:sf("Animation","AnimationStart"),transitionend:sf("Transition","TransitionEnd")},Ov={},YA={};$s&&(YA=document.createElement("div").style,"AnimationEvent"in window||(delete Ql.animationend.animation,delete Ql.animationiteration.animation,delete Ql.animationstart.animation),"TransitionEvent"in window||delete Ql.transitionend.transition);function Fg(n){if(Ov[n])return Ov[n];if(!Ql[n])return n;var e=Ql[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in YA)return Ov[n]=e[t];return n}var jA=Fg("animationend"),qA=Fg("animationiteration"),ZA=Fg("animationstart"),KA=Fg("transitionend"),JA=new Map,sS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qa(n,e){JA.set(n,e),nl(e,[n])}for(var zv=0;zv<sS.length;zv++){var Uv=sS[zv],mR=Uv.toLowerCase(),vR=Uv[0].toUpperCase()+Uv.slice(1);qa(mR,"on"+vR)}qa(jA,"onAnimationEnd");qa(qA,"onAnimationIteration");qa(ZA,"onAnimationStart");qa("dblclick","onDoubleClick");qa("focusin","onFocus");qa("focusout","onBlur");qa(KA,"onTransitionEnd");yc("onMouseEnter",["mouseout","mouseover"]);yc("onMouseLeave",["mouseout","mouseover"]);yc("onPointerEnter",["pointerout","pointerover"]);yc("onPointerLeave",["pointerout","pointerover"]);nl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nl("onBeforeInput",["compositionend","keypress","textInput","paste"]);nl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uu));function aS(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,mk(i,e,void 0,n),n.currentTarget=null}function $A(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var c=i.length-1;0<=c;c--){var h=i[c],m=h.instance,x=h.currentTarget;if(h=h.listener,m!==o&&s.isPropagationStopped())break e;aS(s,h,x),o=m}else for(c=0;c<i.length;c++){if(h=i[c],m=h.instance,x=h.currentTarget,h=h.listener,m!==o&&s.isPropagationStopped())break e;aS(s,h,x),o=m}}}if(Cp)throw n=f0,Cp=!1,f0=null,n}function Mn(n,e){var t=e[_0];t===void 0&&(t=e[_0]=new Set);var i=n+"__bubble";t.has(i)||(QA(e,n,2,!1),t.add(i))}function Bv(n,e,t){var i=0;e&&(i|=4),QA(t,n,i,e)}var af="_reactListening"+Math.random().toString(36).slice(2);function vh(n){if(!n[af]){n[af]=!0,aA.forEach(function(t){t!=="selectionchange"&&(xR.has(t)||Bv(t,!1,n),Bv(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[af]||(e[af]=!0,Bv("selectionchange",!1,e))}}function QA(n,e,t,i){switch(FA(e)){case 1:var s=Lk;break;case 4:s=Ik;break;default:s=Cy}t=s.bind(null,e,t,n),s=void 0,!d0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function Hv(n,e,t,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(c===4)for(c=i.return;c!==null;){var m=c.tag;if((m===3||m===4)&&(m=c.stateNode.containerInfo,m===s||m.nodeType===8&&m.parentNode===s))return;c=c.return}for(;h!==null;){if(c=Ro(h),c===null)return;if(m=c.tag,m===5||m===6){i=o=c;continue e}h=h.parentNode}}i=i.return}SA(function(){var x=o,b=Sy(t),S=[];e:{var M=JA.get(n);if(M!==void 0){var P=Ty,L=n;switch(n){case"keypress":if(fp(t)===0)break e;case"keydown":case"keyup":P=qk;break;case"focusin":L="focus",P=Dv;break;case"focusout":L="blur",P=Dv;break;case"beforeblur":case"afterblur":P=Dv;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":P=q1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":P=Fk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":P=Jk;break;case jA:case qA:case ZA:P=Uk;break;case KA:P=Qk;break;case"scroll":P=Dk;break;case"wheel":P=tR;break;case"copy":case"cut":case"paste":P=Hk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":P=K1}var z=(e&4)!==0,F=!z&&n==="scroll",k=z?M!==null?M+"Capture":null:M;z=[];for(var R=x,O;R!==null;){O=R;var W=O.stateNode;if(O.tag===5&&W!==null&&(O=W,k!==null&&(W=hh(R,k),W!=null&&z.push(xh(R,W,O)))),F)break;R=R.return}0<z.length&&(M=new P(M,L,null,t,b),S.push({event:M,listeners:z}))}}if(!(e&7)){e:{if(M=n==="mouseover"||n==="pointerover",P=n==="mouseout"||n==="pointerout",M&&t!==u0&&(L=t.relatedTarget||t.fromElement)&&(Ro(L)||L[Qs]))break e;if((P||M)&&(M=b.window===b?b:(M=b.ownerDocument)?M.defaultView||M.parentWindow:window,P?(L=t.relatedTarget||t.toElement,P=x,L=L?Ro(L):null,L!==null&&(F=il(L),L!==F||L.tag!==5&&L.tag!==6)&&(L=null)):(P=null,L=x),P!==L)){if(z=q1,W="onMouseLeave",k="onMouseEnter",R="mouse",(n==="pointerout"||n==="pointerover")&&(z=K1,W="onPointerLeave",k="onPointerEnter",R="pointer"),F=P==null?M:ec(P),O=L==null?M:ec(L),M=new z(W,R+"leave",P,t,b),M.target=F,M.relatedTarget=O,W=null,Ro(b)===x&&(z=new z(k,R+"enter",L,t,b),z.target=O,z.relatedTarget=F,W=z),F=W,P&&L)t:{for(z=P,k=L,R=0,O=z;O;O=Sl(O))R++;for(O=0,W=k;W;W=Sl(W))O++;for(;0<R-O;)z=Sl(z),R--;for(;0<O-R;)k=Sl(k),O--;for(;R--;){if(z===k||k!==null&&z===k.alternate)break t;z=Sl(z),k=Sl(k)}z=null}else z=null;P!==null&&oS(S,M,P,z,!1),L!==null&&F!==null&&oS(S,F,L,z,!0)}}e:{if(M=x?ec(x):window,P=M.nodeName&&M.nodeName.toLowerCase(),P==="select"||P==="input"&&M.type==="file")var Z=lR;else if(Q1(M))if(VA)Z=dR;else{Z=uR;var J=cR}else(P=M.nodeName)&&P.toLowerCase()==="input"&&(M.type==="checkbox"||M.type==="radio")&&(Z=hR);if(Z&&(Z=Z(n,x))){HA(S,Z,t,b);break e}J&&J(n,M,x),n==="focusout"&&(J=M._wrapperState)&&J.controlled&&M.type==="number"&&s0(M,"number",M.value)}switch(J=x?ec(x):window,n){case"focusin":(Q1(J)||J.contentEditable==="true")&&($l=J,v0=x,Yu=null);break;case"focusout":Yu=v0=$l=null;break;case"mousedown":x0=!0;break;case"contextmenu":case"mouseup":case"dragend":x0=!1,rS(S,t,b);break;case"selectionchange":if(gR)break;case"keydown":case"keyup":rS(S,t,b)}var te;if(ky)e:{switch(n){case"compositionstart":var re="onCompositionStart";break e;case"compositionend":re="onCompositionEnd";break e;case"compositionupdate":re="onCompositionUpdate";break e}re=void 0}else Jl?UA(n,t)&&(re="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(re="onCompositionStart");re&&(zA&&t.locale!=="ko"&&(Jl||re!=="onCompositionStart"?re==="onCompositionEnd"&&Jl&&(te=OA()):(Ia=b,Ey="value"in Ia?Ia.value:Ia.textContent,Jl=!0)),J=Rp(x,re),0<J.length&&(re=new Z1(re,n,null,t,b),S.push({event:re,listeners:J}),te?re.data=te:(te=BA(t),te!==null&&(re.data=te)))),(te=iR?rR(n,t):sR(n,t))&&(x=Rp(x,"onBeforeInput"),0<x.length&&(b=new Z1("onBeforeInput","beforeinput",null,t,b),S.push({event:b,listeners:x}),b.data=te))}$A(S,e)})}function xh(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Rp(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=hh(n,t),o!=null&&i.unshift(xh(n,o,s)),o=hh(n,e),o!=null&&i.push(xh(n,o,s))),n=n.return}return i}function Sl(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function oS(n,e,t,i,s){for(var o=e._reactName,c=[];t!==null&&t!==i;){var h=t,m=h.alternate,x=h.stateNode;if(m!==null&&m===i)break;h.tag===5&&x!==null&&(h=x,s?(m=hh(t,o),m!=null&&c.unshift(xh(t,m,h))):s||(m=hh(t,o),m!=null&&c.push(xh(t,m,h)))),t=t.return}c.length!==0&&n.push({event:e,listeners:c})}var yR=/\r\n?/g,bR=/\u0000|\uFFFD/g;function lS(n){return(typeof n=="string"?n:""+n).replace(yR,`
`).replace(bR,"")}function of(n,e,t){if(e=lS(e),lS(n)!==e&&t)throw Error($e(425))}function Lp(){}var y0=null,b0=null;function w0(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var S0=typeof setTimeout=="function"?setTimeout:void 0,wR=typeof clearTimeout=="function"?clearTimeout:void 0,cS=typeof Promise=="function"?Promise:void 0,SR=typeof queueMicrotask=="function"?queueMicrotask:typeof cS<"u"?function(n){return cS.resolve(null).then(n).catch(_R)}:S0;function _R(n){setTimeout(function(){throw n})}function Vv(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),ph(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);ph(e)}function Ba(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function uS(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var zc=Math.random().toString(36).slice(2),xs="__reactFiber$"+zc,yh="__reactProps$"+zc,Qs="__reactContainer$"+zc,_0="__reactEvents$"+zc,MR="__reactListeners$"+zc,AR="__reactHandles$"+zc;function Ro(n){var e=n[xs];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Qs]||t[xs]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=uS(n);n!==null;){if(t=n[xs])return t;n=uS(n)}return e}n=t,t=n.parentNode}return null}function Yh(n){return n=n[xs]||n[Qs],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ec(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error($e(33))}function Og(n){return n[yh]||null}var M0=[],tc=-1;function Za(n){return{current:n}}function Cn(n){0>tc||(n.current=M0[tc],M0[tc]=null,tc--)}function _n(n,e){tc++,M0[tc]=n.current,n.current=e}var Ya={},Ri=Za(Ya),ir=Za(!1),Yo=Ya;function bc(n,e){var t=n.type.contextTypes;if(!t)return Ya;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in t)s[o]=e[o];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function rr(n){return n=n.childContextTypes,n!=null}function Ip(){Cn(ir),Cn(Ri)}function hS(n,e,t){if(Ri.current!==Ya)throw Error($e(168));_n(Ri,e),_n(ir,t)}function eC(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error($e(108,ck(n)||"Unknown",s));return Dn({},t,i)}function Dp(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ya,Yo=Ri.current,_n(Ri,n),_n(ir,ir.current),!0}function dS(n,e,t){var i=n.stateNode;if(!i)throw Error($e(169));t?(n=eC(n,e,Yo),i.__reactInternalMemoizedMergedChildContext=n,Cn(ir),Cn(Ri),_n(Ri,n)):Cn(ir),_n(ir,t)}var Gs=null,zg=!1,Wv=!1;function tC(n){Gs===null?Gs=[n]:Gs.push(n)}function CR(n){zg=!0,tC(n)}function Ka(){if(!Wv&&Gs!==null){Wv=!0;var n=0,e=mn;try{var t=Gs;for(mn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Gs=null,zg=!1}catch(s){throw Gs!==null&&(Gs=Gs.slice(n+1)),CA(_y,Ka),s}finally{mn=e,Wv=!1}}return null}var nc=[],ic=0,Np=null,Fp=0,Lr=[],Ir=0,jo=null,js=1,qs="";function Co(n,e){nc[ic++]=Fp,nc[ic++]=Np,Np=n,Fp=e}function nC(n,e,t){Lr[Ir++]=js,Lr[Ir++]=qs,Lr[Ir++]=jo,jo=n;var i=js;n=qs;var s=32-ts(i)-1;i&=~(1<<s),t+=1;var o=32-ts(e)+s;if(30<o){var c=s-s%5;o=(i&(1<<c)-1).toString(32),i>>=c,s-=c,js=1<<32-ts(e)+s|t<<s|i,qs=o+n}else js=1<<o|t<<s|i,qs=n}function Ly(n){n.return!==null&&(Co(n,1),nC(n,1,0))}function Iy(n){for(;n===Np;)Np=nc[--ic],nc[ic]=null,Fp=nc[--ic],nc[ic]=null;for(;n===jo;)jo=Lr[--Ir],Lr[Ir]=null,qs=Lr[--Ir],Lr[Ir]=null,js=Lr[--Ir],Lr[Ir]=null}var gr=null,pr=null,Pn=!1,$r=null;function iC(n,e){var t=Nr(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function fS(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,gr=n,pr=Ba(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,gr=n,pr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=jo!==null?{id:js,overflow:qs}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Nr(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,gr=n,pr=null,!0):!1;default:return!1}}function A0(n){return(n.mode&1)!==0&&(n.flags&128)===0}function C0(n){if(Pn){var e=pr;if(e){var t=e;if(!fS(n,e)){if(A0(n))throw Error($e(418));e=Ba(t.nextSibling);var i=gr;e&&fS(n,e)?iC(i,t):(n.flags=n.flags&-4097|2,Pn=!1,gr=n)}}else{if(A0(n))throw Error($e(418));n.flags=n.flags&-4097|2,Pn=!1,gr=n}}}function pS(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;gr=n}function lf(n){if(n!==gr)return!1;if(!Pn)return pS(n),Pn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!w0(n.type,n.memoizedProps)),e&&(e=pr)){if(A0(n))throw rC(),Error($e(418));for(;e;)iC(n,e),e=Ba(e.nextSibling)}if(pS(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error($e(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){pr=Ba(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}pr=null}}else pr=gr?Ba(n.stateNode.nextSibling):null;return!0}function rC(){for(var n=pr;n;)n=Ba(n.nextSibling)}function wc(){pr=gr=null,Pn=!1}function Dy(n){$r===null?$r=[n]:$r.push(n)}var ER=aa.ReactCurrentBatchConfig;function xu(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error($e(309));var i=t.stateNode}if(!i)throw Error($e(147,n));var s=i,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(c){var h=s.refs;c===null?delete h[o]:h[o]=c},e._stringRef=o,e)}if(typeof n!="string")throw Error($e(284));if(!t._owner)throw Error($e(290,n))}return n}function cf(n,e){throw n=Object.prototype.toString.call(e),Error($e(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function gS(n){var e=n._init;return e(n._payload)}function sC(n){function e(k,R){if(n){var O=k.deletions;O===null?(k.deletions=[R],k.flags|=16):O.push(R)}}function t(k,R){if(!n)return null;for(;R!==null;)e(k,R),R=R.sibling;return null}function i(k,R){for(k=new Map;R!==null;)R.key!==null?k.set(R.key,R):k.set(R.index,R),R=R.sibling;return k}function s(k,R){return k=Ga(k,R),k.index=0,k.sibling=null,k}function o(k,R,O){return k.index=O,n?(O=k.alternate,O!==null?(O=O.index,O<R?(k.flags|=2,R):O):(k.flags|=2,R)):(k.flags|=1048576,R)}function c(k){return n&&k.alternate===null&&(k.flags|=2),k}function h(k,R,O,W){return R===null||R.tag!==6?(R=Kv(O,k.mode,W),R.return=k,R):(R=s(R,O),R.return=k,R)}function m(k,R,O,W){var Z=O.type;return Z===Kl?b(k,R,O.props.children,W,O.key):R!==null&&(R.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ea&&gS(Z)===R.type)?(W=s(R,O.props),W.ref=xu(k,R,O),W.return=k,W):(W=bp(O.type,O.key,O.props,null,k.mode,W),W.ref=xu(k,R,O),W.return=k,W)}function x(k,R,O,W){return R===null||R.tag!==4||R.stateNode.containerInfo!==O.containerInfo||R.stateNode.implementation!==O.implementation?(R=Jv(O,k.mode,W),R.return=k,R):(R=s(R,O.children||[]),R.return=k,R)}function b(k,R,O,W,Z){return R===null||R.tag!==7?(R=Bo(O,k.mode,W,Z),R.return=k,R):(R=s(R,O),R.return=k,R)}function S(k,R,O){if(typeof R=="string"&&R!==""||typeof R=="number")return R=Kv(""+R,k.mode,O),R.return=k,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Jd:return O=bp(R.type,R.key,R.props,null,k.mode,O),O.ref=xu(k,null,R),O.return=k,O;case Zl:return R=Jv(R,k.mode,O),R.return=k,R;case Ea:var W=R._init;return S(k,W(R._payload),O)}if(Ou(R)||fu(R))return R=Bo(R,k.mode,O,null),R.return=k,R;cf(k,R)}return null}function M(k,R,O,W){var Z=R!==null?R.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Z!==null?null:h(k,R,""+O,W);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Jd:return O.key===Z?m(k,R,O,W):null;case Zl:return O.key===Z?x(k,R,O,W):null;case Ea:return Z=O._init,M(k,R,Z(O._payload),W)}if(Ou(O)||fu(O))return Z!==null?null:b(k,R,O,W,null);cf(k,O)}return null}function P(k,R,O,W,Z){if(typeof W=="string"&&W!==""||typeof W=="number")return k=k.get(O)||null,h(R,k,""+W,Z);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case Jd:return k=k.get(W.key===null?O:W.key)||null,m(R,k,W,Z);case Zl:return k=k.get(W.key===null?O:W.key)||null,x(R,k,W,Z);case Ea:var J=W._init;return P(k,R,O,J(W._payload),Z)}if(Ou(W)||fu(W))return k=k.get(O)||null,b(R,k,W,Z,null);cf(R,W)}return null}function L(k,R,O,W){for(var Z=null,J=null,te=R,re=R=0,ee=null;te!==null&&re<O.length;re++){te.index>re?(ee=te,te=null):ee=te.sibling;var K=M(k,te,O[re],W);if(K===null){te===null&&(te=ee);break}n&&te&&K.alternate===null&&e(k,te),R=o(K,R,re),J===null?Z=K:J.sibling=K,J=K,te=ee}if(re===O.length)return t(k,te),Pn&&Co(k,re),Z;if(te===null){for(;re<O.length;re++)te=S(k,O[re],W),te!==null&&(R=o(te,R,re),J===null?Z=te:J.sibling=te,J=te);return Pn&&Co(k,re),Z}for(te=i(k,te);re<O.length;re++)ee=P(te,k,re,O[re],W),ee!==null&&(n&&ee.alternate!==null&&te.delete(ee.key===null?re:ee.key),R=o(ee,R,re),J===null?Z=ee:J.sibling=ee,J=ee);return n&&te.forEach(function(se){return e(k,se)}),Pn&&Co(k,re),Z}function z(k,R,O,W){var Z=fu(O);if(typeof Z!="function")throw Error($e(150));if(O=Z.call(O),O==null)throw Error($e(151));for(var J=Z=null,te=R,re=R=0,ee=null,K=O.next();te!==null&&!K.done;re++,K=O.next()){te.index>re?(ee=te,te=null):ee=te.sibling;var se=M(k,te,K.value,W);if(se===null){te===null&&(te=ee);break}n&&te&&se.alternate===null&&e(k,te),R=o(se,R,re),J===null?Z=se:J.sibling=se,J=se,te=ee}if(K.done)return t(k,te),Pn&&Co(k,re),Z;if(te===null){for(;!K.done;re++,K=O.next())K=S(k,K.value,W),K!==null&&(R=o(K,R,re),J===null?Z=K:J.sibling=K,J=K);return Pn&&Co(k,re),Z}for(te=i(k,te);!K.done;re++,K=O.next())K=P(te,k,re,K.value,W),K!==null&&(n&&K.alternate!==null&&te.delete(K.key===null?re:K.key),R=o(K,R,re),J===null?Z=K:J.sibling=K,J=K);return n&&te.forEach(function(ge){return e(k,ge)}),Pn&&Co(k,re),Z}function F(k,R,O,W){if(typeof O=="object"&&O!==null&&O.type===Kl&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case Jd:e:{for(var Z=O.key,J=R;J!==null;){if(J.key===Z){if(Z=O.type,Z===Kl){if(J.tag===7){t(k,J.sibling),R=s(J,O.props.children),R.return=k,k=R;break e}}else if(J.elementType===Z||typeof Z=="object"&&Z!==null&&Z.$$typeof===Ea&&gS(Z)===J.type){t(k,J.sibling),R=s(J,O.props),R.ref=xu(k,J,O),R.return=k,k=R;break e}t(k,J);break}else e(k,J);J=J.sibling}O.type===Kl?(R=Bo(O.props.children,k.mode,W,O.key),R.return=k,k=R):(W=bp(O.type,O.key,O.props,null,k.mode,W),W.ref=xu(k,R,O),W.return=k,k=W)}return c(k);case Zl:e:{for(J=O.key;R!==null;){if(R.key===J)if(R.tag===4&&R.stateNode.containerInfo===O.containerInfo&&R.stateNode.implementation===O.implementation){t(k,R.sibling),R=s(R,O.children||[]),R.return=k,k=R;break e}else{t(k,R);break}else e(k,R);R=R.sibling}R=Jv(O,k.mode,W),R.return=k,k=R}return c(k);case Ea:return J=O._init,F(k,R,J(O._payload),W)}if(Ou(O))return L(k,R,O,W);if(fu(O))return z(k,R,O,W);cf(k,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,R!==null&&R.tag===6?(t(k,R.sibling),R=s(R,O),R.return=k,k=R):(t(k,R),R=Kv(O,k.mode,W),R.return=k,k=R),c(k)):t(k,R)}return F}var Sc=sC(!0),aC=sC(!1),Op=Za(null),zp=null,rc=null,Ny=null;function Fy(){Ny=rc=zp=null}function Oy(n){var e=Op.current;Cn(Op),n._currentValue=e}function E0(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function mc(n,e){zp=n,Ny=rc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(er=!0),n.firstContext=null)}function Or(n){var e=n._currentValue;if(Ny!==n)if(n={context:n,memoizedValue:e,next:null},rc===null){if(zp===null)throw Error($e(308));rc=n,zp.dependencies={lanes:0,firstContext:n}}else rc=rc.next=n;return e}var Lo=null;function zy(n){Lo===null?Lo=[n]:Lo.push(n)}function oC(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,zy(e)):(t.next=s.next,s.next=t),e.interleaved=t,ea(n,i)}function ea(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ta=!1;function Uy(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function lC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ks(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,cn&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ea(n,t)}return s=i.interleaved,s===null?(e.next=e,zy(i)):(e.next=s.next,s.next=e),i.interleaved=e,ea(n,t)}function pp(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,My(n,t)}}function mS(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var c={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?s=o=c:o=o.next=c,t=t.next}while(t!==null);o===null?s=o=e:o=o.next=e}else s=o=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Up(n,e,t,i){var s=n.updateQueue;Ta=!1;var o=s.firstBaseUpdate,c=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var m=h,x=m.next;m.next=null,c===null?o=x:c.next=x,c=m;var b=n.alternate;b!==null&&(b=b.updateQueue,h=b.lastBaseUpdate,h!==c&&(h===null?b.firstBaseUpdate=x:h.next=x,b.lastBaseUpdate=m))}if(o!==null){var S=s.baseState;c=0,b=x=m=null,h=o;do{var M=h.lane,P=h.eventTime;if((i&M)===M){b!==null&&(b=b.next={eventTime:P,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var L=n,z=h;switch(M=e,P=t,z.tag){case 1:if(L=z.payload,typeof L=="function"){S=L.call(P,S,M);break e}S=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=z.payload,M=typeof L=="function"?L.call(P,S,M):L,M==null)break e;S=Dn({},S,M);break e;case 2:Ta=!0}}h.callback!==null&&h.lane!==0&&(n.flags|=64,M=s.effects,M===null?s.effects=[h]:M.push(h))}else P={eventTime:P,lane:M,tag:h.tag,payload:h.payload,callback:h.callback,next:null},b===null?(x=b=P,m=S):b=b.next=P,c|=M;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;M=h,h=M.next,M.next=null,s.lastBaseUpdate=M,s.shared.pending=null}}while(!0);if(b===null&&(m=S),s.baseState=m,s.firstBaseUpdate=x,s.lastBaseUpdate=b,e=s.shared.interleaved,e!==null){s=e;do c|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);Zo|=c,n.lanes=c,n.memoizedState=S}}function vS(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error($e(191,s));s.call(i)}}}var jh={},_s=Za(jh),bh=Za(jh),wh=Za(jh);function Io(n){if(n===jh)throw Error($e(174));return n}function By(n,e){switch(_n(wh,e),_n(bh,n),_n(_s,jh),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:o0(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=o0(e,n)}Cn(_s),_n(_s,e)}function _c(){Cn(_s),Cn(bh),Cn(wh)}function cC(n){Io(wh.current);var e=Io(_s.current),t=o0(e,n.type);e!==t&&(_n(bh,n),_n(_s,t))}function Hy(n){bh.current===n&&(Cn(_s),Cn(bh))}var Rn=Za(0);function Bp(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Gv=[];function Vy(){for(var n=0;n<Gv.length;n++)Gv[n]._workInProgressVersionPrimary=null;Gv.length=0}var gp=aa.ReactCurrentDispatcher,Xv=aa.ReactCurrentBatchConfig,qo=0,In=null,Qn=null,ai=null,Hp=!1,ju=!1,Sh=0,TR=0;function _i(){throw Error($e(321))}function Wy(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!is(n[t],e[t]))return!1;return!0}function Gy(n,e,t,i,s,o){if(qo=o,In=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,gp.current=n===null||n.memoizedState===null?LR:IR,n=t(i,s),ju){o=0;do{if(ju=!1,Sh=0,25<=o)throw Error($e(301));o+=1,ai=Qn=null,e.updateQueue=null,gp.current=DR,n=t(i,s)}while(ju)}if(gp.current=Vp,e=Qn!==null&&Qn.next!==null,qo=0,ai=Qn=In=null,Hp=!1,e)throw Error($e(300));return n}function Xy(){var n=Sh!==0;return Sh=0,n}function vs(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?In.memoizedState=ai=n:ai=ai.next=n,ai}function zr(){if(Qn===null){var n=In.alternate;n=n!==null?n.memoizedState:null}else n=Qn.next;var e=ai===null?In.memoizedState:ai.next;if(e!==null)ai=e,Qn=n;else{if(n===null)throw Error($e(310));Qn=n,n={memoizedState:Qn.memoizedState,baseState:Qn.baseState,baseQueue:Qn.baseQueue,queue:Qn.queue,next:null},ai===null?In.memoizedState=ai=n:ai=ai.next=n}return ai}function _h(n,e){return typeof e=="function"?e(n):e}function Yv(n){var e=zr(),t=e.queue;if(t===null)throw Error($e(311));t.lastRenderedReducer=n;var i=Qn,s=i.baseQueue,o=t.pending;if(o!==null){if(s!==null){var c=s.next;s.next=o.next,o.next=c}i.baseQueue=s=o,t.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=c=null,m=null,x=o;do{var b=x.lane;if((qo&b)===b)m!==null&&(m=m.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),i=x.hasEagerState?x.eagerState:n(i,x.action);else{var S={lane:b,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};m===null?(h=m=S,c=i):m=m.next=S,In.lanes|=b,Zo|=b}x=x.next}while(x!==null&&x!==o);m===null?c=i:m.next=h,is(i,e.memoizedState)||(er=!0),e.memoizedState=i,e.baseState=c,e.baseQueue=m,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do o=s.lane,In.lanes|=o,Zo|=o,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function jv(n){var e=zr(),t=e.queue;if(t===null)throw Error($e(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,o=e.memoizedState;if(s!==null){t.pending=null;var c=s=s.next;do o=n(o,c.action),c=c.next;while(c!==s);is(o,e.memoizedState)||(er=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,i]}function uC(){}function hC(n,e){var t=In,i=zr(),s=e(),o=!is(i.memoizedState,s);if(o&&(i.memoizedState=s,er=!0),i=i.queue,Yy(pC.bind(null,t,i,n),[n]),i.getSnapshot!==e||o||ai!==null&&ai.memoizedState.tag&1){if(t.flags|=2048,Mh(9,fC.bind(null,t,i,s,e),void 0,null),ui===null)throw Error($e(349));qo&30||dC(t,e,s)}return s}function dC(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=In.updateQueue,e===null?(e={lastEffect:null,stores:null},In.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function fC(n,e,t,i){e.value=t,e.getSnapshot=i,gC(e)&&mC(n)}function pC(n,e,t){return t(function(){gC(e)&&mC(n)})}function gC(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!is(n,t)}catch{return!0}}function mC(n){var e=ea(n,1);e!==null&&ns(e,n,1,-1)}function xS(n){var e=vs();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_h,lastRenderedState:n},e.queue=n,n=n.dispatch=RR.bind(null,In,n),[e.memoizedState,n]}function Mh(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=In.updateQueue,e===null?(e={lastEffect:null,stores:null},In.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function vC(){return zr().memoizedState}function mp(n,e,t,i){var s=vs();In.flags|=n,s.memoizedState=Mh(1|e,t,void 0,i===void 0?null:i)}function Ug(n,e,t,i){var s=zr();i=i===void 0?null:i;var o=void 0;if(Qn!==null){var c=Qn.memoizedState;if(o=c.destroy,i!==null&&Wy(i,c.deps)){s.memoizedState=Mh(e,t,o,i);return}}In.flags|=n,s.memoizedState=Mh(1|e,t,o,i)}function yS(n,e){return mp(8390656,8,n,e)}function Yy(n,e){return Ug(2048,8,n,e)}function xC(n,e){return Ug(4,2,n,e)}function yC(n,e){return Ug(4,4,n,e)}function bC(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function wC(n,e,t){return t=t!=null?t.concat([n]):null,Ug(4,4,bC.bind(null,e,n),t)}function jy(){}function SC(n,e){var t=zr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Wy(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function _C(n,e){var t=zr();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&Wy(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function MC(n,e,t){return qo&21?(is(t,e)||(t=PA(),In.lanes|=t,Zo|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,er=!0),n.memoizedState=t)}function PR(n,e){var t=mn;mn=t!==0&&4>t?t:4,n(!0);var i=Xv.transition;Xv.transition={};try{n(!1),e()}finally{mn=t,Xv.transition=i}}function AC(){return zr().memoizedState}function kR(n,e,t){var i=Wa(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},CC(n))EC(e,t);else if(t=oC(n,e,t,i),t!==null){var s=Bi();ns(t,n,i,s),TC(t,e,i)}}function RR(n,e,t){var i=Wa(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(CC(n))EC(e,s);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var c=e.lastRenderedState,h=o(c,t);if(s.hasEagerState=!0,s.eagerState=h,is(h,c)){var m=e.interleaved;m===null?(s.next=s,zy(e)):(s.next=m.next,m.next=s),e.interleaved=s;return}}catch{}finally{}t=oC(n,e,s,i),t!==null&&(s=Bi(),ns(t,n,i,s),TC(t,e,i))}}function CC(n){var e=n.alternate;return n===In||e!==null&&e===In}function EC(n,e){ju=Hp=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function TC(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,My(n,t)}}var Vp={readContext:Or,useCallback:_i,useContext:_i,useEffect:_i,useImperativeHandle:_i,useInsertionEffect:_i,useLayoutEffect:_i,useMemo:_i,useReducer:_i,useRef:_i,useState:_i,useDebugValue:_i,useDeferredValue:_i,useTransition:_i,useMutableSource:_i,useSyncExternalStore:_i,useId:_i,unstable_isNewReconciler:!1},LR={readContext:Or,useCallback:function(n,e){return vs().memoizedState=[n,e===void 0?null:e],n},useContext:Or,useEffect:yS,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,mp(4194308,4,bC.bind(null,e,n),t)},useLayoutEffect:function(n,e){return mp(4194308,4,n,e)},useInsertionEffect:function(n,e){return mp(4,2,n,e)},useMemo:function(n,e){var t=vs();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=vs();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=kR.bind(null,In,n),[i.memoizedState,n]},useRef:function(n){var e=vs();return n={current:n},e.memoizedState=n},useState:xS,useDebugValue:jy,useDeferredValue:function(n){return vs().memoizedState=n},useTransition:function(){var n=xS(!1),e=n[0];return n=PR.bind(null,n[1]),vs().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=In,s=vs();if(Pn){if(t===void 0)throw Error($e(407));t=t()}else{if(t=e(),ui===null)throw Error($e(349));qo&30||dC(i,e,t)}s.memoizedState=t;var o={value:t,getSnapshot:e};return s.queue=o,yS(pC.bind(null,i,o,n),[n]),i.flags|=2048,Mh(9,fC.bind(null,i,o,t,e),void 0,null),t},useId:function(){var n=vs(),e=ui.identifierPrefix;if(Pn){var t=qs,i=js;t=(i&~(1<<32-ts(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Sh++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=TR++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},IR={readContext:Or,useCallback:SC,useContext:Or,useEffect:Yy,useImperativeHandle:wC,useInsertionEffect:xC,useLayoutEffect:yC,useMemo:_C,useReducer:Yv,useRef:vC,useState:function(){return Yv(_h)},useDebugValue:jy,useDeferredValue:function(n){var e=zr();return MC(e,Qn.memoizedState,n)},useTransition:function(){var n=Yv(_h)[0],e=zr().memoizedState;return[n,e]},useMutableSource:uC,useSyncExternalStore:hC,useId:AC,unstable_isNewReconciler:!1},DR={readContext:Or,useCallback:SC,useContext:Or,useEffect:Yy,useImperativeHandle:wC,useInsertionEffect:xC,useLayoutEffect:yC,useMemo:_C,useReducer:jv,useRef:vC,useState:function(){return jv(_h)},useDebugValue:jy,useDeferredValue:function(n){var e=zr();return Qn===null?e.memoizedState=n:MC(e,Qn.memoizedState,n)},useTransition:function(){var n=jv(_h)[0],e=zr().memoizedState;return[n,e]},useMutableSource:uC,useSyncExternalStore:hC,useId:AC,unstable_isNewReconciler:!1};function Zr(n,e){if(n&&n.defaultProps){e=Dn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function T0(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Dn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Bg={isMounted:function(n){return(n=n._reactInternals)?il(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Bi(),s=Wa(n),o=Ks(i,s);o.payload=e,t!=null&&(o.callback=t),e=Ha(n,o,s),e!==null&&(ns(e,n,s,i),pp(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Bi(),s=Wa(n),o=Ks(i,s);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Ha(n,o,s),e!==null&&(ns(e,n,s,i),pp(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Bi(),i=Wa(n),s=Ks(t,i);s.tag=2,e!=null&&(s.callback=e),e=Ha(n,s,i),e!==null&&(ns(e,n,i,t),pp(e,n,i))}};function bS(n,e,t,i,s,o,c){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,o,c):e.prototype&&e.prototype.isPureReactComponent?!mh(t,i)||!mh(s,o):!0}function PC(n,e,t){var i=!1,s=Ya,o=e.contextType;return typeof o=="object"&&o!==null?o=Or(o):(s=rr(e)?Yo:Ri.current,i=e.contextTypes,o=(i=i!=null)?bc(n,s):Ya),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Bg,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=o),e}function wS(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Bg.enqueueReplaceState(e,e.state,null)}function P0(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},Uy(n);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Or(o):(o=rr(e)?Yo:Ri.current,s.context=bc(n,o)),s.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(T0(n,e,o,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Bg.enqueueReplaceState(s,s.state,null),Up(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Mc(n,e){try{var t="",i=e;do t+=lk(i),i=i.return;while(i);var s=t}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:s,digest:null}}function qv(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function k0(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var NR=typeof WeakMap=="function"?WeakMap:Map;function kC(n,e,t){t=Ks(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){Gp||(Gp=!0,B0=i),k0(n,e)},t}function RC(n,e,t){t=Ks(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){k0(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){k0(n,e),typeof i!="function"&&(Va===null?Va=new Set([this]):Va.add(this));var c=e.stack;this.componentDidCatch(e.value,{componentStack:c!==null?c:""})}),t}function SS(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new NR;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=ZR.bind(null,n,e,t),e.then(n,n))}function _S(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function MS(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ks(-1,1),e.tag=2,Ha(t,e,1))),t.lanes|=1),n)}var FR=aa.ReactCurrentOwner,er=!1;function zi(n,e,t,i){e.child=n===null?aC(e,null,t,i):Sc(e,n.child,t,i)}function AS(n,e,t,i,s){t=t.render;var o=e.ref;return mc(e,s),i=Gy(n,e,t,i,o,s),t=Xy(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ta(n,e,s)):(Pn&&t&&Ly(e),e.flags|=1,zi(n,e,i,s),e.child)}function CS(n,e,t,i,s){if(n===null){var o=t.type;return typeof o=="function"&&!tb(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,LC(n,e,o,i,s)):(n=bp(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&s)){var c=o.memoizedProps;if(t=t.compare,t=t!==null?t:mh,t(c,i)&&n.ref===e.ref)return ta(n,e,s)}return e.flags|=1,n=Ga(o,i),n.ref=e.ref,n.return=e,e.child=n}function LC(n,e,t,i,s){if(n!==null){var o=n.memoizedProps;if(mh(o,i)&&n.ref===e.ref)if(er=!1,e.pendingProps=i=o,(n.lanes&s)!==0)n.flags&131072&&(er=!0);else return e.lanes=n.lanes,ta(n,e,s)}return R0(n,e,t,i,s)}function IC(n,e,t){var i=e.pendingProps,s=i.children,o=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_n(ac,dr),dr|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,_n(ac,dr),dr|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:t,_n(ac,dr),dr|=i}else o!==null?(i=o.baseLanes|t,e.memoizedState=null):i=t,_n(ac,dr),dr|=i;return zi(n,e,s,t),e.child}function DC(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function R0(n,e,t,i,s){var o=rr(t)?Yo:Ri.current;return o=bc(e,o),mc(e,s),t=Gy(n,e,t,i,o,s),i=Xy(),n!==null&&!er?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,ta(n,e,s)):(Pn&&i&&Ly(e),e.flags|=1,zi(n,e,t,s),e.child)}function ES(n,e,t,i,s){if(rr(t)){var o=!0;Dp(e)}else o=!1;if(mc(e,s),e.stateNode===null)vp(n,e),PC(e,t,i),P0(e,t,i,s),i=!0;else if(n===null){var c=e.stateNode,h=e.memoizedProps;c.props=h;var m=c.context,x=t.contextType;typeof x=="object"&&x!==null?x=Or(x):(x=rr(t)?Yo:Ri.current,x=bc(e,x));var b=t.getDerivedStateFromProps,S=typeof b=="function"||typeof c.getSnapshotBeforeUpdate=="function";S||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==i||m!==x)&&wS(e,c,i,x),Ta=!1;var M=e.memoizedState;c.state=M,Up(e,i,c,s),m=e.memoizedState,h!==i||M!==m||ir.current||Ta?(typeof b=="function"&&(T0(e,t,b,i),m=e.memoizedState),(h=Ta||bS(e,t,h,i,M,m,x))?(S||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(e.flags|=4194308)):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=m),c.props=i,c.state=m,c.context=x,i=h):(typeof c.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{c=e.stateNode,lC(n,e),h=e.memoizedProps,x=e.type===e.elementType?h:Zr(e.type,h),c.props=x,S=e.pendingProps,M=c.context,m=t.contextType,typeof m=="object"&&m!==null?m=Or(m):(m=rr(t)?Yo:Ri.current,m=bc(e,m));var P=t.getDerivedStateFromProps;(b=typeof P=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(h!==S||M!==m)&&wS(e,c,i,m),Ta=!1,M=e.memoizedState,c.state=M,Up(e,i,c,s);var L=e.memoizedState;h!==S||M!==L||ir.current||Ta?(typeof P=="function"&&(T0(e,t,P,i),L=e.memoizedState),(x=Ta||bS(e,t,x,i,M,L,m)||!1)?(b||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(i,L,m),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(i,L,m)),typeof c.componentDidUpdate=="function"&&(e.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof c.componentDidUpdate!="function"||h===n.memoizedProps&&M===n.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===n.memoizedProps&&M===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=L),c.props=i,c.state=L,c.context=m,i=x):(typeof c.componentDidUpdate!="function"||h===n.memoizedProps&&M===n.memoizedState||(e.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||h===n.memoizedProps&&M===n.memoizedState||(e.flags|=1024),i=!1)}return L0(n,e,t,i,o,s)}function L0(n,e,t,i,s,o){DC(n,e);var c=(e.flags&128)!==0;if(!i&&!c)return s&&dS(e,t,!1),ta(n,e,o);i=e.stateNode,FR.current=e;var h=c&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&c?(e.child=Sc(e,n.child,null,o),e.child=Sc(e,null,h,o)):zi(n,e,h,o),e.memoizedState=i.state,s&&dS(e,t,!0),e.child}function NC(n){var e=n.stateNode;e.pendingContext?hS(n,e.pendingContext,e.pendingContext!==e.context):e.context&&hS(n,e.context,!1),By(n,e.containerInfo)}function TS(n,e,t,i,s){return wc(),Dy(s),e.flags|=256,zi(n,e,t,i),e.child}var I0={dehydrated:null,treeContext:null,retryLane:0};function D0(n){return{baseLanes:n,cachePool:null,transitions:null}}function FC(n,e,t){var i=e.pendingProps,s=Rn.current,o=!1,c=(e.flags&128)!==0,h;if((h=c)||(h=n!==null&&n.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),_n(Rn,s&1),n===null)return C0(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(c=i.children,n=i.fallback,o?(i=e.mode,o=e.child,c={mode:"hidden",children:c},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=c):o=Wg(c,i,0,null),n=Bo(n,i,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=D0(t),e.memoizedState=I0,n):qy(e,c));if(s=n.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return OR(n,e,c,i,h,s,t);if(o){o=i.fallback,c=e.mode,s=n.child,h=s.sibling;var m={mode:"hidden",children:i.children};return!(c&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=m,e.deletions=null):(i=Ga(s,m),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=Ga(h,o):(o=Bo(o,c,t,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,c=n.child.memoizedState,c=c===null?D0(t):{baseLanes:c.baseLanes|t,cachePool:null,transitions:c.transitions},o.memoizedState=c,o.childLanes=n.childLanes&~t,e.memoizedState=I0,i}return o=n.child,n=o.sibling,i=Ga(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function qy(n,e){return e=Wg({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function uf(n,e,t,i){return i!==null&&Dy(i),Sc(e,n.child,null,t),n=qy(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function OR(n,e,t,i,s,o,c){if(t)return e.flags&256?(e.flags&=-257,i=qv(Error($e(422))),uf(n,e,c,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Wg({mode:"visible",children:i.children},s,0,null),o=Bo(o,s,c,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Sc(e,n.child,null,c),e.child.memoizedState=D0(c),e.memoizedState=I0,o);if(!(e.mode&1))return uf(n,e,c,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error($e(419)),i=qv(o,i,void 0),uf(n,e,c,i)}if(h=(c&n.childLanes)!==0,er||h){if(i=ui,i!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|c)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,ea(n,s),ns(i,n,s,-1))}return eb(),i=qv(Error($e(421))),uf(n,e,c,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=KR.bind(null,n),s._reactRetry=e,null):(n=o.treeContext,pr=Ba(s.nextSibling),gr=e,Pn=!0,$r=null,n!==null&&(Lr[Ir++]=js,Lr[Ir++]=qs,Lr[Ir++]=jo,js=n.id,qs=n.overflow,jo=e),e=qy(e,i.children),e.flags|=4096,e)}function PS(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),E0(n.return,e,t)}function Zv(n,e,t,i,s){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=t,o.tailMode=s)}function OC(n,e,t){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(zi(n,e,i.children,t),i=Rn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&PS(n,t,e);else if(n.tag===19)PS(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(_n(Rn,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&Bp(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Zv(e,!1,s,t,o);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&Bp(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Zv(e,!0,t,null,o);break;case"together":Zv(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function vp(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function ta(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Zo|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error($e(153));if(e.child!==null){for(n=e.child,t=Ga(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ga(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function zR(n,e,t){switch(e.tag){case 3:NC(e),wc();break;case 5:cC(e);break;case 1:rr(e.type)&&Dp(e);break;case 4:By(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;_n(Op,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(_n(Rn,Rn.current&1),e.flags|=128,null):t&e.child.childLanes?FC(n,e,t):(_n(Rn,Rn.current&1),n=ta(n,e,t),n!==null?n.sibling:null);_n(Rn,Rn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return OC(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_n(Rn,Rn.current),i)break;return null;case 22:case 23:return e.lanes=0,IC(n,e,t)}return ta(n,e,t)}var zC,N0,UC,BC;zC=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};N0=function(){};UC=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Io(_s.current);var o=null;switch(t){case"input":s=i0(n,s),i=i0(n,i),o=[];break;case"select":s=Dn({},s,{value:void 0}),i=Dn({},i,{value:void 0}),o=[];break;case"textarea":s=a0(n,s),i=a0(n,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Lp)}l0(t,i);var c;t=null;for(x in s)if(!i.hasOwnProperty(x)&&s.hasOwnProperty(x)&&s[x]!=null)if(x==="style"){var h=s[x];for(c in h)h.hasOwnProperty(c)&&(t||(t={}),t[c]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(ch.hasOwnProperty(x)?o||(o=[]):(o=o||[]).push(x,null));for(x in i){var m=i[x];if(h=s!=null?s[x]:void 0,i.hasOwnProperty(x)&&m!==h&&(m!=null||h!=null))if(x==="style")if(h){for(c in h)!h.hasOwnProperty(c)||m&&m.hasOwnProperty(c)||(t||(t={}),t[c]="");for(c in m)m.hasOwnProperty(c)&&h[c]!==m[c]&&(t||(t={}),t[c]=m[c])}else t||(o||(o=[]),o.push(x,t)),t=m;else x==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,h=h?h.__html:void 0,m!=null&&h!==m&&(o=o||[]).push(x,m)):x==="children"?typeof m!="string"&&typeof m!="number"||(o=o||[]).push(x,""+m):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(ch.hasOwnProperty(x)?(m!=null&&x==="onScroll"&&Mn("scroll",n),o||h===m||(o=[])):(o=o||[]).push(x,m))}t&&(o=o||[]).push("style",t);var x=o;(e.updateQueue=x)&&(e.flags|=4)}};BC=function(n,e,t,i){t!==i&&(e.flags|=4)};function yu(n,e){if(!Pn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Mi(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function UR(n,e,t){var i=e.pendingProps;switch(Iy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mi(e),null;case 1:return rr(e.type)&&Ip(),Mi(e),null;case 3:return i=e.stateNode,_c(),Cn(ir),Cn(Ri),Vy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(lf(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$r!==null&&(W0($r),$r=null))),N0(n,e),Mi(e),null;case 5:Hy(e);var s=Io(wh.current);if(t=e.type,n!==null&&e.stateNode!=null)UC(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($e(166));return Mi(e),null}if(n=Io(_s.current),lf(e)){i=e.stateNode,t=e.type;var o=e.memoizedProps;switch(i[xs]=e,i[yh]=o,n=(e.mode&1)!==0,t){case"dialog":Mn("cancel",i),Mn("close",i);break;case"iframe":case"object":case"embed":Mn("load",i);break;case"video":case"audio":for(s=0;s<Uu.length;s++)Mn(Uu[s],i);break;case"source":Mn("error",i);break;case"img":case"image":case"link":Mn("error",i),Mn("load",i);break;case"details":Mn("toggle",i);break;case"input":z1(i,o),Mn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Mn("invalid",i);break;case"textarea":B1(i,o),Mn("invalid",i)}l0(t,o),s=null;for(var c in o)if(o.hasOwnProperty(c)){var h=o[c];c==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&of(i.textContent,h,n),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&of(i.textContent,h,n),s=["children",""+h]):ch.hasOwnProperty(c)&&h!=null&&c==="onScroll"&&Mn("scroll",i)}switch(t){case"input":$d(i),U1(i,o,!0);break;case"textarea":$d(i),H1(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Lp)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=pA(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=c.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=c.createElement(t,{is:i.is}):(n=c.createElement(t),t==="select"&&(c=n,i.multiple?c.multiple=!0:i.size&&(c.size=i.size))):n=c.createElementNS(n,t),n[xs]=e,n[yh]=i,zC(n,e,!1,!1),e.stateNode=n;e:{switch(c=c0(t,i),t){case"dialog":Mn("cancel",n),Mn("close",n),s=i;break;case"iframe":case"object":case"embed":Mn("load",n),s=i;break;case"video":case"audio":for(s=0;s<Uu.length;s++)Mn(Uu[s],n);s=i;break;case"source":Mn("error",n),s=i;break;case"img":case"image":case"link":Mn("error",n),Mn("load",n),s=i;break;case"details":Mn("toggle",n),s=i;break;case"input":z1(n,i),s=i0(n,i),Mn("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Dn({},i,{value:void 0}),Mn("invalid",n);break;case"textarea":B1(n,i),s=a0(n,i),Mn("invalid",n);break;default:s=i}l0(t,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var m=h[o];o==="style"?vA(n,m):o==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&gA(n,m)):o==="children"?typeof m=="string"?(t!=="textarea"||m!=="")&&uh(n,m):typeof m=="number"&&uh(n,""+m):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ch.hasOwnProperty(o)?m!=null&&o==="onScroll"&&Mn("scroll",n):m!=null&&xy(n,o,m,c))}switch(t){case"input":$d(n),U1(n,i,!1);break;case"textarea":$d(n),H1(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Xa(i.value));break;case"select":n.multiple=!!i.multiple,o=i.value,o!=null?dc(n,!!i.multiple,o,!1):i.defaultValue!=null&&dc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Lp)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Mi(e),null;case 6:if(n&&e.stateNode!=null)BC(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($e(166));if(t=Io(wh.current),Io(_s.current),lf(e)){if(i=e.stateNode,t=e.memoizedProps,i[xs]=e,(o=i.nodeValue!==t)&&(n=gr,n!==null))switch(n.tag){case 3:of(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&of(i.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[xs]=e,e.stateNode=i}return Mi(e),null;case 13:if(Cn(Rn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Pn&&pr!==null&&e.mode&1&&!(e.flags&128))rC(),wc(),e.flags|=98560,o=!1;else if(o=lf(e),i!==null&&i.dehydrated!==null){if(n===null){if(!o)throw Error($e(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error($e(317));o[xs]=e}else wc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Mi(e),o=!1}else $r!==null&&(W0($r),$r=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Rn.current&1?ei===0&&(ei=3):eb())),e.updateQueue!==null&&(e.flags|=4),Mi(e),null);case 4:return _c(),N0(n,e),n===null&&vh(e.stateNode.containerInfo),Mi(e),null;case 10:return Oy(e.type._context),Mi(e),null;case 17:return rr(e.type)&&Ip(),Mi(e),null;case 19:if(Cn(Rn),o=e.memoizedState,o===null)return Mi(e),null;if(i=(e.flags&128)!==0,c=o.rendering,c===null)if(i)yu(o,!1);else{if(ei!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(c=Bp(n),c!==null){for(e.flags|=128,yu(o,!1),i=c.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)o=t,n=i,o.flags&=14680066,c=o.alternate,c===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,n=c.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return _n(Rn,Rn.current&1|2),e.child}n=n.sibling}o.tail!==null&&Wn()>Ac&&(e.flags|=128,i=!0,yu(o,!1),e.lanes=4194304)}else{if(!i)if(n=Bp(c),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),yu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!c.alternate&&!Pn)return Mi(e),null}else 2*Wn()-o.renderingStartTime>Ac&&t!==1073741824&&(e.flags|=128,i=!0,yu(o,!1),e.lanes=4194304);o.isBackwards?(c.sibling=e.child,e.child=c):(t=o.last,t!==null?t.sibling=c:e.child=c,o.last=c)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Wn(),e.sibling=null,t=Rn.current,_n(Rn,i?t&1|2:t&1),e):(Mi(e),null);case 22:case 23:return Qy(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?dr&1073741824&&(Mi(e),e.subtreeFlags&6&&(e.flags|=8192)):Mi(e),null;case 24:return null;case 25:return null}throw Error($e(156,e.tag))}function BR(n,e){switch(Iy(e),e.tag){case 1:return rr(e.type)&&Ip(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return _c(),Cn(ir),Cn(Ri),Vy(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Hy(e),null;case 13:if(Cn(Rn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error($e(340));wc()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Cn(Rn),null;case 4:return _c(),null;case 10:return Oy(e.type._context),null;case 22:case 23:return Qy(),null;case 24:return null;default:return null}}var hf=!1,Ti=!1,HR=typeof WeakSet=="function"?WeakSet:Set,bt=null;function sc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){zn(n,e,i)}else t.current=null}function F0(n,e,t){try{t()}catch(i){zn(n,e,i)}}var kS=!1;function VR(n,e){if(y0=Pp,n=XA(),Ry(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var c=0,h=-1,m=-1,x=0,b=0,S=n,M=null;t:for(;;){for(var P;S!==t||s!==0&&S.nodeType!==3||(h=c+s),S!==o||i!==0&&S.nodeType!==3||(m=c+i),S.nodeType===3&&(c+=S.nodeValue.length),(P=S.firstChild)!==null;)M=S,S=P;for(;;){if(S===n)break t;if(M===t&&++x===s&&(h=c),M===o&&++b===i&&(m=c),(P=S.nextSibling)!==null)break;S=M,M=S.parentNode}S=P}t=h===-1||m===-1?null:{start:h,end:m}}else t=null}t=t||{start:0,end:0}}else t=null;for(b0={focusedElem:n,selectionRange:t},Pp=!1,bt=e;bt!==null;)if(e=bt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,bt=n;else for(;bt!==null;){e=bt;try{var L=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var z=L.memoizedProps,F=L.memoizedState,k=e.stateNode,R=k.getSnapshotBeforeUpdate(e.elementType===e.type?z:Zr(e.type,z),F);k.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var O=e.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($e(163))}}catch(W){zn(e,e.return,W)}if(n=e.sibling,n!==null){n.return=e.return,bt=n;break}bt=e.return}return L=kS,kS=!1,L}function qu(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var o=s.destroy;s.destroy=void 0,o!==void 0&&F0(e,t,o)}s=s.next}while(s!==i)}}function Hg(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function O0(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function HC(n){var e=n.alternate;e!==null&&(n.alternate=null,HC(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[xs],delete e[yh],delete e[_0],delete e[MR],delete e[AR])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function VC(n){return n.tag===5||n.tag===3||n.tag===4}function RS(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||VC(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function z0(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Lp));else if(i!==4&&(n=n.child,n!==null))for(z0(n,e,t),n=n.sibling;n!==null;)z0(n,e,t),n=n.sibling}function U0(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(U0(n,e,t),n=n.sibling;n!==null;)U0(n,e,t),n=n.sibling}var pi=null,Jr=!1;function va(n,e,t){for(t=t.child;t!==null;)WC(n,e,t),t=t.sibling}function WC(n,e,t){if(Ss&&typeof Ss.onCommitFiberUnmount=="function")try{Ss.onCommitFiberUnmount(Ig,t)}catch{}switch(t.tag){case 5:Ti||sc(t,e);case 6:var i=pi,s=Jr;pi=null,va(n,e,t),pi=i,Jr=s,pi!==null&&(Jr?(n=pi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):pi.removeChild(t.stateNode));break;case 18:pi!==null&&(Jr?(n=pi,t=t.stateNode,n.nodeType===8?Vv(n.parentNode,t):n.nodeType===1&&Vv(n,t),ph(n)):Vv(pi,t.stateNode));break;case 4:i=pi,s=Jr,pi=t.stateNode.containerInfo,Jr=!0,va(n,e,t),pi=i,Jr=s;break;case 0:case 11:case 14:case 15:if(!Ti&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,c=o.destroy;o=o.tag,c!==void 0&&(o&2||o&4)&&F0(t,e,c),s=s.next}while(s!==i)}va(n,e,t);break;case 1:if(!Ti&&(sc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(h){zn(t,e,h)}va(n,e,t);break;case 21:va(n,e,t);break;case 22:t.mode&1?(Ti=(i=Ti)||t.memoizedState!==null,va(n,e,t),Ti=i):va(n,e,t);break;default:va(n,e,t)}}function LS(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new HR),e.forEach(function(i){var s=JR.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Gr(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var o=n,c=e,h=c;e:for(;h!==null;){switch(h.tag){case 5:pi=h.stateNode,Jr=!1;break e;case 3:pi=h.stateNode.containerInfo,Jr=!0;break e;case 4:pi=h.stateNode.containerInfo,Jr=!0;break e}h=h.return}if(pi===null)throw Error($e(160));WC(o,c,s),pi=null,Jr=!1;var m=s.alternate;m!==null&&(m.return=null),s.return=null}catch(x){zn(s,e,x)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GC(e,n),e=e.sibling}function GC(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Gr(e,n),ms(n),i&4){try{qu(3,n,n.return),Hg(3,n)}catch(z){zn(n,n.return,z)}try{qu(5,n,n.return)}catch(z){zn(n,n.return,z)}}break;case 1:Gr(e,n),ms(n),i&512&&t!==null&&sc(t,t.return);break;case 5:if(Gr(e,n),ms(n),i&512&&t!==null&&sc(t,t.return),n.flags&32){var s=n.stateNode;try{uh(s,"")}catch(z){zn(n,n.return,z)}}if(i&4&&(s=n.stateNode,s!=null)){var o=n.memoizedProps,c=t!==null?t.memoizedProps:o,h=n.type,m=n.updateQueue;if(n.updateQueue=null,m!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&dA(s,o),c0(h,c);var x=c0(h,o);for(c=0;c<m.length;c+=2){var b=m[c],S=m[c+1];b==="style"?vA(s,S):b==="dangerouslySetInnerHTML"?gA(s,S):b==="children"?uh(s,S):xy(s,b,S,x)}switch(h){case"input":r0(s,o);break;case"textarea":fA(s,o);break;case"select":var M=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var P=o.value;P!=null?dc(s,!!o.multiple,P,!1):M!==!!o.multiple&&(o.defaultValue!=null?dc(s,!!o.multiple,o.defaultValue,!0):dc(s,!!o.multiple,o.multiple?[]:"",!1))}s[yh]=o}catch(z){zn(n,n.return,z)}}break;case 6:if(Gr(e,n),ms(n),i&4){if(n.stateNode===null)throw Error($e(162));s=n.stateNode,o=n.memoizedProps;try{s.nodeValue=o}catch(z){zn(n,n.return,z)}}break;case 3:if(Gr(e,n),ms(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{ph(e.containerInfo)}catch(z){zn(n,n.return,z)}break;case 4:Gr(e,n),ms(n);break;case 13:Gr(e,n),ms(n),s=n.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(Jy=Wn())),i&4&&LS(n);break;case 22:if(b=t!==null&&t.memoizedState!==null,n.mode&1?(Ti=(x=Ti)||b,Gr(e,n),Ti=x):Gr(e,n),ms(n),i&8192){if(x=n.memoizedState!==null,(n.stateNode.isHidden=x)&&!b&&n.mode&1)for(bt=n,b=n.child;b!==null;){for(S=bt=b;bt!==null;){switch(M=bt,P=M.child,M.tag){case 0:case 11:case 14:case 15:qu(4,M,M.return);break;case 1:sc(M,M.return);var L=M.stateNode;if(typeof L.componentWillUnmount=="function"){i=M,t=M.return;try{e=i,L.props=e.memoizedProps,L.state=e.memoizedState,L.componentWillUnmount()}catch(z){zn(i,t,z)}}break;case 5:sc(M,M.return);break;case 22:if(M.memoizedState!==null){DS(S);continue}}P!==null?(P.return=M,bt=P):DS(S)}b=b.sibling}e:for(b=null,S=n;;){if(S.tag===5){if(b===null){b=S;try{s=S.stateNode,x?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=S.stateNode,m=S.memoizedProps.style,c=m!=null&&m.hasOwnProperty("display")?m.display:null,h.style.display=mA("display",c))}catch(z){zn(n,n.return,z)}}}else if(S.tag===6){if(b===null)try{S.stateNode.nodeValue=x?"":S.memoizedProps}catch(z){zn(n,n.return,z)}}else if((S.tag!==22&&S.tag!==23||S.memoizedState===null||S===n)&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===n)break e;for(;S.sibling===null;){if(S.return===null||S.return===n)break e;b===S&&(b=null),S=S.return}b===S&&(b=null),S.sibling.return=S.return,S=S.sibling}}break;case 19:Gr(e,n),ms(n),i&4&&LS(n);break;case 21:break;default:Gr(e,n),ms(n)}}function ms(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(VC(t)){var i=t;break e}t=t.return}throw Error($e(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(uh(s,""),i.flags&=-33);var o=RS(n);U0(n,o,s);break;case 3:case 4:var c=i.stateNode.containerInfo,h=RS(n);z0(n,h,c);break;default:throw Error($e(161))}}catch(m){zn(n,n.return,m)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function WR(n,e,t){bt=n,XC(n)}function XC(n,e,t){for(var i=(n.mode&1)!==0;bt!==null;){var s=bt,o=s.child;if(s.tag===22&&i){var c=s.memoizedState!==null||hf;if(!c){var h=s.alternate,m=h!==null&&h.memoizedState!==null||Ti;h=hf;var x=Ti;if(hf=c,(Ti=m)&&!x)for(bt=s;bt!==null;)c=bt,m=c.child,c.tag===22&&c.memoizedState!==null?NS(s):m!==null?(m.return=c,bt=m):NS(s);for(;o!==null;)bt=o,XC(o),o=o.sibling;bt=s,hf=h,Ti=x}IS(n)}else s.subtreeFlags&8772&&o!==null?(o.return=s,bt=o):IS(n)}}function IS(n){for(;bt!==null;){var e=bt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ti||Hg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ti)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Zr(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&vS(e,o,i);break;case 3:var c=e.updateQueue;if(c!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}vS(e,c,t)}break;case 5:var h=e.stateNode;if(t===null&&e.flags&4){t=h;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&t.focus();break;case"img":m.src&&(t.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var x=e.alternate;if(x!==null){var b=x.memoizedState;if(b!==null){var S=b.dehydrated;S!==null&&ph(S)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($e(163))}Ti||e.flags&512&&O0(e)}catch(M){zn(e,e.return,M)}}if(e===n){bt=null;break}if(t=e.sibling,t!==null){t.return=e.return,bt=t;break}bt=e.return}}function DS(n){for(;bt!==null;){var e=bt;if(e===n){bt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,bt=t;break}bt=e.return}}function NS(n){for(;bt!==null;){var e=bt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Hg(4,e)}catch(m){zn(e,t,m)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(m){zn(e,s,m)}}var o=e.return;try{O0(e)}catch(m){zn(e,o,m)}break;case 5:var c=e.return;try{O0(e)}catch(m){zn(e,c,m)}}}catch(m){zn(e,e.return,m)}if(e===n){bt=null;break}var h=e.sibling;if(h!==null){h.return=e.return,bt=h;break}bt=e.return}}var GR=Math.ceil,Wp=aa.ReactCurrentDispatcher,Zy=aa.ReactCurrentOwner,Fr=aa.ReactCurrentBatchConfig,cn=0,ui=null,Kn=null,gi=0,dr=0,ac=Za(0),ei=0,Ah=null,Zo=0,Vg=0,Ky=0,Zu=null,Qi=null,Jy=0,Ac=1/0,Ws=null,Gp=!1,B0=null,Va=null,df=!1,Da=null,Xp=0,Ku=0,H0=null,xp=-1,yp=0;function Bi(){return cn&6?Wn():xp!==-1?xp:xp=Wn()}function Wa(n){return n.mode&1?cn&2&&gi!==0?gi&-gi:ER.transition!==null?(yp===0&&(yp=PA()),yp):(n=mn,n!==0||(n=window.event,n=n===void 0?16:FA(n.type)),n):1}function ns(n,e,t,i){if(50<Ku)throw Ku=0,H0=null,Error($e(185));Gh(n,t,i),(!(cn&2)||n!==ui)&&(n===ui&&(!(cn&2)&&(Vg|=t),ei===4&&Ra(n,gi)),sr(n,i),t===1&&cn===0&&!(e.mode&1)&&(Ac=Wn()+500,zg&&Ka()))}function sr(n,e){var t=n.callbackNode;Ek(n,e);var i=Tp(n,n===ui?gi:0);if(i===0)t!==null&&G1(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&G1(t),e===1)n.tag===0?CR(FS.bind(null,n)):tC(FS.bind(null,n)),SR(function(){!(cn&6)&&Ka()}),t=null;else{switch(kA(i)){case 1:t=_y;break;case 4:t=EA;break;case 16:t=Ep;break;case 536870912:t=TA;break;default:t=Ep}t=QC(t,YC.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function YC(n,e){if(xp=-1,yp=0,cn&6)throw Error($e(327));var t=n.callbackNode;if(vc()&&n.callbackNode!==t)return null;var i=Tp(n,n===ui?gi:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=Yp(n,i);else{e=i;var s=cn;cn|=2;var o=qC();(ui!==n||gi!==e)&&(Ws=null,Ac=Wn()+500,Uo(n,e));do try{jR();break}catch(h){jC(n,h)}while(!0);Fy(),Wp.current=o,cn=s,Kn!==null?e=0:(ui=null,gi=0,e=ei)}if(e!==0){if(e===2&&(s=p0(n),s!==0&&(i=s,e=V0(n,s))),e===1)throw t=Ah,Uo(n,0),Ra(n,i),sr(n,Wn()),t;if(e===6)Ra(n,i);else{if(s=n.current.alternate,!(i&30)&&!XR(s)&&(e=Yp(n,i),e===2&&(o=p0(n),o!==0&&(i=o,e=V0(n,o))),e===1))throw t=Ah,Uo(n,0),Ra(n,i),sr(n,Wn()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error($e(345));case 2:Eo(n,Qi,Ws);break;case 3:if(Ra(n,i),(i&130023424)===i&&(e=Jy+500-Wn(),10<e)){if(Tp(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){Bi(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=S0(Eo.bind(null,n,Qi,Ws),e);break}Eo(n,Qi,Ws);break;case 4:if(Ra(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var c=31-ts(i);o=1<<c,c=e[c],c>s&&(s=c),i&=~o}if(i=s,i=Wn()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*GR(i/1960))-i,10<i){n.timeoutHandle=S0(Eo.bind(null,n,Qi,Ws),i);break}Eo(n,Qi,Ws);break;case 5:Eo(n,Qi,Ws);break;default:throw Error($e(329))}}}return sr(n,Wn()),n.callbackNode===t?YC.bind(null,n):null}function V0(n,e){var t=Zu;return n.current.memoizedState.isDehydrated&&(Uo(n,e).flags|=256),n=Yp(n,e),n!==2&&(e=Qi,Qi=t,e!==null&&W0(e)),n}function W0(n){Qi===null?Qi=n:Qi.push.apply(Qi,n)}function XR(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],o=s.getSnapshot;s=s.value;try{if(!is(o(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ra(n,e){for(e&=~Ky,e&=~Vg,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-ts(e),i=1<<t;n[t]=-1,e&=~i}}function FS(n){if(cn&6)throw Error($e(327));vc();var e=Tp(n,0);if(!(e&1))return sr(n,Wn()),null;var t=Yp(n,e);if(n.tag!==0&&t===2){var i=p0(n);i!==0&&(e=i,t=V0(n,i))}if(t===1)throw t=Ah,Uo(n,0),Ra(n,e),sr(n,Wn()),t;if(t===6)throw Error($e(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Eo(n,Qi,Ws),sr(n,Wn()),null}function $y(n,e){var t=cn;cn|=1;try{return n(e)}finally{cn=t,cn===0&&(Ac=Wn()+500,zg&&Ka())}}function Ko(n){Da!==null&&Da.tag===0&&!(cn&6)&&vc();var e=cn;cn|=1;var t=Fr.transition,i=mn;try{if(Fr.transition=null,mn=1,n)return n()}finally{mn=i,Fr.transition=t,cn=e,!(cn&6)&&Ka()}}function Qy(){dr=ac.current,Cn(ac)}function Uo(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,wR(t)),Kn!==null)for(t=Kn.return;t!==null;){var i=t;switch(Iy(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ip();break;case 3:_c(),Cn(ir),Cn(Ri),Vy();break;case 5:Hy(i);break;case 4:_c();break;case 13:Cn(Rn);break;case 19:Cn(Rn);break;case 10:Oy(i.type._context);break;case 22:case 23:Qy()}t=t.return}if(ui=n,Kn=n=Ga(n.current,null),gi=dr=e,ei=0,Ah=null,Ky=Vg=Zo=0,Qi=Zu=null,Lo!==null){for(e=0;e<Lo.length;e++)if(t=Lo[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,o=t.pending;if(o!==null){var c=o.next;o.next=s,i.next=c}t.pending=i}Lo=null}return n}function jC(n,e){do{var t=Kn;try{if(Fy(),gp.current=Vp,Hp){for(var i=In.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Hp=!1}if(qo=0,ai=Qn=In=null,ju=!1,Sh=0,Zy.current=null,t===null||t.return===null){ei=1,Ah=e,Kn=null;break}e:{var o=n,c=t.return,h=t,m=e;if(e=gi,h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var x=m,b=h,S=b.tag;if(!(b.mode&1)&&(S===0||S===11||S===15)){var M=b.alternate;M?(b.updateQueue=M.updateQueue,b.memoizedState=M.memoizedState,b.lanes=M.lanes):(b.updateQueue=null,b.memoizedState=null)}var P=_S(c);if(P!==null){P.flags&=-257,MS(P,c,h,o,e),P.mode&1&&SS(o,x,e),e=P,m=x;var L=e.updateQueue;if(L===null){var z=new Set;z.add(m),e.updateQueue=z}else L.add(m);break e}else{if(!(e&1)){SS(o,x,e),eb();break e}m=Error($e(426))}}else if(Pn&&h.mode&1){var F=_S(c);if(F!==null){!(F.flags&65536)&&(F.flags|=256),MS(F,c,h,o,e),Dy(Mc(m,h));break e}}o=m=Mc(m,h),ei!==4&&(ei=2),Zu===null?Zu=[o]:Zu.push(o),o=c;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var k=kC(o,m,e);mS(o,k);break e;case 1:h=m;var R=o.type,O=o.stateNode;if(!(o.flags&128)&&(typeof R.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Va===null||!Va.has(O)))){o.flags|=65536,e&=-e,o.lanes|=e;var W=RC(o,h,e);mS(o,W);break e}}o=o.return}while(o!==null)}KC(t)}catch(Z){e=Z,Kn===t&&t!==null&&(Kn=t=t.return);continue}break}while(!0)}function qC(){var n=Wp.current;return Wp.current=Vp,n===null?Vp:n}function eb(){(ei===0||ei===3||ei===2)&&(ei=4),ui===null||!(Zo&268435455)&&!(Vg&268435455)||Ra(ui,gi)}function Yp(n,e){var t=cn;cn|=2;var i=qC();(ui!==n||gi!==e)&&(Ws=null,Uo(n,e));do try{YR();break}catch(s){jC(n,s)}while(!0);if(Fy(),cn=t,Wp.current=i,Kn!==null)throw Error($e(261));return ui=null,gi=0,ei}function YR(){for(;Kn!==null;)ZC(Kn)}function jR(){for(;Kn!==null&&!xk();)ZC(Kn)}function ZC(n){var e=$C(n.alternate,n,dr);n.memoizedProps=n.pendingProps,e===null?KC(n):Kn=e,Zy.current=null}function KC(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=BR(t,e),t!==null){t.flags&=32767,Kn=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ei=6,Kn=null;return}}else if(t=UR(t,e,dr),t!==null){Kn=t;return}if(e=e.sibling,e!==null){Kn=e;return}Kn=e=n}while(e!==null);ei===0&&(ei=5)}function Eo(n,e,t){var i=mn,s=Fr.transition;try{Fr.transition=null,mn=1,qR(n,e,t,i)}finally{Fr.transition=s,mn=i}return null}function qR(n,e,t,i){do vc();while(Da!==null);if(cn&6)throw Error($e(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error($e(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(Tk(n,o),n===ui&&(Kn=ui=null,gi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||df||(df=!0,QC(Ep,function(){return vc(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=Fr.transition,Fr.transition=null;var c=mn;mn=1;var h=cn;cn|=4,Zy.current=null,VR(n,t),GC(t,n),pR(b0),Pp=!!y0,b0=y0=null,n.current=t,WR(t),yk(),cn=h,mn=c,Fr.transition=o}else n.current=t;if(df&&(df=!1,Da=n,Xp=s),o=n.pendingLanes,o===0&&(Va=null),Sk(t.stateNode),sr(n,Wn()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(Gp)throw Gp=!1,n=B0,B0=null,n;return Xp&1&&n.tag!==0&&vc(),o=n.pendingLanes,o&1?n===H0?Ku++:(Ku=0,H0=n):Ku=0,Ka(),null}function vc(){if(Da!==null){var n=kA(Xp),e=Fr.transition,t=mn;try{if(Fr.transition=null,mn=16>n?16:n,Da===null)var i=!1;else{if(n=Da,Da=null,Xp=0,cn&6)throw Error($e(331));var s=cn;for(cn|=4,bt=n.current;bt!==null;){var o=bt,c=o.child;if(bt.flags&16){var h=o.deletions;if(h!==null){for(var m=0;m<h.length;m++){var x=h[m];for(bt=x;bt!==null;){var b=bt;switch(b.tag){case 0:case 11:case 15:qu(8,b,o)}var S=b.child;if(S!==null)S.return=b,bt=S;else for(;bt!==null;){b=bt;var M=b.sibling,P=b.return;if(HC(b),b===x){bt=null;break}if(M!==null){M.return=P,bt=M;break}bt=P}}}var L=o.alternate;if(L!==null){var z=L.child;if(z!==null){L.child=null;do{var F=z.sibling;z.sibling=null,z=F}while(z!==null)}}bt=o}}if(o.subtreeFlags&2064&&c!==null)c.return=o,bt=c;else e:for(;bt!==null;){if(o=bt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:qu(9,o,o.return)}var k=o.sibling;if(k!==null){k.return=o.return,bt=k;break e}bt=o.return}}var R=n.current;for(bt=R;bt!==null;){c=bt;var O=c.child;if(c.subtreeFlags&2064&&O!==null)O.return=c,bt=O;else e:for(c=R;bt!==null;){if(h=bt,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Hg(9,h)}}catch(Z){zn(h,h.return,Z)}if(h===c){bt=null;break e}var W=h.sibling;if(W!==null){W.return=h.return,bt=W;break e}bt=h.return}}if(cn=s,Ka(),Ss&&typeof Ss.onPostCommitFiberRoot=="function")try{Ss.onPostCommitFiberRoot(Ig,n)}catch{}i=!0}return i}finally{mn=t,Fr.transition=e}}return!1}function OS(n,e,t){e=Mc(t,e),e=kC(n,e,1),n=Ha(n,e,1),e=Bi(),n!==null&&(Gh(n,1,e),sr(n,e))}function zn(n,e,t){if(n.tag===3)OS(n,n,t);else for(;e!==null;){if(e.tag===3){OS(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Va===null||!Va.has(i))){n=Mc(t,n),n=RC(e,n,1),e=Ha(e,n,1),n=Bi(),e!==null&&(Gh(e,1,n),sr(e,n));break}}e=e.return}}function ZR(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Bi(),n.pingedLanes|=n.suspendedLanes&t,ui===n&&(gi&t)===t&&(ei===4||ei===3&&(gi&130023424)===gi&&500>Wn()-Jy?Uo(n,0):Ky|=t),sr(n,e)}function JC(n,e){e===0&&(n.mode&1?(e=tf,tf<<=1,!(tf&130023424)&&(tf=4194304)):e=1);var t=Bi();n=ea(n,e),n!==null&&(Gh(n,e,t),sr(n,t))}function KR(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),JC(n,t)}function JR(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error($e(314))}i!==null&&i.delete(e),JC(n,t)}var $C;$C=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ir.current)er=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return er=!1,zR(n,e,t);er=!!(n.flags&131072)}else er=!1,Pn&&e.flags&1048576&&nC(e,Fp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;vp(n,e),n=e.pendingProps;var s=bc(e,Ri.current);mc(e,t),s=Gy(null,e,i,n,s,t);var o=Xy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,rr(i)?(o=!0,Dp(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Uy(e),s.updater=Bg,e.stateNode=s,s._reactInternals=e,P0(e,i,n,t),e=L0(null,e,i,!0,o,t)):(e.tag=0,Pn&&o&&Ly(e),zi(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(vp(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=QR(i),n=Zr(i,n),s){case 0:e=R0(null,e,i,n,t);break e;case 1:e=ES(null,e,i,n,t);break e;case 11:e=AS(null,e,i,n,t);break e;case 14:e=CS(null,e,i,Zr(i.type,n),t);break e}throw Error($e(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Zr(i,s),R0(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Zr(i,s),ES(n,e,i,s,t);case 3:e:{if(NC(e),n===null)throw Error($e(387));i=e.pendingProps,o=e.memoizedState,s=o.element,lC(n,e),Up(e,i,null,t);var c=e.memoizedState;if(i=c.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=Mc(Error($e(423)),e),e=TS(n,e,i,t,s);break e}else if(i!==s){s=Mc(Error($e(424)),e),e=TS(n,e,i,t,s);break e}else for(pr=Ba(e.stateNode.containerInfo.firstChild),gr=e,Pn=!0,$r=null,t=aC(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(wc(),i===s){e=ta(n,e,t);break e}zi(n,e,i,t)}e=e.child}return e;case 5:return cC(e),n===null&&C0(e),i=e.type,s=e.pendingProps,o=n!==null?n.memoizedProps:null,c=s.children,w0(i,s)?c=null:o!==null&&w0(i,o)&&(e.flags|=32),DC(n,e),zi(n,e,c,t),e.child;case 6:return n===null&&C0(e),null;case 13:return FC(n,e,t);case 4:return By(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Sc(e,null,i,t):zi(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Zr(i,s),AS(n,e,i,s,t);case 7:return zi(n,e,e.pendingProps,t),e.child;case 8:return zi(n,e,e.pendingProps.children,t),e.child;case 12:return zi(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,c=s.value,_n(Op,i._currentValue),i._currentValue=c,o!==null)if(is(o.value,c)){if(o.children===s.children&&!ir.current){e=ta(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){c=o.child;for(var m=h.firstContext;m!==null;){if(m.context===i){if(o.tag===1){m=Ks(-1,t&-t),m.tag=2;var x=o.updateQueue;if(x!==null){x=x.shared;var b=x.pending;b===null?m.next=m:(m.next=b.next,b.next=m),x.pending=m}}o.lanes|=t,m=o.alternate,m!==null&&(m.lanes|=t),E0(o.return,t,e),h.lanes|=t;break}m=m.next}}else if(o.tag===10)c=o.type===e.type?null:o.child;else if(o.tag===18){if(c=o.return,c===null)throw Error($e(341));c.lanes|=t,h=c.alternate,h!==null&&(h.lanes|=t),E0(c,t,e),c=o.sibling}else c=o.child;if(c!==null)c.return=o;else for(c=o;c!==null;){if(c===e){c=null;break}if(o=c.sibling,o!==null){o.return=c.return,c=o;break}c=c.return}o=c}zi(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,mc(e,t),s=Or(s),i=i(s),e.flags|=1,zi(n,e,i,t),e.child;case 14:return i=e.type,s=Zr(i,e.pendingProps),s=Zr(i.type,s),CS(n,e,i,s,t);case 15:return LC(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Zr(i,s),vp(n,e),e.tag=1,rr(i)?(n=!0,Dp(e)):n=!1,mc(e,t),PC(e,i,s),P0(e,i,s,t),L0(null,e,i,!0,n,t);case 19:return OC(n,e,t);case 22:return IC(n,e,t)}throw Error($e(156,e.tag))};function QC(n,e){return CA(n,e)}function $R(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nr(n,e,t,i){return new $R(n,e,t,i)}function tb(n){return n=n.prototype,!(!n||!n.isReactComponent)}function QR(n){if(typeof n=="function")return tb(n)?1:0;if(n!=null){if(n=n.$$typeof,n===by)return 11;if(n===wy)return 14}return 2}function Ga(n,e){var t=n.alternate;return t===null?(t=Nr(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function bp(n,e,t,i,s,o){var c=2;if(i=n,typeof n=="function")tb(n)&&(c=1);else if(typeof n=="string")c=5;else e:switch(n){case Kl:return Bo(t.children,s,o,e);case yy:c=8,s|=8;break;case Qx:return n=Nr(12,t,e,s|2),n.elementType=Qx,n.lanes=o,n;case e0:return n=Nr(13,t,e,s),n.elementType=e0,n.lanes=o,n;case t0:return n=Nr(19,t,e,s),n.elementType=t0,n.lanes=o,n;case cA:return Wg(t,s,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case oA:c=10;break e;case lA:c=9;break e;case by:c=11;break e;case wy:c=14;break e;case Ea:c=16,i=null;break e}throw Error($e(130,n==null?n:typeof n,""))}return e=Nr(c,t,e,s),e.elementType=n,e.type=i,e.lanes=o,e}function Bo(n,e,t,i){return n=Nr(7,n,i,e),n.lanes=t,n}function Wg(n,e,t,i){return n=Nr(22,n,i,e),n.elementType=cA,n.lanes=t,n.stateNode={isHidden:!1},n}function Kv(n,e,t){return n=Nr(6,n,null,e),n.lanes=t,n}function Jv(n,e,t){return e=Nr(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function eL(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rv(0),this.expirationTimes=Rv(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rv(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function nb(n,e,t,i,s,o,c,h,m){return n=new eL(n,e,t,h,m),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Nr(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Uy(o),n}function tL(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Zl,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function eE(n){if(!n)return Ya;n=n._reactInternals;e:{if(il(n)!==n||n.tag!==1)throw Error($e(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(rr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($e(171))}if(n.tag===1){var t=n.type;if(rr(t))return eC(n,t,e)}return e}function tE(n,e,t,i,s,o,c,h,m){return n=nb(t,i,!0,n,s,o,c,h,m),n.context=eE(null),t=n.current,i=Bi(),s=Wa(t),o=Ks(i,s),o.callback=e??null,Ha(t,o,s),n.current.lanes=s,Gh(n,s,i),sr(n,i),n}function Gg(n,e,t,i){var s=e.current,o=Bi(),c=Wa(s);return t=eE(t),e.context===null?e.context=t:e.pendingContext=t,e=Ks(o,c),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ha(s,e,c),n!==null&&(ns(n,s,c,o),pp(n,s,c)),c}function jp(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function zS(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ib(n,e){zS(n,e),(n=n.alternate)&&zS(n,e)}function nL(){return null}var nE=typeof reportError=="function"?reportError:function(n){console.error(n)};function rb(n){this._internalRoot=n}Xg.prototype.render=rb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error($e(409));Gg(n,e,null,null)};Xg.prototype.unmount=rb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ko(function(){Gg(null,n,null,null)}),e[Qs]=null}};function Xg(n){this._internalRoot=n}Xg.prototype.unstable_scheduleHydration=function(n){if(n){var e=IA();n={blockedOn:null,target:n,priority:e};for(var t=0;t<ka.length&&e!==0&&e<ka[t].priority;t++);ka.splice(t,0,n),t===0&&NA(n)}};function sb(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Yg(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function US(){}function iL(n,e,t,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var x=jp(c);o.call(x)}}var c=tE(e,i,n,0,null,!1,!1,"",US);return n._reactRootContainer=c,n[Qs]=c.current,vh(n.nodeType===8?n.parentNode:n),Ko(),c}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var x=jp(m);h.call(x)}}var m=nb(n,0,!1,null,null,!1,!1,"",US);return n._reactRootContainer=m,n[Qs]=m.current,vh(n.nodeType===8?n.parentNode:n),Ko(function(){Gg(e,m,t,i)}),m}function jg(n,e,t,i,s){var o=t._reactRootContainer;if(o){var c=o;if(typeof s=="function"){var h=s;s=function(){var m=jp(c);h.call(m)}}Gg(e,c,n,s)}else c=iL(t,e,n,s,i);return jp(c)}RA=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=zu(e.pendingLanes);t!==0&&(My(e,t|1),sr(e,Wn()),!(cn&6)&&(Ac=Wn()+500,Ka()))}break;case 13:Ko(function(){var i=ea(n,1);if(i!==null){var s=Bi();ns(i,n,1,s)}}),ib(n,1)}};Ay=function(n){if(n.tag===13){var e=ea(n,134217728);if(e!==null){var t=Bi();ns(e,n,134217728,t)}ib(n,134217728)}};LA=function(n){if(n.tag===13){var e=Wa(n),t=ea(n,e);if(t!==null){var i=Bi();ns(t,n,e,i)}ib(n,e)}};IA=function(){return mn};DA=function(n,e){var t=mn;try{return mn=n,e()}finally{mn=t}};h0=function(n,e,t){switch(e){case"input":if(r0(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=Og(i);if(!s)throw Error($e(90));hA(i),r0(i,s)}}}break;case"textarea":fA(n,t);break;case"select":e=t.value,e!=null&&dc(n,!!t.multiple,e,!1)}};bA=$y;wA=Ko;var rL={usingClientEntryPoint:!1,Events:[Yh,ec,Og,xA,yA,$y]},bu={findFiberByHostInstance:Ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sL={bundleType:bu.bundleType,version:bu.version,rendererPackageName:bu.rendererPackageName,rendererConfig:bu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:aa.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=MA(n),n===null?null:n.stateNode},findFiberByHostInstance:bu.findFiberByHostInstance||nL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ff=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ff.isDisabled&&ff.supportsFiber)try{Ig=ff.inject(sL),Ss=ff}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rL;xr.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sb(e))throw Error($e(200));return tL(n,e,null,t)};xr.createRoot=function(n,e){if(!sb(n))throw Error($e(299));var t=!1,i="",s=nE;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=nb(n,1,!1,null,null,t,!1,i,s),n[Qs]=e.current,vh(n.nodeType===8?n.parentNode:n),new rb(e)};xr.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error($e(188)):(n=Object.keys(n).join(","),Error($e(268,n)));return n=MA(e),n=n===null?null:n.stateNode,n};xr.flushSync=function(n){return Ko(n)};xr.hydrate=function(n,e,t){if(!Yg(e))throw Error($e(200));return jg(null,n,e,!0,t)};xr.hydrateRoot=function(n,e,t){if(!sb(n))throw Error($e(405));var i=t!=null&&t.hydratedSources||null,s=!1,o="",c=nE;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),e=tE(e,null,n,1,t??null,s,!1,o,c),n[Qs]=e.current,vh(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new Xg(e)};xr.render=function(n,e,t){if(!Yg(e))throw Error($e(200));return jg(null,n,e,!1,t)};xr.unmountComponentAtNode=function(n){if(!Yg(n))throw Error($e(40));return n._reactRootContainer?(Ko(function(){jg(null,null,n,!1,function(){n._reactRootContainer=null,n[Qs]=null})}),!0):!1};xr.unstable_batchedUpdates=$y;xr.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Yg(t))throw Error($e(200));if(n==null||n._reactInternals===void 0)throw Error($e(38));return jg(n,e,t,!1,i)};xr.version="18.3.1-next-f1338f8080-20240426";function iE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(iE)}catch(n){console.error(n)}}iE(),iA.exports=xr;var aL=iA.exports,BS=aL;Jx.createRoot=BS.createRoot,Jx.hydrateRoot=BS.hydrateRoot;/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const qg="166",oL={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},lL={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},rE=0,G0=1,sE=2,cL=3,aE=0,Zg=1,Ju=2,Kr=3,na=0,Hi=1,ys=2,Js=0,Ho=1,X0=2,Y0=3,j0=4,oE=5,La=100,lE=101,cE=102,uE=103,hE=104,dE=200,fE=201,pE=202,gE=203,qp=204,Zp=205,mE=206,vE=207,xE=208,yE=209,bE=210,wE=211,SE=212,_E=213,ME=214,AE=0,CE=1,EE=2,Ch=3,TE=4,PE=5,kE=6,RE=7,qh=0,LE=1,IE=2,Ms=0,DE=1,NE=2,FE=3,ab=4,OE=5,zE=6,UE=7,q0="attached",BE="detached",Kg=300,ia=301,ja=302,Cc=303,Eh=304,Uc=306,Jo=1e3,tr=1001,Th=1002,oi=1003,ob=1004,uL=1004,oc=1005,hL=1005,Jn=1006,$u=1007,dL=1007,bs=1008,fL=1008,rs=1009,lb=1010,cb=1011,Ec=1012,Jg=1013,ra=1014,nr=1015,Bc=1016,$g=1017,Qg=1018,$o=1020,ub=35902,hb=1021,db=1022,Pi=1023,fb=1024,pb=1025,Vo=1026,Qo=1027,em=1028,Zh=1029,gb=1030,tm=1031,pL=1032,nm=1033,Qu=33776,eh=33777,th=33778,nh=33779,Kp=35840,Jp=35841,$p=35842,Qp=35843,eg=36196,tg=37492,ng=37496,ig=37808,rg=37809,sg=37810,ag=37811,og=37812,lg=37813,cg=37814,ug=37815,hg=37816,dg=37817,fg=37818,pg=37819,gg=37820,mg=37821,ih=36492,vg=36494,xg=36495,mb=36283,yg=36284,bg=36285,wg=36286,HE=2200,VE=2201,WE=2202,Ph=2300,Sg=2301,wp=2302,Do=2400,No=2401,kh=2402,im=2500,vb=2501,gL=0,mL=1,vL=2,GE=3200,XE=3201,Ja=0,YE=1,Xs="",Rr="srgb",oa="srgb-linear",rm="display-p3",Kh="display-p3-linear",Rh="linear",wn="srgb",Lh="rec709",Ih="p3",xL=0,To=7680,yL=7681,bL=7682,wL=7683,SL=34055,_L=34056,ML=5386,AL=512,CL=513,EL=514,TL=515,PL=516,kL=517,RL=518,Z0=519,jE=512,qE=513,ZE=514,xb=515,KE=516,JE=517,$E=518,QE=519,Dh=35044,LL=35048,IL=35040,DL=35045,NL=35049,FL=35041,OL=35046,zL=35050,UL=35042,BL="100",K0="300 es",ws=2e3,Nh=2001;class la{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const s=this._listeners[e];if(s!==void 0){const o=s.indexOf(t);o!==-1&&s.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const s=i.slice(0);for(let o=0,c=s.length;o<c;o++)s[o].call(this,e);e.target=null}}}const Ai=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let HS=1234567;const Wo=Math.PI/180,Tc=180/Math.PI;function mr(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ai[n&255]+Ai[n>>8&255]+Ai[n>>16&255]+Ai[n>>24&255]+"-"+Ai[e&255]+Ai[e>>8&255]+"-"+Ai[e>>16&15|64]+Ai[e>>24&255]+"-"+Ai[t&63|128]+Ai[t>>8&255]+"-"+Ai[t>>16&255]+Ai[t>>24&255]+Ai[i&255]+Ai[i>>8&255]+Ai[i>>16&255]+Ai[i>>24&255]).toLowerCase()}function Un(n,e,t){return Math.max(e,Math.min(t,n))}function yb(n,e){return(n%e+e)%e}function HL(n,e,t,i,s){return i+(n-e)*(s-i)/(t-e)}function VL(n,e,t){return n!==e?(t-n)/(e-n):0}function rh(n,e,t){return(1-t)*n+t*e}function WL(n,e,t,i){return rh(n,e,1-Math.exp(-t*i))}function GL(n,e=1){return e-Math.abs(yb(n,e*2)-e)}function XL(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function YL(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function jL(n,e){return n+Math.floor(Math.random()*(e-n+1))}function qL(n,e){return n+Math.random()*(e-n)}function ZL(n){return n*(.5-Math.random())}function KL(n){n!==void 0&&(HS=n);let e=HS+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function JL(n){return n*Wo}function $L(n){return n*Tc}function QL(n){return(n&n-1)===0&&n!==0}function eI(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function tI(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function nI(n,e,t,i,s){const o=Math.cos,c=Math.sin,h=o(t/2),m=c(t/2),x=o((e+i)/2),b=c((e+i)/2),S=o((e-i)/2),M=c((e-i)/2),P=o((i-e)/2),L=c((i-e)/2);switch(s){case"XYX":n.set(h*b,m*S,m*M,h*x);break;case"YZY":n.set(m*M,h*b,m*S,h*x);break;case"ZXZ":n.set(m*S,m*M,h*b,h*x);break;case"XZX":n.set(h*b,m*L,m*P,h*x);break;case"YXY":n.set(m*P,h*b,m*L,h*x);break;case"ZYZ":n.set(m*L,m*P,h*b,h*x);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+s)}}function Ui(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Xt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const es={DEG2RAD:Wo,RAD2DEG:Tc,generateUUID:mr,clamp:Un,euclideanModulo:yb,mapLinear:HL,inverseLerp:VL,lerp:rh,damp:WL,pingpong:GL,smoothstep:XL,smootherstep:YL,randInt:jL,randFloat:qL,randFloatSpread:ZL,seededRandom:KL,degToRad:JL,radToDeg:$L,isPowerOfTwo:QL,ceilPowerOfTwo:eI,floorPowerOfTwo:tI,setQuaternionFromProperEuler:nI,normalize:Xt,denormalize:Ui};class We{constructor(e=0,t=0){We.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6],this.y=s[1]*t+s[4]*i+s[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Un(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),s=Math.sin(t),o=this.x-e.x,c=this.y-e.y;return this.x=o*i-c*s+e.x,this.y=o*s+c*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Wt{constructor(e,t,i,s,o,c,h,m,x){Wt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,c,h,m,x)}set(e,t,i,s,o,c,h,m,x){const b=this.elements;return b[0]=e,b[1]=s,b[2]=h,b[3]=t,b[4]=o,b[5]=m,b[6]=i,b[7]=c,b[8]=x,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,c=i[0],h=i[3],m=i[6],x=i[1],b=i[4],S=i[7],M=i[2],P=i[5],L=i[8],z=s[0],F=s[3],k=s[6],R=s[1],O=s[4],W=s[7],Z=s[2],J=s[5],te=s[8];return o[0]=c*z+h*R+m*Z,o[3]=c*F+h*O+m*J,o[6]=c*k+h*W+m*te,o[1]=x*z+b*R+S*Z,o[4]=x*F+b*O+S*J,o[7]=x*k+b*W+S*te,o[2]=M*z+P*R+L*Z,o[5]=M*F+P*O+L*J,o[8]=M*k+P*W+L*te,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],c=e[4],h=e[5],m=e[6],x=e[7],b=e[8];return t*c*b-t*h*x-i*o*b+i*h*m+s*o*x-s*c*m}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],c=e[4],h=e[5],m=e[6],x=e[7],b=e[8],S=b*c-h*x,M=h*m-b*o,P=x*o-c*m,L=t*S+i*M+s*P;if(L===0)return this.set(0,0,0,0,0,0,0,0,0);const z=1/L;return e[0]=S*z,e[1]=(s*x-b*i)*z,e[2]=(h*i-s*c)*z,e[3]=M*z,e[4]=(b*t-s*m)*z,e[5]=(s*o-h*t)*z,e[6]=P*z,e[7]=(i*m-x*t)*z,e[8]=(c*t-i*o)*z,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,s,o,c,h){const m=Math.cos(o),x=Math.sin(o);return this.set(i*m,i*x,-i*(m*c+x*h)+c+e,-s*x,s*m,-s*(-x*c+m*h)+h+t,0,0,1),this}scale(e,t){return this.premultiply($v.makeScale(e,t)),this}rotate(e){return this.premultiply($v.makeRotation(-e)),this}translate(e,t){return this.premultiply($v.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<9;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const $v=new Wt;function eT(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const iI={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function lc(n,e){return new iI[n](e)}function Fh(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function tT(){const n=Fh("canvas");return n.style.display="block",n}const VS={};function bb(n){n in VS||(VS[n]=!0,console.warn(n))}function rI(n,e,t){return new Promise(function(i,s){function o(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:s();break;case n.TIMEOUT_EXPIRED:setTimeout(o,t);break;default:i()}}setTimeout(o,t)})}const WS=new Wt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),GS=new Wt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),pf={[oa]:{transfer:Rh,primaries:Lh,toReference:n=>n,fromReference:n=>n},[Rr]:{transfer:wn,primaries:Lh,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[Kh]:{transfer:Rh,primaries:Ih,toReference:n=>n.applyMatrix3(GS),fromReference:n=>n.applyMatrix3(WS)},[rm]:{transfer:wn,primaries:Ih,toReference:n=>n.convertSRGBToLinear().applyMatrix3(GS),fromReference:n=>n.applyMatrix3(WS).convertLinearToSRGB()}},sI=new Set([oa,Kh]),fn={enabled:!0,_workingColorSpace:oa,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!sI.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=pf[e].toReference,s=pf[t].fromReference;return s(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return pf[n].primaries},getTransfer:function(n){return n===Xs?Rh:pf[n].transfer}};function xc(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Qv(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let _l;class nT{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{_l===void 0&&(_l=Fh("canvas")),_l.width=e.width,_l.height=e.height;const i=_l.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=_l}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Fh("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const s=i.getImageData(0,0,e.width,e.height),o=s.data;for(let c=0;c<o.length;c++)o[c]=xc(o[c]/255)*255;return i.putImageData(s,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(xc(t[i]/255)*255):t[i]=xc(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let aI=0;class Fo{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:aI++}),this.uuid=mr(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},s=this.data;if(s!==null){let o;if(Array.isArray(s)){o=[];for(let c=0,h=s.length;c<h;c++)s[c].isDataTexture?o.push(ex(s[c].image)):o.push(ex(s[c]))}else o=ex(s);i.url=o}return t||(e.images[this.uuid]=i),i}}function ex(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?nT.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let oI=0;class En extends la{constructor(e=En.DEFAULT_IMAGE,t=En.DEFAULT_MAPPING,i=tr,s=tr,o=Jn,c=bs,h=Pi,m=rs,x=En.DEFAULT_ANISOTROPY,b=Xs){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:oI++}),this.uuid=mr(),this.name="",this.source=new Fo(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=s,this.magFilter=o,this.minFilter=c,this.anisotropy=x,this.format=h,this.internalFormat=null,this.type=m,this.offset=new We(0,0),this.repeat=new We(1,1),this.center=new We(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Wt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=b,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Kg)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Jo:e.x=e.x-Math.floor(e.x);break;case tr:e.x=e.x<0?0:1;break;case Th:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Jo:e.y=e.y-Math.floor(e.y);break;case tr:e.y=e.y<0?0:1;break;case Th:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}En.DEFAULT_IMAGE=null;En.DEFAULT_MAPPING=Kg;En.DEFAULT_ANISOTROPY=1;class an{constructor(e=0,t=0,i=0,s=1){an.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=s}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,s){return this.x=e,this.y=t,this.z=i,this.w=s,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=this.w,c=e.elements;return this.x=c[0]*t+c[4]*i+c[8]*s+c[12]*o,this.y=c[1]*t+c[5]*i+c[9]*s+c[13]*o,this.z=c[2]*t+c[6]*i+c[10]*s+c[14]*o,this.w=c[3]*t+c[7]*i+c[11]*s+c[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,s,o;const m=e.elements,x=m[0],b=m[4],S=m[8],M=m[1],P=m[5],L=m[9],z=m[2],F=m[6],k=m[10];if(Math.abs(b-M)<.01&&Math.abs(S-z)<.01&&Math.abs(L-F)<.01){if(Math.abs(b+M)<.1&&Math.abs(S+z)<.1&&Math.abs(L+F)<.1&&Math.abs(x+P+k-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const O=(x+1)/2,W=(P+1)/2,Z=(k+1)/2,J=(b+M)/4,te=(S+z)/4,re=(L+F)/4;return O>W&&O>Z?O<.01?(i=0,s=.707106781,o=.707106781):(i=Math.sqrt(O),s=J/i,o=te/i):W>Z?W<.01?(i=.707106781,s=0,o=.707106781):(s=Math.sqrt(W),i=J/s,o=re/s):Z<.01?(i=.707106781,s=.707106781,o=0):(o=Math.sqrt(Z),i=te/o,s=re/o),this.set(i,s,o,t),this}let R=Math.sqrt((F-L)*(F-L)+(S-z)*(S-z)+(M-b)*(M-b));return Math.abs(R)<.001&&(R=1),this.x=(F-L)/R,this.y=(S-z)/R,this.z=(M-b)/R,this.w=Math.acos((x+P+k-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class iT extends la{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t);const s={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Jn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const o=new En(s,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);o.flipY=!1,o.generateMipmaps=i.generateMipmaps,o.internalFormat=i.internalFormat,this.textures=[];const c=i.count;for(let h=0;h<c;h++)this.textures[h]=o.clone(),this.textures[h].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let s=0,o=this.textures.length;s<o;s++)this.textures[s].image.width=e,this.textures[s].image.height=t,this.textures[s].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,s=e.textures.length;i<s;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Fo(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ss extends iT{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class sm extends En{constructor(e=null,t=1,i=1,s=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=oi,this.minFilter=oi,this.wrapR=tr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class lI extends ss{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new sm(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class wb extends En{constructor(e=null,t=1,i=1,s=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:s},this.magFilter=oi,this.minFilter=oi,this.wrapR=tr,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class cI extends ss{constructor(e=1,t=1,i=1,s={}){super(e,t,s),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new wb(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class li{constructor(e=0,t=0,i=0,s=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=s}static slerpFlat(e,t,i,s,o,c,h){let m=i[s+0],x=i[s+1],b=i[s+2],S=i[s+3];const M=o[c+0],P=o[c+1],L=o[c+2],z=o[c+3];if(h===0){e[t+0]=m,e[t+1]=x,e[t+2]=b,e[t+3]=S;return}if(h===1){e[t+0]=M,e[t+1]=P,e[t+2]=L,e[t+3]=z;return}if(S!==z||m!==M||x!==P||b!==L){let F=1-h;const k=m*M+x*P+b*L+S*z,R=k>=0?1:-1,O=1-k*k;if(O>Number.EPSILON){const Z=Math.sqrt(O),J=Math.atan2(Z,k*R);F=Math.sin(F*J)/Z,h=Math.sin(h*J)/Z}const W=h*R;if(m=m*F+M*W,x=x*F+P*W,b=b*F+L*W,S=S*F+z*W,F===1-h){const Z=1/Math.sqrt(m*m+x*x+b*b+S*S);m*=Z,x*=Z,b*=Z,S*=Z}}e[t]=m,e[t+1]=x,e[t+2]=b,e[t+3]=S}static multiplyQuaternionsFlat(e,t,i,s,o,c){const h=i[s],m=i[s+1],x=i[s+2],b=i[s+3],S=o[c],M=o[c+1],P=o[c+2],L=o[c+3];return e[t]=h*L+b*S+m*P-x*M,e[t+1]=m*L+b*M+x*S-h*P,e[t+2]=x*L+b*P+h*M-m*S,e[t+3]=b*L-h*S-m*M-x*P,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,s){return this._x=e,this._y=t,this._z=i,this._w=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,s=e._y,o=e._z,c=e._order,h=Math.cos,m=Math.sin,x=h(i/2),b=h(s/2),S=h(o/2),M=m(i/2),P=m(s/2),L=m(o/2);switch(c){case"XYZ":this._x=M*b*S+x*P*L,this._y=x*P*S-M*b*L,this._z=x*b*L+M*P*S,this._w=x*b*S-M*P*L;break;case"YXZ":this._x=M*b*S+x*P*L,this._y=x*P*S-M*b*L,this._z=x*b*L-M*P*S,this._w=x*b*S+M*P*L;break;case"ZXY":this._x=M*b*S-x*P*L,this._y=x*P*S+M*b*L,this._z=x*b*L+M*P*S,this._w=x*b*S-M*P*L;break;case"ZYX":this._x=M*b*S-x*P*L,this._y=x*P*S+M*b*L,this._z=x*b*L-M*P*S,this._w=x*b*S+M*P*L;break;case"YZX":this._x=M*b*S+x*P*L,this._y=x*P*S+M*b*L,this._z=x*b*L-M*P*S,this._w=x*b*S-M*P*L;break;case"XZY":this._x=M*b*S-x*P*L,this._y=x*P*S-M*b*L,this._z=x*b*L+M*P*S,this._w=x*b*S+M*P*L;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+c)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,s=Math.sin(i);return this._x=e.x*s,this._y=e.y*s,this._z=e.z*s,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],s=t[4],o=t[8],c=t[1],h=t[5],m=t[9],x=t[2],b=t[6],S=t[10],M=i+h+S;if(M>0){const P=.5/Math.sqrt(M+1);this._w=.25/P,this._x=(b-m)*P,this._y=(o-x)*P,this._z=(c-s)*P}else if(i>h&&i>S){const P=2*Math.sqrt(1+i-h-S);this._w=(b-m)/P,this._x=.25*P,this._y=(s+c)/P,this._z=(o+x)/P}else if(h>S){const P=2*Math.sqrt(1+h-i-S);this._w=(o-x)/P,this._x=(s+c)/P,this._y=.25*P,this._z=(m+b)/P}else{const P=2*Math.sqrt(1+S-i-h);this._w=(c-s)/P,this._x=(o+x)/P,this._y=(m+b)/P,this._z=.25*P}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Un(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const s=Math.min(1,t/i);return this.slerp(e,s),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,s=e._y,o=e._z,c=e._w,h=t._x,m=t._y,x=t._z,b=t._w;return this._x=i*b+c*h+s*x-o*m,this._y=s*b+c*m+o*h-i*x,this._z=o*b+c*x+i*m-s*h,this._w=c*b-i*h-s*m-o*x,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,s=this._y,o=this._z,c=this._w;let h=c*e._w+i*e._x+s*e._y+o*e._z;if(h<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,h=-h):this.copy(e),h>=1)return this._w=c,this._x=i,this._y=s,this._z=o,this;const m=1-h*h;if(m<=Number.EPSILON){const P=1-t;return this._w=P*c+t*this._w,this._x=P*i+t*this._x,this._y=P*s+t*this._y,this._z=P*o+t*this._z,this.normalize(),this}const x=Math.sqrt(m),b=Math.atan2(x,h),S=Math.sin((1-t)*b)/x,M=Math.sin(t*b)/x;return this._w=c*S+this._w*M,this._x=i*S+this._x*M,this._y=s*S+this._y*M,this._z=o*S+this._z*M,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),s=Math.sqrt(1-i),o=Math.sqrt(i);return this.set(s*Math.sin(e),s*Math.cos(e),o*Math.sin(t),o*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class le{constructor(e=0,t=0,i=0){le.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(XS.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(XS.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[3]*i+o[6]*s,this.y=o[1]*t+o[4]*i+o[7]*s,this.z=o[2]*t+o[5]*i+o[8]*s,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,s=this.z,o=e.elements,c=1/(o[3]*t+o[7]*i+o[11]*s+o[15]);return this.x=(o[0]*t+o[4]*i+o[8]*s+o[12])*c,this.y=(o[1]*t+o[5]*i+o[9]*s+o[13])*c,this.z=(o[2]*t+o[6]*i+o[10]*s+o[14])*c,this}applyQuaternion(e){const t=this.x,i=this.y,s=this.z,o=e.x,c=e.y,h=e.z,m=e.w,x=2*(c*s-h*i),b=2*(h*t-o*s),S=2*(o*i-c*t);return this.x=t+m*x+c*S-h*b,this.y=i+m*b+h*x-o*S,this.z=s+m*S+o*b-c*x,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,s=this.z,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*s,this.y=o[1]*t+o[5]*i+o[9]*s,this.z=o[2]*t+o[6]*i+o[10]*s,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,s=e.y,o=e.z,c=t.x,h=t.y,m=t.z;return this.x=s*m-o*h,this.y=o*c-i*m,this.z=i*h-s*c,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return tx.copy(this).projectOnVector(e),this.sub(tx)}reflect(e){return this.sub(tx.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Un(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,s=this.z-e.z;return t*t+i*i+s*s}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const s=Math.sin(t)*e;return this.x=s*Math.sin(i),this.y=Math.cos(t)*e,this.z=s*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),s=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=s,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const tx=new le,XS=new li;class Vi{constructor(e=new le(1/0,1/0,1/0),t=new le(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Xr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Xr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Xr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const o=i.getAttribute("position");if(t===!0&&o!==void 0&&e.isInstancedMesh!==!0)for(let c=0,h=o.count;c<h;c++)e.isMesh===!0?e.getVertexPosition(c,Xr):Xr.fromBufferAttribute(o,c),Xr.applyMatrix4(e.matrixWorld),this.expandByPoint(Xr);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),gf.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),gf.copy(i.boundingBox)),gf.applyMatrix4(e.matrixWorld),this.union(gf)}const s=e.children;for(let o=0,c=s.length;o<c;o++)this.expandByObject(s[o],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Xr),Xr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wu),mf.subVectors(this.max,wu),Ml.subVectors(e.a,wu),Al.subVectors(e.b,wu),Cl.subVectors(e.c,wu),xa.subVectors(Al,Ml),ya.subVectors(Cl,Al),po.subVectors(Ml,Cl);let t=[0,-xa.z,xa.y,0,-ya.z,ya.y,0,-po.z,po.y,xa.z,0,-xa.x,ya.z,0,-ya.x,po.z,0,-po.x,-xa.y,xa.x,0,-ya.y,ya.x,0,-po.y,po.x,0];return!nx(t,Ml,Al,Cl,mf)||(t=[1,0,0,0,1,0,0,0,1],!nx(t,Ml,Al,Cl,mf))?!1:(vf.crossVectors(xa,ya),t=[vf.x,vf.y,vf.z],nx(t,Ml,Al,Cl,mf))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Xr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Xr).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Fs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Fs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Fs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Fs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Fs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Fs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Fs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Fs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Fs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Fs=[new le,new le,new le,new le,new le,new le,new le,new le],Xr=new le,gf=new Vi,Ml=new le,Al=new le,Cl=new le,xa=new le,ya=new le,po=new le,wu=new le,mf=new le,vf=new le,go=new le;function nx(n,e,t,i,s){for(let o=0,c=n.length-3;o<=c;o+=3){go.fromArray(n,o);const h=s.x*Math.abs(go.x)+s.y*Math.abs(go.y)+s.z*Math.abs(go.z),m=e.dot(go),x=t.dot(go),b=i.dot(go);if(Math.max(-Math.max(m,x,b),Math.min(m,x,b))>h)return!1}return!0}const uI=new Vi,Su=new le,ix=new le;class ki{constructor(e=new le,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):uI.setFromPoints(e).getCenter(i);let s=0;for(let o=0,c=e.length;o<c;o++)s=Math.max(s,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(s),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Su.subVectors(e,this.center);const t=Su.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),s=(i-this.radius)*.5;this.center.addScaledVector(Su,s/i),this.radius+=s}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(ix.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Su.copy(e.center).add(ix)),this.expandByPoint(Su.copy(e.center).sub(ix))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Os=new le,rx=new le,xf=new le,ba=new le,sx=new le,yf=new le,ax=new le;class Hc{constructor(e=new le,t=new le(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Os)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Os.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Os.copy(this.origin).addScaledVector(this.direction,t),Os.distanceToSquared(e))}distanceSqToSegment(e,t,i,s){rx.copy(e).add(t).multiplyScalar(.5),xf.copy(t).sub(e).normalize(),ba.copy(this.origin).sub(rx);const o=e.distanceTo(t)*.5,c=-this.direction.dot(xf),h=ba.dot(this.direction),m=-ba.dot(xf),x=ba.lengthSq(),b=Math.abs(1-c*c);let S,M,P,L;if(b>0)if(S=c*m-h,M=c*h-m,L=o*b,S>=0)if(M>=-L)if(M<=L){const z=1/b;S*=z,M*=z,P=S*(S+c*M+2*h)+M*(c*S+M+2*m)+x}else M=o,S=Math.max(0,-(c*M+h)),P=-S*S+M*(M+2*m)+x;else M=-o,S=Math.max(0,-(c*M+h)),P=-S*S+M*(M+2*m)+x;else M<=-L?(S=Math.max(0,-(-c*o+h)),M=S>0?-o:Math.min(Math.max(-o,-m),o),P=-S*S+M*(M+2*m)+x):M<=L?(S=0,M=Math.min(Math.max(-o,-m),o),P=M*(M+2*m)+x):(S=Math.max(0,-(c*o+h)),M=S>0?o:Math.min(Math.max(-o,-m),o),P=-S*S+M*(M+2*m)+x);else M=c>0?-o:o,S=Math.max(0,-(c*M+h)),P=-S*S+M*(M+2*m)+x;return i&&i.copy(this.origin).addScaledVector(this.direction,S),s&&s.copy(rx).addScaledVector(xf,M),P}intersectSphere(e,t){Os.subVectors(e.center,this.origin);const i=Os.dot(this.direction),s=Os.dot(Os)-i*i,o=e.radius*e.radius;if(s>o)return null;const c=Math.sqrt(o-s),h=i-c,m=i+c;return m<0?null:h<0?this.at(m,t):this.at(h,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,s,o,c,h,m;const x=1/this.direction.x,b=1/this.direction.y,S=1/this.direction.z,M=this.origin;return x>=0?(i=(e.min.x-M.x)*x,s=(e.max.x-M.x)*x):(i=(e.max.x-M.x)*x,s=(e.min.x-M.x)*x),b>=0?(o=(e.min.y-M.y)*b,c=(e.max.y-M.y)*b):(o=(e.max.y-M.y)*b,c=(e.min.y-M.y)*b),i>c||o>s||((o>i||isNaN(i))&&(i=o),(c<s||isNaN(s))&&(s=c),S>=0?(h=(e.min.z-M.z)*S,m=(e.max.z-M.z)*S):(h=(e.max.z-M.z)*S,m=(e.min.z-M.z)*S),i>m||h>s)||((h>i||i!==i)&&(i=h),(m<s||s!==s)&&(s=m),s<0)?null:this.at(i>=0?i:s,t)}intersectsBox(e){return this.intersectBox(e,Os)!==null}intersectTriangle(e,t,i,s,o){sx.subVectors(t,e),yf.subVectors(i,e),ax.crossVectors(sx,yf);let c=this.direction.dot(ax),h;if(c>0){if(s)return null;h=1}else if(c<0)h=-1,c=-c;else return null;ba.subVectors(this.origin,e);const m=h*this.direction.dot(yf.crossVectors(ba,yf));if(m<0)return null;const x=h*this.direction.dot(sx.cross(ba));if(x<0||m+x>c)return null;const b=-h*ba.dot(ax);return b<0?null:this.at(b/c,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class gt{constructor(e,t,i,s,o,c,h,m,x,b,S,M,P,L,z,F){gt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,s,o,c,h,m,x,b,S,M,P,L,z,F)}set(e,t,i,s,o,c,h,m,x,b,S,M,P,L,z,F){const k=this.elements;return k[0]=e,k[4]=t,k[8]=i,k[12]=s,k[1]=o,k[5]=c,k[9]=h,k[13]=m,k[2]=x,k[6]=b,k[10]=S,k[14]=M,k[3]=P,k[7]=L,k[11]=z,k[15]=F,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new gt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,s=1/El.setFromMatrixColumn(e,0).length(),o=1/El.setFromMatrixColumn(e,1).length(),c=1/El.setFromMatrixColumn(e,2).length();return t[0]=i[0]*s,t[1]=i[1]*s,t[2]=i[2]*s,t[3]=0,t[4]=i[4]*o,t[5]=i[5]*o,t[6]=i[6]*o,t[7]=0,t[8]=i[8]*c,t[9]=i[9]*c,t[10]=i[10]*c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,s=e.y,o=e.z,c=Math.cos(i),h=Math.sin(i),m=Math.cos(s),x=Math.sin(s),b=Math.cos(o),S=Math.sin(o);if(e.order==="XYZ"){const M=c*b,P=c*S,L=h*b,z=h*S;t[0]=m*b,t[4]=-m*S,t[8]=x,t[1]=P+L*x,t[5]=M-z*x,t[9]=-h*m,t[2]=z-M*x,t[6]=L+P*x,t[10]=c*m}else if(e.order==="YXZ"){const M=m*b,P=m*S,L=x*b,z=x*S;t[0]=M+z*h,t[4]=L*h-P,t[8]=c*x,t[1]=c*S,t[5]=c*b,t[9]=-h,t[2]=P*h-L,t[6]=z+M*h,t[10]=c*m}else if(e.order==="ZXY"){const M=m*b,P=m*S,L=x*b,z=x*S;t[0]=M-z*h,t[4]=-c*S,t[8]=L+P*h,t[1]=P+L*h,t[5]=c*b,t[9]=z-M*h,t[2]=-c*x,t[6]=h,t[10]=c*m}else if(e.order==="ZYX"){const M=c*b,P=c*S,L=h*b,z=h*S;t[0]=m*b,t[4]=L*x-P,t[8]=M*x+z,t[1]=m*S,t[5]=z*x+M,t[9]=P*x-L,t[2]=-x,t[6]=h*m,t[10]=c*m}else if(e.order==="YZX"){const M=c*m,P=c*x,L=h*m,z=h*x;t[0]=m*b,t[4]=z-M*S,t[8]=L*S+P,t[1]=S,t[5]=c*b,t[9]=-h*b,t[2]=-x*b,t[6]=P*S+L,t[10]=M-z*S}else if(e.order==="XZY"){const M=c*m,P=c*x,L=h*m,z=h*x;t[0]=m*b,t[4]=-S,t[8]=x*b,t[1]=M*S+z,t[5]=c*b,t[9]=P*S-L,t[2]=L*S-P,t[6]=h*b,t[10]=z*S+M}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(hI,e,dI)}lookAt(e,t,i){const s=this.elements;return ur.subVectors(e,t),ur.lengthSq()===0&&(ur.z=1),ur.normalize(),wa.crossVectors(i,ur),wa.lengthSq()===0&&(Math.abs(i.z)===1?ur.x+=1e-4:ur.z+=1e-4,ur.normalize(),wa.crossVectors(i,ur)),wa.normalize(),bf.crossVectors(ur,wa),s[0]=wa.x,s[4]=bf.x,s[8]=ur.x,s[1]=wa.y,s[5]=bf.y,s[9]=ur.y,s[2]=wa.z,s[6]=bf.z,s[10]=ur.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,s=t.elements,o=this.elements,c=i[0],h=i[4],m=i[8],x=i[12],b=i[1],S=i[5],M=i[9],P=i[13],L=i[2],z=i[6],F=i[10],k=i[14],R=i[3],O=i[7],W=i[11],Z=i[15],J=s[0],te=s[4],re=s[8],ee=s[12],K=s[1],se=s[5],ge=s[9],xe=s[13],Re=s[2],Le=s[6],Ae=s[10],ze=s[14],ce=s[3],we=s[7],be=s[11],Ie=s[15];return o[0]=c*J+h*K+m*Re+x*ce,o[4]=c*te+h*se+m*Le+x*we,o[8]=c*re+h*ge+m*Ae+x*be,o[12]=c*ee+h*xe+m*ze+x*Ie,o[1]=b*J+S*K+M*Re+P*ce,o[5]=b*te+S*se+M*Le+P*we,o[9]=b*re+S*ge+M*Ae+P*be,o[13]=b*ee+S*xe+M*ze+P*Ie,o[2]=L*J+z*K+F*Re+k*ce,o[6]=L*te+z*se+F*Le+k*we,o[10]=L*re+z*ge+F*Ae+k*be,o[14]=L*ee+z*xe+F*ze+k*Ie,o[3]=R*J+O*K+W*Re+Z*ce,o[7]=R*te+O*se+W*Le+Z*we,o[11]=R*re+O*ge+W*Ae+Z*be,o[15]=R*ee+O*xe+W*ze+Z*Ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],s=e[8],o=e[12],c=e[1],h=e[5],m=e[9],x=e[13],b=e[2],S=e[6],M=e[10],P=e[14],L=e[3],z=e[7],F=e[11],k=e[15];return L*(+o*m*S-s*x*S-o*h*M+i*x*M+s*h*P-i*m*P)+z*(+t*m*P-t*x*M+o*c*M-s*c*P+s*x*b-o*m*b)+F*(+t*x*S-t*h*P-o*c*S+i*c*P+o*h*b-i*x*b)+k*(-s*h*b-t*m*S+t*h*M+s*c*S-i*c*M+i*m*b)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const s=this.elements;return e.isVector3?(s[12]=e.x,s[13]=e.y,s[14]=e.z):(s[12]=e,s[13]=t,s[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],s=e[2],o=e[3],c=e[4],h=e[5],m=e[6],x=e[7],b=e[8],S=e[9],M=e[10],P=e[11],L=e[12],z=e[13],F=e[14],k=e[15],R=S*F*x-z*M*x+z*m*P-h*F*P-S*m*k+h*M*k,O=L*M*x-b*F*x-L*m*P+c*F*P+b*m*k-c*M*k,W=b*z*x-L*S*x+L*h*P-c*z*P-b*h*k+c*S*k,Z=L*S*m-b*z*m-L*h*M+c*z*M+b*h*F-c*S*F,J=t*R+i*O+s*W+o*Z;if(J===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const te=1/J;return e[0]=R*te,e[1]=(z*M*o-S*F*o-z*s*P+i*F*P+S*s*k-i*M*k)*te,e[2]=(h*F*o-z*m*o+z*s*x-i*F*x-h*s*k+i*m*k)*te,e[3]=(S*m*o-h*M*o-S*s*x+i*M*x+h*s*P-i*m*P)*te,e[4]=O*te,e[5]=(b*F*o-L*M*o+L*s*P-t*F*P-b*s*k+t*M*k)*te,e[6]=(L*m*o-c*F*o-L*s*x+t*F*x+c*s*k-t*m*k)*te,e[7]=(c*M*o-b*m*o+b*s*x-t*M*x-c*s*P+t*m*P)*te,e[8]=W*te,e[9]=(L*S*o-b*z*o-L*i*P+t*z*P+b*i*k-t*S*k)*te,e[10]=(c*z*o-L*h*o+L*i*x-t*z*x-c*i*k+t*h*k)*te,e[11]=(b*h*o-c*S*o-b*i*x+t*S*x+c*i*P-t*h*P)*te,e[12]=Z*te,e[13]=(b*z*s-L*S*s+L*i*M-t*z*M-b*i*F+t*S*F)*te,e[14]=(L*h*s-c*z*s-L*i*m+t*z*m+c*i*F-t*h*F)*te,e[15]=(c*S*s-b*h*s+b*i*m-t*S*m-c*i*M+t*h*M)*te,this}scale(e){const t=this.elements,i=e.x,s=e.y,o=e.z;return t[0]*=i,t[4]*=s,t[8]*=o,t[1]*=i,t[5]*=s,t[9]*=o,t[2]*=i,t[6]*=s,t[10]*=o,t[3]*=i,t[7]*=s,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],s=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,s))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),s=Math.sin(t),o=1-i,c=e.x,h=e.y,m=e.z,x=o*c,b=o*h;return this.set(x*c+i,x*h-s*m,x*m+s*h,0,x*h+s*m,b*h+i,b*m-s*c,0,x*m-s*h,b*m+s*c,o*m*m+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,s,o,c){return this.set(1,i,o,0,e,1,c,0,t,s,1,0,0,0,0,1),this}compose(e,t,i){const s=this.elements,o=t._x,c=t._y,h=t._z,m=t._w,x=o+o,b=c+c,S=h+h,M=o*x,P=o*b,L=o*S,z=c*b,F=c*S,k=h*S,R=m*x,O=m*b,W=m*S,Z=i.x,J=i.y,te=i.z;return s[0]=(1-(z+k))*Z,s[1]=(P+W)*Z,s[2]=(L-O)*Z,s[3]=0,s[4]=(P-W)*J,s[5]=(1-(M+k))*J,s[6]=(F+R)*J,s[7]=0,s[8]=(L+O)*te,s[9]=(F-R)*te,s[10]=(1-(M+z))*te,s[11]=0,s[12]=e.x,s[13]=e.y,s[14]=e.z,s[15]=1,this}decompose(e,t,i){const s=this.elements;let o=El.set(s[0],s[1],s[2]).length();const c=El.set(s[4],s[5],s[6]).length(),h=El.set(s[8],s[9],s[10]).length();this.determinant()<0&&(o=-o),e.x=s[12],e.y=s[13],e.z=s[14],Yr.copy(this);const x=1/o,b=1/c,S=1/h;return Yr.elements[0]*=x,Yr.elements[1]*=x,Yr.elements[2]*=x,Yr.elements[4]*=b,Yr.elements[5]*=b,Yr.elements[6]*=b,Yr.elements[8]*=S,Yr.elements[9]*=S,Yr.elements[10]*=S,t.setFromRotationMatrix(Yr),i.x=o,i.y=c,i.z=h,this}makePerspective(e,t,i,s,o,c,h=ws){const m=this.elements,x=2*o/(t-e),b=2*o/(i-s),S=(t+e)/(t-e),M=(i+s)/(i-s);let P,L;if(h===ws)P=-(c+o)/(c-o),L=-2*c*o/(c-o);else if(h===Nh)P=-c/(c-o),L=-c*o/(c-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+h);return m[0]=x,m[4]=0,m[8]=S,m[12]=0,m[1]=0,m[5]=b,m[9]=M,m[13]=0,m[2]=0,m[6]=0,m[10]=P,m[14]=L,m[3]=0,m[7]=0,m[11]=-1,m[15]=0,this}makeOrthographic(e,t,i,s,o,c,h=ws){const m=this.elements,x=1/(t-e),b=1/(i-s),S=1/(c-o),M=(t+e)*x,P=(i+s)*b;let L,z;if(h===ws)L=(c+o)*S,z=-2*S;else if(h===Nh)L=o*S,z=-1*S;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+h);return m[0]=2*x,m[4]=0,m[8]=0,m[12]=-M,m[1]=0,m[5]=2*b,m[9]=0,m[13]=-P,m[2]=0,m[6]=0,m[10]=z,m[14]=-L,m[3]=0,m[7]=0,m[11]=0,m[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let s=0;s<16;s++)if(t[s]!==i[s])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const El=new le,Yr=new gt,hI=new le(0,0,0),dI=new le(1,1,1),wa=new le,bf=new le,ur=new le,YS=new gt,jS=new li;class ci{constructor(e=0,t=0,i=0,s=ci.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=s}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,s=this._order){return this._x=e,this._y=t,this._z=i,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const s=e.elements,o=s[0],c=s[4],h=s[8],m=s[1],x=s[5],b=s[9],S=s[2],M=s[6],P=s[10];switch(t){case"XYZ":this._y=Math.asin(Un(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-b,P),this._z=Math.atan2(-c,o)):(this._x=Math.atan2(M,x),this._z=0);break;case"YXZ":this._x=Math.asin(-Un(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(h,P),this._z=Math.atan2(m,x)):(this._y=Math.atan2(-S,o),this._z=0);break;case"ZXY":this._x=Math.asin(Un(M,-1,1)),Math.abs(M)<.9999999?(this._y=Math.atan2(-S,P),this._z=Math.atan2(-c,x)):(this._y=0,this._z=Math.atan2(m,o));break;case"ZYX":this._y=Math.asin(-Un(S,-1,1)),Math.abs(S)<.9999999?(this._x=Math.atan2(M,P),this._z=Math.atan2(m,o)):(this._x=0,this._z=Math.atan2(-c,x));break;case"YZX":this._z=Math.asin(Un(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(-b,x),this._y=Math.atan2(-S,o)):(this._x=0,this._y=Math.atan2(h,P));break;case"XZY":this._z=Math.asin(-Un(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(M,x),this._y=Math.atan2(h,o)):(this._x=Math.atan2(-b,P),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return YS.makeRotationFromQuaternion(e),this.setFromRotationMatrix(YS,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return jS.setFromEuler(this),this.setFromQuaternion(jS,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ci.DEFAULT_ORDER="XYZ";class Go{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let fI=0;const qS=new le,Tl=new li,zs=new gt,wf=new le,_u=new le,pI=new le,gI=new li,ZS=new le(1,0,0),KS=new le(0,1,0),JS=new le(0,0,1),$S={type:"added"},mI={type:"removed"},Pl={type:"childadded",child:null},ox={type:"childremoved",child:null};class Qt extends la{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:fI++}),this.uuid=mr(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Qt.DEFAULT_UP.clone();const e=new le,t=new ci,i=new li,s=new le(1,1,1);function o(){i.setFromEuler(t,!1)}function c(){t.setFromQuaternion(i,void 0,!1)}t._onChange(o),i._onChange(c),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:s},modelViewMatrix:{value:new gt},normalMatrix:{value:new Wt}}),this.matrix=new gt,this.matrixWorld=new gt,this.matrixAutoUpdate=Qt.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Go,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Tl.setFromAxisAngle(e,t),this.quaternion.multiply(Tl),this}rotateOnWorldAxis(e,t){return Tl.setFromAxisAngle(e,t),this.quaternion.premultiply(Tl),this}rotateX(e){return this.rotateOnAxis(ZS,e)}rotateY(e){return this.rotateOnAxis(KS,e)}rotateZ(e){return this.rotateOnAxis(JS,e)}translateOnAxis(e,t){return qS.copy(e).applyQuaternion(this.quaternion),this.position.add(qS.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(ZS,e)}translateY(e){return this.translateOnAxis(KS,e)}translateZ(e){return this.translateOnAxis(JS,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(zs.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?wf.copy(e):wf.set(e,t,i);const s=this.parent;this.updateWorldMatrix(!0,!1),_u.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?zs.lookAt(_u,wf,this.up):zs.lookAt(wf,_u,this.up),this.quaternion.setFromRotationMatrix(zs),s&&(zs.extractRotation(s.matrixWorld),Tl.setFromRotationMatrix(zs),this.quaternion.premultiply(Tl.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent($S),Pl.child=e,this.dispatchEvent(Pl),Pl.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(mI),ox.child=e,this.dispatchEvent(ox),ox.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),zs.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),zs.multiply(e.parent.matrixWorld)),e.applyMatrix4(zs),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent($S),Pl.child=e,this.dispatchEvent(Pl),Pl.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,s=this.children.length;i<s;i++){const c=this.children[i].getObjectByProperty(e,t);if(c!==void 0)return c}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const s=this.children;for(let o=0,c=s.length;o<c;o++)s[o].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_u,e,pI),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_u,gI,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,s=t.length;i<s;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const s=this.children;for(let o=0,c=s.length;o<c;o++)s[o].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const s={};s.uuid=this.uuid,s.type=this.type,this.name!==""&&(s.name=this.name),this.castShadow===!0&&(s.castShadow=!0),this.receiveShadow===!0&&(s.receiveShadow=!0),this.visible===!1&&(s.visible=!1),this.frustumCulled===!1&&(s.frustumCulled=!1),this.renderOrder!==0&&(s.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(s.userData=this.userData),s.layers=this.layers.mask,s.matrix=this.matrix.toArray(),s.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(s.matrixAutoUpdate=!1),this.isInstancedMesh&&(s.type="InstancedMesh",s.count=this.count,s.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(s.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(s.type="BatchedMesh",s.perObjectFrustumCulled=this.perObjectFrustumCulled,s.sortObjects=this.sortObjects,s.drawRanges=this._drawRanges,s.reservedRanges=this._reservedRanges,s.visibility=this._visibility,s.active=this._active,s.bounds=this._bounds.map(h=>({boxInitialized:h.boxInitialized,boxMin:h.box.min.toArray(),boxMax:h.box.max.toArray(),sphereInitialized:h.sphereInitialized,sphereRadius:h.sphere.radius,sphereCenter:h.sphere.center.toArray()})),s.maxInstanceCount=this._maxInstanceCount,s.maxVertexCount=this._maxVertexCount,s.maxIndexCount=this._maxIndexCount,s.geometryInitialized=this._geometryInitialized,s.geometryCount=this._geometryCount,s.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(s.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(s.boundingSphere={center:s.boundingSphere.center.toArray(),radius:s.boundingSphere.radius}),this.boundingBox!==null&&(s.boundingBox={min:s.boundingBox.min.toArray(),max:s.boundingBox.max.toArray()}));function o(h,m){return h[m.uuid]===void 0&&(h[m.uuid]=m.toJSON(e)),m.uuid}if(this.isScene)this.background&&(this.background.isColor?s.background=this.background.toJSON():this.background.isTexture&&(s.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(s.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){s.geometry=o(e.geometries,this.geometry);const h=this.geometry.parameters;if(h!==void 0&&h.shapes!==void 0){const m=h.shapes;if(Array.isArray(m))for(let x=0,b=m.length;x<b;x++){const S=m[x];o(e.shapes,S)}else o(e.shapes,m)}}if(this.isSkinnedMesh&&(s.bindMode=this.bindMode,s.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),s.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const h=[];for(let m=0,x=this.material.length;m<x;m++)h.push(o(e.materials,this.material[m]));s.material=h}else s.material=o(e.materials,this.material);if(this.children.length>0){s.children=[];for(let h=0;h<this.children.length;h++)s.children.push(this.children[h].toJSON(e).object)}if(this.animations.length>0){s.animations=[];for(let h=0;h<this.animations.length;h++){const m=this.animations[h];s.animations.push(o(e.animations,m))}}if(t){const h=c(e.geometries),m=c(e.materials),x=c(e.textures),b=c(e.images),S=c(e.shapes),M=c(e.skeletons),P=c(e.animations),L=c(e.nodes);h.length>0&&(i.geometries=h),m.length>0&&(i.materials=m),x.length>0&&(i.textures=x),b.length>0&&(i.images=b),S.length>0&&(i.shapes=S),M.length>0&&(i.skeletons=M),P.length>0&&(i.animations=P),L.length>0&&(i.nodes=L)}return i.object=s,i;function c(h){const m=[];for(const x in h){const b=h[x];delete b.metadata,m.push(b)}return m}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const s=e.children[i];this.add(s.clone())}return this}}Qt.DEFAULT_UP=new le(0,1,0);Qt.DEFAULT_MATRIX_AUTO_UPDATE=!0;Qt.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const jr=new le,Us=new le,lx=new le,Bs=new le,kl=new le,Rl=new le,QS=new le,cx=new le,ux=new le,hx=new le;class fr{constructor(e=new le,t=new le,i=new le){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,s){s.subVectors(i,t),jr.subVectors(e,t),s.cross(jr);const o=s.lengthSq();return o>0?s.multiplyScalar(1/Math.sqrt(o)):s.set(0,0,0)}static getBarycoord(e,t,i,s,o){jr.subVectors(s,t),Us.subVectors(i,t),lx.subVectors(e,t);const c=jr.dot(jr),h=jr.dot(Us),m=jr.dot(lx),x=Us.dot(Us),b=Us.dot(lx),S=c*x-h*h;if(S===0)return o.set(0,0,0),null;const M=1/S,P=(x*m-h*b)*M,L=(c*b-h*m)*M;return o.set(1-P-L,L,P)}static containsPoint(e,t,i,s){return this.getBarycoord(e,t,i,s,Bs)===null?!1:Bs.x>=0&&Bs.y>=0&&Bs.x+Bs.y<=1}static getInterpolation(e,t,i,s,o,c,h,m){return this.getBarycoord(e,t,i,s,Bs)===null?(m.x=0,m.y=0,"z"in m&&(m.z=0),"w"in m&&(m.w=0),null):(m.setScalar(0),m.addScaledVector(o,Bs.x),m.addScaledVector(c,Bs.y),m.addScaledVector(h,Bs.z),m)}static isFrontFacing(e,t,i,s){return jr.subVectors(i,t),Us.subVectors(e,t),jr.cross(Us).dot(s)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,s){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[s]),this}setFromAttributeAndIndices(e,t,i,s){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,s),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return jr.subVectors(this.c,this.b),Us.subVectors(this.a,this.b),jr.cross(Us).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return fr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return fr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,s,o){return fr.getInterpolation(e,this.a,this.b,this.c,t,i,s,o)}containsPoint(e){return fr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return fr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,s=this.b,o=this.c;let c,h;kl.subVectors(s,i),Rl.subVectors(o,i),cx.subVectors(e,i);const m=kl.dot(cx),x=Rl.dot(cx);if(m<=0&&x<=0)return t.copy(i);ux.subVectors(e,s);const b=kl.dot(ux),S=Rl.dot(ux);if(b>=0&&S<=b)return t.copy(s);const M=m*S-b*x;if(M<=0&&m>=0&&b<=0)return c=m/(m-b),t.copy(i).addScaledVector(kl,c);hx.subVectors(e,o);const P=kl.dot(hx),L=Rl.dot(hx);if(L>=0&&P<=L)return t.copy(o);const z=P*x-m*L;if(z<=0&&x>=0&&L<=0)return h=x/(x-L),t.copy(i).addScaledVector(Rl,h);const F=b*L-P*S;if(F<=0&&S-b>=0&&P-L>=0)return QS.subVectors(o,s),h=(S-b)/(S-b+(P-L)),t.copy(s).addScaledVector(QS,h);const k=1/(F+z+M);return c=z*k,h=M*k,t.copy(i).addScaledVector(kl,c).addScaledVector(Rl,h)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const rT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Sa={h:0,s:0,l:0},Sf={h:0,s:0,l:0};function dx(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class ot{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const s=e;s&&s.isColor?this.copy(s):typeof s=="number"?this.setHex(s):typeof s=="string"&&this.setStyle(s)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Rr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,fn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,s=fn.workingColorSpace){return this.r=e,this.g=t,this.b=i,fn.toWorkingColorSpace(this,s),this}setHSL(e,t,i,s=fn.workingColorSpace){if(e=yb(e,1),t=Un(t,0,1),i=Un(i,0,1),t===0)this.r=this.g=this.b=i;else{const o=i<=.5?i*(1+t):i+t-i*t,c=2*i-o;this.r=dx(c,o,e+1/3),this.g=dx(c,o,e),this.b=dx(c,o,e-1/3)}return fn.toWorkingColorSpace(this,s),this}setStyle(e,t=Rr){function i(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let s;if(s=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const c=s[1],h=s[2];switch(c){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(h))return i(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(s=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=s[1],c=o.length;if(c===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(c===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Rr){const i=rT[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xc(e.r),this.g=xc(e.g),this.b=xc(e.b),this}copyLinearToSRGB(e){return this.r=Qv(e.r),this.g=Qv(e.g),this.b=Qv(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Rr){return fn.fromWorkingColorSpace(Ci.copy(this),e),Math.round(Un(Ci.r*255,0,255))*65536+Math.round(Un(Ci.g*255,0,255))*256+Math.round(Un(Ci.b*255,0,255))}getHexString(e=Rr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=fn.workingColorSpace){fn.fromWorkingColorSpace(Ci.copy(this),t);const i=Ci.r,s=Ci.g,o=Ci.b,c=Math.max(i,s,o),h=Math.min(i,s,o);let m,x;const b=(h+c)/2;if(h===c)m=0,x=0;else{const S=c-h;switch(x=b<=.5?S/(c+h):S/(2-c-h),c){case i:m=(s-o)/S+(s<o?6:0);break;case s:m=(o-i)/S+2;break;case o:m=(i-s)/S+4;break}m/=6}return e.h=m,e.s=x,e.l=b,e}getRGB(e,t=fn.workingColorSpace){return fn.fromWorkingColorSpace(Ci.copy(this),t),e.r=Ci.r,e.g=Ci.g,e.b=Ci.b,e}getStyle(e=Rr){fn.fromWorkingColorSpace(Ci.copy(this),e);const t=Ci.r,i=Ci.g,s=Ci.b;return e!==Rr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${s.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(s*255)})`}offsetHSL(e,t,i){return this.getHSL(Sa),this.setHSL(Sa.h+e,Sa.s+t,Sa.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Sa),e.getHSL(Sf);const i=rh(Sa.h,Sf.h,t),s=rh(Sa.s,Sf.s,t),o=rh(Sa.l,Sf.l,t);return this.setHSL(i,s,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,s=this.b,o=e.elements;return this.r=o[0]*t+o[3]*i+o[6]*s,this.g=o[1]*t+o[4]*i+o[7]*s,this.b=o[2]*t+o[5]*i+o[8]*s,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ci=new ot;ot.NAMES=rT;let vI=0;class vi extends la{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:vI++}),this.uuid=mr(),this.name="",this.type="Material",this.blending=Ho,this.side=na,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=qp,this.blendDst=Zp,this.blendEquation=La,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ot(0,0,0),this.blendAlpha=0,this.depthFunc=Ch,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Z0,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=To,this.stencilZFail=To,this.stencilZPass=To,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const s=this[t];if(s===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(i):s&&s.isVector3&&i&&i.isVector3?s.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ho&&(i.blending=this.blending),this.side!==na&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==qp&&(i.blendSrc=this.blendSrc),this.blendDst!==Zp&&(i.blendDst=this.blendDst),this.blendEquation!==La&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ch&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Z0&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==To&&(i.stencilFail=this.stencilFail),this.stencilZFail!==To&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==To&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function s(o){const c=[];for(const h in o){const m=o[h];delete m.metadata,c.push(m)}return c}if(t){const o=s(e.textures),c=s(e.images);o.length>0&&(i.textures=o),c.length>0&&(i.images=c)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const s=t.length;i=new Array(s);for(let o=0;o!==s;++o)i[o]=t[o].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class $a extends vi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ci,this.combine=qh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ys=xI();function xI(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),s=new Uint32Array(512);for(let m=0;m<256;++m){const x=m-127;x<-27?(i[m]=0,i[m|256]=32768,s[m]=24,s[m|256]=24):x<-14?(i[m]=1024>>-x-14,i[m|256]=1024>>-x-14|32768,s[m]=-x-1,s[m|256]=-x-1):x<=15?(i[m]=x+15<<10,i[m|256]=x+15<<10|32768,s[m]=13,s[m|256]=13):x<128?(i[m]=31744,i[m|256]=64512,s[m]=24,s[m|256]=24):(i[m]=31744,i[m|256]=64512,s[m]=13,s[m|256]=13)}const o=new Uint32Array(2048),c=new Uint32Array(64),h=new Uint32Array(64);for(let m=1;m<1024;++m){let x=m<<13,b=0;for(;!(x&8388608);)x<<=1,b-=8388608;x&=-8388609,b+=947912704,o[m]=x|b}for(let m=1024;m<2048;++m)o[m]=939524096+(m-1024<<13);for(let m=1;m<31;++m)c[m]=m<<23;c[31]=1199570944,c[32]=2147483648;for(let m=33;m<63;++m)c[m]=2147483648+(m-32<<23);c[63]=3347054592;for(let m=1;m<64;++m)m!==32&&(h[m]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:s,mantissaTable:o,exponentTable:c,offsetTable:h}}function Ji(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Un(n,-65504,65504),Ys.floatView[0]=n;const e=Ys.uint32View[0],t=e>>23&511;return Ys.baseTable[t]+((e&8388607)>>Ys.shiftTable[t])}function Bu(n){const e=n>>10;return Ys.uint32View[0]=Ys.mantissaTable[Ys.offsetTable[e]+(n&1023)]+Ys.exponentTable[e],Ys.floatView[0]}const yI={toHalfFloat:Ji,fromHalfFloat:Bu},qn=new le,_f=new We;class xn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Dh,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=nr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return bb("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let s=0,o=this.itemSize;s<o;s++)this.array[e+s]=t.array[i+s];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)_f.fromBufferAttribute(this,t),_f.applyMatrix3(e),this.setXY(t,_f.x,_f.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix3(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyMatrix4(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.applyNormalMatrix(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qn.fromBufferAttribute(this,t),qn.transformDirection(e),this.setXYZ(t,qn.x,qn.y,qn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Ui(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Xt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Ui(t,this.array)),t}setX(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Ui(t,this.array)),t}setY(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Ui(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Ui(t,this.array)),t}setW(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array),s=Xt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array),s=Xt(s,this.array),o=Xt(o,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=s,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Dh&&(e.usage=this.usage),e}}class bI extends xn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class wI extends xn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class SI extends xn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class _I extends xn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class am extends xn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class MI extends xn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Sb extends xn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class AI extends xn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Bu(this.array[e*this.itemSize]);return this.normalized&&(t=Ui(t,this.array)),t}setX(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize]=Ji(t),this}getY(e){let t=Bu(this.array[e*this.itemSize+1]);return this.normalized&&(t=Ui(t,this.array)),t}setY(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+1]=Ji(t),this}getZ(e){let t=Bu(this.array[e*this.itemSize+2]);return this.normalized&&(t=Ui(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+2]=Ji(t),this}getW(e){let t=Bu(this.array[e*this.itemSize+3]);return this.normalized&&(t=Ui(t,this.array)),t}setW(e,t){return this.normalized&&(t=Xt(t,this.array)),this.array[e*this.itemSize+3]=Ji(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array)),this.array[e+0]=Ji(t),this.array[e+1]=Ji(i),this}setXYZ(e,t,i,s){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array),s=Xt(s,this.array)),this.array[e+0]=Ji(t),this.array[e+1]=Ji(i),this.array[e+2]=Ji(s),this}setXYZW(e,t,i,s,o){return e*=this.itemSize,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array),s=Xt(s,this.array),o=Xt(o,this.array)),this.array[e+0]=Ji(t),this.array[e+1]=Ji(i),this.array[e+2]=Ji(s),this.array[e+3]=Ji(o),this}}class yt extends xn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let CI=0;const kr=new gt,fx=new Qt,Ll=new le,hr=new Vi,Mu=new Vi,si=new le;class Bt extends la{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CI++}),this.uuid=mr(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(eT(e)?Sb:am)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const o=new Wt().getNormalMatrix(e);i.applyNormalMatrix(o),i.needsUpdate=!0}const s=this.attributes.tangent;return s!==void 0&&(s.transformDirection(e),s.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return kr.makeRotationFromQuaternion(e),this.applyMatrix4(kr),this}rotateX(e){return kr.makeRotationX(e),this.applyMatrix4(kr),this}rotateY(e){return kr.makeRotationY(e),this.applyMatrix4(kr),this}rotateZ(e){return kr.makeRotationZ(e),this.applyMatrix4(kr),this}translate(e,t,i){return kr.makeTranslation(e,t,i),this.applyMatrix4(kr),this}scale(e,t,i){return kr.makeScale(e,t,i),this.applyMatrix4(kr),this}lookAt(e){return fx.lookAt(e),fx.updateMatrix(),this.applyMatrix4(fx.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ll).negate(),this.translate(Ll.x,Ll.y,Ll.z),this}setFromPoints(e){const t=[];for(let i=0,s=e.length;i<s;i++){const o=e[i];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new yt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new le(-1/0,-1/0,-1/0),new le(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,s=t.length;i<s;i++){const o=t[i];hr.setFromBufferAttribute(o),this.morphTargetsRelative?(si.addVectors(this.boundingBox.min,hr.min),this.boundingBox.expandByPoint(si),si.addVectors(this.boundingBox.max,hr.max),this.boundingBox.expandByPoint(si)):(this.boundingBox.expandByPoint(hr.min),this.boundingBox.expandByPoint(hr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ki);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new le,1/0);return}if(e){const i=this.boundingSphere.center;if(hr.setFromBufferAttribute(e),t)for(let o=0,c=t.length;o<c;o++){const h=t[o];Mu.setFromBufferAttribute(h),this.morphTargetsRelative?(si.addVectors(hr.min,Mu.min),hr.expandByPoint(si),si.addVectors(hr.max,Mu.max),hr.expandByPoint(si)):(hr.expandByPoint(Mu.min),hr.expandByPoint(Mu.max))}hr.getCenter(i);let s=0;for(let o=0,c=e.count;o<c;o++)si.fromBufferAttribute(e,o),s=Math.max(s,i.distanceToSquared(si));if(t)for(let o=0,c=t.length;o<c;o++){const h=t[o],m=this.morphTargetsRelative;for(let x=0,b=h.count;x<b;x++)si.fromBufferAttribute(h,x),m&&(Ll.fromBufferAttribute(e,x),si.add(Ll)),s=Math.max(s,i.distanceToSquared(si))}this.boundingSphere.radius=Math.sqrt(s),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,s=t.normal,o=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new xn(new Float32Array(4*i.count),4));const c=this.getAttribute("tangent"),h=[],m=[];for(let re=0;re<i.count;re++)h[re]=new le,m[re]=new le;const x=new le,b=new le,S=new le,M=new We,P=new We,L=new We,z=new le,F=new le;function k(re,ee,K){x.fromBufferAttribute(i,re),b.fromBufferAttribute(i,ee),S.fromBufferAttribute(i,K),M.fromBufferAttribute(o,re),P.fromBufferAttribute(o,ee),L.fromBufferAttribute(o,K),b.sub(x),S.sub(x),P.sub(M),L.sub(M);const se=1/(P.x*L.y-L.x*P.y);isFinite(se)&&(z.copy(b).multiplyScalar(L.y).addScaledVector(S,-P.y).multiplyScalar(se),F.copy(S).multiplyScalar(P.x).addScaledVector(b,-L.x).multiplyScalar(se),h[re].add(z),h[ee].add(z),h[K].add(z),m[re].add(F),m[ee].add(F),m[K].add(F))}let R=this.groups;R.length===0&&(R=[{start:0,count:e.count}]);for(let re=0,ee=R.length;re<ee;++re){const K=R[re],se=K.start,ge=K.count;for(let xe=se,Re=se+ge;xe<Re;xe+=3)k(e.getX(xe+0),e.getX(xe+1),e.getX(xe+2))}const O=new le,W=new le,Z=new le,J=new le;function te(re){Z.fromBufferAttribute(s,re),J.copy(Z);const ee=h[re];O.copy(ee),O.sub(Z.multiplyScalar(Z.dot(ee))).normalize(),W.crossVectors(J,ee);const se=W.dot(m[re])<0?-1:1;c.setXYZW(re,O.x,O.y,O.z,se)}for(let re=0,ee=R.length;re<ee;++re){const K=R[re],se=K.start,ge=K.count;for(let xe=se,Re=se+ge;xe<Re;xe+=3)te(e.getX(xe+0)),te(e.getX(xe+1)),te(e.getX(xe+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new xn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let M=0,P=i.count;M<P;M++)i.setXYZ(M,0,0,0);const s=new le,o=new le,c=new le,h=new le,m=new le,x=new le,b=new le,S=new le;if(e)for(let M=0,P=e.count;M<P;M+=3){const L=e.getX(M+0),z=e.getX(M+1),F=e.getX(M+2);s.fromBufferAttribute(t,L),o.fromBufferAttribute(t,z),c.fromBufferAttribute(t,F),b.subVectors(c,o),S.subVectors(s,o),b.cross(S),h.fromBufferAttribute(i,L),m.fromBufferAttribute(i,z),x.fromBufferAttribute(i,F),h.add(b),m.add(b),x.add(b),i.setXYZ(L,h.x,h.y,h.z),i.setXYZ(z,m.x,m.y,m.z),i.setXYZ(F,x.x,x.y,x.z)}else for(let M=0,P=t.count;M<P;M+=3)s.fromBufferAttribute(t,M+0),o.fromBufferAttribute(t,M+1),c.fromBufferAttribute(t,M+2),b.subVectors(c,o),S.subVectors(s,o),b.cross(S),i.setXYZ(M+0,b.x,b.y,b.z),i.setXYZ(M+1,b.x,b.y,b.z),i.setXYZ(M+2,b.x,b.y,b.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)si.fromBufferAttribute(e,t),si.normalize(),e.setXYZ(t,si.x,si.y,si.z)}toNonIndexed(){function e(h,m){const x=h.array,b=h.itemSize,S=h.normalized,M=new x.constructor(m.length*b);let P=0,L=0;for(let z=0,F=m.length;z<F;z++){h.isInterleavedBufferAttribute?P=m[z]*h.data.stride+h.offset:P=m[z]*b;for(let k=0;k<b;k++)M[L++]=x[P++]}return new xn(M,b,S)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Bt,i=this.index.array,s=this.attributes;for(const h in s){const m=s[h],x=e(m,i);t.setAttribute(h,x)}const o=this.morphAttributes;for(const h in o){const m=[],x=o[h];for(let b=0,S=x.length;b<S;b++){const M=x[b],P=e(M,i);m.push(P)}t.morphAttributes[h]=m}t.morphTargetsRelative=this.morphTargetsRelative;const c=this.groups;for(let h=0,m=c.length;h<m;h++){const x=c[h];t.addGroup(x.start,x.count,x.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const m=this.parameters;for(const x in m)m[x]!==void 0&&(e[x]=m[x]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const m in i){const x=i[m];e.data.attributes[m]=x.toJSON(e.data)}const s={};let o=!1;for(const m in this.morphAttributes){const x=this.morphAttributes[m],b=[];for(let S=0,M=x.length;S<M;S++){const P=x[S];b.push(P.toJSON(e.data))}b.length>0&&(s[m]=b,o=!0)}o&&(e.data.morphAttributes=s,e.data.morphTargetsRelative=this.morphTargetsRelative);const c=this.groups;c.length>0&&(e.data.groups=JSON.parse(JSON.stringify(c)));const h=this.boundingSphere;return h!==null&&(e.data.boundingSphere={center:h.center.toArray(),radius:h.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const s=e.attributes;for(const x in s){const b=s[x];this.setAttribute(x,b.clone(t))}const o=e.morphAttributes;for(const x in o){const b=[],S=o[x];for(let M=0,P=S.length;M<P;M++)b.push(S[M].clone(t));this.morphAttributes[x]=b}this.morphTargetsRelative=e.morphTargetsRelative;const c=e.groups;for(let x=0,b=c.length;x<b;x++){const S=c[x];this.addGroup(S.start,S.count,S.materialIndex)}const h=e.boundingBox;h!==null&&(this.boundingBox=h.clone());const m=e.boundingSphere;return m!==null&&(this.boundingSphere=m.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const e_=new gt,mo=new Hc,Mf=new ki,t_=new le,Il=new le,Dl=new le,Nl=new le,px=new le,Af=new le,Cf=new We,Ef=new We,Tf=new We,n_=new le,i_=new le,r_=new le,Pf=new le,kf=new le;class Gn extends Qt{constructor(e=new Bt,t=new $a){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=s.length;o<c;o++){const h=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}getVertexPosition(e,t){const i=this.geometry,s=i.attributes.position,o=i.morphAttributes.position,c=i.morphTargetsRelative;t.fromBufferAttribute(s,e);const h=this.morphTargetInfluences;if(o&&h){Af.set(0,0,0);for(let m=0,x=o.length;m<x;m++){const b=h[m],S=o[m];b!==0&&(px.fromBufferAttribute(S,e),c?Af.addScaledVector(px,b):Af.addScaledVector(px.sub(t),b))}t.add(Af)}return t}raycast(e,t){const i=this.geometry,s=this.material,o=this.matrixWorld;s!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Mf.copy(i.boundingSphere),Mf.applyMatrix4(o),mo.copy(e.ray).recast(e.near),!(Mf.containsPoint(mo.origin)===!1&&(mo.intersectSphere(Mf,t_)===null||mo.origin.distanceToSquared(t_)>(e.far-e.near)**2))&&(e_.copy(o).invert(),mo.copy(e.ray).applyMatrix4(e_),!(i.boundingBox!==null&&mo.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,mo)))}_computeIntersections(e,t,i){let s;const o=this.geometry,c=this.material,h=o.index,m=o.attributes.position,x=o.attributes.uv,b=o.attributes.uv1,S=o.attributes.normal,M=o.groups,P=o.drawRange;if(h!==null)if(Array.isArray(c))for(let L=0,z=M.length;L<z;L++){const F=M[L],k=c[F.materialIndex],R=Math.max(F.start,P.start),O=Math.min(h.count,Math.min(F.start+F.count,P.start+P.count));for(let W=R,Z=O;W<Z;W+=3){const J=h.getX(W),te=h.getX(W+1),re=h.getX(W+2);s=Rf(this,k,e,i,x,b,S,J,te,re),s&&(s.faceIndex=Math.floor(W/3),s.face.materialIndex=F.materialIndex,t.push(s))}}else{const L=Math.max(0,P.start),z=Math.min(h.count,P.start+P.count);for(let F=L,k=z;F<k;F+=3){const R=h.getX(F),O=h.getX(F+1),W=h.getX(F+2);s=Rf(this,c,e,i,x,b,S,R,O,W),s&&(s.faceIndex=Math.floor(F/3),t.push(s))}}else if(m!==void 0)if(Array.isArray(c))for(let L=0,z=M.length;L<z;L++){const F=M[L],k=c[F.materialIndex],R=Math.max(F.start,P.start),O=Math.min(m.count,Math.min(F.start+F.count,P.start+P.count));for(let W=R,Z=O;W<Z;W+=3){const J=W,te=W+1,re=W+2;s=Rf(this,k,e,i,x,b,S,J,te,re),s&&(s.faceIndex=Math.floor(W/3),s.face.materialIndex=F.materialIndex,t.push(s))}}else{const L=Math.max(0,P.start),z=Math.min(m.count,P.start+P.count);for(let F=L,k=z;F<k;F+=3){const R=F,O=F+1,W=F+2;s=Rf(this,c,e,i,x,b,S,R,O,W),s&&(s.faceIndex=Math.floor(F/3),t.push(s))}}}}function EI(n,e,t,i,s,o,c,h){let m;if(e.side===Hi?m=i.intersectTriangle(c,o,s,!0,h):m=i.intersectTriangle(s,o,c,e.side===na,h),m===null)return null;kf.copy(h),kf.applyMatrix4(n.matrixWorld);const x=t.ray.origin.distanceTo(kf);return x<t.near||x>t.far?null:{distance:x,point:kf.clone(),object:n}}function Rf(n,e,t,i,s,o,c,h,m,x){n.getVertexPosition(h,Il),n.getVertexPosition(m,Dl),n.getVertexPosition(x,Nl);const b=EI(n,e,t,i,Il,Dl,Nl,Pf);if(b){s&&(Cf.fromBufferAttribute(s,h),Ef.fromBufferAttribute(s,m),Tf.fromBufferAttribute(s,x),b.uv=fr.getInterpolation(Pf,Il,Dl,Nl,Cf,Ef,Tf,new We)),o&&(Cf.fromBufferAttribute(o,h),Ef.fromBufferAttribute(o,m),Tf.fromBufferAttribute(o,x),b.uv1=fr.getInterpolation(Pf,Il,Dl,Nl,Cf,Ef,Tf,new We)),c&&(n_.fromBufferAttribute(c,h),i_.fromBufferAttribute(c,m),r_.fromBufferAttribute(c,x),b.normal=fr.getInterpolation(Pf,Il,Dl,Nl,n_,i_,r_,new le),b.normal.dot(i.direction)>0&&b.normal.multiplyScalar(-1));const S={a:h,b:m,c:x,normal:new le,materialIndex:0};fr.getNormal(Il,Dl,Nl,S.normal),b.face=S}return b}class rl extends Bt{constructor(e=1,t=1,i=1,s=1,o=1,c=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:s,heightSegments:o,depthSegments:c};const h=this;s=Math.floor(s),o=Math.floor(o),c=Math.floor(c);const m=[],x=[],b=[],S=[];let M=0,P=0;L("z","y","x",-1,-1,i,t,e,c,o,0),L("z","y","x",1,-1,i,t,-e,c,o,1),L("x","z","y",1,1,e,i,t,s,c,2),L("x","z","y",1,-1,e,i,-t,s,c,3),L("x","y","z",1,-1,e,t,i,s,o,4),L("x","y","z",-1,-1,e,t,-i,s,o,5),this.setIndex(m),this.setAttribute("position",new yt(x,3)),this.setAttribute("normal",new yt(b,3)),this.setAttribute("uv",new yt(S,2));function L(z,F,k,R,O,W,Z,J,te,re,ee){const K=W/te,se=Z/re,ge=W/2,xe=Z/2,Re=J/2,Le=te+1,Ae=re+1;let ze=0,ce=0;const we=new le;for(let be=0;be<Ae;be++){const Ie=be*se-xe;for(let Ke=0;Ke<Le;Ke++){const rt=Ke*K-ge;we[z]=rt*R,we[F]=Ie*O,we[k]=Re,x.push(we.x,we.y,we.z),we[z]=0,we[F]=0,we[k]=J>0?1:-1,b.push(we.x,we.y,we.z),S.push(Ke/te),S.push(1-be/re),ze+=1}}for(let be=0;be<re;be++)for(let Ie=0;Ie<te;Ie++){const Ke=M+Ie+Le*be,rt=M+Ie+Le*(be+1),Te=M+(Ie+1)+Le*(be+1),Ve=M+(Ie+1)+Le*be;m.push(Ke,rt,Ve),m.push(rt,Te,Ve),ce+=6}h.addGroup(P,ce,ee),P+=ce,M+=ze}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Pc(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const s=n[t][i];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=s.clone():Array.isArray(s)?e[t][i]=s.slice():e[t][i]=s}}return e}function Oi(n){const e={};for(let t=0;t<n.length;t++){const i=Pc(n[t]);for(const s in i)e[s]=i[s]}return e}function TI(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function sT(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:fn.workingColorSpace}const aT={clone:Pc,merge:Oi};var PI=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,kI=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class as extends vi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=PI,this.fragmentShader=kI,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pc(e.uniforms),this.uniformsGroups=TI(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const s in this.uniforms){const c=this.uniforms[s].value;c&&c.isTexture?t.uniforms[s]={type:"t",value:c.toJSON(e).uuid}:c&&c.isColor?t.uniforms[s]={type:"c",value:c.getHex()}:c&&c.isVector2?t.uniforms[s]={type:"v2",value:c.toArray()}:c&&c.isVector3?t.uniforms[s]={type:"v3",value:c.toArray()}:c&&c.isVector4?t.uniforms[s]={type:"v4",value:c.toArray()}:c&&c.isMatrix3?t.uniforms[s]={type:"m3",value:c.toArray()}:c&&c.isMatrix4?t.uniforms[s]={type:"m4",value:c.toArray()}:t.uniforms[s]={value:c}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const s in this.extensions)this.extensions[s]===!0&&(i[s]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Jh extends Qt{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new gt,this.projectionMatrix=new gt,this.projectionMatrixInverse=new gt,this.coordinateSystem=ws}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _a=new le,s_=new We,a_=new We;class Zn extends Jh{constructor(e=50,t=1,i=.1,s=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=s,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Tc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Wo*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Tc*2*Math.atan(Math.tan(Wo*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){_a.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(_a.x,_a.y).multiplyScalar(-e/_a.z),_a.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(_a.x,_a.y).multiplyScalar(-e/_a.z)}getViewSize(e,t){return this.getViewBounds(e,s_,a_),t.subVectors(a_,s_)}setViewOffset(e,t,i,s,o,c){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Wo*.5*this.fov)/this.zoom,i=2*t,s=this.aspect*i,o=-.5*s;const c=this.view;if(this.view!==null&&this.view.enabled){const m=c.fullWidth,x=c.fullHeight;o+=c.offsetX*s/m,t-=c.offsetY*i/x,s*=c.width/m,i*=c.height/x}const h=this.filmOffset;h!==0&&(o+=e*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+s,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Fl=-90,Ol=1;class oT extends Qt{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const s=new Zn(Fl,Ol,e,t);s.layers=this.layers,this.add(s);const o=new Zn(Fl,Ol,e,t);o.layers=this.layers,this.add(o);const c=new Zn(Fl,Ol,e,t);c.layers=this.layers,this.add(c);const h=new Zn(Fl,Ol,e,t);h.layers=this.layers,this.add(h);const m=new Zn(Fl,Ol,e,t);m.layers=this.layers,this.add(m);const x=new Zn(Fl,Ol,e,t);x.layers=this.layers,this.add(x)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,s,o,c,h,m]=t;for(const x of t)this.remove(x);if(e===ws)i.up.set(0,1,0),i.lookAt(1,0,0),s.up.set(0,1,0),s.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),c.up.set(0,0,1),c.lookAt(0,-1,0),h.up.set(0,1,0),h.lookAt(0,0,1),m.up.set(0,1,0),m.lookAt(0,0,-1);else if(e===Nh)i.up.set(0,-1,0),i.lookAt(-1,0,0),s.up.set(0,-1,0),s.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),c.up.set(0,0,-1),c.lookAt(0,-1,0),h.up.set(0,-1,0),h.lookAt(0,0,1),m.up.set(0,-1,0),m.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const x of t)this.add(x),x.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:s}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[o,c,h,m,x,b]=this.children,S=e.getRenderTarget(),M=e.getActiveCubeFace(),P=e.getActiveMipmapLevel(),L=e.xr.enabled;e.xr.enabled=!1;const z=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,s),e.render(t,o),e.setRenderTarget(i,1,s),e.render(t,c),e.setRenderTarget(i,2,s),e.render(t,h),e.setRenderTarget(i,3,s),e.render(t,m),e.setRenderTarget(i,4,s),e.render(t,x),i.texture.generateMipmaps=z,e.setRenderTarget(i,5,s),e.render(t,b),e.setRenderTarget(S,M,P),e.xr.enabled=L,i.texture.needsPMREMUpdate=!0}}class $h extends En{constructor(e,t,i,s,o,c,h,m,x,b){e=e!==void 0?e:[],t=t!==void 0?t:ia,super(e,t,i,s,o,c,h,m,x,b),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class lT extends ss{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},s=[i,i,i,i,i,i];this.texture=new $h(s,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Jn}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},s=new rl(5,5,5),o=new as({name:"CubemapFromEquirect",uniforms:Pc(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Hi,blending:Js});o.uniforms.tEquirect.value=t;const c=new Gn(s,o),h=t.minFilter;return t.minFilter===bs&&(t.minFilter=Jn),new oT(1,10,this).update(e,c),t.minFilter=h,c.geometry.dispose(),c.material.dispose(),this}clear(e,t,i,s){const o=e.getRenderTarget();for(let c=0;c<6;c++)e.setRenderTarget(this,c),e.clear(t,i,s);e.setRenderTarget(o)}}const gx=new le,RI=new le,LI=new Wt;class Pa{constructor(e=new le(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,s){return this.normal.set(e,t,i),this.constant=s,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const s=gx.subVectors(i,t).cross(RI.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(s,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(gx),s=this.normal.dot(i);if(s===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/s;return o<0||o>1?null:t.copy(e.start).addScaledVector(i,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||LI.getNormalMatrix(e),s=this.coplanarPoint(gx).applyMatrix4(e),o=this.normal.applyMatrix3(i).normalize();return this.constant=-s.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const vo=new ki,Lf=new le;class Qh{constructor(e=new Pa,t=new Pa,i=new Pa,s=new Pa,o=new Pa,c=new Pa){this.planes=[e,t,i,s,o,c]}set(e,t,i,s,o,c){const h=this.planes;return h[0].copy(e),h[1].copy(t),h[2].copy(i),h[3].copy(s),h[4].copy(o),h[5].copy(c),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ws){const i=this.planes,s=e.elements,o=s[0],c=s[1],h=s[2],m=s[3],x=s[4],b=s[5],S=s[6],M=s[7],P=s[8],L=s[9],z=s[10],F=s[11],k=s[12],R=s[13],O=s[14],W=s[15];if(i[0].setComponents(m-o,M-x,F-P,W-k).normalize(),i[1].setComponents(m+o,M+x,F+P,W+k).normalize(),i[2].setComponents(m+c,M+b,F+L,W+R).normalize(),i[3].setComponents(m-c,M-b,F-L,W-R).normalize(),i[4].setComponents(m-h,M-S,F-z,W-O).normalize(),t===ws)i[5].setComponents(m+h,M+S,F+z,W+O).normalize();else if(t===Nh)i[5].setComponents(h,S,z,O).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),vo.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),vo.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(vo)}intersectsSprite(e){return vo.center.set(0,0,0),vo.radius=.7071067811865476,vo.applyMatrix4(e.matrixWorld),this.intersectsSphere(vo)}intersectsSphere(e){const t=this.planes,i=e.center,s=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(i)<s)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const s=t[i];if(Lf.x=s.normal.x>0?e.max.x:e.min.x,Lf.y=s.normal.y>0?e.max.y:e.min.y,Lf.z=s.normal.z>0?e.max.z:e.min.z,s.distanceToPoint(Lf)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function cT(){let n=null,e=!1,t=null,i=null;function s(o,c){t(o,c),i=n.requestAnimationFrame(s)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(s),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function II(n){const e=new WeakMap;function t(h,m){const x=h.array,b=h.usage,S=x.byteLength,M=n.createBuffer();n.bindBuffer(m,M),n.bufferData(m,x,b),h.onUploadCallback();let P;if(x instanceof Float32Array)P=n.FLOAT;else if(x instanceof Uint16Array)h.isFloat16BufferAttribute?P=n.HALF_FLOAT:P=n.UNSIGNED_SHORT;else if(x instanceof Int16Array)P=n.SHORT;else if(x instanceof Uint32Array)P=n.UNSIGNED_INT;else if(x instanceof Int32Array)P=n.INT;else if(x instanceof Int8Array)P=n.BYTE;else if(x instanceof Uint8Array)P=n.UNSIGNED_BYTE;else if(x instanceof Uint8ClampedArray)P=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+x);return{buffer:M,type:P,bytesPerElement:x.BYTES_PER_ELEMENT,version:h.version,size:S}}function i(h,m,x){const b=m.array,S=m._updateRange,M=m.updateRanges;if(n.bindBuffer(x,h),S.count===-1&&M.length===0&&n.bufferSubData(x,0,b),M.length!==0){for(let P=0,L=M.length;P<L;P++){const z=M[P];n.bufferSubData(x,z.start*b.BYTES_PER_ELEMENT,b,z.start,z.count)}m.clearUpdateRanges()}S.count!==-1&&(n.bufferSubData(x,S.offset*b.BYTES_PER_ELEMENT,b,S.offset,S.count),S.count=-1),m.onUploadCallback()}function s(h){return h.isInterleavedBufferAttribute&&(h=h.data),e.get(h)}function o(h){h.isInterleavedBufferAttribute&&(h=h.data);const m=e.get(h);m&&(n.deleteBuffer(m.buffer),e.delete(h))}function c(h,m){if(h.isGLBufferAttribute){const b=e.get(h);(!b||b.version<h.version)&&e.set(h,{buffer:h.buffer,type:h.type,bytesPerElement:h.elementSize,version:h.version});return}h.isInterleavedBufferAttribute&&(h=h.data);const x=e.get(h);if(x===void 0)e.set(h,t(h,m));else if(x.version<h.version){if(x.size!==h.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(x.buffer,h,m),x.version=h.version}}return{get:s,remove:o,update:c}}class Vc extends Bt{constructor(e=1,t=1,i=1,s=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:s};const o=e/2,c=t/2,h=Math.floor(i),m=Math.floor(s),x=h+1,b=m+1,S=e/h,M=t/m,P=[],L=[],z=[],F=[];for(let k=0;k<b;k++){const R=k*M-c;for(let O=0;O<x;O++){const W=O*S-o;L.push(W,-R,0),z.push(0,0,1),F.push(O/h),F.push(1-k/m)}}for(let k=0;k<m;k++)for(let R=0;R<h;R++){const O=R+x*k,W=R+x*(k+1),Z=R+1+x*(k+1),J=R+1+x*k;P.push(O,W,J),P.push(W,Z,J)}this.setIndex(P),this.setAttribute("position",new yt(L,3)),this.setAttribute("normal",new yt(z,3)),this.setAttribute("uv",new yt(F,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vc(e.width,e.height,e.widthSegments,e.heightSegments)}}var DI=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,NI=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,FI=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,OI=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zI=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,UI=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,BI=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,HI=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,VI=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,WI=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,GI=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,XI=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,YI=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,jI=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,qI=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ZI=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,KI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,JI=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,$I=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,QI=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,e3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,t3=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,n3=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,i3=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,r3=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,s3=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,a3=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,o3=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,l3=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,c3=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,u3="gl_FragColor = linearToOutputTexel( gl_FragColor );",h3=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,d3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,f3=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,p3=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,g3=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,m3=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,v3=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,x3=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,y3=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,b3=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,w3=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,S3=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_3=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,M3=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,A3=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,C3=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,E3=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,T3=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,P3=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,k3=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,R3=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,L3=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,I3=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,D3=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,N3=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,F3=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,O3=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,z3=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,U3=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,B3=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,H3=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,V3=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,W3=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,G3=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,X3=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Y3=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,j3=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,q3=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Z3=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,K3=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,J3=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,$3=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Q3=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,eD=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,tD=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,nD=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,iD=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,rD=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,sD=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,aD=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,oD=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,lD=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,cD=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,uD=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,hD=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dD=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,fD=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,pD=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,gD=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,mD=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,vD=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,xD=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yD=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,bD=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,wD=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,SD=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,_D=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,MD=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,AD=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,CD=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,ED=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,TD=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,PD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,kD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,RD=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,LD=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ID=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,DD=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ND=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,FD=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,OD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,zD=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,BD=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,HD=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,VD=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,WD=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,GD=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,XD=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,YD=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,jD=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qD=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,ZD=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KD=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JD=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,$D=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QD=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,eN=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,tN=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nN=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iN=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,rN=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sN=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aN=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oN=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,lN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cN=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,uN=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,hN=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,dN=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Yt={alphahash_fragment:DI,alphahash_pars_fragment:NI,alphamap_fragment:FI,alphamap_pars_fragment:OI,alphatest_fragment:zI,alphatest_pars_fragment:UI,aomap_fragment:BI,aomap_pars_fragment:HI,batching_pars_vertex:VI,batching_vertex:WI,begin_vertex:GI,beginnormal_vertex:XI,bsdfs:YI,iridescence_fragment:jI,bumpmap_pars_fragment:qI,clipping_planes_fragment:ZI,clipping_planes_pars_fragment:KI,clipping_planes_pars_vertex:JI,clipping_planes_vertex:$I,color_fragment:QI,color_pars_fragment:e3,color_pars_vertex:t3,color_vertex:n3,common:i3,cube_uv_reflection_fragment:r3,defaultnormal_vertex:s3,displacementmap_pars_vertex:a3,displacementmap_vertex:o3,emissivemap_fragment:l3,emissivemap_pars_fragment:c3,colorspace_fragment:u3,colorspace_pars_fragment:h3,envmap_fragment:d3,envmap_common_pars_fragment:f3,envmap_pars_fragment:p3,envmap_pars_vertex:g3,envmap_physical_pars_fragment:C3,envmap_vertex:m3,fog_vertex:v3,fog_pars_vertex:x3,fog_fragment:y3,fog_pars_fragment:b3,gradientmap_pars_fragment:w3,lightmap_pars_fragment:S3,lights_lambert_fragment:_3,lights_lambert_pars_fragment:M3,lights_pars_begin:A3,lights_toon_fragment:E3,lights_toon_pars_fragment:T3,lights_phong_fragment:P3,lights_phong_pars_fragment:k3,lights_physical_fragment:R3,lights_physical_pars_fragment:L3,lights_fragment_begin:I3,lights_fragment_maps:D3,lights_fragment_end:N3,logdepthbuf_fragment:F3,logdepthbuf_pars_fragment:O3,logdepthbuf_pars_vertex:z3,logdepthbuf_vertex:U3,map_fragment:B3,map_pars_fragment:H3,map_particle_fragment:V3,map_particle_pars_fragment:W3,metalnessmap_fragment:G3,metalnessmap_pars_fragment:X3,morphinstance_vertex:Y3,morphcolor_vertex:j3,morphnormal_vertex:q3,morphtarget_pars_vertex:Z3,morphtarget_vertex:K3,normal_fragment_begin:J3,normal_fragment_maps:$3,normal_pars_fragment:Q3,normal_pars_vertex:eD,normal_vertex:tD,normalmap_pars_fragment:nD,clearcoat_normal_fragment_begin:iD,clearcoat_normal_fragment_maps:rD,clearcoat_pars_fragment:sD,iridescence_pars_fragment:aD,opaque_fragment:oD,packing:lD,premultiplied_alpha_fragment:cD,project_vertex:uD,dithering_fragment:hD,dithering_pars_fragment:dD,roughnessmap_fragment:fD,roughnessmap_pars_fragment:pD,shadowmap_pars_fragment:gD,shadowmap_pars_vertex:mD,shadowmap_vertex:vD,shadowmask_pars_fragment:xD,skinbase_vertex:yD,skinning_pars_vertex:bD,skinning_vertex:wD,skinnormal_vertex:SD,specularmap_fragment:_D,specularmap_pars_fragment:MD,tonemapping_fragment:AD,tonemapping_pars_fragment:CD,transmission_fragment:ED,transmission_pars_fragment:TD,uv_pars_fragment:PD,uv_pars_vertex:kD,uv_vertex:RD,worldpos_vertex:LD,background_vert:ID,background_frag:DD,backgroundCube_vert:ND,backgroundCube_frag:FD,cube_vert:OD,cube_frag:zD,depth_vert:UD,depth_frag:BD,distanceRGBA_vert:HD,distanceRGBA_frag:VD,equirect_vert:WD,equirect_frag:GD,linedashed_vert:XD,linedashed_frag:YD,meshbasic_vert:jD,meshbasic_frag:qD,meshlambert_vert:ZD,meshlambert_frag:KD,meshmatcap_vert:JD,meshmatcap_frag:$D,meshnormal_vert:QD,meshnormal_frag:eN,meshphong_vert:tN,meshphong_frag:nN,meshphysical_vert:iN,meshphysical_frag:rN,meshtoon_vert:sN,meshtoon_frag:aN,points_vert:oN,points_frag:lN,shadow_vert:cN,shadow_frag:uN,sprite_vert:hN,sprite_frag:dN},ct={common:{diffuse:{value:new ot(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Wt}},envmap:{envMap:{value:null},envMapRotation:{value:new Wt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Wt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Wt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Wt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Wt},normalScale:{value:new We(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Wt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Wt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Wt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Wt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ot(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ot(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0},uvTransform:{value:new Wt}},sprite:{diffuse:{value:new ot(16777215)},opacity:{value:1},center:{value:new We(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Wt},alphaMap:{value:null},alphaMapTransform:{value:new Wt},alphaTest:{value:0}}},Qr={basic:{uniforms:Oi([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.fog]),vertexShader:Yt.meshbasic_vert,fragmentShader:Yt.meshbasic_frag},lambert:{uniforms:Oi([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new ot(0)}}]),vertexShader:Yt.meshlambert_vert,fragmentShader:Yt.meshlambert_frag},phong:{uniforms:Oi([ct.common,ct.specularmap,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,ct.lights,{emissive:{value:new ot(0)},specular:{value:new ot(1118481)},shininess:{value:30}}]),vertexShader:Yt.meshphong_vert,fragmentShader:Yt.meshphong_frag},standard:{uniforms:Oi([ct.common,ct.envmap,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.roughnessmap,ct.metalnessmap,ct.fog,ct.lights,{emissive:{value:new ot(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag},toon:{uniforms:Oi([ct.common,ct.aomap,ct.lightmap,ct.emissivemap,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.gradientmap,ct.fog,ct.lights,{emissive:{value:new ot(0)}}]),vertexShader:Yt.meshtoon_vert,fragmentShader:Yt.meshtoon_frag},matcap:{uniforms:Oi([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,ct.fog,{matcap:{value:null}}]),vertexShader:Yt.meshmatcap_vert,fragmentShader:Yt.meshmatcap_frag},points:{uniforms:Oi([ct.points,ct.fog]),vertexShader:Yt.points_vert,fragmentShader:Yt.points_frag},dashed:{uniforms:Oi([ct.common,ct.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Yt.linedashed_vert,fragmentShader:Yt.linedashed_frag},depth:{uniforms:Oi([ct.common,ct.displacementmap]),vertexShader:Yt.depth_vert,fragmentShader:Yt.depth_frag},normal:{uniforms:Oi([ct.common,ct.bumpmap,ct.normalmap,ct.displacementmap,{opacity:{value:1}}]),vertexShader:Yt.meshnormal_vert,fragmentShader:Yt.meshnormal_frag},sprite:{uniforms:Oi([ct.sprite,ct.fog]),vertexShader:Yt.sprite_vert,fragmentShader:Yt.sprite_frag},background:{uniforms:{uvTransform:{value:new Wt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Yt.background_vert,fragmentShader:Yt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Wt}},vertexShader:Yt.backgroundCube_vert,fragmentShader:Yt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Yt.cube_vert,fragmentShader:Yt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Yt.equirect_vert,fragmentShader:Yt.equirect_frag},distanceRGBA:{uniforms:Oi([ct.common,ct.displacementmap,{referencePosition:{value:new le},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Yt.distanceRGBA_vert,fragmentShader:Yt.distanceRGBA_frag},shadow:{uniforms:Oi([ct.lights,ct.fog,{color:{value:new ot(0)},opacity:{value:1}}]),vertexShader:Yt.shadow_vert,fragmentShader:Yt.shadow_frag}};Qr.physical={uniforms:Oi([Qr.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Wt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Wt},clearcoatNormalScale:{value:new We(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Wt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Wt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Wt},sheen:{value:0},sheenColor:{value:new ot(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Wt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Wt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Wt},transmissionSamplerSize:{value:new We},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Wt},attenuationDistance:{value:0},attenuationColor:{value:new ot(0)},specularColor:{value:new ot(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Wt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Wt},anisotropyVector:{value:new We},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Wt}}]),vertexShader:Yt.meshphysical_vert,fragmentShader:Yt.meshphysical_frag};const If={r:0,b:0,g:0},xo=new ci,fN=new gt;function pN(n,e,t,i,s,o,c){const h=new ot(0);let m=o===!0?0:1,x,b,S=null,M=0,P=null;function L(R){let O=R.isScene===!0?R.background:null;return O&&O.isTexture&&(O=(R.backgroundBlurriness>0?t:e).get(O)),O}function z(R){let O=!1;const W=L(R);W===null?k(h,m):W&&W.isColor&&(k(W,1),O=!0);const Z=n.xr.getEnvironmentBlendMode();Z==="additive"?i.buffers.color.setClear(0,0,0,1,c):Z==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,c),(n.autoClear||O)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function F(R,O){const W=L(O);W&&(W.isCubeTexture||W.mapping===Uc)?(b===void 0&&(b=new Gn(new rl(1,1,1),new as({name:"BackgroundCubeMaterial",uniforms:Pc(Qr.backgroundCube.uniforms),vertexShader:Qr.backgroundCube.vertexShader,fragmentShader:Qr.backgroundCube.fragmentShader,side:Hi,depthTest:!1,depthWrite:!1,fog:!1})),b.geometry.deleteAttribute("normal"),b.geometry.deleteAttribute("uv"),b.onBeforeRender=function(Z,J,te){this.matrixWorld.copyPosition(te.matrixWorld)},Object.defineProperty(b.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(b)),xo.copy(O.backgroundRotation),xo.x*=-1,xo.y*=-1,xo.z*=-1,W.isCubeTexture&&W.isRenderTargetTexture===!1&&(xo.y*=-1,xo.z*=-1),b.material.uniforms.envMap.value=W,b.material.uniforms.flipEnvMap.value=W.isCubeTexture&&W.isRenderTargetTexture===!1?-1:1,b.material.uniforms.backgroundBlurriness.value=O.backgroundBlurriness,b.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,b.material.uniforms.backgroundRotation.value.setFromMatrix4(fN.makeRotationFromEuler(xo)),b.material.toneMapped=fn.getTransfer(W.colorSpace)!==wn,(S!==W||M!==W.version||P!==n.toneMapping)&&(b.material.needsUpdate=!0,S=W,M=W.version,P=n.toneMapping),b.layers.enableAll(),R.unshift(b,b.geometry,b.material,0,0,null)):W&&W.isTexture&&(x===void 0&&(x=new Gn(new Vc(2,2),new as({name:"BackgroundMaterial",uniforms:Pc(Qr.background.uniforms),vertexShader:Qr.background.vertexShader,fragmentShader:Qr.background.fragmentShader,side:na,depthTest:!1,depthWrite:!1,fog:!1})),x.geometry.deleteAttribute("normal"),Object.defineProperty(x.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(x)),x.material.uniforms.t2D.value=W,x.material.uniforms.backgroundIntensity.value=O.backgroundIntensity,x.material.toneMapped=fn.getTransfer(W.colorSpace)!==wn,W.matrixAutoUpdate===!0&&W.updateMatrix(),x.material.uniforms.uvTransform.value.copy(W.matrix),(S!==W||M!==W.version||P!==n.toneMapping)&&(x.material.needsUpdate=!0,S=W,M=W.version,P=n.toneMapping),x.layers.enableAll(),R.unshift(x,x.geometry,x.material,0,0,null))}function k(R,O){R.getRGB(If,sT(n)),i.buffers.color.setClear(If.r,If.g,If.b,O,c)}return{getClearColor:function(){return h},setClearColor:function(R,O=1){h.set(R),m=O,k(h,m)},getClearAlpha:function(){return m},setClearAlpha:function(R){m=R,k(h,m)},render:z,addToRenderList:F}}function gN(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},s=M(null);let o=s,c=!1;function h(K,se,ge,xe,Re){let Le=!1;const Ae=S(xe,ge,se);o!==Ae&&(o=Ae,x(o.object)),Le=P(K,xe,ge,Re),Le&&L(K,xe,ge,Re),Re!==null&&e.update(Re,n.ELEMENT_ARRAY_BUFFER),(Le||c)&&(c=!1,W(K,se,ge,xe),Re!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(Re).buffer))}function m(){return n.createVertexArray()}function x(K){return n.bindVertexArray(K)}function b(K){return n.deleteVertexArray(K)}function S(K,se,ge){const xe=ge.wireframe===!0;let Re=i[K.id];Re===void 0&&(Re={},i[K.id]=Re);let Le=Re[se.id];Le===void 0&&(Le={},Re[se.id]=Le);let Ae=Le[xe];return Ae===void 0&&(Ae=M(m()),Le[xe]=Ae),Ae}function M(K){const se=[],ge=[],xe=[];for(let Re=0;Re<t;Re++)se[Re]=0,ge[Re]=0,xe[Re]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:se,enabledAttributes:ge,attributeDivisors:xe,object:K,attributes:{},index:null}}function P(K,se,ge,xe){const Re=o.attributes,Le=se.attributes;let Ae=0;const ze=ge.getAttributes();for(const ce in ze)if(ze[ce].location>=0){const be=Re[ce];let Ie=Le[ce];if(Ie===void 0&&(ce==="instanceMatrix"&&K.instanceMatrix&&(Ie=K.instanceMatrix),ce==="instanceColor"&&K.instanceColor&&(Ie=K.instanceColor)),be===void 0||be.attribute!==Ie||Ie&&be.data!==Ie.data)return!0;Ae++}return o.attributesNum!==Ae||o.index!==xe}function L(K,se,ge,xe){const Re={},Le=se.attributes;let Ae=0;const ze=ge.getAttributes();for(const ce in ze)if(ze[ce].location>=0){let be=Le[ce];be===void 0&&(ce==="instanceMatrix"&&K.instanceMatrix&&(be=K.instanceMatrix),ce==="instanceColor"&&K.instanceColor&&(be=K.instanceColor));const Ie={};Ie.attribute=be,be&&be.data&&(Ie.data=be.data),Re[ce]=Ie,Ae++}o.attributes=Re,o.attributesNum=Ae,o.index=xe}function z(){const K=o.newAttributes;for(let se=0,ge=K.length;se<ge;se++)K[se]=0}function F(K){k(K,0)}function k(K,se){const ge=o.newAttributes,xe=o.enabledAttributes,Re=o.attributeDivisors;ge[K]=1,xe[K]===0&&(n.enableVertexAttribArray(K),xe[K]=1),Re[K]!==se&&(n.vertexAttribDivisor(K,se),Re[K]=se)}function R(){const K=o.newAttributes,se=o.enabledAttributes;for(let ge=0,xe=se.length;ge<xe;ge++)se[ge]!==K[ge]&&(n.disableVertexAttribArray(ge),se[ge]=0)}function O(K,se,ge,xe,Re,Le,Ae){Ae===!0?n.vertexAttribIPointer(K,se,ge,Re,Le):n.vertexAttribPointer(K,se,ge,xe,Re,Le)}function W(K,se,ge,xe){z();const Re=xe.attributes,Le=ge.getAttributes(),Ae=se.defaultAttributeValues;for(const ze in Le){const ce=Le[ze];if(ce.location>=0){let we=Re[ze];if(we===void 0&&(ze==="instanceMatrix"&&K.instanceMatrix&&(we=K.instanceMatrix),ze==="instanceColor"&&K.instanceColor&&(we=K.instanceColor)),we!==void 0){const be=we.normalized,Ie=we.itemSize,Ke=e.get(we);if(Ke===void 0)continue;const rt=Ke.buffer,Te=Ke.type,Ve=Ke.bytesPerElement,Je=Te===n.INT||Te===n.UNSIGNED_INT||we.gpuType===Jg;if(we.isInterleavedBufferAttribute){const Ye=we.data,kt=Ye.stride,Nt=we.offset;if(Ye.isInstancedInterleavedBuffer){for(let Ct=0;Ct<ce.locationSize;Ct++)k(ce.location+Ct,Ye.meshPerAttribute);K.isInstancedMesh!==!0&&xe._maxInstanceCount===void 0&&(xe._maxInstanceCount=Ye.meshPerAttribute*Ye.count)}else for(let Ct=0;Ct<ce.locationSize;Ct++)F(ce.location+Ct);n.bindBuffer(n.ARRAY_BUFFER,rt);for(let Ct=0;Ct<ce.locationSize;Ct++)O(ce.location+Ct,Ie/ce.locationSize,Te,be,kt*Ve,(Nt+Ie/ce.locationSize*Ct)*Ve,Je)}else{if(we.isInstancedBufferAttribute){for(let Ye=0;Ye<ce.locationSize;Ye++)k(ce.location+Ye,we.meshPerAttribute);K.isInstancedMesh!==!0&&xe._maxInstanceCount===void 0&&(xe._maxInstanceCount=we.meshPerAttribute*we.count)}else for(let Ye=0;Ye<ce.locationSize;Ye++)F(ce.location+Ye);n.bindBuffer(n.ARRAY_BUFFER,rt);for(let Ye=0;Ye<ce.locationSize;Ye++)O(ce.location+Ye,Ie/ce.locationSize,Te,be,Ie*Ve,Ie/ce.locationSize*Ye*Ve,Je)}}else if(Ae!==void 0){const be=Ae[ze];if(be!==void 0)switch(be.length){case 2:n.vertexAttrib2fv(ce.location,be);break;case 3:n.vertexAttrib3fv(ce.location,be);break;case 4:n.vertexAttrib4fv(ce.location,be);break;default:n.vertexAttrib1fv(ce.location,be)}}}}R()}function Z(){re();for(const K in i){const se=i[K];for(const ge in se){const xe=se[ge];for(const Re in xe)b(xe[Re].object),delete xe[Re];delete se[ge]}delete i[K]}}function J(K){if(i[K.id]===void 0)return;const se=i[K.id];for(const ge in se){const xe=se[ge];for(const Re in xe)b(xe[Re].object),delete xe[Re];delete se[ge]}delete i[K.id]}function te(K){for(const se in i){const ge=i[se];if(ge[K.id]===void 0)continue;const xe=ge[K.id];for(const Re in xe)b(xe[Re].object),delete xe[Re];delete ge[K.id]}}function re(){ee(),c=!0,o!==s&&(o=s,x(o.object))}function ee(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:h,reset:re,resetDefaultState:ee,dispose:Z,releaseStatesOfGeometry:J,releaseStatesOfProgram:te,initAttributes:z,enableAttribute:F,disableUnusedAttributes:R}}function mN(n,e,t){let i;function s(x){i=x}function o(x,b){n.drawArrays(i,x,b),t.update(b,i,1)}function c(x,b,S){S!==0&&(n.drawArraysInstanced(i,x,b,S),t.update(b,i,S))}function h(x,b,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,x,0,b,0,S);let P=0;for(let L=0;L<S;L++)P+=b[L];t.update(P,i,1)}function m(x,b,S,M){if(S===0)return;const P=e.get("WEBGL_multi_draw");if(P===null)for(let L=0;L<x.length;L++)c(x[L],b[L],M[L]);else{P.multiDrawArraysInstancedWEBGL(i,x,0,b,0,M,0,S);let L=0;for(let z=0;z<S;z++)L+=b[z];for(let z=0;z<M.length;z++)t.update(L,i,M[z])}}this.setMode=s,this.render=o,this.renderInstances=c,this.renderMultiDraw=h,this.renderMultiDrawInstances=m}function vN(n,e,t,i){let s;function o(){if(s!==void 0)return s;if(e.has("EXT_texture_filter_anisotropic")===!0){const J=e.get("EXT_texture_filter_anisotropic");s=n.getParameter(J.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else s=0;return s}function c(J){return!(J!==Pi&&i.convert(J)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function h(J){const te=J===Bc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(J!==rs&&i.convert(J)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&J!==nr&&!te)}function m(J){if(J==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";J="mediump"}return J==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let x=t.precision!==void 0?t.precision:"highp";const b=m(x);b!==x&&(console.warn("THREE.WebGLRenderer:",x,"not supported, using",b,"instead."),x=b);const S=t.logarithmicDepthBuffer===!0,M=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),P=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),L=n.getParameter(n.MAX_TEXTURE_SIZE),z=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),F=n.getParameter(n.MAX_VERTEX_ATTRIBS),k=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),R=n.getParameter(n.MAX_VARYING_VECTORS),O=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),W=P>0,Z=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:m,textureFormatReadable:c,textureTypeReadable:h,precision:x,logarithmicDepthBuffer:S,maxTextures:M,maxVertexTextures:P,maxTextureSize:L,maxCubemapSize:z,maxAttributes:F,maxVertexUniforms:k,maxVaryings:R,maxFragmentUniforms:O,vertexTextures:W,maxSamples:Z}}function xN(n){const e=this;let t=null,i=0,s=!1,o=!1;const c=new Pa,h=new Wt,m={value:null,needsUpdate:!1};this.uniform=m,this.numPlanes=0,this.numIntersection=0,this.init=function(S,M){const P=S.length!==0||M||i!==0||s;return s=M,i=S.length,P},this.beginShadows=function(){o=!0,b(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(S,M){t=b(S,M,0)},this.setState=function(S,M,P){const L=S.clippingPlanes,z=S.clipIntersection,F=S.clipShadows,k=n.get(S);if(!s||L===null||L.length===0||o&&!F)o?b(null):x();else{const R=o?0:i,O=R*4;let W=k.clippingState||null;m.value=W,W=b(L,M,O,P);for(let Z=0;Z!==O;++Z)W[Z]=t[Z];k.clippingState=W,this.numIntersection=z?this.numPlanes:0,this.numPlanes+=R}};function x(){m.value!==t&&(m.value=t,m.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function b(S,M,P,L){const z=S!==null?S.length:0;let F=null;if(z!==0){if(F=m.value,L!==!0||F===null){const k=P+z*4,R=M.matrixWorldInverse;h.getNormalMatrix(R),(F===null||F.length<k)&&(F=new Float32Array(k));for(let O=0,W=P;O!==z;++O,W+=4)c.copy(S[O]).applyMatrix4(R,h),c.normal.toArray(F,W),F[W+3]=c.constant}m.value=F,m.needsUpdate=!0}return e.numPlanes=z,e.numIntersection=0,F}}function yN(n){let e=new WeakMap;function t(c,h){return h===Cc?c.mapping=ia:h===Eh&&(c.mapping=ja),c}function i(c){if(c&&c.isTexture){const h=c.mapping;if(h===Cc||h===Eh)if(e.has(c)){const m=e.get(c).texture;return t(m,c.mapping)}else{const m=c.image;if(m&&m.height>0){const x=new lT(m.height);return x.fromEquirectangularTexture(n,c),e.set(c,x),c.addEventListener("dispose",s),t(x.texture,c.mapping)}else return null}}return c}function s(c){const h=c.target;h.removeEventListener("dispose",s);const m=e.get(h);m!==void 0&&(e.delete(h),m.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}class Wc extends Jh{constructor(e=-1,t=1,i=1,s=-1,o=.1,c=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=s,this.near=o,this.far=c,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,s,o,c){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=s,this.view.width=o,this.view.height=c,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,s=(this.top+this.bottom)/2;let o=i-e,c=i+e,h=s+t,m=s-t;if(this.view!==null&&this.view.enabled){const x=(this.right-this.left)/this.view.fullWidth/this.zoom,b=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=x*this.view.offsetX,c=o+x*this.view.width,h-=b*this.view.offsetY,m=h-b*this.view.height}this.projectionMatrix.makeOrthographic(o,c,h,m,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const cc=4,o_=[.125,.215,.35,.446,.526,.582],ko=20,mx=new Wc,l_=new ot;let vx=null,xx=0,yx=0,bx=!1;const Po=(1+Math.sqrt(5))/2,zl=1/Po,c_=[new le(-Po,zl,0),new le(Po,zl,0),new le(-zl,0,Po),new le(zl,0,Po),new le(0,Po,-zl),new le(0,Po,zl),new le(-1,1,-1),new le(1,1,-1),new le(-1,1,1),new le(1,1,1)];class J0{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,s=100){vx=this._renderer.getRenderTarget(),xx=this._renderer.getActiveCubeFace(),yx=this._renderer.getActiveMipmapLevel(),bx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,i,s,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=d_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=h_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(vx,xx,yx),this._renderer.xr.enabled=bx,e.scissorTest=!1,Df(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ia||e.mapping===ja?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),vx=this._renderer.getRenderTarget(),xx=this._renderer.getActiveCubeFace(),yx=this._renderer.getActiveMipmapLevel(),bx=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Jn,minFilter:Jn,generateMipmaps:!1,type:Bc,format:Pi,colorSpace:oa,depthBuffer:!1},s=u_(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=u_(e,t,i);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=bN(o)),this._blurMaterial=wN(o,e,t)}return s}_compileMaterial(e){const t=new Gn(this._lodPlanes[0],e);this._renderer.compile(t,mx)}_sceneToCubeUV(e,t,i,s){const h=new Zn(90,1,t,i),m=[1,-1,1,1,1,1],x=[1,1,1,-1,-1,-1],b=this._renderer,S=b.autoClear,M=b.toneMapping;b.getClearColor(l_),b.toneMapping=Ms,b.autoClear=!1;const P=new $a({name:"PMREM.Background",side:Hi,depthWrite:!1,depthTest:!1}),L=new Gn(new rl,P);let z=!1;const F=e.background;F?F.isColor&&(P.color.copy(F),e.background=null,z=!0):(P.color.copy(l_),z=!0);for(let k=0;k<6;k++){const R=k%3;R===0?(h.up.set(0,m[k],0),h.lookAt(x[k],0,0)):R===1?(h.up.set(0,0,m[k]),h.lookAt(0,x[k],0)):(h.up.set(0,m[k],0),h.lookAt(0,0,x[k]));const O=this._cubeSize;Df(s,R*O,k>2?O:0,O,O),b.setRenderTarget(s),z&&b.render(L,h),b.render(e,h)}L.geometry.dispose(),L.material.dispose(),b.toneMapping=M,b.autoClear=S,e.background=F}_textureToCubeUV(e,t){const i=this._renderer,s=e.mapping===ia||e.mapping===ja;s?(this._cubemapMaterial===null&&(this._cubemapMaterial=d_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=h_());const o=s?this._cubemapMaterial:this._equirectMaterial,c=new Gn(this._lodPlanes[0],o),h=o.uniforms;h.envMap.value=e;const m=this._cubeSize;Df(t,0,0,3*m,2*m),i.setRenderTarget(t),i.render(c,mx)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const s=this._lodPlanes.length;for(let o=1;o<s;o++){const c=Math.sqrt(this._sigmas[o]*this._sigmas[o]-this._sigmas[o-1]*this._sigmas[o-1]),h=c_[(s-o-1)%c_.length];this._blur(e,o-1,o,c,h)}t.autoClear=i}_blur(e,t,i,s,o){const c=this._pingPongRenderTarget;this._halfBlur(e,c,t,i,s,"latitudinal",o),this._halfBlur(c,e,i,i,s,"longitudinal",o)}_halfBlur(e,t,i,s,o,c,h){const m=this._renderer,x=this._blurMaterial;c!=="latitudinal"&&c!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const b=3,S=new Gn(this._lodPlanes[s],x),M=x.uniforms,P=this._sizeLods[i]-1,L=isFinite(o)?Math.PI/(2*P):2*Math.PI/(2*ko-1),z=o/L,F=isFinite(o)?1+Math.floor(b*z):ko;F>ko&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${F} samples when the maximum is set to ${ko}`);const k=[];let R=0;for(let te=0;te<ko;++te){const re=te/z,ee=Math.exp(-re*re/2);k.push(ee),te===0?R+=ee:te<F&&(R+=2*ee)}for(let te=0;te<k.length;te++)k[te]=k[te]/R;M.envMap.value=e.texture,M.samples.value=F,M.weights.value=k,M.latitudinal.value=c==="latitudinal",h&&(M.poleAxis.value=h);const{_lodMax:O}=this;M.dTheta.value=L,M.mipInt.value=O-i;const W=this._sizeLods[s],Z=3*W*(s>O-cc?s-O+cc:0),J=4*(this._cubeSize-W);Df(t,Z,J,3*W,2*W),m.setRenderTarget(t),m.render(S,mx)}}function bN(n){const e=[],t=[],i=[];let s=n;const o=n-cc+1+o_.length;for(let c=0;c<o;c++){const h=Math.pow(2,s);t.push(h);let m=1/h;c>n-cc?m=o_[c-n+cc-1]:c===0&&(m=0),i.push(m);const x=1/(h-2),b=-x,S=1+x,M=[b,b,S,b,S,S,b,b,S,S,b,S],P=6,L=6,z=3,F=2,k=1,R=new Float32Array(z*L*P),O=new Float32Array(F*L*P),W=new Float32Array(k*L*P);for(let J=0;J<P;J++){const te=J%3*2/3-1,re=J>2?0:-1,ee=[te,re,0,te+2/3,re,0,te+2/3,re+1,0,te,re,0,te+2/3,re+1,0,te,re+1,0];R.set(ee,z*L*J),O.set(M,F*L*J);const K=[J,J,J,J,J,J];W.set(K,k*L*J)}const Z=new Bt;Z.setAttribute("position",new xn(R,z)),Z.setAttribute("uv",new xn(O,F)),Z.setAttribute("faceIndex",new xn(W,k)),e.push(Z),s>cc&&s--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function u_(n,e,t){const i=new ss(n,e,t);return i.texture.mapping=Uc,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Df(n,e,t,i,s){n.viewport.set(e,t,i,s),n.scissor.set(e,t,i,s)}function wN(n,e,t){const i=new Float32Array(ko),s=new le(0,1,0);return new as({name:"SphericalGaussianBlur",defines:{n:ko,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:_b(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function h_(){return new as({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_b(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function d_(){return new as({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_b(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Js,depthTest:!1,depthWrite:!1})}function _b(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function SN(n){let e=new WeakMap,t=null;function i(h){if(h&&h.isTexture){const m=h.mapping,x=m===Cc||m===Eh,b=m===ia||m===ja;if(x||b){let S=e.get(h);const M=S!==void 0?S.texture.pmremVersion:0;if(h.isRenderTargetTexture&&h.pmremVersion!==M)return t===null&&(t=new J0(n)),S=x?t.fromEquirectangular(h,S):t.fromCubemap(h,S),S.texture.pmremVersion=h.pmremVersion,e.set(h,S),S.texture;if(S!==void 0)return S.texture;{const P=h.image;return x&&P&&P.height>0||b&&P&&s(P)?(t===null&&(t=new J0(n)),S=x?t.fromEquirectangular(h):t.fromCubemap(h),S.texture.pmremVersion=h.pmremVersion,e.set(h,S),h.addEventListener("dispose",o),S.texture):null}}}return h}function s(h){let m=0;const x=6;for(let b=0;b<x;b++)h[b]!==void 0&&m++;return m===x}function o(h){const m=h.target;m.removeEventListener("dispose",o);const x=e.get(m);x!==void 0&&(e.delete(m),x.dispose())}function c(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:c}}function _N(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let s;switch(i){case"WEBGL_depth_texture":s=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":s=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":s=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":s=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:s=n.getExtension(i)}return e[i]=s,s}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const s=t(i);return s===null&&bb("THREE.WebGLRenderer: "+i+" extension not supported."),s}}}function MN(n,e,t,i){const s={},o=new WeakMap;function c(S){const M=S.target;M.index!==null&&e.remove(M.index);for(const L in M.attributes)e.remove(M.attributes[L]);for(const L in M.morphAttributes){const z=M.morphAttributes[L];for(let F=0,k=z.length;F<k;F++)e.remove(z[F])}M.removeEventListener("dispose",c),delete s[M.id];const P=o.get(M);P&&(e.remove(P),o.delete(M)),i.releaseStatesOfGeometry(M),M.isInstancedBufferGeometry===!0&&delete M._maxInstanceCount,t.memory.geometries--}function h(S,M){return s[M.id]===!0||(M.addEventListener("dispose",c),s[M.id]=!0,t.memory.geometries++),M}function m(S){const M=S.attributes;for(const L in M)e.update(M[L],n.ARRAY_BUFFER);const P=S.morphAttributes;for(const L in P){const z=P[L];for(let F=0,k=z.length;F<k;F++)e.update(z[F],n.ARRAY_BUFFER)}}function x(S){const M=[],P=S.index,L=S.attributes.position;let z=0;if(P!==null){const R=P.array;z=P.version;for(let O=0,W=R.length;O<W;O+=3){const Z=R[O+0],J=R[O+1],te=R[O+2];M.push(Z,J,J,te,te,Z)}}else if(L!==void 0){const R=L.array;z=L.version;for(let O=0,W=R.length/3-1;O<W;O+=3){const Z=O+0,J=O+1,te=O+2;M.push(Z,J,J,te,te,Z)}}else return;const F=new(eT(M)?Sb:am)(M,1);F.version=z;const k=o.get(S);k&&e.remove(k),o.set(S,F)}function b(S){const M=o.get(S);if(M){const P=S.index;P!==null&&M.version<P.version&&x(S)}else x(S);return o.get(S)}return{get:h,update:m,getWireframeAttribute:b}}function AN(n,e,t){let i;function s(M){i=M}let o,c;function h(M){o=M.type,c=M.bytesPerElement}function m(M,P){n.drawElements(i,P,o,M*c),t.update(P,i,1)}function x(M,P,L){L!==0&&(n.drawElementsInstanced(i,P,o,M*c,L),t.update(P,i,L))}function b(M,P,L){if(L===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,P,0,o,M,0,L);let F=0;for(let k=0;k<L;k++)F+=P[k];t.update(F,i,1)}function S(M,P,L,z){if(L===0)return;const F=e.get("WEBGL_multi_draw");if(F===null)for(let k=0;k<M.length;k++)x(M[k]/c,P[k],z[k]);else{F.multiDrawElementsInstancedWEBGL(i,P,0,o,M,0,z,0,L);let k=0;for(let R=0;R<L;R++)k+=P[R];for(let R=0;R<z.length;R++)t.update(k,i,z[R])}}this.setMode=s,this.setIndex=h,this.render=m,this.renderInstances=x,this.renderMultiDraw=b,this.renderMultiDrawInstances=S}function CN(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(o,c,h){switch(t.calls++,c){case n.TRIANGLES:t.triangles+=h*(o/3);break;case n.LINES:t.lines+=h*(o/2);break;case n.LINE_STRIP:t.lines+=h*(o-1);break;case n.LINE_LOOP:t.lines+=h*o;break;case n.POINTS:t.points+=h*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",c);break}}function s(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:s,update:i}}function EN(n,e,t){const i=new WeakMap,s=new an;function o(c,h,m){const x=c.morphTargetInfluences,b=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,S=b!==void 0?b.length:0;let M=i.get(h);if(M===void 0||M.count!==S){let K=function(){re.dispose(),i.delete(h),h.removeEventListener("dispose",K)};var P=K;M!==void 0&&M.texture.dispose();const L=h.morphAttributes.position!==void 0,z=h.morphAttributes.normal!==void 0,F=h.morphAttributes.color!==void 0,k=h.morphAttributes.position||[],R=h.morphAttributes.normal||[],O=h.morphAttributes.color||[];let W=0;L===!0&&(W=1),z===!0&&(W=2),F===!0&&(W=3);let Z=h.attributes.position.count*W,J=1;Z>e.maxTextureSize&&(J=Math.ceil(Z/e.maxTextureSize),Z=e.maxTextureSize);const te=new Float32Array(Z*J*4*S),re=new sm(te,Z,J,S);re.type=nr,re.needsUpdate=!0;const ee=W*4;for(let se=0;se<S;se++){const ge=k[se],xe=R[se],Re=O[se],Le=Z*J*4*se;for(let Ae=0;Ae<ge.count;Ae++){const ze=Ae*ee;L===!0&&(s.fromBufferAttribute(ge,Ae),te[Le+ze+0]=s.x,te[Le+ze+1]=s.y,te[Le+ze+2]=s.z,te[Le+ze+3]=0),z===!0&&(s.fromBufferAttribute(xe,Ae),te[Le+ze+4]=s.x,te[Le+ze+5]=s.y,te[Le+ze+6]=s.z,te[Le+ze+7]=0),F===!0&&(s.fromBufferAttribute(Re,Ae),te[Le+ze+8]=s.x,te[Le+ze+9]=s.y,te[Le+ze+10]=s.z,te[Le+ze+11]=Re.itemSize===4?s.w:1)}}M={count:S,texture:re,size:new We(Z,J)},i.set(h,M),h.addEventListener("dispose",K)}if(c.isInstancedMesh===!0&&c.morphTexture!==null)m.getUniforms().setValue(n,"morphTexture",c.morphTexture,t);else{let L=0;for(let F=0;F<x.length;F++)L+=x[F];const z=h.morphTargetsRelative?1:1-L;m.getUniforms().setValue(n,"morphTargetBaseInfluence",z),m.getUniforms().setValue(n,"morphTargetInfluences",x)}m.getUniforms().setValue(n,"morphTargetsTexture",M.texture,t),m.getUniforms().setValue(n,"morphTargetsTextureSize",M.size)}return{update:o}}function TN(n,e,t,i){let s=new WeakMap;function o(m){const x=i.render.frame,b=m.geometry,S=e.get(m,b);if(s.get(S)!==x&&(e.update(S),s.set(S,x)),m.isInstancedMesh&&(m.hasEventListener("dispose",h)===!1&&m.addEventListener("dispose",h),s.get(m)!==x&&(t.update(m.instanceMatrix,n.ARRAY_BUFFER),m.instanceColor!==null&&t.update(m.instanceColor,n.ARRAY_BUFFER),s.set(m,x))),m.isSkinnedMesh){const M=m.skeleton;s.get(M)!==x&&(M.update(),s.set(M,x))}return S}function c(){s=new WeakMap}function h(m){const x=m.target;x.removeEventListener("dispose",h),t.remove(x.instanceMatrix),x.instanceColor!==null&&t.remove(x.instanceColor)}return{update:o,dispose:c}}class Mb extends En{constructor(e,t,i,s,o,c,h,m,x,b=Vo){if(b!==Vo&&b!==Qo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&b===Vo&&(i=ra),i===void 0&&b===Qo&&(i=$o),super(null,s,o,c,h,m,b,i,x),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=h!==void 0?h:oi,this.minFilter=m!==void 0?m:oi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const uT=new En,f_=new Mb(1,1),hT=new sm,dT=new wb,fT=new $h,p_=[],g_=[],m_=new Float32Array(16),v_=new Float32Array(9),x_=new Float32Array(4);function Gc(n,e,t){const i=n[0];if(i<=0||i>0)return n;const s=e*t;let o=p_[s];if(o===void 0&&(o=new Float32Array(s),p_[s]=o),e!==0){i.toArray(o,0);for(let c=1,h=0;c!==e;++c)h+=t,n[c].toArray(o,h)}return o}function ti(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function ni(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function om(n,e){let t=g_[e];t===void 0&&(t=new Int32Array(e),g_[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function PN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function kN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;n.uniform2fv(this.addr,e),ni(t,e)}}function RN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ti(t,e))return;n.uniform3fv(this.addr,e),ni(t,e)}}function LN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;n.uniform4fv(this.addr,e),ni(t,e)}}function IN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ti(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,i))return;x_.set(i),n.uniformMatrix2fv(this.addr,!1,x_),ni(t,i)}}function DN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ti(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,i))return;v_.set(i),n.uniformMatrix3fv(this.addr,!1,v_),ni(t,i)}}function NN(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(ti(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ni(t,e)}else{if(ti(t,i))return;m_.set(i),n.uniformMatrix4fv(this.addr,!1,m_),ni(t,i)}}function FN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function ON(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;n.uniform2iv(this.addr,e),ni(t,e)}}function zN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ti(t,e))return;n.uniform3iv(this.addr,e),ni(t,e)}}function UN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;n.uniform4iv(this.addr,e),ni(t,e)}}function BN(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function HN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ti(t,e))return;n.uniform2uiv(this.addr,e),ni(t,e)}}function VN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ti(t,e))return;n.uniform3uiv(this.addr,e),ni(t,e)}}function WN(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ti(t,e))return;n.uniform4uiv(this.addr,e),ni(t,e)}}function GN(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s);let o;this.type===n.SAMPLER_2D_SHADOW?(f_.compareFunction=xb,o=f_):o=uT,t.setTexture2D(e||o,s)}function XN(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture3D(e||dT,s)}function YN(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTextureCube(e||fT,s)}function jN(n,e,t){const i=this.cache,s=t.allocateTextureUnit();i[0]!==s&&(n.uniform1i(this.addr,s),i[0]=s),t.setTexture2DArray(e||hT,s)}function qN(n){switch(n){case 5126:return PN;case 35664:return kN;case 35665:return RN;case 35666:return LN;case 35674:return IN;case 35675:return DN;case 35676:return NN;case 5124:case 35670:return FN;case 35667:case 35671:return ON;case 35668:case 35672:return zN;case 35669:case 35673:return UN;case 5125:return BN;case 36294:return HN;case 36295:return VN;case 36296:return WN;case 35678:case 36198:case 36298:case 36306:case 35682:return GN;case 35679:case 36299:case 36307:return XN;case 35680:case 36300:case 36308:case 36293:return YN;case 36289:case 36303:case 36311:case 36292:return jN}}function ZN(n,e){n.uniform1fv(this.addr,e)}function KN(n,e){const t=Gc(e,this.size,2);n.uniform2fv(this.addr,t)}function JN(n,e){const t=Gc(e,this.size,3);n.uniform3fv(this.addr,t)}function $N(n,e){const t=Gc(e,this.size,4);n.uniform4fv(this.addr,t)}function QN(n,e){const t=Gc(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function eF(n,e){const t=Gc(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function tF(n,e){const t=Gc(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function nF(n,e){n.uniform1iv(this.addr,e)}function iF(n,e){n.uniform2iv(this.addr,e)}function rF(n,e){n.uniform3iv(this.addr,e)}function sF(n,e){n.uniform4iv(this.addr,e)}function aF(n,e){n.uniform1uiv(this.addr,e)}function oF(n,e){n.uniform2uiv(this.addr,e)}function lF(n,e){n.uniform3uiv(this.addr,e)}function cF(n,e){n.uniform4uiv(this.addr,e)}function uF(n,e,t){const i=this.cache,s=e.length,o=om(t,s);ti(i,o)||(n.uniform1iv(this.addr,o),ni(i,o));for(let c=0;c!==s;++c)t.setTexture2D(e[c]||uT,o[c])}function hF(n,e,t){const i=this.cache,s=e.length,o=om(t,s);ti(i,o)||(n.uniform1iv(this.addr,o),ni(i,o));for(let c=0;c!==s;++c)t.setTexture3D(e[c]||dT,o[c])}function dF(n,e,t){const i=this.cache,s=e.length,o=om(t,s);ti(i,o)||(n.uniform1iv(this.addr,o),ni(i,o));for(let c=0;c!==s;++c)t.setTextureCube(e[c]||fT,o[c])}function fF(n,e,t){const i=this.cache,s=e.length,o=om(t,s);ti(i,o)||(n.uniform1iv(this.addr,o),ni(i,o));for(let c=0;c!==s;++c)t.setTexture2DArray(e[c]||hT,o[c])}function pF(n){switch(n){case 5126:return ZN;case 35664:return KN;case 35665:return JN;case 35666:return $N;case 35674:return QN;case 35675:return eF;case 35676:return tF;case 5124:case 35670:return nF;case 35667:case 35671:return iF;case 35668:case 35672:return rF;case 35669:case 35673:return sF;case 5125:return aF;case 36294:return oF;case 36295:return lF;case 36296:return cF;case 35678:case 36198:case 36298:case 36306:case 35682:return uF;case 35679:case 36299:case 36307:return hF;case 35680:case 36300:case 36308:case 36293:return dF;case 36289:case 36303:case 36311:case 36292:return fF}}class gF{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=qN(t.type)}}class mF{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=pF(t.type)}}class vF{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const s=this.seq;for(let o=0,c=s.length;o!==c;++o){const h=s[o];h.setValue(e,t[h.id],i)}}}const wx=/(\w+)(\])?(\[|\.)?/g;function y_(n,e){n.seq.push(e),n.map[e.id]=e}function xF(n,e,t){const i=n.name,s=i.length;for(wx.lastIndex=0;;){const o=wx.exec(i),c=wx.lastIndex;let h=o[1];const m=o[2]==="]",x=o[3];if(m&&(h=h|0),x===void 0||x==="["&&c+2===s){y_(t,x===void 0?new gF(h,n,e):new mF(h,n,e));break}else{let S=t.map[h];S===void 0&&(S=new vF(h),y_(t,S)),t=S}}}class Sp{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let s=0;s<i;++s){const o=e.getActiveUniform(t,s),c=e.getUniformLocation(t,o.name);xF(o,c,this)}}setValue(e,t,i,s){const o=this.map[t];o!==void 0&&o.setValue(e,i,s)}setOptional(e,t,i){const s=t[i];s!==void 0&&this.setValue(e,i,s)}static upload(e,t,i,s){for(let o=0,c=t.length;o!==c;++o){const h=t[o],m=i[h.id];m.needsUpdate!==!1&&h.setValue(e,m.value,s)}}static seqWithValue(e,t){const i=[];for(let s=0,o=e.length;s!==o;++s){const c=e[s];c.id in t&&i.push(c)}return i}}function b_(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const yF=37297;let bF=0;function wF(n,e){const t=n.split(`
`),i=[],s=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let c=s;c<o;c++){const h=c+1;i.push(`${h===e?">":" "} ${h}: ${t[c]}`)}return i.join(`
`)}function SF(n){const e=fn.getPrimaries(fn.workingColorSpace),t=fn.getPrimaries(n);let i;switch(e===t?i="":e===Ih&&t===Lh?i="LinearDisplayP3ToLinearSRGB":e===Lh&&t===Ih&&(i="LinearSRGBToLinearDisplayP3"),n){case oa:case Kh:return[i,"LinearTransferOETF"];case Rr:case rm:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function w_(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),s=n.getShaderInfoLog(e).trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const c=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+wF(n.getShaderSource(e),c)}else return s}function _F(n,e){const t=SF(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function MF(n,e){let t;switch(e){case DE:t="Linear";break;case NE:t="Reinhard";break;case FE:t="OptimizedCineon";break;case ab:t="ACESFilmic";break;case zE:t="AgX";break;case UE:t="Neutral";break;case OE:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function AF(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Hu).join(`
`)}function CF(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function EF(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let s=0;s<i;s++){const o=n.getActiveAttrib(e,s),c=o.name;let h=1;o.type===n.FLOAT_MAT2&&(h=2),o.type===n.FLOAT_MAT3&&(h=3),o.type===n.FLOAT_MAT4&&(h=4),t[c]={type:o.type,location:n.getAttribLocation(e,c),locationSize:h}}return t}function Hu(n){return n!==""}function S_(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function __(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const TF=/^[ \t]*#include +<([\w\d./]+)>/gm;function $0(n){return n.replace(TF,kF)}const PF=new Map;function kF(n,e){let t=Yt[e];if(t===void 0){const i=PF.get(e);if(i!==void 0)t=Yt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return $0(t)}const RF=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function M_(n){return n.replace(RF,LF)}function LF(n,e,t,i){let s="";for(let o=parseInt(e);o<parseInt(t);o++)s+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return s}function A_(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function IF(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Zg?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Ju?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Kr&&(e="SHADOWMAP_TYPE_VSM"),e}function DF(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ia:case ja:e="ENVMAP_TYPE_CUBE";break;case Uc:e="ENVMAP_TYPE_CUBE_UV";break}return e}function NF(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case ja:e="ENVMAP_MODE_REFRACTION";break}return e}function FF(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case qh:e="ENVMAP_BLENDING_MULTIPLY";break;case LE:e="ENVMAP_BLENDING_MIX";break;case IE:e="ENVMAP_BLENDING_ADD";break}return e}function OF(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function zF(n,e,t,i){const s=n.getContext(),o=t.defines;let c=t.vertexShader,h=t.fragmentShader;const m=IF(t),x=DF(t),b=NF(t),S=FF(t),M=OF(t),P=AF(t),L=CF(o),z=s.createProgram();let F,k,R=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(F=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,L].filter(Hu).join(`
`),F.length>0&&(F+=`
`),k=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,L].filter(Hu).join(`
`),k.length>0&&(k+=`
`)):(F=[A_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,L,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+b:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Hu).join(`
`),k=[A_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,L,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+x:"",t.envMap?"#define "+b:"",t.envMap?"#define "+S:"",M?"#define CUBEUV_TEXEL_WIDTH "+M.texelWidth:"",M?"#define CUBEUV_TEXEL_HEIGHT "+M.texelHeight:"",M?"#define CUBEUV_MAX_MIP "+M.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+m:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ms?"#define TONE_MAPPING":"",t.toneMapping!==Ms?Yt.tonemapping_pars_fragment:"",t.toneMapping!==Ms?MF("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Yt.colorspace_pars_fragment,_F("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Hu).join(`
`)),c=$0(c),c=S_(c,t),c=__(c,t),h=$0(h),h=S_(h,t),h=__(h,t),c=M_(c),h=M_(h),t.isRawShaderMaterial!==!0&&(R=`#version 300 es
`,F=[P,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+F,k=["#define varying in",t.glslVersion===K0?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===K0?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+k);const O=R+F+c,W=R+k+h,Z=b_(s,s.VERTEX_SHADER,O),J=b_(s,s.FRAGMENT_SHADER,W);s.attachShader(z,Z),s.attachShader(z,J),t.index0AttributeName!==void 0?s.bindAttribLocation(z,0,t.index0AttributeName):t.morphTargets===!0&&s.bindAttribLocation(z,0,"position"),s.linkProgram(z);function te(se){if(n.debug.checkShaderErrors){const ge=s.getProgramInfoLog(z).trim(),xe=s.getShaderInfoLog(Z).trim(),Re=s.getShaderInfoLog(J).trim();let Le=!0,Ae=!0;if(s.getProgramParameter(z,s.LINK_STATUS)===!1)if(Le=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(s,z,Z,J);else{const ze=w_(s,Z,"vertex"),ce=w_(s,J,"fragment");console.error("THREE.WebGLProgram: Shader Error "+s.getError()+" - VALIDATE_STATUS "+s.getProgramParameter(z,s.VALIDATE_STATUS)+`

Material Name: `+se.name+`
Material Type: `+se.type+`

Program Info Log: `+ge+`
`+ze+`
`+ce)}else ge!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ge):(xe===""||Re==="")&&(Ae=!1);Ae&&(se.diagnostics={runnable:Le,programLog:ge,vertexShader:{log:xe,prefix:F},fragmentShader:{log:Re,prefix:k}})}s.deleteShader(Z),s.deleteShader(J),re=new Sp(s,z),ee=EF(s,z)}let re;this.getUniforms=function(){return re===void 0&&te(this),re};let ee;this.getAttributes=function(){return ee===void 0&&te(this),ee};let K=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return K===!1&&(K=s.getProgramParameter(z,yF)),K},this.destroy=function(){i.releaseStatesOfProgram(this),s.deleteProgram(z),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=bF++,this.cacheKey=e,this.usedTimes=1,this.program=z,this.vertexShader=Z,this.fragmentShader=J,this}let UF=0;class BF{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,s=this._getShaderStage(t),o=this._getShaderStage(i),c=this._getShaderCacheForMaterial(e);return c.has(s)===!1&&(c.add(s),s.usedTimes++),c.has(o)===!1&&(c.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new HF(e),t.set(e,i)),i}}class HF{constructor(e){this.id=UF++,this.code=e,this.usedTimes=0}}function VF(n,e,t,i,s,o,c){const h=new Go,m=new BF,x=new Set,b=[],S=s.logarithmicDepthBuffer,M=s.vertexTextures;let P=s.precision;const L={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function z(ee){return x.add(ee),ee===0?"uv":`uv${ee}`}function F(ee,K,se,ge,xe){const Re=ge.fog,Le=xe.geometry,Ae=ee.isMeshStandardMaterial?ge.environment:null,ze=(ee.isMeshStandardMaterial?t:e).get(ee.envMap||Ae),ce=ze&&ze.mapping===Uc?ze.image.height:null,we=L[ee.type];ee.precision!==null&&(P=s.getMaxPrecision(ee.precision),P!==ee.precision&&console.warn("THREE.WebGLProgram.getParameters:",ee.precision,"not supported, using",P,"instead."));const be=Le.morphAttributes.position||Le.morphAttributes.normal||Le.morphAttributes.color,Ie=be!==void 0?be.length:0;let Ke=0;Le.morphAttributes.position!==void 0&&(Ke=1),Le.morphAttributes.normal!==void 0&&(Ke=2),Le.morphAttributes.color!==void 0&&(Ke=3);let rt,Te,Ve,Je;if(we){const rn=Qr[we];rt=rn.vertexShader,Te=rn.fragmentShader}else rt=ee.vertexShader,Te=ee.fragmentShader,m.update(ee),Ve=m.getVertexShaderID(ee),Je=m.getFragmentShaderID(ee);const Ye=n.getRenderTarget(),kt=xe.isInstancedMesh===!0,Nt=xe.isBatchedMesh===!0,Ct=!!ee.map,Ot=!!ee.matcap,oe=!!ze,je=!!ee.aoMap,Ze=!!ee.lightMap,lt=!!ee.bumpMap,Be=!!ee.normalMap,Tt=!!ee.displacementMap,st=!!ee.emissiveMap,vt=!!ee.metalnessMap,he=!!ee.roughnessMap,ie=ee.anisotropy>0,Pe=ee.clearcoat>0,qe=ee.dispersion>0,Ge=ee.iridescence>0,Xe=ee.sheen>0,_t=ee.transmission>0,at=ie&&!!ee.anisotropyMap,pt=Pe&&!!ee.clearcoatMap,zt=Pe&&!!ee.clearcoatNormalMap,Qe=Pe&&!!ee.clearcoatRoughnessMap,ht=Ge&&!!ee.iridescenceMap,Jt=Ge&&!!ee.iridescenceThicknessMap,Dt=Xe&&!!ee.sheenColorMap,xt=Xe&&!!ee.sheenRoughnessMap,Ut=!!ee.specularMap,Gt=!!ee.specularColorMap,pn=!!ee.specularIntensityMap,me=_t&&!!ee.transmissionMap,et=_t&&!!ee.thicknessMap,Ue=!!ee.gradientMap,He=!!ee.alphaMap,nt=ee.alphaTest>0,Lt=!!ee.alphaHash,$t=!!ee.extensions;let bn=Ms;ee.toneMapped&&(Ye===null||Ye.isXRRenderTarget===!0)&&(bn=n.toneMapping);const Nn={shaderID:we,shaderType:ee.type,shaderName:ee.name,vertexShader:rt,fragmentShader:Te,defines:ee.defines,customVertexShaderID:Ve,customFragmentShaderID:Je,isRawShaderMaterial:ee.isRawShaderMaterial===!0,glslVersion:ee.glslVersion,precision:P,batching:Nt,batchingColor:Nt&&xe._colorsTexture!==null,instancing:kt,instancingColor:kt&&xe.instanceColor!==null,instancingMorph:kt&&xe.morphTexture!==null,supportsVertexTextures:M,outputColorSpace:Ye===null?n.outputColorSpace:Ye.isXRRenderTarget===!0?Ye.texture.colorSpace:oa,alphaToCoverage:!!ee.alphaToCoverage,map:Ct,matcap:Ot,envMap:oe,envMapMode:oe&&ze.mapping,envMapCubeUVHeight:ce,aoMap:je,lightMap:Ze,bumpMap:lt,normalMap:Be,displacementMap:M&&Tt,emissiveMap:st,normalMapObjectSpace:Be&&ee.normalMapType===YE,normalMapTangentSpace:Be&&ee.normalMapType===Ja,metalnessMap:vt,roughnessMap:he,anisotropy:ie,anisotropyMap:at,clearcoat:Pe,clearcoatMap:pt,clearcoatNormalMap:zt,clearcoatRoughnessMap:Qe,dispersion:qe,iridescence:Ge,iridescenceMap:ht,iridescenceThicknessMap:Jt,sheen:Xe,sheenColorMap:Dt,sheenRoughnessMap:xt,specularMap:Ut,specularColorMap:Gt,specularIntensityMap:pn,transmission:_t,transmissionMap:me,thicknessMap:et,gradientMap:Ue,opaque:ee.transparent===!1&&ee.blending===Ho&&ee.alphaToCoverage===!1,alphaMap:He,alphaTest:nt,alphaHash:Lt,combine:ee.combine,mapUv:Ct&&z(ee.map.channel),aoMapUv:je&&z(ee.aoMap.channel),lightMapUv:Ze&&z(ee.lightMap.channel),bumpMapUv:lt&&z(ee.bumpMap.channel),normalMapUv:Be&&z(ee.normalMap.channel),displacementMapUv:Tt&&z(ee.displacementMap.channel),emissiveMapUv:st&&z(ee.emissiveMap.channel),metalnessMapUv:vt&&z(ee.metalnessMap.channel),roughnessMapUv:he&&z(ee.roughnessMap.channel),anisotropyMapUv:at&&z(ee.anisotropyMap.channel),clearcoatMapUv:pt&&z(ee.clearcoatMap.channel),clearcoatNormalMapUv:zt&&z(ee.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Qe&&z(ee.clearcoatRoughnessMap.channel),iridescenceMapUv:ht&&z(ee.iridescenceMap.channel),iridescenceThicknessMapUv:Jt&&z(ee.iridescenceThicknessMap.channel),sheenColorMapUv:Dt&&z(ee.sheenColorMap.channel),sheenRoughnessMapUv:xt&&z(ee.sheenRoughnessMap.channel),specularMapUv:Ut&&z(ee.specularMap.channel),specularColorMapUv:Gt&&z(ee.specularColorMap.channel),specularIntensityMapUv:pn&&z(ee.specularIntensityMap.channel),transmissionMapUv:me&&z(ee.transmissionMap.channel),thicknessMapUv:et&&z(ee.thicknessMap.channel),alphaMapUv:He&&z(ee.alphaMap.channel),vertexTangents:!!Le.attributes.tangent&&(Be||ie),vertexColors:ee.vertexColors,vertexAlphas:ee.vertexColors===!0&&!!Le.attributes.color&&Le.attributes.color.itemSize===4,pointsUvs:xe.isPoints===!0&&!!Le.attributes.uv&&(Ct||He),fog:!!Re,useFog:ee.fog===!0,fogExp2:!!Re&&Re.isFogExp2,flatShading:ee.flatShading===!0,sizeAttenuation:ee.sizeAttenuation===!0,logarithmicDepthBuffer:S,skinning:xe.isSkinnedMesh===!0,morphTargets:Le.morphAttributes.position!==void 0,morphNormals:Le.morphAttributes.normal!==void 0,morphColors:Le.morphAttributes.color!==void 0,morphTargetsCount:Ie,morphTextureStride:Ke,numDirLights:K.directional.length,numPointLights:K.point.length,numSpotLights:K.spot.length,numSpotLightMaps:K.spotLightMap.length,numRectAreaLights:K.rectArea.length,numHemiLights:K.hemi.length,numDirLightShadows:K.directionalShadowMap.length,numPointLightShadows:K.pointShadowMap.length,numSpotLightShadows:K.spotShadowMap.length,numSpotLightShadowsWithMaps:K.numSpotLightShadowsWithMaps,numLightProbes:K.numLightProbes,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:ee.dithering,shadowMapEnabled:n.shadowMap.enabled&&se.length>0,shadowMapType:n.shadowMap.type,toneMapping:bn,decodeVideoTexture:Ct&&ee.map.isVideoTexture===!0&&fn.getTransfer(ee.map.colorSpace)===wn,premultipliedAlpha:ee.premultipliedAlpha,doubleSided:ee.side===ys,flipSided:ee.side===Hi,useDepthPacking:ee.depthPacking>=0,depthPacking:ee.depthPacking||0,index0AttributeName:ee.index0AttributeName,extensionClipCullDistance:$t&&ee.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:($t&&ee.extensions.multiDraw===!0||Nt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:ee.customProgramCacheKey()};return Nn.vertexUv1s=x.has(1),Nn.vertexUv2s=x.has(2),Nn.vertexUv3s=x.has(3),x.clear(),Nn}function k(ee){const K=[];if(ee.shaderID?K.push(ee.shaderID):(K.push(ee.customVertexShaderID),K.push(ee.customFragmentShaderID)),ee.defines!==void 0)for(const se in ee.defines)K.push(se),K.push(ee.defines[se]);return ee.isRawShaderMaterial===!1&&(R(K,ee),O(K,ee),K.push(n.outputColorSpace)),K.push(ee.customProgramCacheKey),K.join()}function R(ee,K){ee.push(K.precision),ee.push(K.outputColorSpace),ee.push(K.envMapMode),ee.push(K.envMapCubeUVHeight),ee.push(K.mapUv),ee.push(K.alphaMapUv),ee.push(K.lightMapUv),ee.push(K.aoMapUv),ee.push(K.bumpMapUv),ee.push(K.normalMapUv),ee.push(K.displacementMapUv),ee.push(K.emissiveMapUv),ee.push(K.metalnessMapUv),ee.push(K.roughnessMapUv),ee.push(K.anisotropyMapUv),ee.push(K.clearcoatMapUv),ee.push(K.clearcoatNormalMapUv),ee.push(K.clearcoatRoughnessMapUv),ee.push(K.iridescenceMapUv),ee.push(K.iridescenceThicknessMapUv),ee.push(K.sheenColorMapUv),ee.push(K.sheenRoughnessMapUv),ee.push(K.specularMapUv),ee.push(K.specularColorMapUv),ee.push(K.specularIntensityMapUv),ee.push(K.transmissionMapUv),ee.push(K.thicknessMapUv),ee.push(K.combine),ee.push(K.fogExp2),ee.push(K.sizeAttenuation),ee.push(K.morphTargetsCount),ee.push(K.morphAttributeCount),ee.push(K.numDirLights),ee.push(K.numPointLights),ee.push(K.numSpotLights),ee.push(K.numSpotLightMaps),ee.push(K.numHemiLights),ee.push(K.numRectAreaLights),ee.push(K.numDirLightShadows),ee.push(K.numPointLightShadows),ee.push(K.numSpotLightShadows),ee.push(K.numSpotLightShadowsWithMaps),ee.push(K.numLightProbes),ee.push(K.shadowMapType),ee.push(K.toneMapping),ee.push(K.numClippingPlanes),ee.push(K.numClipIntersection),ee.push(K.depthPacking)}function O(ee,K){h.disableAll(),K.supportsVertexTextures&&h.enable(0),K.instancing&&h.enable(1),K.instancingColor&&h.enable(2),K.instancingMorph&&h.enable(3),K.matcap&&h.enable(4),K.envMap&&h.enable(5),K.normalMapObjectSpace&&h.enable(6),K.normalMapTangentSpace&&h.enable(7),K.clearcoat&&h.enable(8),K.iridescence&&h.enable(9),K.alphaTest&&h.enable(10),K.vertexColors&&h.enable(11),K.vertexAlphas&&h.enable(12),K.vertexUv1s&&h.enable(13),K.vertexUv2s&&h.enable(14),K.vertexUv3s&&h.enable(15),K.vertexTangents&&h.enable(16),K.anisotropy&&h.enable(17),K.alphaHash&&h.enable(18),K.batching&&h.enable(19),K.dispersion&&h.enable(20),K.batchingColor&&h.enable(21),ee.push(h.mask),h.disableAll(),K.fog&&h.enable(0),K.useFog&&h.enable(1),K.flatShading&&h.enable(2),K.logarithmicDepthBuffer&&h.enable(3),K.skinning&&h.enable(4),K.morphTargets&&h.enable(5),K.morphNormals&&h.enable(6),K.morphColors&&h.enable(7),K.premultipliedAlpha&&h.enable(8),K.shadowMapEnabled&&h.enable(9),K.doubleSided&&h.enable(10),K.flipSided&&h.enable(11),K.useDepthPacking&&h.enable(12),K.dithering&&h.enable(13),K.transmission&&h.enable(14),K.sheen&&h.enable(15),K.opaque&&h.enable(16),K.pointsUvs&&h.enable(17),K.decodeVideoTexture&&h.enable(18),K.alphaToCoverage&&h.enable(19),ee.push(h.mask)}function W(ee){const K=L[ee.type];let se;if(K){const ge=Qr[K];se=aT.clone(ge.uniforms)}else se=ee.uniforms;return se}function Z(ee,K){let se;for(let ge=0,xe=b.length;ge<xe;ge++){const Re=b[ge];if(Re.cacheKey===K){se=Re,++se.usedTimes;break}}return se===void 0&&(se=new zF(n,K,ee,o),b.push(se)),se}function J(ee){if(--ee.usedTimes===0){const K=b.indexOf(ee);b[K]=b[b.length-1],b.pop(),ee.destroy()}}function te(ee){m.remove(ee)}function re(){m.dispose()}return{getParameters:F,getProgramCacheKey:k,getUniforms:W,acquireProgram:Z,releaseProgram:J,releaseShaderCache:te,programs:b,dispose:re}}function WF(){let n=new WeakMap;function e(o){let c=n.get(o);return c===void 0&&(c={},n.set(o,c)),c}function t(o){n.delete(o)}function i(o,c,h){n.get(o)[c]=h}function s(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:s}}function GF(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function C_(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function E_(){const n=[];let e=0;const t=[],i=[],s=[];function o(){e=0,t.length=0,i.length=0,s.length=0}function c(S,M,P,L,z,F){let k=n[e];return k===void 0?(k={id:S.id,object:S,geometry:M,material:P,groupOrder:L,renderOrder:S.renderOrder,z,group:F},n[e]=k):(k.id=S.id,k.object=S,k.geometry=M,k.material=P,k.groupOrder=L,k.renderOrder=S.renderOrder,k.z=z,k.group=F),e++,k}function h(S,M,P,L,z,F){const k=c(S,M,P,L,z,F);P.transmission>0?i.push(k):P.transparent===!0?s.push(k):t.push(k)}function m(S,M,P,L,z,F){const k=c(S,M,P,L,z,F);P.transmission>0?i.unshift(k):P.transparent===!0?s.unshift(k):t.unshift(k)}function x(S,M){t.length>1&&t.sort(S||GF),i.length>1&&i.sort(M||C_),s.length>1&&s.sort(M||C_)}function b(){for(let S=e,M=n.length;S<M;S++){const P=n[S];if(P.id===null)break;P.id=null,P.object=null,P.geometry=null,P.material=null,P.group=null}}return{opaque:t,transmissive:i,transparent:s,init:o,push:h,unshift:m,finish:b,sort:x}}function XF(){let n=new WeakMap;function e(i,s){const o=n.get(i);let c;return o===void 0?(c=new E_,n.set(i,[c])):s>=o.length?(c=new E_,o.push(c)):c=o[s],c}function t(){n=new WeakMap}return{get:e,dispose:t}}function YF(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new le,color:new ot};break;case"SpotLight":t={position:new le,direction:new le,color:new ot,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new le,color:new ot,distance:0,decay:0};break;case"HemisphereLight":t={direction:new le,skyColor:new ot,groundColor:new ot};break;case"RectAreaLight":t={color:new ot,position:new le,halfWidth:new le,halfHeight:new le};break}return n[e.id]=t,t}}}function jF(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new We,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let qF=0;function ZF(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function KF(n){const e=new YF,t=jF(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let x=0;x<9;x++)i.probe.push(new le);const s=new le,o=new gt,c=new gt;function h(x){let b=0,S=0,M=0;for(let ee=0;ee<9;ee++)i.probe[ee].set(0,0,0);let P=0,L=0,z=0,F=0,k=0,R=0,O=0,W=0,Z=0,J=0,te=0;x.sort(ZF);for(let ee=0,K=x.length;ee<K;ee++){const se=x[ee],ge=se.color,xe=se.intensity,Re=se.distance,Le=se.shadow&&se.shadow.map?se.shadow.map.texture:null;if(se.isAmbientLight)b+=ge.r*xe,S+=ge.g*xe,M+=ge.b*xe;else if(se.isLightProbe){for(let Ae=0;Ae<9;Ae++)i.probe[Ae].addScaledVector(se.sh.coefficients[Ae],xe);te++}else if(se.isDirectionalLight){const Ae=e.get(se);if(Ae.color.copy(se.color).multiplyScalar(se.intensity),se.castShadow){const ze=se.shadow,ce=t.get(se);ce.shadowIntensity=ze.intensity,ce.shadowBias=ze.bias,ce.shadowNormalBias=ze.normalBias,ce.shadowRadius=ze.radius,ce.shadowMapSize=ze.mapSize,i.directionalShadow[P]=ce,i.directionalShadowMap[P]=Le,i.directionalShadowMatrix[P]=se.shadow.matrix,R++}i.directional[P]=Ae,P++}else if(se.isSpotLight){const Ae=e.get(se);Ae.position.setFromMatrixPosition(se.matrixWorld),Ae.color.copy(ge).multiplyScalar(xe),Ae.distance=Re,Ae.coneCos=Math.cos(se.angle),Ae.penumbraCos=Math.cos(se.angle*(1-se.penumbra)),Ae.decay=se.decay,i.spot[z]=Ae;const ze=se.shadow;if(se.map&&(i.spotLightMap[Z]=se.map,Z++,ze.updateMatrices(se),se.castShadow&&J++),i.spotLightMatrix[z]=ze.matrix,se.castShadow){const ce=t.get(se);ce.shadowIntensity=ze.intensity,ce.shadowBias=ze.bias,ce.shadowNormalBias=ze.normalBias,ce.shadowRadius=ze.radius,ce.shadowMapSize=ze.mapSize,i.spotShadow[z]=ce,i.spotShadowMap[z]=Le,W++}z++}else if(se.isRectAreaLight){const Ae=e.get(se);Ae.color.copy(ge).multiplyScalar(xe),Ae.halfWidth.set(se.width*.5,0,0),Ae.halfHeight.set(0,se.height*.5,0),i.rectArea[F]=Ae,F++}else if(se.isPointLight){const Ae=e.get(se);if(Ae.color.copy(se.color).multiplyScalar(se.intensity),Ae.distance=se.distance,Ae.decay=se.decay,se.castShadow){const ze=se.shadow,ce=t.get(se);ce.shadowIntensity=ze.intensity,ce.shadowBias=ze.bias,ce.shadowNormalBias=ze.normalBias,ce.shadowRadius=ze.radius,ce.shadowMapSize=ze.mapSize,ce.shadowCameraNear=ze.camera.near,ce.shadowCameraFar=ze.camera.far,i.pointShadow[L]=ce,i.pointShadowMap[L]=Le,i.pointShadowMatrix[L]=se.shadow.matrix,O++}i.point[L]=Ae,L++}else if(se.isHemisphereLight){const Ae=e.get(se);Ae.skyColor.copy(se.color).multiplyScalar(xe),Ae.groundColor.copy(se.groundColor).multiplyScalar(xe),i.hemi[k]=Ae,k++}}F>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ct.LTC_FLOAT_1,i.rectAreaLTC2=ct.LTC_FLOAT_2):(i.rectAreaLTC1=ct.LTC_HALF_1,i.rectAreaLTC2=ct.LTC_HALF_2)),i.ambient[0]=b,i.ambient[1]=S,i.ambient[2]=M;const re=i.hash;(re.directionalLength!==P||re.pointLength!==L||re.spotLength!==z||re.rectAreaLength!==F||re.hemiLength!==k||re.numDirectionalShadows!==R||re.numPointShadows!==O||re.numSpotShadows!==W||re.numSpotMaps!==Z||re.numLightProbes!==te)&&(i.directional.length=P,i.spot.length=z,i.rectArea.length=F,i.point.length=L,i.hemi.length=k,i.directionalShadow.length=R,i.directionalShadowMap.length=R,i.pointShadow.length=O,i.pointShadowMap.length=O,i.spotShadow.length=W,i.spotShadowMap.length=W,i.directionalShadowMatrix.length=R,i.pointShadowMatrix.length=O,i.spotLightMatrix.length=W+Z-J,i.spotLightMap.length=Z,i.numSpotLightShadowsWithMaps=J,i.numLightProbes=te,re.directionalLength=P,re.pointLength=L,re.spotLength=z,re.rectAreaLength=F,re.hemiLength=k,re.numDirectionalShadows=R,re.numPointShadows=O,re.numSpotShadows=W,re.numSpotMaps=Z,re.numLightProbes=te,i.version=qF++)}function m(x,b){let S=0,M=0,P=0,L=0,z=0;const F=b.matrixWorldInverse;for(let k=0,R=x.length;k<R;k++){const O=x[k];if(O.isDirectionalLight){const W=i.directional[S];W.direction.setFromMatrixPosition(O.matrixWorld),s.setFromMatrixPosition(O.target.matrixWorld),W.direction.sub(s),W.direction.transformDirection(F),S++}else if(O.isSpotLight){const W=i.spot[P];W.position.setFromMatrixPosition(O.matrixWorld),W.position.applyMatrix4(F),W.direction.setFromMatrixPosition(O.matrixWorld),s.setFromMatrixPosition(O.target.matrixWorld),W.direction.sub(s),W.direction.transformDirection(F),P++}else if(O.isRectAreaLight){const W=i.rectArea[L];W.position.setFromMatrixPosition(O.matrixWorld),W.position.applyMatrix4(F),c.identity(),o.copy(O.matrixWorld),o.premultiply(F),c.extractRotation(o),W.halfWidth.set(O.width*.5,0,0),W.halfHeight.set(0,O.height*.5,0),W.halfWidth.applyMatrix4(c),W.halfHeight.applyMatrix4(c),L++}else if(O.isPointLight){const W=i.point[M];W.position.setFromMatrixPosition(O.matrixWorld),W.position.applyMatrix4(F),M++}else if(O.isHemisphereLight){const W=i.hemi[z];W.direction.setFromMatrixPosition(O.matrixWorld),W.direction.transformDirection(F),z++}}}return{setup:h,setupView:m,state:i}}function T_(n){const e=new KF(n),t=[],i=[];function s(b){x.camera=b,t.length=0,i.length=0}function o(b){t.push(b)}function c(b){i.push(b)}function h(){e.setup(t)}function m(b){e.setupView(t,b)}const x={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:s,state:x,setupLights:h,setupLightsView:m,pushLight:o,pushShadow:c}}function JF(n){let e=new WeakMap;function t(s,o=0){const c=e.get(s);let h;return c===void 0?(h=new T_(n),e.set(s,[h])):o>=c.length?(h=new T_(n),c.push(h)):h=c[o],h}function i(){e=new WeakMap}return{get:t,dispose:i}}class Ab extends vi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=GE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Cb extends vi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const $F=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,QF=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function eO(n,e,t){let i=new Qh;const s=new We,o=new We,c=new an,h=new Ab({depthPacking:XE}),m=new Cb,x={},b=t.maxTextureSize,S={[na]:Hi,[Hi]:na,[ys]:ys},M=new as({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new We},radius:{value:4}},vertexShader:$F,fragmentShader:QF}),P=M.clone();P.defines.HORIZONTAL_PASS=1;const L=new Bt;L.setAttribute("position",new xn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const z=new Gn(L,M),F=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Zg;let k=this.type;this.render=function(J,te,re){if(F.enabled===!1||F.autoUpdate===!1&&F.needsUpdate===!1||J.length===0)return;const ee=n.getRenderTarget(),K=n.getActiveCubeFace(),se=n.getActiveMipmapLevel(),ge=n.state;ge.setBlending(Js),ge.buffers.color.setClear(1,1,1,1),ge.buffers.depth.setTest(!0),ge.setScissorTest(!1);const xe=k!==Kr&&this.type===Kr,Re=k===Kr&&this.type!==Kr;for(let Le=0,Ae=J.length;Le<Ae;Le++){const ze=J[Le],ce=ze.shadow;if(ce===void 0){console.warn("THREE.WebGLShadowMap:",ze,"has no shadow.");continue}if(ce.autoUpdate===!1&&ce.needsUpdate===!1)continue;s.copy(ce.mapSize);const we=ce.getFrameExtents();if(s.multiply(we),o.copy(ce.mapSize),(s.x>b||s.y>b)&&(s.x>b&&(o.x=Math.floor(b/we.x),s.x=o.x*we.x,ce.mapSize.x=o.x),s.y>b&&(o.y=Math.floor(b/we.y),s.y=o.y*we.y,ce.mapSize.y=o.y)),ce.map===null||xe===!0||Re===!0){const Ie=this.type!==Kr?{minFilter:oi,magFilter:oi}:{};ce.map!==null&&ce.map.dispose(),ce.map=new ss(s.x,s.y,Ie),ce.map.texture.name=ze.name+".shadowMap",ce.camera.updateProjectionMatrix()}n.setRenderTarget(ce.map),n.clear();const be=ce.getViewportCount();for(let Ie=0;Ie<be;Ie++){const Ke=ce.getViewport(Ie);c.set(o.x*Ke.x,o.y*Ke.y,o.x*Ke.z,o.y*Ke.w),ge.viewport(c),ce.updateMatrices(ze,Ie),i=ce.getFrustum(),W(te,re,ce.camera,ze,this.type)}ce.isPointLightShadow!==!0&&this.type===Kr&&R(ce,re),ce.needsUpdate=!1}k=this.type,F.needsUpdate=!1,n.setRenderTarget(ee,K,se)};function R(J,te){const re=e.update(z);M.defines.VSM_SAMPLES!==J.blurSamples&&(M.defines.VSM_SAMPLES=J.blurSamples,P.defines.VSM_SAMPLES=J.blurSamples,M.needsUpdate=!0,P.needsUpdate=!0),J.mapPass===null&&(J.mapPass=new ss(s.x,s.y)),M.uniforms.shadow_pass.value=J.map.texture,M.uniforms.resolution.value=J.mapSize,M.uniforms.radius.value=J.radius,n.setRenderTarget(J.mapPass),n.clear(),n.renderBufferDirect(te,null,re,M,z,null),P.uniforms.shadow_pass.value=J.mapPass.texture,P.uniforms.resolution.value=J.mapSize,P.uniforms.radius.value=J.radius,n.setRenderTarget(J.map),n.clear(),n.renderBufferDirect(te,null,re,P,z,null)}function O(J,te,re,ee){let K=null;const se=re.isPointLight===!0?J.customDistanceMaterial:J.customDepthMaterial;if(se!==void 0)K=se;else if(K=re.isPointLight===!0?m:h,n.localClippingEnabled&&te.clipShadows===!0&&Array.isArray(te.clippingPlanes)&&te.clippingPlanes.length!==0||te.displacementMap&&te.displacementScale!==0||te.alphaMap&&te.alphaTest>0||te.map&&te.alphaTest>0){const ge=K.uuid,xe=te.uuid;let Re=x[ge];Re===void 0&&(Re={},x[ge]=Re);let Le=Re[xe];Le===void 0&&(Le=K.clone(),Re[xe]=Le,te.addEventListener("dispose",Z)),K=Le}if(K.visible=te.visible,K.wireframe=te.wireframe,ee===Kr?K.side=te.shadowSide!==null?te.shadowSide:te.side:K.side=te.shadowSide!==null?te.shadowSide:S[te.side],K.alphaMap=te.alphaMap,K.alphaTest=te.alphaTest,K.map=te.map,K.clipShadows=te.clipShadows,K.clippingPlanes=te.clippingPlanes,K.clipIntersection=te.clipIntersection,K.displacementMap=te.displacementMap,K.displacementScale=te.displacementScale,K.displacementBias=te.displacementBias,K.wireframeLinewidth=te.wireframeLinewidth,K.linewidth=te.linewidth,re.isPointLight===!0&&K.isMeshDistanceMaterial===!0){const ge=n.properties.get(K);ge.light=re}return K}function W(J,te,re,ee,K){if(J.visible===!1)return;if(J.layers.test(te.layers)&&(J.isMesh||J.isLine||J.isPoints)&&(J.castShadow||J.receiveShadow&&K===Kr)&&(!J.frustumCulled||i.intersectsObject(J))){J.modelViewMatrix.multiplyMatrices(re.matrixWorldInverse,J.matrixWorld);const xe=e.update(J),Re=J.material;if(Array.isArray(Re)){const Le=xe.groups;for(let Ae=0,ze=Le.length;Ae<ze;Ae++){const ce=Le[Ae],we=Re[ce.materialIndex];if(we&&we.visible){const be=O(J,we,ee,K);J.onBeforeShadow(n,J,te,re,xe,be,ce),n.renderBufferDirect(re,null,xe,be,J,ce),J.onAfterShadow(n,J,te,re,xe,be,ce)}}}else if(Re.visible){const Le=O(J,Re,ee,K);J.onBeforeShadow(n,J,te,re,xe,Le,null),n.renderBufferDirect(re,null,xe,Le,J,null),J.onAfterShadow(n,J,te,re,xe,Le,null)}}const ge=J.children;for(let xe=0,Re=ge.length;xe<Re;xe++)W(ge[xe],te,re,ee,K)}function Z(J){J.target.removeEventListener("dispose",Z);for(const re in x){const ee=x[re],K=J.target.uuid;K in ee&&(ee[K].dispose(),delete ee[K])}}}function tO(n){function e(){let me=!1;const et=new an;let Ue=null;const He=new an(0,0,0,0);return{setMask:function(nt){Ue!==nt&&!me&&(n.colorMask(nt,nt,nt,nt),Ue=nt)},setLocked:function(nt){me=nt},setClear:function(nt,Lt,$t,bn,Nn){Nn===!0&&(nt*=bn,Lt*=bn,$t*=bn),et.set(nt,Lt,$t,bn),He.equals(et)===!1&&(n.clearColor(nt,Lt,$t,bn),He.copy(et))},reset:function(){me=!1,Ue=null,He.set(-1,0,0,0)}}}function t(){let me=!1,et=null,Ue=null,He=null;return{setTest:function(nt){nt?Je(n.DEPTH_TEST):Ye(n.DEPTH_TEST)},setMask:function(nt){et!==nt&&!me&&(n.depthMask(nt),et=nt)},setFunc:function(nt){if(Ue!==nt){switch(nt){case AE:n.depthFunc(n.NEVER);break;case CE:n.depthFunc(n.ALWAYS);break;case EE:n.depthFunc(n.LESS);break;case Ch:n.depthFunc(n.LEQUAL);break;case TE:n.depthFunc(n.EQUAL);break;case PE:n.depthFunc(n.GEQUAL);break;case kE:n.depthFunc(n.GREATER);break;case RE:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ue=nt}},setLocked:function(nt){me=nt},setClear:function(nt){He!==nt&&(n.clearDepth(nt),He=nt)},reset:function(){me=!1,et=null,Ue=null,He=null}}}function i(){let me=!1,et=null,Ue=null,He=null,nt=null,Lt=null,$t=null,bn=null,Nn=null;return{setTest:function(rn){me||(rn?Je(n.STENCIL_TEST):Ye(n.STENCIL_TEST))},setMask:function(rn){et!==rn&&!me&&(n.stencilMask(rn),et=rn)},setFunc:function(rn,Yi,Ii){(Ue!==rn||He!==Yi||nt!==Ii)&&(n.stencilFunc(rn,Yi,Ii),Ue=rn,He=Yi,nt=Ii)},setOp:function(rn,Yi,Ii){(Lt!==rn||$t!==Yi||bn!==Ii)&&(n.stencilOp(rn,Yi,Ii),Lt=rn,$t=Yi,bn=Ii)},setLocked:function(rn){me=rn},setClear:function(rn){Nn!==rn&&(n.clearStencil(rn),Nn=rn)},reset:function(){me=!1,et=null,Ue=null,He=null,nt=null,Lt=null,$t=null,bn=null,Nn=null}}}const s=new e,o=new t,c=new i,h=new WeakMap,m=new WeakMap;let x={},b={},S=new WeakMap,M=[],P=null,L=!1,z=null,F=null,k=null,R=null,O=null,W=null,Z=null,J=new ot(0,0,0),te=0,re=!1,ee=null,K=null,se=null,ge=null,xe=null;const Re=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Le=!1,Ae=0;const ze=n.getParameter(n.VERSION);ze.indexOf("WebGL")!==-1?(Ae=parseFloat(/^WebGL (\d)/.exec(ze)[1]),Le=Ae>=1):ze.indexOf("OpenGL ES")!==-1&&(Ae=parseFloat(/^OpenGL ES (\d)/.exec(ze)[1]),Le=Ae>=2);let ce=null,we={};const be=n.getParameter(n.SCISSOR_BOX),Ie=n.getParameter(n.VIEWPORT),Ke=new an().fromArray(be),rt=new an().fromArray(Ie);function Te(me,et,Ue,He){const nt=new Uint8Array(4),Lt=n.createTexture();n.bindTexture(me,Lt),n.texParameteri(me,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(me,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let $t=0;$t<Ue;$t++)me===n.TEXTURE_3D||me===n.TEXTURE_2D_ARRAY?n.texImage3D(et,0,n.RGBA,1,1,He,0,n.RGBA,n.UNSIGNED_BYTE,nt):n.texImage2D(et+$t,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,nt);return Lt}const Ve={};Ve[n.TEXTURE_2D]=Te(n.TEXTURE_2D,n.TEXTURE_2D,1),Ve[n.TEXTURE_CUBE_MAP]=Te(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Ve[n.TEXTURE_2D_ARRAY]=Te(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Ve[n.TEXTURE_3D]=Te(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),c.setClear(0),Je(n.DEPTH_TEST),o.setFunc(Ch),lt(!1),Be(G0),Je(n.CULL_FACE),je(Js);function Je(me){x[me]!==!0&&(n.enable(me),x[me]=!0)}function Ye(me){x[me]!==!1&&(n.disable(me),x[me]=!1)}function kt(me,et){return b[me]!==et?(n.bindFramebuffer(me,et),b[me]=et,me===n.DRAW_FRAMEBUFFER&&(b[n.FRAMEBUFFER]=et),me===n.FRAMEBUFFER&&(b[n.DRAW_FRAMEBUFFER]=et),!0):!1}function Nt(me,et){let Ue=M,He=!1;if(me){Ue=S.get(et),Ue===void 0&&(Ue=[],S.set(et,Ue));const nt=me.textures;if(Ue.length!==nt.length||Ue[0]!==n.COLOR_ATTACHMENT0){for(let Lt=0,$t=nt.length;Lt<$t;Lt++)Ue[Lt]=n.COLOR_ATTACHMENT0+Lt;Ue.length=nt.length,He=!0}}else Ue[0]!==n.BACK&&(Ue[0]=n.BACK,He=!0);He&&n.drawBuffers(Ue)}function Ct(me){return P!==me?(n.useProgram(me),P=me,!0):!1}const Ot={[La]:n.FUNC_ADD,[lE]:n.FUNC_SUBTRACT,[cE]:n.FUNC_REVERSE_SUBTRACT};Ot[uE]=n.MIN,Ot[hE]=n.MAX;const oe={[dE]:n.ZERO,[fE]:n.ONE,[pE]:n.SRC_COLOR,[qp]:n.SRC_ALPHA,[bE]:n.SRC_ALPHA_SATURATE,[xE]:n.DST_COLOR,[mE]:n.DST_ALPHA,[gE]:n.ONE_MINUS_SRC_COLOR,[Zp]:n.ONE_MINUS_SRC_ALPHA,[yE]:n.ONE_MINUS_DST_COLOR,[vE]:n.ONE_MINUS_DST_ALPHA,[wE]:n.CONSTANT_COLOR,[SE]:n.ONE_MINUS_CONSTANT_COLOR,[_E]:n.CONSTANT_ALPHA,[ME]:n.ONE_MINUS_CONSTANT_ALPHA};function je(me,et,Ue,He,nt,Lt,$t,bn,Nn,rn){if(me===Js){L===!0&&(Ye(n.BLEND),L=!1);return}if(L===!1&&(Je(n.BLEND),L=!0),me!==oE){if(me!==z||rn!==re){if((F!==La||O!==La)&&(n.blendEquation(n.FUNC_ADD),F=La,O=La),rn)switch(me){case Ho:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case X0:n.blendFunc(n.ONE,n.ONE);break;case Y0:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case j0:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",me);break}else switch(me){case Ho:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case X0:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Y0:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case j0:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",me);break}k=null,R=null,W=null,Z=null,J.set(0,0,0),te=0,z=me,re=rn}return}nt=nt||et,Lt=Lt||Ue,$t=$t||He,(et!==F||nt!==O)&&(n.blendEquationSeparate(Ot[et],Ot[nt]),F=et,O=nt),(Ue!==k||He!==R||Lt!==W||$t!==Z)&&(n.blendFuncSeparate(oe[Ue],oe[He],oe[Lt],oe[$t]),k=Ue,R=He,W=Lt,Z=$t),(bn.equals(J)===!1||Nn!==te)&&(n.blendColor(bn.r,bn.g,bn.b,Nn),J.copy(bn),te=Nn),z=me,re=!1}function Ze(me,et){me.side===ys?Ye(n.CULL_FACE):Je(n.CULL_FACE);let Ue=me.side===Hi;et&&(Ue=!Ue),lt(Ue),me.blending===Ho&&me.transparent===!1?je(Js):je(me.blending,me.blendEquation,me.blendSrc,me.blendDst,me.blendEquationAlpha,me.blendSrcAlpha,me.blendDstAlpha,me.blendColor,me.blendAlpha,me.premultipliedAlpha),o.setFunc(me.depthFunc),o.setTest(me.depthTest),o.setMask(me.depthWrite),s.setMask(me.colorWrite);const He=me.stencilWrite;c.setTest(He),He&&(c.setMask(me.stencilWriteMask),c.setFunc(me.stencilFunc,me.stencilRef,me.stencilFuncMask),c.setOp(me.stencilFail,me.stencilZFail,me.stencilZPass)),st(me.polygonOffset,me.polygonOffsetFactor,me.polygonOffsetUnits),me.alphaToCoverage===!0?Je(n.SAMPLE_ALPHA_TO_COVERAGE):Ye(n.SAMPLE_ALPHA_TO_COVERAGE)}function lt(me){ee!==me&&(me?n.frontFace(n.CW):n.frontFace(n.CCW),ee=me)}function Be(me){me!==rE?(Je(n.CULL_FACE),me!==K&&(me===G0?n.cullFace(n.BACK):me===sE?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ye(n.CULL_FACE),K=me}function Tt(me){me!==se&&(Le&&n.lineWidth(me),se=me)}function st(me,et,Ue){me?(Je(n.POLYGON_OFFSET_FILL),(ge!==et||xe!==Ue)&&(n.polygonOffset(et,Ue),ge=et,xe=Ue)):Ye(n.POLYGON_OFFSET_FILL)}function vt(me){me?Je(n.SCISSOR_TEST):Ye(n.SCISSOR_TEST)}function he(me){me===void 0&&(me=n.TEXTURE0+Re-1),ce!==me&&(n.activeTexture(me),ce=me)}function ie(me,et,Ue){Ue===void 0&&(ce===null?Ue=n.TEXTURE0+Re-1:Ue=ce);let He=we[Ue];He===void 0&&(He={type:void 0,texture:void 0},we[Ue]=He),(He.type!==me||He.texture!==et)&&(ce!==Ue&&(n.activeTexture(Ue),ce=Ue),n.bindTexture(me,et||Ve[me]),He.type=me,He.texture=et)}function Pe(){const me=we[ce];me!==void 0&&me.type!==void 0&&(n.bindTexture(me.type,null),me.type=void 0,me.texture=void 0)}function qe(){try{n.compressedTexImage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Ge(){try{n.compressedTexImage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Xe(){try{n.texSubImage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function _t(){try{n.texSubImage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function at(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function pt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function zt(){try{n.texStorage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Qe(){try{n.texStorage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function ht(){try{n.texImage2D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Jt(){try{n.texImage3D.apply(n,arguments)}catch(me){console.error("THREE.WebGLState:",me)}}function Dt(me){Ke.equals(me)===!1&&(n.scissor(me.x,me.y,me.z,me.w),Ke.copy(me))}function xt(me){rt.equals(me)===!1&&(n.viewport(me.x,me.y,me.z,me.w),rt.copy(me))}function Ut(me,et){let Ue=m.get(et);Ue===void 0&&(Ue=new WeakMap,m.set(et,Ue));let He=Ue.get(me);He===void 0&&(He=n.getUniformBlockIndex(et,me.name),Ue.set(me,He))}function Gt(me,et){const He=m.get(et).get(me);h.get(et)!==He&&(n.uniformBlockBinding(et,He,me.__bindingPointIndex),h.set(et,He))}function pn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),x={},ce=null,we={},b={},S=new WeakMap,M=[],P=null,L=!1,z=null,F=null,k=null,R=null,O=null,W=null,Z=null,J=new ot(0,0,0),te=0,re=!1,ee=null,K=null,se=null,ge=null,xe=null,Ke.set(0,0,n.canvas.width,n.canvas.height),rt.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),c.reset()}return{buffers:{color:s,depth:o,stencil:c},enable:Je,disable:Ye,bindFramebuffer:kt,drawBuffers:Nt,useProgram:Ct,setBlending:je,setMaterial:Ze,setFlipSided:lt,setCullFace:Be,setLineWidth:Tt,setPolygonOffset:st,setScissorTest:vt,activeTexture:he,bindTexture:ie,unbindTexture:Pe,compressedTexImage2D:qe,compressedTexImage3D:Ge,texImage2D:ht,texImage3D:Jt,updateUBOMapping:Ut,uniformBlockBinding:Gt,texStorage2D:zt,texStorage3D:Qe,texSubImage2D:Xe,texSubImage3D:_t,compressedTexSubImage2D:at,compressedTexSubImage3D:pt,scissor:Dt,viewport:xt,reset:pn}}function nO(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function iO(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function rO(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function Q0(n,e,t,i){const s=sO(i);switch(t){case hb:return n*e;case fb:return n*e;case pb:return n*e*2;case em:return n*e/s.components*s.byteLength;case Zh:return n*e/s.components*s.byteLength;case gb:return n*e*2/s.components*s.byteLength;case tm:return n*e*2/s.components*s.byteLength;case db:return n*e*3/s.components*s.byteLength;case Pi:return n*e*4/s.components*s.byteLength;case nm:return n*e*4/s.components*s.byteLength;case Qu:case eh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case th:case nh:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Jp:case Qp:return Math.max(n,16)*Math.max(e,8)/4;case Kp:case $p:return Math.max(n,8)*Math.max(e,8)/2;case eg:case tg:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case ng:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case ig:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case rg:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case sg:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case ag:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case og:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case lg:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case cg:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case ug:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case hg:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case dg:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case fg:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case pg:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case gg:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case mg:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case ih:case vg:case xg:return Math.ceil(n/4)*Math.ceil(e/4)*16;case mb:case yg:return Math.ceil(n/4)*Math.ceil(e/4)*8;case bg:case wg:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function sO(n){switch(n){case rs:case lb:return{byteLength:1,components:1};case Ec:case cb:case Bc:return{byteLength:2,components:1};case $g:case Qg:return{byteLength:2,components:4};case ra:case Jg:case nr:return{byteLength:4,components:1};case ub:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const aO={contain:nO,cover:iO,fill:rO,getByteLength:Q0};function oO(n,e,t,i,s,o,c){const h=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),x=new We,b=new WeakMap;let S;const M=new WeakMap;let P=!1;try{P=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function L(he,ie){return P?new OffscreenCanvas(he,ie):Fh("canvas")}function z(he,ie,Pe){let qe=1;const Ge=vt(he);if((Ge.width>Pe||Ge.height>Pe)&&(qe=Pe/Math.max(Ge.width,Ge.height)),qe<1)if(typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&he instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&he instanceof ImageBitmap||typeof VideoFrame<"u"&&he instanceof VideoFrame){const Xe=Math.floor(qe*Ge.width),_t=Math.floor(qe*Ge.height);S===void 0&&(S=L(Xe,_t));const at=ie?L(Xe,_t):S;return at.width=Xe,at.height=_t,at.getContext("2d").drawImage(he,0,0,Xe,_t),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ge.width+"x"+Ge.height+") to ("+Xe+"x"+_t+")."),at}else return"data"in he&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ge.width+"x"+Ge.height+")."),he;return he}function F(he){return he.generateMipmaps&&he.minFilter!==oi&&he.minFilter!==Jn}function k(he){n.generateMipmap(he)}function R(he,ie,Pe,qe,Ge=!1){if(he!==null){if(n[he]!==void 0)return n[he];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+he+"'")}let Xe=ie;if(ie===n.RED&&(Pe===n.FLOAT&&(Xe=n.R32F),Pe===n.HALF_FLOAT&&(Xe=n.R16F),Pe===n.UNSIGNED_BYTE&&(Xe=n.R8)),ie===n.RED_INTEGER&&(Pe===n.UNSIGNED_BYTE&&(Xe=n.R8UI),Pe===n.UNSIGNED_SHORT&&(Xe=n.R16UI),Pe===n.UNSIGNED_INT&&(Xe=n.R32UI),Pe===n.BYTE&&(Xe=n.R8I),Pe===n.SHORT&&(Xe=n.R16I),Pe===n.INT&&(Xe=n.R32I)),ie===n.RG&&(Pe===n.FLOAT&&(Xe=n.RG32F),Pe===n.HALF_FLOAT&&(Xe=n.RG16F),Pe===n.UNSIGNED_BYTE&&(Xe=n.RG8)),ie===n.RG_INTEGER&&(Pe===n.UNSIGNED_BYTE&&(Xe=n.RG8UI),Pe===n.UNSIGNED_SHORT&&(Xe=n.RG16UI),Pe===n.UNSIGNED_INT&&(Xe=n.RG32UI),Pe===n.BYTE&&(Xe=n.RG8I),Pe===n.SHORT&&(Xe=n.RG16I),Pe===n.INT&&(Xe=n.RG32I)),ie===n.RGB&&Pe===n.UNSIGNED_INT_5_9_9_9_REV&&(Xe=n.RGB9_E5),ie===n.RGBA){const _t=Ge?Rh:fn.getTransfer(qe);Pe===n.FLOAT&&(Xe=n.RGBA32F),Pe===n.HALF_FLOAT&&(Xe=n.RGBA16F),Pe===n.UNSIGNED_BYTE&&(Xe=_t===wn?n.SRGB8_ALPHA8:n.RGBA8),Pe===n.UNSIGNED_SHORT_4_4_4_4&&(Xe=n.RGBA4),Pe===n.UNSIGNED_SHORT_5_5_5_1&&(Xe=n.RGB5_A1)}return(Xe===n.R16F||Xe===n.R32F||Xe===n.RG16F||Xe===n.RG32F||Xe===n.RGBA16F||Xe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Xe}function O(he,ie){let Pe;return he?ie===null||ie===ra||ie===$o?Pe=n.DEPTH24_STENCIL8:ie===nr?Pe=n.DEPTH32F_STENCIL8:ie===Ec&&(Pe=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):ie===null||ie===ra||ie===$o?Pe=n.DEPTH_COMPONENT24:ie===nr?Pe=n.DEPTH_COMPONENT32F:ie===Ec&&(Pe=n.DEPTH_COMPONENT16),Pe}function W(he,ie){return F(he)===!0||he.isFramebufferTexture&&he.minFilter!==oi&&he.minFilter!==Jn?Math.log2(Math.max(ie.width,ie.height))+1:he.mipmaps!==void 0&&he.mipmaps.length>0?he.mipmaps.length:he.isCompressedTexture&&Array.isArray(he.image)?ie.mipmaps.length:1}function Z(he){const ie=he.target;ie.removeEventListener("dispose",Z),te(ie),ie.isVideoTexture&&b.delete(ie)}function J(he){const ie=he.target;ie.removeEventListener("dispose",J),ee(ie)}function te(he){const ie=i.get(he);if(ie.__webglInit===void 0)return;const Pe=he.source,qe=M.get(Pe);if(qe){const Ge=qe[ie.__cacheKey];Ge.usedTimes--,Ge.usedTimes===0&&re(he),Object.keys(qe).length===0&&M.delete(Pe)}i.remove(he)}function re(he){const ie=i.get(he);n.deleteTexture(ie.__webglTexture);const Pe=he.source,qe=M.get(Pe);delete qe[ie.__cacheKey],c.memory.textures--}function ee(he){const ie=i.get(he);if(he.depthTexture&&he.depthTexture.dispose(),he.isWebGLCubeRenderTarget)for(let qe=0;qe<6;qe++){if(Array.isArray(ie.__webglFramebuffer[qe]))for(let Ge=0;Ge<ie.__webglFramebuffer[qe].length;Ge++)n.deleteFramebuffer(ie.__webglFramebuffer[qe][Ge]);else n.deleteFramebuffer(ie.__webglFramebuffer[qe]);ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer[qe])}else{if(Array.isArray(ie.__webglFramebuffer))for(let qe=0;qe<ie.__webglFramebuffer.length;qe++)n.deleteFramebuffer(ie.__webglFramebuffer[qe]);else n.deleteFramebuffer(ie.__webglFramebuffer);if(ie.__webglDepthbuffer&&n.deleteRenderbuffer(ie.__webglDepthbuffer),ie.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ie.__webglMultisampledFramebuffer),ie.__webglColorRenderbuffer)for(let qe=0;qe<ie.__webglColorRenderbuffer.length;qe++)ie.__webglColorRenderbuffer[qe]&&n.deleteRenderbuffer(ie.__webglColorRenderbuffer[qe]);ie.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ie.__webglDepthRenderbuffer)}const Pe=he.textures;for(let qe=0,Ge=Pe.length;qe<Ge;qe++){const Xe=i.get(Pe[qe]);Xe.__webglTexture&&(n.deleteTexture(Xe.__webglTexture),c.memory.textures--),i.remove(Pe[qe])}i.remove(he)}let K=0;function se(){K=0}function ge(){const he=K;return he>=s.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+he+" texture units while this GPU supports only "+s.maxTextures),K+=1,he}function xe(he){const ie=[];return ie.push(he.wrapS),ie.push(he.wrapT),ie.push(he.wrapR||0),ie.push(he.magFilter),ie.push(he.minFilter),ie.push(he.anisotropy),ie.push(he.internalFormat),ie.push(he.format),ie.push(he.type),ie.push(he.generateMipmaps),ie.push(he.premultiplyAlpha),ie.push(he.flipY),ie.push(he.unpackAlignment),ie.push(he.colorSpace),ie.join()}function Re(he,ie){const Pe=i.get(he);if(he.isVideoTexture&&Tt(he),he.isRenderTargetTexture===!1&&he.version>0&&Pe.__version!==he.version){const qe=he.image;if(qe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(qe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{rt(Pe,he,ie);return}}t.bindTexture(n.TEXTURE_2D,Pe.__webglTexture,n.TEXTURE0+ie)}function Le(he,ie){const Pe=i.get(he);if(he.version>0&&Pe.__version!==he.version){rt(Pe,he,ie);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Pe.__webglTexture,n.TEXTURE0+ie)}function Ae(he,ie){const Pe=i.get(he);if(he.version>0&&Pe.__version!==he.version){rt(Pe,he,ie);return}t.bindTexture(n.TEXTURE_3D,Pe.__webglTexture,n.TEXTURE0+ie)}function ze(he,ie){const Pe=i.get(he);if(he.version>0&&Pe.__version!==he.version){Te(Pe,he,ie);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Pe.__webglTexture,n.TEXTURE0+ie)}const ce={[Jo]:n.REPEAT,[tr]:n.CLAMP_TO_EDGE,[Th]:n.MIRRORED_REPEAT},we={[oi]:n.NEAREST,[ob]:n.NEAREST_MIPMAP_NEAREST,[oc]:n.NEAREST_MIPMAP_LINEAR,[Jn]:n.LINEAR,[$u]:n.LINEAR_MIPMAP_NEAREST,[bs]:n.LINEAR_MIPMAP_LINEAR},be={[jE]:n.NEVER,[QE]:n.ALWAYS,[qE]:n.LESS,[xb]:n.LEQUAL,[ZE]:n.EQUAL,[$E]:n.GEQUAL,[KE]:n.GREATER,[JE]:n.NOTEQUAL};function Ie(he,ie){if(ie.type===nr&&e.has("OES_texture_float_linear")===!1&&(ie.magFilter===Jn||ie.magFilter===$u||ie.magFilter===oc||ie.magFilter===bs||ie.minFilter===Jn||ie.minFilter===$u||ie.minFilter===oc||ie.minFilter===bs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(he,n.TEXTURE_WRAP_S,ce[ie.wrapS]),n.texParameteri(he,n.TEXTURE_WRAP_T,ce[ie.wrapT]),(he===n.TEXTURE_3D||he===n.TEXTURE_2D_ARRAY)&&n.texParameteri(he,n.TEXTURE_WRAP_R,ce[ie.wrapR]),n.texParameteri(he,n.TEXTURE_MAG_FILTER,we[ie.magFilter]),n.texParameteri(he,n.TEXTURE_MIN_FILTER,we[ie.minFilter]),ie.compareFunction&&(n.texParameteri(he,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(he,n.TEXTURE_COMPARE_FUNC,be[ie.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(ie.magFilter===oi||ie.minFilter!==oc&&ie.minFilter!==bs||ie.type===nr&&e.has("OES_texture_float_linear")===!1)return;if(ie.anisotropy>1||i.get(ie).__currentAnisotropy){const Pe=e.get("EXT_texture_filter_anisotropic");n.texParameterf(he,Pe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ie.anisotropy,s.getMaxAnisotropy())),i.get(ie).__currentAnisotropy=ie.anisotropy}}}function Ke(he,ie){let Pe=!1;he.__webglInit===void 0&&(he.__webglInit=!0,ie.addEventListener("dispose",Z));const qe=ie.source;let Ge=M.get(qe);Ge===void 0&&(Ge={},M.set(qe,Ge));const Xe=xe(ie);if(Xe!==he.__cacheKey){Ge[Xe]===void 0&&(Ge[Xe]={texture:n.createTexture(),usedTimes:0},c.memory.textures++,Pe=!0),Ge[Xe].usedTimes++;const _t=Ge[he.__cacheKey];_t!==void 0&&(Ge[he.__cacheKey].usedTimes--,_t.usedTimes===0&&re(ie)),he.__cacheKey=Xe,he.__webglTexture=Ge[Xe].texture}return Pe}function rt(he,ie,Pe){let qe=n.TEXTURE_2D;(ie.isDataArrayTexture||ie.isCompressedArrayTexture)&&(qe=n.TEXTURE_2D_ARRAY),ie.isData3DTexture&&(qe=n.TEXTURE_3D);const Ge=Ke(he,ie),Xe=ie.source;t.bindTexture(qe,he.__webglTexture,n.TEXTURE0+Pe);const _t=i.get(Xe);if(Xe.version!==_t.__version||Ge===!0){t.activeTexture(n.TEXTURE0+Pe);const at=fn.getPrimaries(fn.workingColorSpace),pt=ie.colorSpace===Xs?null:fn.getPrimaries(ie.colorSpace),zt=ie.colorSpace===Xs||at===pt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ie.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ie.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,zt);let Qe=z(ie.image,!1,s.maxTextureSize);Qe=st(ie,Qe);const ht=o.convert(ie.format,ie.colorSpace),Jt=o.convert(ie.type);let Dt=R(ie.internalFormat,ht,Jt,ie.colorSpace,ie.isVideoTexture);Ie(qe,ie);let xt;const Ut=ie.mipmaps,Gt=ie.isVideoTexture!==!0,pn=_t.__version===void 0||Ge===!0,me=Xe.dataReady,et=W(ie,Qe);if(ie.isDepthTexture)Dt=O(ie.format===Qo,ie.type),pn&&(Gt?t.texStorage2D(n.TEXTURE_2D,1,Dt,Qe.width,Qe.height):t.texImage2D(n.TEXTURE_2D,0,Dt,Qe.width,Qe.height,0,ht,Jt,null));else if(ie.isDataTexture)if(Ut.length>0){Gt&&pn&&t.texStorage2D(n.TEXTURE_2D,et,Dt,Ut[0].width,Ut[0].height);for(let Ue=0,He=Ut.length;Ue<He;Ue++)xt=Ut[Ue],Gt?me&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,xt.width,xt.height,ht,Jt,xt.data):t.texImage2D(n.TEXTURE_2D,Ue,Dt,xt.width,xt.height,0,ht,Jt,xt.data);ie.generateMipmaps=!1}else Gt?(pn&&t.texStorage2D(n.TEXTURE_2D,et,Dt,Qe.width,Qe.height),me&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Qe.width,Qe.height,ht,Jt,Qe.data)):t.texImage2D(n.TEXTURE_2D,0,Dt,Qe.width,Qe.height,0,ht,Jt,Qe.data);else if(ie.isCompressedTexture)if(ie.isCompressedArrayTexture){Gt&&pn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,et,Dt,Ut[0].width,Ut[0].height,Qe.depth);for(let Ue=0,He=Ut.length;Ue<He;Ue++)if(xt=Ut[Ue],ie.format!==Pi)if(ht!==null)if(Gt){if(me)if(ie.layerUpdates.size>0){const nt=Q0(xt.width,xt.height,ie.format,ie.type);for(const Lt of ie.layerUpdates){const $t=xt.data.subarray(Lt*nt/xt.data.BYTES_PER_ELEMENT,(Lt+1)*nt/xt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,Lt,xt.width,xt.height,1,ht,$t,0,0)}ie.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,xt.width,xt.height,Qe.depth,ht,xt.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ue,Dt,xt.width,xt.height,Qe.depth,0,xt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Gt?me&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ue,0,0,0,xt.width,xt.height,Qe.depth,ht,Jt,xt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ue,Dt,xt.width,xt.height,Qe.depth,0,ht,Jt,xt.data)}else{Gt&&pn&&t.texStorage2D(n.TEXTURE_2D,et,Dt,Ut[0].width,Ut[0].height);for(let Ue=0,He=Ut.length;Ue<He;Ue++)xt=Ut[Ue],ie.format!==Pi?ht!==null?Gt?me&&t.compressedTexSubImage2D(n.TEXTURE_2D,Ue,0,0,xt.width,xt.height,ht,xt.data):t.compressedTexImage2D(n.TEXTURE_2D,Ue,Dt,xt.width,xt.height,0,xt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gt?me&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,xt.width,xt.height,ht,Jt,xt.data):t.texImage2D(n.TEXTURE_2D,Ue,Dt,xt.width,xt.height,0,ht,Jt,xt.data)}else if(ie.isDataArrayTexture)if(Gt){if(pn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,et,Dt,Qe.width,Qe.height,Qe.depth),me)if(ie.layerUpdates.size>0){const Ue=Q0(Qe.width,Qe.height,ie.format,ie.type);for(const He of ie.layerUpdates){const nt=Qe.data.subarray(He*Ue/Qe.data.BYTES_PER_ELEMENT,(He+1)*Ue/Qe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,He,Qe.width,Qe.height,1,ht,Jt,nt)}ie.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Qe.width,Qe.height,Qe.depth,ht,Jt,Qe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Dt,Qe.width,Qe.height,Qe.depth,0,ht,Jt,Qe.data);else if(ie.isData3DTexture)Gt?(pn&&t.texStorage3D(n.TEXTURE_3D,et,Dt,Qe.width,Qe.height,Qe.depth),me&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Qe.width,Qe.height,Qe.depth,ht,Jt,Qe.data)):t.texImage3D(n.TEXTURE_3D,0,Dt,Qe.width,Qe.height,Qe.depth,0,ht,Jt,Qe.data);else if(ie.isFramebufferTexture){if(pn)if(Gt)t.texStorage2D(n.TEXTURE_2D,et,Dt,Qe.width,Qe.height);else{let Ue=Qe.width,He=Qe.height;for(let nt=0;nt<et;nt++)t.texImage2D(n.TEXTURE_2D,nt,Dt,Ue,He,0,ht,Jt,null),Ue>>=1,He>>=1}}else if(Ut.length>0){if(Gt&&pn){const Ue=vt(Ut[0]);t.texStorage2D(n.TEXTURE_2D,et,Dt,Ue.width,Ue.height)}for(let Ue=0,He=Ut.length;Ue<He;Ue++)xt=Ut[Ue],Gt?me&&t.texSubImage2D(n.TEXTURE_2D,Ue,0,0,ht,Jt,xt):t.texImage2D(n.TEXTURE_2D,Ue,Dt,ht,Jt,xt);ie.generateMipmaps=!1}else if(Gt){if(pn){const Ue=vt(Qe);t.texStorage2D(n.TEXTURE_2D,et,Dt,Ue.width,Ue.height)}me&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ht,Jt,Qe)}else t.texImage2D(n.TEXTURE_2D,0,Dt,ht,Jt,Qe);F(ie)&&k(qe),_t.__version=Xe.version,ie.onUpdate&&ie.onUpdate(ie)}he.__version=ie.version}function Te(he,ie,Pe){if(ie.image.length!==6)return;const qe=Ke(he,ie),Ge=ie.source;t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture,n.TEXTURE0+Pe);const Xe=i.get(Ge);if(Ge.version!==Xe.__version||qe===!0){t.activeTexture(n.TEXTURE0+Pe);const _t=fn.getPrimaries(fn.workingColorSpace),at=ie.colorSpace===Xs?null:fn.getPrimaries(ie.colorSpace),pt=ie.colorSpace===Xs||_t===at?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ie.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ie.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,pt);const zt=ie.isCompressedTexture||ie.image[0].isCompressedTexture,Qe=ie.image[0]&&ie.image[0].isDataTexture,ht=[];for(let He=0;He<6;He++)!zt&&!Qe?ht[He]=z(ie.image[He],!0,s.maxCubemapSize):ht[He]=Qe?ie.image[He].image:ie.image[He],ht[He]=st(ie,ht[He]);const Jt=ht[0],Dt=o.convert(ie.format,ie.colorSpace),xt=o.convert(ie.type),Ut=R(ie.internalFormat,Dt,xt,ie.colorSpace),Gt=ie.isVideoTexture!==!0,pn=Xe.__version===void 0||qe===!0,me=Ge.dataReady;let et=W(ie,Jt);Ie(n.TEXTURE_CUBE_MAP,ie);let Ue;if(zt){Gt&&pn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,et,Ut,Jt.width,Jt.height);for(let He=0;He<6;He++){Ue=ht[He].mipmaps;for(let nt=0;nt<Ue.length;nt++){const Lt=Ue[nt];ie.format!==Pi?Dt!==null?Gt?me&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,nt,0,0,Lt.width,Lt.height,Dt,Lt.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,nt,Ut,Lt.width,Lt.height,0,Lt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Gt?me&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,nt,0,0,Lt.width,Lt.height,Dt,xt,Lt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,nt,Ut,Lt.width,Lt.height,0,Dt,xt,Lt.data)}}}else{if(Ue=ie.mipmaps,Gt&&pn){Ue.length>0&&et++;const He=vt(ht[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,et,Ut,He.width,He.height)}for(let He=0;He<6;He++)if(Qe){Gt?me&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,0,0,ht[He].width,ht[He].height,Dt,xt,ht[He].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,Ut,ht[He].width,ht[He].height,0,Dt,xt,ht[He].data);for(let nt=0;nt<Ue.length;nt++){const $t=Ue[nt].image[He].image;Gt?me&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,nt+1,0,0,$t.width,$t.height,Dt,xt,$t.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,nt+1,Ut,$t.width,$t.height,0,Dt,xt,$t.data)}}else{Gt?me&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,0,0,Dt,xt,ht[He]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,0,Ut,Dt,xt,ht[He]);for(let nt=0;nt<Ue.length;nt++){const Lt=Ue[nt];Gt?me&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,nt+1,0,0,Dt,xt,Lt.image[He]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+He,nt+1,Ut,Dt,xt,Lt.image[He])}}}F(ie)&&k(n.TEXTURE_CUBE_MAP),Xe.__version=Ge.version,ie.onUpdate&&ie.onUpdate(ie)}he.__version=ie.version}function Ve(he,ie,Pe,qe,Ge,Xe){const _t=o.convert(Pe.format,Pe.colorSpace),at=o.convert(Pe.type),pt=R(Pe.internalFormat,_t,at,Pe.colorSpace);if(!i.get(ie).__hasExternalTextures){const Qe=Math.max(1,ie.width>>Xe),ht=Math.max(1,ie.height>>Xe);Ge===n.TEXTURE_3D||Ge===n.TEXTURE_2D_ARRAY?t.texImage3D(Ge,Xe,pt,Qe,ht,ie.depth,0,_t,at,null):t.texImage2D(Ge,Xe,pt,Qe,ht,0,_t,at,null)}t.bindFramebuffer(n.FRAMEBUFFER,he),Be(ie)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,qe,Ge,i.get(Pe).__webglTexture,0,lt(ie)):(Ge===n.TEXTURE_2D||Ge>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ge<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,qe,Ge,i.get(Pe).__webglTexture,Xe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Je(he,ie,Pe){if(n.bindRenderbuffer(n.RENDERBUFFER,he),ie.depthBuffer){const qe=ie.depthTexture,Ge=qe&&qe.isDepthTexture?qe.type:null,Xe=O(ie.stencilBuffer,Ge),_t=ie.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,at=lt(ie);Be(ie)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,at,Xe,ie.width,ie.height):Pe?n.renderbufferStorageMultisample(n.RENDERBUFFER,at,Xe,ie.width,ie.height):n.renderbufferStorage(n.RENDERBUFFER,Xe,ie.width,ie.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,_t,n.RENDERBUFFER,he)}else{const qe=ie.textures;for(let Ge=0;Ge<qe.length;Ge++){const Xe=qe[Ge],_t=o.convert(Xe.format,Xe.colorSpace),at=o.convert(Xe.type),pt=R(Xe.internalFormat,_t,at,Xe.colorSpace),zt=lt(ie);Pe&&Be(ie)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,zt,pt,ie.width,ie.height):Be(ie)?h.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,zt,pt,ie.width,ie.height):n.renderbufferStorage(n.RENDERBUFFER,pt,ie.width,ie.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ye(he,ie){if(ie&&ie.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,he),!(ie.depthTexture&&ie.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(ie.depthTexture).__webglTexture||ie.depthTexture.image.width!==ie.width||ie.depthTexture.image.height!==ie.height)&&(ie.depthTexture.image.width=ie.width,ie.depthTexture.image.height=ie.height,ie.depthTexture.needsUpdate=!0),Re(ie.depthTexture,0);const qe=i.get(ie.depthTexture).__webglTexture,Ge=lt(ie);if(ie.depthTexture.format===Vo)Be(ie)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,qe,0,Ge):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,qe,0);else if(ie.depthTexture.format===Qo)Be(ie)?h.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,qe,0,Ge):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,qe,0);else throw new Error("Unknown depthTexture format")}function kt(he){const ie=i.get(he),Pe=he.isWebGLCubeRenderTarget===!0;if(he.depthTexture&&!ie.__autoAllocateDepthBuffer){if(Pe)throw new Error("target.depthTexture not supported in Cube render targets");Ye(ie.__webglFramebuffer,he)}else if(Pe){ie.__webglDepthbuffer=[];for(let qe=0;qe<6;qe++)t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglFramebuffer[qe]),ie.__webglDepthbuffer[qe]=n.createRenderbuffer(),Je(ie.__webglDepthbuffer[qe],he,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,ie.__webglFramebuffer),ie.__webglDepthbuffer=n.createRenderbuffer(),Je(ie.__webglDepthbuffer,he,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Nt(he,ie,Pe){const qe=i.get(he);ie!==void 0&&Ve(qe.__webglFramebuffer,he,he.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Pe!==void 0&&kt(he)}function Ct(he){const ie=he.texture,Pe=i.get(he),qe=i.get(ie);he.addEventListener("dispose",J);const Ge=he.textures,Xe=he.isWebGLCubeRenderTarget===!0,_t=Ge.length>1;if(_t||(qe.__webglTexture===void 0&&(qe.__webglTexture=n.createTexture()),qe.__version=ie.version,c.memory.textures++),Xe){Pe.__webglFramebuffer=[];for(let at=0;at<6;at++)if(ie.mipmaps&&ie.mipmaps.length>0){Pe.__webglFramebuffer[at]=[];for(let pt=0;pt<ie.mipmaps.length;pt++)Pe.__webglFramebuffer[at][pt]=n.createFramebuffer()}else Pe.__webglFramebuffer[at]=n.createFramebuffer()}else{if(ie.mipmaps&&ie.mipmaps.length>0){Pe.__webglFramebuffer=[];for(let at=0;at<ie.mipmaps.length;at++)Pe.__webglFramebuffer[at]=n.createFramebuffer()}else Pe.__webglFramebuffer=n.createFramebuffer();if(_t)for(let at=0,pt=Ge.length;at<pt;at++){const zt=i.get(Ge[at]);zt.__webglTexture===void 0&&(zt.__webglTexture=n.createTexture(),c.memory.textures++)}if(he.samples>0&&Be(he)===!1){Pe.__webglMultisampledFramebuffer=n.createFramebuffer(),Pe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer);for(let at=0;at<Ge.length;at++){const pt=Ge[at];Pe.__webglColorRenderbuffer[at]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Pe.__webglColorRenderbuffer[at]);const zt=o.convert(pt.format,pt.colorSpace),Qe=o.convert(pt.type),ht=R(pt.internalFormat,zt,Qe,pt.colorSpace,he.isXRRenderTarget===!0),Jt=lt(he);n.renderbufferStorageMultisample(n.RENDERBUFFER,Jt,ht,he.width,he.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+at,n.RENDERBUFFER,Pe.__webglColorRenderbuffer[at])}n.bindRenderbuffer(n.RENDERBUFFER,null),he.depthBuffer&&(Pe.__webglDepthRenderbuffer=n.createRenderbuffer(),Je(Pe.__webglDepthRenderbuffer,he,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Xe){t.bindTexture(n.TEXTURE_CUBE_MAP,qe.__webglTexture),Ie(n.TEXTURE_CUBE_MAP,ie);for(let at=0;at<6;at++)if(ie.mipmaps&&ie.mipmaps.length>0)for(let pt=0;pt<ie.mipmaps.length;pt++)Ve(Pe.__webglFramebuffer[at][pt],he,ie,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+at,pt);else Ve(Pe.__webglFramebuffer[at],he,ie,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+at,0);F(ie)&&k(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(_t){for(let at=0,pt=Ge.length;at<pt;at++){const zt=Ge[at],Qe=i.get(zt);t.bindTexture(n.TEXTURE_2D,Qe.__webglTexture),Ie(n.TEXTURE_2D,zt),Ve(Pe.__webglFramebuffer,he,zt,n.COLOR_ATTACHMENT0+at,n.TEXTURE_2D,0),F(zt)&&k(n.TEXTURE_2D)}t.unbindTexture()}else{let at=n.TEXTURE_2D;if((he.isWebGL3DRenderTarget||he.isWebGLArrayRenderTarget)&&(at=he.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(at,qe.__webglTexture),Ie(at,ie),ie.mipmaps&&ie.mipmaps.length>0)for(let pt=0;pt<ie.mipmaps.length;pt++)Ve(Pe.__webglFramebuffer[pt],he,ie,n.COLOR_ATTACHMENT0,at,pt);else Ve(Pe.__webglFramebuffer,he,ie,n.COLOR_ATTACHMENT0,at,0);F(ie)&&k(at),t.unbindTexture()}he.depthBuffer&&kt(he)}function Ot(he){const ie=he.textures;for(let Pe=0,qe=ie.length;Pe<qe;Pe++){const Ge=ie[Pe];if(F(Ge)){const Xe=he.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,_t=i.get(Ge).__webglTexture;t.bindTexture(Xe,_t),k(Xe),t.unbindTexture()}}}const oe=[],je=[];function Ze(he){if(he.samples>0){if(Be(he)===!1){const ie=he.textures,Pe=he.width,qe=he.height;let Ge=n.COLOR_BUFFER_BIT;const Xe=he.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,_t=i.get(he),at=ie.length>1;if(at)for(let pt=0;pt<ie.length;pt++)t.bindFramebuffer(n.FRAMEBUFFER,_t.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,_t.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+pt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,_t.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,_t.__webglFramebuffer);for(let pt=0;pt<ie.length;pt++){if(he.resolveDepthBuffer&&(he.depthBuffer&&(Ge|=n.DEPTH_BUFFER_BIT),he.stencilBuffer&&he.resolveStencilBuffer&&(Ge|=n.STENCIL_BUFFER_BIT)),at){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,_t.__webglColorRenderbuffer[pt]);const zt=i.get(ie[pt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,zt,0)}n.blitFramebuffer(0,0,Pe,qe,0,0,Pe,qe,Ge,n.NEAREST),m===!0&&(oe.length=0,je.length=0,oe.push(n.COLOR_ATTACHMENT0+pt),he.depthBuffer&&he.resolveDepthBuffer===!1&&(oe.push(Xe),je.push(Xe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,je)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,oe))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),at)for(let pt=0;pt<ie.length;pt++){t.bindFramebuffer(n.FRAMEBUFFER,_t.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+pt,n.RENDERBUFFER,_t.__webglColorRenderbuffer[pt]);const zt=i.get(ie[pt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,_t.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+pt,n.TEXTURE_2D,zt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,_t.__webglMultisampledFramebuffer)}else if(he.depthBuffer&&he.resolveDepthBuffer===!1&&m){const ie=he.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[ie])}}}function lt(he){return Math.min(s.maxSamples,he.samples)}function Be(he){const ie=i.get(he);return he.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ie.__useRenderToTexture!==!1}function Tt(he){const ie=c.render.frame;b.get(he)!==ie&&(b.set(he,ie),he.update())}function st(he,ie){const Pe=he.colorSpace,qe=he.format,Ge=he.type;return he.isCompressedTexture===!0||he.isVideoTexture===!0||Pe!==oa&&Pe!==Xs&&(fn.getTransfer(Pe)===wn?(qe!==Pi||Ge!==rs)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Pe)),ie}function vt(he){return typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement?(x.width=he.naturalWidth||he.width,x.height=he.naturalHeight||he.height):typeof VideoFrame<"u"&&he instanceof VideoFrame?(x.width=he.displayWidth,x.height=he.displayHeight):(x.width=he.width,x.height=he.height),x}this.allocateTextureUnit=ge,this.resetTextureUnits=se,this.setTexture2D=Re,this.setTexture2DArray=Le,this.setTexture3D=Ae,this.setTextureCube=ze,this.rebindTextures=Nt,this.setupRenderTarget=Ct,this.updateRenderTargetMipmap=Ot,this.updateMultisampleRenderTarget=Ze,this.setupDepthRenderbuffer=kt,this.setupFrameBufferTexture=Ve,this.useMultisampledRTT=Be}function pT(n,e){function t(i,s=Xs){let o;const c=fn.getTransfer(s);if(i===rs)return n.UNSIGNED_BYTE;if(i===$g)return n.UNSIGNED_SHORT_4_4_4_4;if(i===Qg)return n.UNSIGNED_SHORT_5_5_5_1;if(i===ub)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===lb)return n.BYTE;if(i===cb)return n.SHORT;if(i===Ec)return n.UNSIGNED_SHORT;if(i===Jg)return n.INT;if(i===ra)return n.UNSIGNED_INT;if(i===nr)return n.FLOAT;if(i===Bc)return n.HALF_FLOAT;if(i===hb)return n.ALPHA;if(i===db)return n.RGB;if(i===Pi)return n.RGBA;if(i===fb)return n.LUMINANCE;if(i===pb)return n.LUMINANCE_ALPHA;if(i===Vo)return n.DEPTH_COMPONENT;if(i===Qo)return n.DEPTH_STENCIL;if(i===em)return n.RED;if(i===Zh)return n.RED_INTEGER;if(i===gb)return n.RG;if(i===tm)return n.RG_INTEGER;if(i===nm)return n.RGBA_INTEGER;if(i===Qu||i===eh||i===th||i===nh)if(c===wn)if(o=e.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(i===Qu)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===eh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===th)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===nh)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=e.get("WEBGL_compressed_texture_s3tc"),o!==null){if(i===Qu)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===eh)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===th)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===nh)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Kp||i===Jp||i===$p||i===Qp)if(o=e.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(i===Kp)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Jp)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===$p)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Qp)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===eg||i===tg||i===ng)if(o=e.get("WEBGL_compressed_texture_etc"),o!==null){if(i===eg||i===tg)return c===wn?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(i===ng)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===ig||i===rg||i===sg||i===ag||i===og||i===lg||i===cg||i===ug||i===hg||i===dg||i===fg||i===pg||i===gg||i===mg)if(o=e.get("WEBGL_compressed_texture_astc"),o!==null){if(i===ig)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===rg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===sg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===ag)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===og)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===lg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===cg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===ug)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===hg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===dg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===fg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===pg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===gg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===mg)return c===wn?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===ih||i===vg||i===xg)if(o=e.get("EXT_texture_compression_bptc"),o!==null){if(i===ih)return c===wn?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===vg)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===xg)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===mb||i===yg||i===bg||i===wg)if(o=e.get("EXT_texture_compression_rgtc"),o!==null){if(i===ih)return o.COMPRESSED_RED_RGTC1_EXT;if(i===yg)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===bg)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===wg)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===$o?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class gT extends Zn{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Na extends Qt{constructor(){super(),this.isGroup=!0,this.type="Group"}}const lO={type:"move"};class Sx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Na,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Na,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new le,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new le),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Na,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new le,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new le),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let s=null,o=null,c=null;const h=this._targetRay,m=this._grip,x=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(x&&e.hand){c=!0;for(const z of e.hand.values()){const F=t.getJointPose(z,i),k=this._getHandJoint(x,z);F!==null&&(k.matrix.fromArray(F.transform.matrix),k.matrix.decompose(k.position,k.rotation,k.scale),k.matrixWorldNeedsUpdate=!0,k.jointRadius=F.radius),k.visible=F!==null}const b=x.joints["index-finger-tip"],S=x.joints["thumb-tip"],M=b.position.distanceTo(S.position),P=.02,L=.005;x.inputState.pinching&&M>P+L?(x.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!x.inputState.pinching&&M<=P-L&&(x.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else m!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,i),o!==null&&(m.matrix.fromArray(o.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,o.linearVelocity?(m.hasLinearVelocity=!0,m.linearVelocity.copy(o.linearVelocity)):m.hasLinearVelocity=!1,o.angularVelocity?(m.hasAngularVelocity=!0,m.angularVelocity.copy(o.angularVelocity)):m.hasAngularVelocity=!1));h!==null&&(s=t.getPose(e.targetRaySpace,i),s===null&&o!==null&&(s=o),s!==null&&(h.matrix.fromArray(s.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.matrixWorldNeedsUpdate=!0,s.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(s.linearVelocity)):h.hasLinearVelocity=!1,s.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(s.angularVelocity)):h.hasAngularVelocity=!1,this.dispatchEvent(lO)))}return h!==null&&(h.visible=s!==null),m!==null&&(m.visible=o!==null),x!==null&&(x.visible=c!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Na;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const cO=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,uO=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class hO{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const s=new En,o=e.properties.get(s);o.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=s}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new as({vertexShader:cO,fragmentShader:uO,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Gn(new Vc(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class dO extends la{constructor(e,t){super();const i=this;let s=null,o=1,c=null,h="local-floor",m=1,x=null,b=null,S=null,M=null,P=null,L=null;const z=new hO,F=t.getContextAttributes();let k=null,R=null;const O=[],W=[],Z=new We;let J=null;const te=new Zn;te.layers.enable(1),te.viewport=new an;const re=new Zn;re.layers.enable(2),re.viewport=new an;const ee=[te,re],K=new gT;K.layers.enable(1),K.layers.enable(2);let se=null,ge=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Te){let Ve=O[Te];return Ve===void 0&&(Ve=new Sx,O[Te]=Ve),Ve.getTargetRaySpace()},this.getControllerGrip=function(Te){let Ve=O[Te];return Ve===void 0&&(Ve=new Sx,O[Te]=Ve),Ve.getGripSpace()},this.getHand=function(Te){let Ve=O[Te];return Ve===void 0&&(Ve=new Sx,O[Te]=Ve),Ve.getHandSpace()};function xe(Te){const Ve=W.indexOf(Te.inputSource);if(Ve===-1)return;const Je=O[Ve];Je!==void 0&&(Je.update(Te.inputSource,Te.frame,x||c),Je.dispatchEvent({type:Te.type,data:Te.inputSource}))}function Re(){s.removeEventListener("select",xe),s.removeEventListener("selectstart",xe),s.removeEventListener("selectend",xe),s.removeEventListener("squeeze",xe),s.removeEventListener("squeezestart",xe),s.removeEventListener("squeezeend",xe),s.removeEventListener("end",Re),s.removeEventListener("inputsourceschange",Le);for(let Te=0;Te<O.length;Te++){const Ve=W[Te];Ve!==null&&(W[Te]=null,O[Te].disconnect(Ve))}se=null,ge=null,z.reset(),e.setRenderTarget(k),P=null,M=null,S=null,s=null,R=null,rt.stop(),i.isPresenting=!1,e.setPixelRatio(J),e.setSize(Z.width,Z.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Te){o=Te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Te){h=Te,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return x||c},this.setReferenceSpace=function(Te){x=Te},this.getBaseLayer=function(){return M!==null?M:P},this.getBinding=function(){return S},this.getFrame=function(){return L},this.getSession=function(){return s},this.setSession=async function(Te){if(s=Te,s!==null){if(k=e.getRenderTarget(),s.addEventListener("select",xe),s.addEventListener("selectstart",xe),s.addEventListener("selectend",xe),s.addEventListener("squeeze",xe),s.addEventListener("squeezestart",xe),s.addEventListener("squeezeend",xe),s.addEventListener("end",Re),s.addEventListener("inputsourceschange",Le),F.xrCompatible!==!0&&await t.makeXRCompatible(),J=e.getPixelRatio(),e.getSize(Z),s.renderState.layers===void 0){const Ve={antialias:F.antialias,alpha:!0,depth:F.depth,stencil:F.stencil,framebufferScaleFactor:o};P=new XRWebGLLayer(s,t,Ve),s.updateRenderState({baseLayer:P}),e.setPixelRatio(1),e.setSize(P.framebufferWidth,P.framebufferHeight,!1),R=new ss(P.framebufferWidth,P.framebufferHeight,{format:Pi,type:rs,colorSpace:e.outputColorSpace,stencilBuffer:F.stencil})}else{let Ve=null,Je=null,Ye=null;F.depth&&(Ye=F.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ve=F.stencil?Qo:Vo,Je=F.stencil?$o:ra);const kt={colorFormat:t.RGBA8,depthFormat:Ye,scaleFactor:o};S=new XRWebGLBinding(s,t),M=S.createProjectionLayer(kt),s.updateRenderState({layers:[M]}),e.setPixelRatio(1),e.setSize(M.textureWidth,M.textureHeight,!1),R=new ss(M.textureWidth,M.textureHeight,{format:Pi,type:rs,depthTexture:new Mb(M.textureWidth,M.textureHeight,Je,void 0,void 0,void 0,void 0,void 0,void 0,Ve),stencilBuffer:F.stencil,colorSpace:e.outputColorSpace,samples:F.antialias?4:0,resolveDepthBuffer:M.ignoreDepthValues===!1})}R.isXRRenderTarget=!0,this.setFoveation(m),x=null,c=await s.requestReferenceSpace(h),rt.setContext(s),rt.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(s!==null)return s.environmentBlendMode},this.getDepthTexture=function(){return z.getDepthTexture()};function Le(Te){for(let Ve=0;Ve<Te.removed.length;Ve++){const Je=Te.removed[Ve],Ye=W.indexOf(Je);Ye>=0&&(W[Ye]=null,O[Ye].disconnect(Je))}for(let Ve=0;Ve<Te.added.length;Ve++){const Je=Te.added[Ve];let Ye=W.indexOf(Je);if(Ye===-1){for(let Nt=0;Nt<O.length;Nt++)if(Nt>=W.length){W.push(Je),Ye=Nt;break}else if(W[Nt]===null){W[Nt]=Je,Ye=Nt;break}if(Ye===-1)break}const kt=O[Ye];kt&&kt.connect(Je)}}const Ae=new le,ze=new le;function ce(Te,Ve,Je){Ae.setFromMatrixPosition(Ve.matrixWorld),ze.setFromMatrixPosition(Je.matrixWorld);const Ye=Ae.distanceTo(ze),kt=Ve.projectionMatrix.elements,Nt=Je.projectionMatrix.elements,Ct=kt[14]/(kt[10]-1),Ot=kt[14]/(kt[10]+1),oe=(kt[9]+1)/kt[5],je=(kt[9]-1)/kt[5],Ze=(kt[8]-1)/kt[0],lt=(Nt[8]+1)/Nt[0],Be=Ct*Ze,Tt=Ct*lt,st=Ye/(-Ze+lt),vt=st*-Ze;Ve.matrixWorld.decompose(Te.position,Te.quaternion,Te.scale),Te.translateX(vt),Te.translateZ(st),Te.matrixWorld.compose(Te.position,Te.quaternion,Te.scale),Te.matrixWorldInverse.copy(Te.matrixWorld).invert();const he=Ct+st,ie=Ot+st,Pe=Be-vt,qe=Tt+(Ye-vt),Ge=oe*Ot/ie*he,Xe=je*Ot/ie*he;Te.projectionMatrix.makePerspective(Pe,qe,Ge,Xe,he,ie),Te.projectionMatrixInverse.copy(Te.projectionMatrix).invert()}function we(Te,Ve){Ve===null?Te.matrixWorld.copy(Te.matrix):Te.matrixWorld.multiplyMatrices(Ve.matrixWorld,Te.matrix),Te.matrixWorldInverse.copy(Te.matrixWorld).invert()}this.updateCamera=function(Te){if(s===null)return;z.texture!==null&&(Te.near=z.depthNear,Te.far=z.depthFar),K.near=re.near=te.near=Te.near,K.far=re.far=te.far=Te.far,(se!==K.near||ge!==K.far)&&(s.updateRenderState({depthNear:K.near,depthFar:K.far}),se=K.near,ge=K.far,te.near=se,te.far=ge,re.near=se,re.far=ge,te.updateProjectionMatrix(),re.updateProjectionMatrix(),Te.updateProjectionMatrix());const Ve=Te.parent,Je=K.cameras;we(K,Ve);for(let Ye=0;Ye<Je.length;Ye++)we(Je[Ye],Ve);Je.length===2?ce(K,te,re):K.projectionMatrix.copy(te.projectionMatrix),be(Te,K,Ve)};function be(Te,Ve,Je){Je===null?Te.matrix.copy(Ve.matrixWorld):(Te.matrix.copy(Je.matrixWorld),Te.matrix.invert(),Te.matrix.multiply(Ve.matrixWorld)),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.updateMatrixWorld(!0),Te.projectionMatrix.copy(Ve.projectionMatrix),Te.projectionMatrixInverse.copy(Ve.projectionMatrixInverse),Te.isPerspectiveCamera&&(Te.fov=Tc*2*Math.atan(1/Te.projectionMatrix.elements[5]),Te.zoom=1)}this.getCamera=function(){return K},this.getFoveation=function(){if(!(M===null&&P===null))return m},this.setFoveation=function(Te){m=Te,M!==null&&(M.fixedFoveation=Te),P!==null&&P.fixedFoveation!==void 0&&(P.fixedFoveation=Te)},this.hasDepthSensing=function(){return z.texture!==null},this.getDepthSensingMesh=function(){return z.getMesh(K)};let Ie=null;function Ke(Te,Ve){if(b=Ve.getViewerPose(x||c),L=Ve,b!==null){const Je=b.views;P!==null&&(e.setRenderTargetFramebuffer(R,P.framebuffer),e.setRenderTarget(R));let Ye=!1;Je.length!==K.cameras.length&&(K.cameras.length=0,Ye=!0);for(let Nt=0;Nt<Je.length;Nt++){const Ct=Je[Nt];let Ot=null;if(P!==null)Ot=P.getViewport(Ct);else{const je=S.getViewSubImage(M,Ct);Ot=je.viewport,Nt===0&&(e.setRenderTargetTextures(R,je.colorTexture,M.ignoreDepthValues?void 0:je.depthStencilTexture),e.setRenderTarget(R))}let oe=ee[Nt];oe===void 0&&(oe=new Zn,oe.layers.enable(Nt),oe.viewport=new an,ee[Nt]=oe),oe.matrix.fromArray(Ct.transform.matrix),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.projectionMatrix.fromArray(Ct.projectionMatrix),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert(),oe.viewport.set(Ot.x,Ot.y,Ot.width,Ot.height),Nt===0&&(K.matrix.copy(oe.matrix),K.matrix.decompose(K.position,K.quaternion,K.scale)),Ye===!0&&K.cameras.push(oe)}const kt=s.enabledFeatures;if(kt&&kt.includes("depth-sensing")){const Nt=S.getDepthInformation(Je[0]);Nt&&Nt.isValid&&Nt.texture&&z.init(e,Nt,s.renderState)}}for(let Je=0;Je<O.length;Je++){const Ye=W[Je],kt=O[Je];Ye!==null&&kt!==void 0&&kt.update(Ye,Ve,x||c)}Ie&&Ie(Te,Ve),Ve.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ve}),L=null}const rt=new cT;rt.setAnimationLoop(Ke),this.setAnimationLoop=function(Te){Ie=Te},this.dispose=function(){}}}const yo=new ci,fO=new gt;function pO(n,e){function t(F,k){F.matrixAutoUpdate===!0&&F.updateMatrix(),k.value.copy(F.matrix)}function i(F,k){k.color.getRGB(F.fogColor.value,sT(n)),k.isFog?(F.fogNear.value=k.near,F.fogFar.value=k.far):k.isFogExp2&&(F.fogDensity.value=k.density)}function s(F,k,R,O,W){k.isMeshBasicMaterial||k.isMeshLambertMaterial?o(F,k):k.isMeshToonMaterial?(o(F,k),S(F,k)):k.isMeshPhongMaterial?(o(F,k),b(F,k)):k.isMeshStandardMaterial?(o(F,k),M(F,k),k.isMeshPhysicalMaterial&&P(F,k,W)):k.isMeshMatcapMaterial?(o(F,k),L(F,k)):k.isMeshDepthMaterial?o(F,k):k.isMeshDistanceMaterial?(o(F,k),z(F,k)):k.isMeshNormalMaterial?o(F,k):k.isLineBasicMaterial?(c(F,k),k.isLineDashedMaterial&&h(F,k)):k.isPointsMaterial?m(F,k,R,O):k.isSpriteMaterial?x(F,k):k.isShadowMaterial?(F.color.value.copy(k.color),F.opacity.value=k.opacity):k.isShaderMaterial&&(k.uniformsNeedUpdate=!1)}function o(F,k){F.opacity.value=k.opacity,k.color&&F.diffuse.value.copy(k.color),k.emissive&&F.emissive.value.copy(k.emissive).multiplyScalar(k.emissiveIntensity),k.map&&(F.map.value=k.map,t(k.map,F.mapTransform)),k.alphaMap&&(F.alphaMap.value=k.alphaMap,t(k.alphaMap,F.alphaMapTransform)),k.bumpMap&&(F.bumpMap.value=k.bumpMap,t(k.bumpMap,F.bumpMapTransform),F.bumpScale.value=k.bumpScale,k.side===Hi&&(F.bumpScale.value*=-1)),k.normalMap&&(F.normalMap.value=k.normalMap,t(k.normalMap,F.normalMapTransform),F.normalScale.value.copy(k.normalScale),k.side===Hi&&F.normalScale.value.negate()),k.displacementMap&&(F.displacementMap.value=k.displacementMap,t(k.displacementMap,F.displacementMapTransform),F.displacementScale.value=k.displacementScale,F.displacementBias.value=k.displacementBias),k.emissiveMap&&(F.emissiveMap.value=k.emissiveMap,t(k.emissiveMap,F.emissiveMapTransform)),k.specularMap&&(F.specularMap.value=k.specularMap,t(k.specularMap,F.specularMapTransform)),k.alphaTest>0&&(F.alphaTest.value=k.alphaTest);const R=e.get(k),O=R.envMap,W=R.envMapRotation;O&&(F.envMap.value=O,yo.copy(W),yo.x*=-1,yo.y*=-1,yo.z*=-1,O.isCubeTexture&&O.isRenderTargetTexture===!1&&(yo.y*=-1,yo.z*=-1),F.envMapRotation.value.setFromMatrix4(fO.makeRotationFromEuler(yo)),F.flipEnvMap.value=O.isCubeTexture&&O.isRenderTargetTexture===!1?-1:1,F.reflectivity.value=k.reflectivity,F.ior.value=k.ior,F.refractionRatio.value=k.refractionRatio),k.lightMap&&(F.lightMap.value=k.lightMap,F.lightMapIntensity.value=k.lightMapIntensity,t(k.lightMap,F.lightMapTransform)),k.aoMap&&(F.aoMap.value=k.aoMap,F.aoMapIntensity.value=k.aoMapIntensity,t(k.aoMap,F.aoMapTransform))}function c(F,k){F.diffuse.value.copy(k.color),F.opacity.value=k.opacity,k.map&&(F.map.value=k.map,t(k.map,F.mapTransform))}function h(F,k){F.dashSize.value=k.dashSize,F.totalSize.value=k.dashSize+k.gapSize,F.scale.value=k.scale}function m(F,k,R,O){F.diffuse.value.copy(k.color),F.opacity.value=k.opacity,F.size.value=k.size*R,F.scale.value=O*.5,k.map&&(F.map.value=k.map,t(k.map,F.uvTransform)),k.alphaMap&&(F.alphaMap.value=k.alphaMap,t(k.alphaMap,F.alphaMapTransform)),k.alphaTest>0&&(F.alphaTest.value=k.alphaTest)}function x(F,k){F.diffuse.value.copy(k.color),F.opacity.value=k.opacity,F.rotation.value=k.rotation,k.map&&(F.map.value=k.map,t(k.map,F.mapTransform)),k.alphaMap&&(F.alphaMap.value=k.alphaMap,t(k.alphaMap,F.alphaMapTransform)),k.alphaTest>0&&(F.alphaTest.value=k.alphaTest)}function b(F,k){F.specular.value.copy(k.specular),F.shininess.value=Math.max(k.shininess,1e-4)}function S(F,k){k.gradientMap&&(F.gradientMap.value=k.gradientMap)}function M(F,k){F.metalness.value=k.metalness,k.metalnessMap&&(F.metalnessMap.value=k.metalnessMap,t(k.metalnessMap,F.metalnessMapTransform)),F.roughness.value=k.roughness,k.roughnessMap&&(F.roughnessMap.value=k.roughnessMap,t(k.roughnessMap,F.roughnessMapTransform)),k.envMap&&(F.envMapIntensity.value=k.envMapIntensity)}function P(F,k,R){F.ior.value=k.ior,k.sheen>0&&(F.sheenColor.value.copy(k.sheenColor).multiplyScalar(k.sheen),F.sheenRoughness.value=k.sheenRoughness,k.sheenColorMap&&(F.sheenColorMap.value=k.sheenColorMap,t(k.sheenColorMap,F.sheenColorMapTransform)),k.sheenRoughnessMap&&(F.sheenRoughnessMap.value=k.sheenRoughnessMap,t(k.sheenRoughnessMap,F.sheenRoughnessMapTransform))),k.clearcoat>0&&(F.clearcoat.value=k.clearcoat,F.clearcoatRoughness.value=k.clearcoatRoughness,k.clearcoatMap&&(F.clearcoatMap.value=k.clearcoatMap,t(k.clearcoatMap,F.clearcoatMapTransform)),k.clearcoatRoughnessMap&&(F.clearcoatRoughnessMap.value=k.clearcoatRoughnessMap,t(k.clearcoatRoughnessMap,F.clearcoatRoughnessMapTransform)),k.clearcoatNormalMap&&(F.clearcoatNormalMap.value=k.clearcoatNormalMap,t(k.clearcoatNormalMap,F.clearcoatNormalMapTransform),F.clearcoatNormalScale.value.copy(k.clearcoatNormalScale),k.side===Hi&&F.clearcoatNormalScale.value.negate())),k.dispersion>0&&(F.dispersion.value=k.dispersion),k.iridescence>0&&(F.iridescence.value=k.iridescence,F.iridescenceIOR.value=k.iridescenceIOR,F.iridescenceThicknessMinimum.value=k.iridescenceThicknessRange[0],F.iridescenceThicknessMaximum.value=k.iridescenceThicknessRange[1],k.iridescenceMap&&(F.iridescenceMap.value=k.iridescenceMap,t(k.iridescenceMap,F.iridescenceMapTransform)),k.iridescenceThicknessMap&&(F.iridescenceThicknessMap.value=k.iridescenceThicknessMap,t(k.iridescenceThicknessMap,F.iridescenceThicknessMapTransform))),k.transmission>0&&(F.transmission.value=k.transmission,F.transmissionSamplerMap.value=R.texture,F.transmissionSamplerSize.value.set(R.width,R.height),k.transmissionMap&&(F.transmissionMap.value=k.transmissionMap,t(k.transmissionMap,F.transmissionMapTransform)),F.thickness.value=k.thickness,k.thicknessMap&&(F.thicknessMap.value=k.thicknessMap,t(k.thicknessMap,F.thicknessMapTransform)),F.attenuationDistance.value=k.attenuationDistance,F.attenuationColor.value.copy(k.attenuationColor)),k.anisotropy>0&&(F.anisotropyVector.value.set(k.anisotropy*Math.cos(k.anisotropyRotation),k.anisotropy*Math.sin(k.anisotropyRotation)),k.anisotropyMap&&(F.anisotropyMap.value=k.anisotropyMap,t(k.anisotropyMap,F.anisotropyMapTransform))),F.specularIntensity.value=k.specularIntensity,F.specularColor.value.copy(k.specularColor),k.specularColorMap&&(F.specularColorMap.value=k.specularColorMap,t(k.specularColorMap,F.specularColorMapTransform)),k.specularIntensityMap&&(F.specularIntensityMap.value=k.specularIntensityMap,t(k.specularIntensityMap,F.specularIntensityMapTransform))}function L(F,k){k.matcap&&(F.matcap.value=k.matcap)}function z(F,k){const R=e.get(k).light;F.referencePosition.value.setFromMatrixPosition(R.matrixWorld),F.nearDistance.value=R.shadow.camera.near,F.farDistance.value=R.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:s}}function gO(n,e,t,i){let s={},o={},c=[];const h=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function m(R,O){const W=O.program;i.uniformBlockBinding(R,W)}function x(R,O){let W=s[R.id];W===void 0&&(L(R),W=b(R),s[R.id]=W,R.addEventListener("dispose",F));const Z=O.program;i.updateUBOMapping(R,Z);const J=e.render.frame;o[R.id]!==J&&(M(R),o[R.id]=J)}function b(R){const O=S();R.__bindingPointIndex=O;const W=n.createBuffer(),Z=R.__size,J=R.usage;return n.bindBuffer(n.UNIFORM_BUFFER,W),n.bufferData(n.UNIFORM_BUFFER,Z,J),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,O,W),W}function S(){for(let R=0;R<h;R++)if(c.indexOf(R)===-1)return c.push(R),R;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function M(R){const O=s[R.id],W=R.uniforms,Z=R.__cache;n.bindBuffer(n.UNIFORM_BUFFER,O);for(let J=0,te=W.length;J<te;J++){const re=Array.isArray(W[J])?W[J]:[W[J]];for(let ee=0,K=re.length;ee<K;ee++){const se=re[ee];if(P(se,J,ee,Z)===!0){const ge=se.__offset,xe=Array.isArray(se.value)?se.value:[se.value];let Re=0;for(let Le=0;Le<xe.length;Le++){const Ae=xe[Le],ze=z(Ae);typeof Ae=="number"||typeof Ae=="boolean"?(se.__data[0]=Ae,n.bufferSubData(n.UNIFORM_BUFFER,ge+Re,se.__data)):Ae.isMatrix3?(se.__data[0]=Ae.elements[0],se.__data[1]=Ae.elements[1],se.__data[2]=Ae.elements[2],se.__data[3]=0,se.__data[4]=Ae.elements[3],se.__data[5]=Ae.elements[4],se.__data[6]=Ae.elements[5],se.__data[7]=0,se.__data[8]=Ae.elements[6],se.__data[9]=Ae.elements[7],se.__data[10]=Ae.elements[8],se.__data[11]=0):(Ae.toArray(se.__data,Re),Re+=ze.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,ge,se.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function P(R,O,W,Z){const J=R.value,te=O+"_"+W;if(Z[te]===void 0)return typeof J=="number"||typeof J=="boolean"?Z[te]=J:Z[te]=J.clone(),!0;{const re=Z[te];if(typeof J=="number"||typeof J=="boolean"){if(re!==J)return Z[te]=J,!0}else if(re.equals(J)===!1)return re.copy(J),!0}return!1}function L(R){const O=R.uniforms;let W=0;const Z=16;for(let te=0,re=O.length;te<re;te++){const ee=Array.isArray(O[te])?O[te]:[O[te]];for(let K=0,se=ee.length;K<se;K++){const ge=ee[K],xe=Array.isArray(ge.value)?ge.value:[ge.value];for(let Re=0,Le=xe.length;Re<Le;Re++){const Ae=xe[Re],ze=z(Ae),ce=W%Z;ce!==0&&Z-ce<ze.boundary&&(W+=Z-ce),ge.__data=new Float32Array(ze.storage/Float32Array.BYTES_PER_ELEMENT),ge.__offset=W,W+=ze.storage}}}const J=W%Z;return J>0&&(W+=Z-J),R.__size=W,R.__cache={},this}function z(R){const O={boundary:0,storage:0};return typeof R=="number"||typeof R=="boolean"?(O.boundary=4,O.storage=4):R.isVector2?(O.boundary=8,O.storage=8):R.isVector3||R.isColor?(O.boundary=16,O.storage=12):R.isVector4?(O.boundary=16,O.storage=16):R.isMatrix3?(O.boundary=48,O.storage=48):R.isMatrix4?(O.boundary=64,O.storage=64):R.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",R),O}function F(R){const O=R.target;O.removeEventListener("dispose",F);const W=c.indexOf(O.__bindingPointIndex);c.splice(W,1),n.deleteBuffer(s[O.id]),delete s[O.id],delete o[O.id]}function k(){for(const R in s)n.deleteBuffer(s[R]);c=[],s={},o={}}return{bind:m,update:x,dispose:k}}class mT{constructor(e={}){const{canvas:t=tT(),context:i=null,depth:s=!0,stencil:o=!1,alpha:c=!1,antialias:h=!1,premultipliedAlpha:m=!0,preserveDrawingBuffer:x=!1,powerPreference:b="default",failIfMajorPerformanceCaveat:S=!1}=e;this.isWebGLRenderer=!0;let M;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");M=i.getContextAttributes().alpha}else M=c;const P=new Uint32Array(4),L=new Int32Array(4);let z=null,F=null;const k=[],R=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Rr,this.toneMapping=Ms,this.toneMappingExposure=1;const O=this;let W=!1,Z=0,J=0,te=null,re=-1,ee=null;const K=new an,se=new an;let ge=null;const xe=new ot(0);let Re=0,Le=t.width,Ae=t.height,ze=1,ce=null,we=null;const be=new an(0,0,Le,Ae),Ie=new an(0,0,Le,Ae);let Ke=!1;const rt=new Qh;let Te=!1,Ve=!1;const Je=new gt,Ye=new le,kt=new an,Nt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ct=!1;function Ot(){return te===null?ze:1}let oe=i;function je(ae,ve){return t.getContext(ae,ve)}try{const ae={alpha:!0,depth:s,stencil:o,antialias:h,premultipliedAlpha:m,preserveDrawingBuffer:x,powerPreference:b,failIfMajorPerformanceCaveat:S};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${qg}`),t.addEventListener("webglcontextlost",Ue,!1),t.addEventListener("webglcontextrestored",He,!1),t.addEventListener("webglcontextcreationerror",nt,!1),oe===null){const ve="webgl2";if(oe=je(ve,ae),oe===null)throw je(ve)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ae){throw console.error("THREE.WebGLRenderer: "+ae.message),ae}let Ze,lt,Be,Tt,st,vt,he,ie,Pe,qe,Ge,Xe,_t,at,pt,zt,Qe,ht,Jt,Dt,xt,Ut,Gt,pn;function me(){Ze=new _N(oe),Ze.init(),Ut=new pT(oe,Ze),lt=new vN(oe,Ze,e,Ut),Be=new tO(oe),Tt=new CN(oe),st=new WF,vt=new oO(oe,Ze,Be,st,lt,Ut,Tt),he=new yN(O),ie=new SN(O),Pe=new II(oe),Gt=new gN(oe,Pe),qe=new MN(oe,Pe,Tt,Gt),Ge=new TN(oe,qe,Pe,Tt),Jt=new EN(oe,lt,vt),zt=new xN(st),Xe=new VF(O,he,ie,Ze,lt,Gt,zt),_t=new pO(O,st),at=new XF,pt=new JF(Ze),ht=new pN(O,he,ie,Be,Ge,M,m),Qe=new eO(O,Ge,lt),pn=new gO(oe,Tt,lt,Be),Dt=new mN(oe,Ze,Tt),xt=new AN(oe,Ze,Tt),Tt.programs=Xe.programs,O.capabilities=lt,O.extensions=Ze,O.properties=st,O.renderLists=at,O.shadowMap=Qe,O.state=Be,O.info=Tt}me();const et=new dO(O,oe);this.xr=et,this.getContext=function(){return oe},this.getContextAttributes=function(){return oe.getContextAttributes()},this.forceContextLoss=function(){const ae=Ze.get("WEBGL_lose_context");ae&&ae.loseContext()},this.forceContextRestore=function(){const ae=Ze.get("WEBGL_lose_context");ae&&ae.restoreContext()},this.getPixelRatio=function(){return ze},this.setPixelRatio=function(ae){ae!==void 0&&(ze=ae,this.setSize(Le,Ae,!1))},this.getSize=function(ae){return ae.set(Le,Ae)},this.setSize=function(ae,ve,Ee=!0){if(et.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Le=ae,Ae=ve,t.width=Math.floor(ae*ze),t.height=Math.floor(ve*ze),Ee===!0&&(t.style.width=ae+"px",t.style.height=ve+"px"),this.setViewport(0,0,ae,ve)},this.getDrawingBufferSize=function(ae){return ae.set(Le*ze,Ae*ze).floor()},this.setDrawingBufferSize=function(ae,ve,Ee){Le=ae,Ae=ve,ze=Ee,t.width=Math.floor(ae*Ee),t.height=Math.floor(ve*Ee),this.setViewport(0,0,ae,ve)},this.getCurrentViewport=function(ae){return ae.copy(K)},this.getViewport=function(ae){return ae.copy(be)},this.setViewport=function(ae,ve,Ee,ke){ae.isVector4?be.set(ae.x,ae.y,ae.z,ae.w):be.set(ae,ve,Ee,ke),Be.viewport(K.copy(be).multiplyScalar(ze).round())},this.getScissor=function(ae){return ae.copy(Ie)},this.setScissor=function(ae,ve,Ee,ke){ae.isVector4?Ie.set(ae.x,ae.y,ae.z,ae.w):Ie.set(ae,ve,Ee,ke),Be.scissor(se.copy(Ie).multiplyScalar(ze).round())},this.getScissorTest=function(){return Ke},this.setScissorTest=function(ae){Be.setScissorTest(Ke=ae)},this.setOpaqueSort=function(ae){ce=ae},this.setTransparentSort=function(ae){we=ae},this.getClearColor=function(ae){return ae.copy(ht.getClearColor())},this.setClearColor=function(){ht.setClearColor.apply(ht,arguments)},this.getClearAlpha=function(){return ht.getClearAlpha()},this.setClearAlpha=function(){ht.setClearAlpha.apply(ht,arguments)},this.clear=function(ae=!0,ve=!0,Ee=!0){let ke=0;if(ae){let Se=!1;if(te!==null){const G=te.texture.format;Se=G===nm||G===tm||G===Zh}if(Se){const G=te.texture.type,r=G===rs||G===ra||G===Ec||G===$o||G===$g||G===Qg,a=ht.getClearColor(),l=ht.getClearAlpha(),u=a.r,d=a.g,f=a.b;r?(P[0]=u,P[1]=d,P[2]=f,P[3]=l,oe.clearBufferuiv(oe.COLOR,0,P)):(L[0]=u,L[1]=d,L[2]=f,L[3]=l,oe.clearBufferiv(oe.COLOR,0,L))}else ke|=oe.COLOR_BUFFER_BIT}ve&&(ke|=oe.DEPTH_BUFFER_BIT),Ee&&(ke|=oe.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),oe.clear(ke)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ue,!1),t.removeEventListener("webglcontextrestored",He,!1),t.removeEventListener("webglcontextcreationerror",nt,!1),at.dispose(),pt.dispose(),st.dispose(),he.dispose(),ie.dispose(),Ge.dispose(),Gt.dispose(),pn.dispose(),Xe.dispose(),et.dispose(),et.removeEventListener("sessionstart",Ii),et.removeEventListener("sessionend",ll),Br.stop()};function Ue(ae){ae.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function He(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1;const ae=Tt.autoReset,ve=Qe.enabled,Ee=Qe.autoUpdate,ke=Qe.needsUpdate,Se=Qe.type;me(),Tt.autoReset=ae,Qe.enabled=ve,Qe.autoUpdate=Ee,Qe.needsUpdate=ke,Qe.type=Se}function nt(ae){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ae.statusMessage)}function Lt(ae){const ve=ae.target;ve.removeEventListener("dispose",Lt),$t(ve)}function $t(ae){bn(ae),st.remove(ae)}function bn(ae){const ve=st.get(ae).programs;ve!==void 0&&(ve.forEach(function(Ee){Xe.releaseProgram(Ee)}),ae.isShaderMaterial&&Xe.releaseShaderCache(ae))}this.renderBufferDirect=function(ae,ve,Ee,ke,Se,G){ve===null&&(ve=Nt);const r=Se.isMesh&&Se.matrixWorld.determinant()<0,a=jc(ae,ve,Ee,ke,Se);Be.setMaterial(ke,r);let l=Ee.index,u=1;if(ke.wireframe===!0){if(l=qe.getWireframeAttribute(Ee),l===void 0)return;u=2}const d=Ee.drawRange,f=Ee.attributes.position;let v=d.start*u,y=(d.start+d.count)*u;G!==null&&(v=Math.max(v,G.start*u),y=Math.min(y,(G.start+G.count)*u)),l!==null?(v=Math.max(v,0),y=Math.min(y,l.count)):f!=null&&(v=Math.max(v,0),y=Math.min(y,f.count));const _=y-v;if(_<0||_===1/0)return;Gt.setup(Se,ke,a,Ee,l);let A,E=Dt;if(l!==null&&(A=Pe.get(l),E=xt,E.setIndex(A)),Se.isMesh)ke.wireframe===!0?(Be.setLineWidth(ke.wireframeLinewidth*Ot()),E.setMode(oe.LINES)):E.setMode(oe.TRIANGLES);else if(Se.isLine){let T=ke.linewidth;T===void 0&&(T=1),Be.setLineWidth(T*Ot()),Se.isLineSegments?E.setMode(oe.LINES):Se.isLineLoop?E.setMode(oe.LINE_LOOP):E.setMode(oe.LINE_STRIP)}else Se.isPoints?E.setMode(oe.POINTS):Se.isSprite&&E.setMode(oe.TRIANGLES);if(Se.isBatchedMesh)if(Se._multiDrawInstances!==null)E.renderMultiDrawInstances(Se._multiDrawStarts,Se._multiDrawCounts,Se._multiDrawCount,Se._multiDrawInstances);else if(Ze.get("WEBGL_multi_draw"))E.renderMultiDraw(Se._multiDrawStarts,Se._multiDrawCounts,Se._multiDrawCount);else{const T=Se._multiDrawStarts,N=Se._multiDrawCounts,U=Se._multiDrawCount,H=l?Pe.get(l).bytesPerElement:1,X=st.get(ke).currentProgram.getUniforms();for(let Y=0;Y<U;Y++)X.setValue(oe,"_gl_DrawID",Y),E.render(T[Y]/H,N[Y])}else if(Se.isInstancedMesh)E.renderInstances(v,_,Se.count);else if(Ee.isInstancedBufferGeometry){const T=Ee._maxInstanceCount!==void 0?Ee._maxInstanceCount:1/0,N=Math.min(Ee.instanceCount,T);E.renderInstances(v,_,N)}else E.render(v,_)};function Nn(ae,ve,Ee){ae.transparent===!0&&ae.side===ys&&ae.forceSinglePass===!1?(ae.side=Hi,ae.needsUpdate=!0,Hr(ae,ve,Ee),ae.side=na,ae.needsUpdate=!0,Hr(ae,ve,Ee),ae.side=ys):Hr(ae,ve,Ee)}this.compile=function(ae,ve,Ee=null){Ee===null&&(Ee=ae),F=pt.get(Ee),F.init(ve),R.push(F),Ee.traverseVisible(function(Se){Se.isLight&&Se.layers.test(ve.layers)&&(F.pushLight(Se),Se.castShadow&&F.pushShadow(Se))}),ae!==Ee&&ae.traverseVisible(function(Se){Se.isLight&&Se.layers.test(ve.layers)&&(F.pushLight(Se),Se.castShadow&&F.pushShadow(Se))}),F.setupLights();const ke=new Set;return ae.traverse(function(Se){const G=Se.material;if(G)if(Array.isArray(G))for(let r=0;r<G.length;r++){const a=G[r];Nn(a,Ee,Se),ke.add(a)}else Nn(G,Ee,Se),ke.add(G)}),R.pop(),F=null,ke},this.compileAsync=function(ae,ve,Ee=null){const ke=this.compile(ae,ve,Ee);return new Promise(Se=>{function G(){if(ke.forEach(function(r){st.get(r).currentProgram.isReady()&&ke.delete(r)}),ke.size===0){Se(ae);return}setTimeout(G,10)}Ze.get("KHR_parallel_shader_compile")!==null?G():setTimeout(G,10)})};let rn=null;function Yi(ae){rn&&rn(ae)}function Ii(){Br.stop()}function ll(){Br.start()}const Br=new cT;Br.setAnimationLoop(Yi),typeof self<"u"&&Br.setContext(self),this.setAnimationLoop=function(ae){rn=ae,et.setAnimationLoop(ae),ae===null?Br.stop():Br.start()},et.addEventListener("sessionstart",Ii),et.addEventListener("sessionend",ll),this.render=function(ae,ve){if(ve!==void 0&&ve.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(W===!0)return;if(ae.matrixWorldAutoUpdate===!0&&ae.updateMatrixWorld(),ve.parent===null&&ve.matrixWorldAutoUpdate===!0&&ve.updateMatrixWorld(),et.enabled===!0&&et.isPresenting===!0&&(et.cameraAutoUpdate===!0&&et.updateCamera(ve),ve=et.getCamera()),ae.isScene===!0&&ae.onBeforeRender(O,ae,ve,te),F=pt.get(ae,R.length),F.init(ve),R.push(F),Je.multiplyMatrices(ve.projectionMatrix,ve.matrixWorldInverse),rt.setFromProjectionMatrix(Je),Ve=this.localClippingEnabled,Te=zt.init(this.clippingPlanes,Ve),z=at.get(ae,k.length),z.init(),k.push(z),et.enabled===!0&&et.isPresenting===!0){const G=O.xr.getDepthSensingMesh();G!==null&&to(G,ve,-1/0,O.sortObjects)}to(ae,ve,0,O.sortObjects),z.finish(),O.sortObjects===!0&&z.sort(ce,we),Ct=et.enabled===!1||et.isPresenting===!1||et.hasDepthSensing()===!1,Ct&&ht.addToRenderList(z,ae),this.info.render.frame++,Te===!0&&zt.beginShadows();const Ee=F.state.shadowsArray;Qe.render(Ee,ae,ve),Te===!0&&zt.endShadows(),this.info.autoReset===!0&&this.info.reset();const ke=z.opaque,Se=z.transmissive;if(F.setupLights(),ve.isArrayCamera){const G=ve.cameras;if(Se.length>0)for(let r=0,a=G.length;r<a;r++){const l=G[r];ls(ke,Se,ae,l)}Ct&&ht.render(ae);for(let r=0,a=G.length;r<a;r++){const l=G[r];no(z,ae,l,l.viewport)}}else Se.length>0&&ls(ke,Se,ae,ve),Ct&&ht.render(ae),no(z,ae,ve);te!==null&&(vt.updateMultisampleRenderTarget(te),vt.updateRenderTargetMipmap(te)),ae.isScene===!0&&ae.onAfterRender(O,ae,ve),Gt.resetDefaultState(),re=-1,ee=null,R.pop(),R.length>0?(F=R[R.length-1],Te===!0&&zt.setGlobalState(O.clippingPlanes,F.state.camera)):F=null,k.pop(),k.length>0?z=k[k.length-1]:z=null};function to(ae,ve,Ee,ke){if(ae.visible===!1)return;if(ae.layers.test(ve.layers)){if(ae.isGroup)Ee=ae.renderOrder;else if(ae.isLOD)ae.autoUpdate===!0&&ae.update(ve);else if(ae.isLight)F.pushLight(ae),ae.castShadow&&F.pushShadow(ae);else if(ae.isSprite){if(!ae.frustumCulled||rt.intersectsSprite(ae)){ke&&kt.setFromMatrixPosition(ae.matrixWorld).applyMatrix4(Je);const r=Ge.update(ae),a=ae.material;a.visible&&z.push(ae,r,a,Ee,kt.z,null)}}else if((ae.isMesh||ae.isLine||ae.isPoints)&&(!ae.frustumCulled||rt.intersectsObject(ae))){const r=Ge.update(ae),a=ae.material;if(ke&&(ae.boundingSphere!==void 0?(ae.boundingSphere===null&&ae.computeBoundingSphere(),kt.copy(ae.boundingSphere.center)):(r.boundingSphere===null&&r.computeBoundingSphere(),kt.copy(r.boundingSphere.center)),kt.applyMatrix4(ae.matrixWorld).applyMatrix4(Je)),Array.isArray(a)){const l=r.groups;for(let u=0,d=l.length;u<d;u++){const f=l[u],v=a[f.materialIndex];v&&v.visible&&z.push(ae,r,v,Ee,kt.z,f)}}else a.visible&&z.push(ae,r,a,Ee,kt.z,null)}}const G=ae.children;for(let r=0,a=G.length;r<a;r++)to(G[r],ve,Ee,ke)}function no(ae,ve,Ee,ke){const Se=ae.opaque,G=ae.transmissive,r=ae.transparent;F.setupLightsView(Ee),Te===!0&&zt.setGlobalState(O.clippingPlanes,Ee),ke&&Be.viewport(K.copy(ke)),Se.length>0&&cs(Se,ve,Ee),G.length>0&&cs(G,ve,Ee),r.length>0&&cs(r,ve,Ee),Be.buffers.depth.setTest(!0),Be.buffers.depth.setMask(!0),Be.buffers.color.setMask(!0),Be.setPolygonOffset(!1)}function ls(ae,ve,Ee,ke){if((Ee.isScene===!0?Ee.overrideMaterial:null)!==null)return;F.state.transmissionRenderTarget[ke.id]===void 0&&(F.state.transmissionRenderTarget[ke.id]=new ss(1,1,{generateMipmaps:!0,type:Ze.has("EXT_color_buffer_half_float")||Ze.has("EXT_color_buffer_float")?Bc:rs,minFilter:bs,samples:4,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:fn.workingColorSpace}));const G=F.state.transmissionRenderTarget[ke.id],r=ke.viewport||K;G.setSize(r.z,r.w);const a=O.getRenderTarget();O.setRenderTarget(G),O.getClearColor(xe),Re=O.getClearAlpha(),Re<1&&O.setClearColor(16777215,.5),Ct?ht.render(Ee):O.clear();const l=O.toneMapping;O.toneMapping=Ms;const u=ke.viewport;if(ke.viewport!==void 0&&(ke.viewport=void 0),F.setupLightsView(ke),Te===!0&&zt.setGlobalState(O.clippingPlanes,ke),cs(ae,Ee,ke),vt.updateMultisampleRenderTarget(G),vt.updateRenderTargetMipmap(G),Ze.has("WEBGL_multisampled_render_to_texture")===!1){let d=!1;for(let f=0,v=ve.length;f<v;f++){const y=ve[f],_=y.object,A=y.geometry,E=y.material,T=y.group;if(E.side===ys&&_.layers.test(ke.layers)){const N=E.side;E.side=Hi,E.needsUpdate=!0,xi(_,Ee,ke,A,E,T),E.side=N,E.needsUpdate=!0,d=!0}}d===!0&&(vt.updateMultisampleRenderTarget(G),vt.updateRenderTargetMipmap(G))}O.setRenderTarget(a),O.setClearColor(xe,Re),u!==void 0&&(ke.viewport=u),O.toneMapping=l}function cs(ae,ve,Ee){const ke=ve.isScene===!0?ve.overrideMaterial:null;for(let Se=0,G=ae.length;Se<G;Se++){const r=ae[Se],a=r.object,l=r.geometry,u=ke===null?r.material:ke,d=r.group;a.layers.test(Ee.layers)&&xi(a,ve,Ee,l,u,d)}}function xi(ae,ve,Ee,ke,Se,G){ae.onBeforeRender(O,ve,Ee,ke,Se,G),ae.modelViewMatrix.multiplyMatrices(Ee.matrixWorldInverse,ae.matrixWorld),ae.normalMatrix.getNormalMatrix(ae.modelViewMatrix),Se.transparent===!0&&Se.side===ys&&Se.forceSinglePass===!1?(Se.side=Hi,Se.needsUpdate=!0,O.renderBufferDirect(Ee,ve,ke,Se,ae,G),Se.side=na,Se.needsUpdate=!0,O.renderBufferDirect(Ee,ve,ke,Se,ae,G),Se.side=ys):O.renderBufferDirect(Ee,ve,ke,Se,ae,G),ae.onAfterRender(O,ve,Ee,ke,Se,G)}function Hr(ae,ve,Ee){ve.isScene!==!0&&(ve=Nt);const ke=st.get(ae),Se=F.state.lights,G=F.state.shadowsArray,r=Se.state.version,a=Xe.getParameters(ae,Se.state,G,ve,Ee),l=Xe.getProgramCacheKey(a);let u=ke.programs;ke.environment=ae.isMeshStandardMaterial?ve.environment:null,ke.fog=ve.fog,ke.envMap=(ae.isMeshStandardMaterial?ie:he).get(ae.envMap||ke.environment),ke.envMapRotation=ke.environment!==null&&ae.envMap===null?ve.environmentRotation:ae.envMapRotation,u===void 0&&(ae.addEventListener("dispose",Lt),u=new Map,ke.programs=u);let d=u.get(l);if(d!==void 0){if(ke.currentProgram===d&&ke.lightsStateVersion===r)return io(ae,a),d}else a.uniforms=Xe.getUniforms(ae),ae.onBeforeCompile(a,O),d=Xe.acquireProgram(a,l),u.set(l,d),ke.uniforms=a.uniforms;const f=ke.uniforms;return(!ae.isShaderMaterial&&!ae.isRawShaderMaterial||ae.clipping===!0)&&(f.clippingPlanes=zt.uniform),io(ae,a),ke.needsLights=Zc(ae),ke.lightsStateVersion=r,ke.needsLights&&(f.ambientLightColor.value=Se.state.ambient,f.lightProbe.value=Se.state.probe,f.directionalLights.value=Se.state.directional,f.directionalLightShadows.value=Se.state.directionalShadow,f.spotLights.value=Se.state.spot,f.spotLightShadows.value=Se.state.spotShadow,f.rectAreaLights.value=Se.state.rectArea,f.ltc_1.value=Se.state.rectAreaLTC1,f.ltc_2.value=Se.state.rectAreaLTC2,f.pointLights.value=Se.state.point,f.pointLightShadows.value=Se.state.pointShadow,f.hemisphereLights.value=Se.state.hemi,f.directionalShadowMap.value=Se.state.directionalShadowMap,f.directionalShadowMatrix.value=Se.state.directionalShadowMatrix,f.spotShadowMap.value=Se.state.spotShadowMap,f.spotLightMatrix.value=Se.state.spotLightMatrix,f.spotLightMap.value=Se.state.spotLightMap,f.pointShadowMap.value=Se.state.pointShadowMap,f.pointShadowMatrix.value=Se.state.pointShadowMatrix),ke.currentProgram=d,ke.uniformsList=null,d}function cl(ae){if(ae.uniformsList===null){const ve=ae.currentProgram.getUniforms();ae.uniformsList=Sp.seqWithValue(ve.seq,ae.uniforms)}return ae.uniformsList}function io(ae,ve){const Ee=st.get(ae);Ee.outputColorSpace=ve.outputColorSpace,Ee.batching=ve.batching,Ee.batchingColor=ve.batchingColor,Ee.instancing=ve.instancing,Ee.instancingColor=ve.instancingColor,Ee.instancingMorph=ve.instancingMorph,Ee.skinning=ve.skinning,Ee.morphTargets=ve.morphTargets,Ee.morphNormals=ve.morphNormals,Ee.morphColors=ve.morphColors,Ee.morphTargetsCount=ve.morphTargetsCount,Ee.numClippingPlanes=ve.numClippingPlanes,Ee.numIntersection=ve.numClipIntersection,Ee.vertexAlphas=ve.vertexAlphas,Ee.vertexTangents=ve.vertexTangents,Ee.toneMapping=ve.toneMapping}function jc(ae,ve,Ee,ke,Se){ve.isScene!==!0&&(ve=Nt),vt.resetTextureUnits();const G=ve.fog,r=ke.isMeshStandardMaterial?ve.environment:null,a=te===null?O.outputColorSpace:te.isXRRenderTarget===!0?te.texture.colorSpace:oa,l=(ke.isMeshStandardMaterial?ie:he).get(ke.envMap||r),u=ke.vertexColors===!0&&!!Ee.attributes.color&&Ee.attributes.color.itemSize===4,d=!!Ee.attributes.tangent&&(!!ke.normalMap||ke.anisotropy>0),f=!!Ee.morphAttributes.position,v=!!Ee.morphAttributes.normal,y=!!Ee.morphAttributes.color;let _=Ms;ke.toneMapped&&(te===null||te.isXRRenderTarget===!0)&&(_=O.toneMapping);const A=Ee.morphAttributes.position||Ee.morphAttributes.normal||Ee.morphAttributes.color,E=A!==void 0?A.length:0,T=st.get(ke),N=F.state.lights;if(Te===!0&&(Ve===!0||ae!==ee)){const $=ae===ee&&ke.id===re;zt.setState(ke,ae,$)}let U=!1;ke.version===T.__version?(T.needsLights&&T.lightsStateVersion!==N.state.version||T.outputColorSpace!==a||Se.isBatchedMesh&&T.batching===!1||!Se.isBatchedMesh&&T.batching===!0||Se.isBatchedMesh&&T.batchingColor===!0&&Se.colorTexture===null||Se.isBatchedMesh&&T.batchingColor===!1&&Se.colorTexture!==null||Se.isInstancedMesh&&T.instancing===!1||!Se.isInstancedMesh&&T.instancing===!0||Se.isSkinnedMesh&&T.skinning===!1||!Se.isSkinnedMesh&&T.skinning===!0||Se.isInstancedMesh&&T.instancingColor===!0&&Se.instanceColor===null||Se.isInstancedMesh&&T.instancingColor===!1&&Se.instanceColor!==null||Se.isInstancedMesh&&T.instancingMorph===!0&&Se.morphTexture===null||Se.isInstancedMesh&&T.instancingMorph===!1&&Se.morphTexture!==null||T.envMap!==l||ke.fog===!0&&T.fog!==G||T.numClippingPlanes!==void 0&&(T.numClippingPlanes!==zt.numPlanes||T.numIntersection!==zt.numIntersection)||T.vertexAlphas!==u||T.vertexTangents!==d||T.morphTargets!==f||T.morphNormals!==v||T.morphColors!==y||T.toneMapping!==_||T.morphTargetsCount!==E)&&(U=!0):(U=!0,T.__version=ke.version);let H=T.currentProgram;U===!0&&(H=Hr(ke,ve,Se));let X=!1,Y=!1,q=!1;const w=H.getUniforms(),D=T.uniforms;if(Be.useProgram(H.program)&&(X=!0,Y=!0,q=!0),ke.id!==re&&(re=ke.id,Y=!0),X||ee!==ae){w.setValue(oe,"projectionMatrix",ae.projectionMatrix),w.setValue(oe,"viewMatrix",ae.matrixWorldInverse);const $=w.map.cameraPosition;$!==void 0&&$.setValue(oe,Ye.setFromMatrixPosition(ae.matrixWorld)),lt.logarithmicDepthBuffer&&w.setValue(oe,"logDepthBufFC",2/(Math.log(ae.far+1)/Math.LN2)),(ke.isMeshPhongMaterial||ke.isMeshToonMaterial||ke.isMeshLambertMaterial||ke.isMeshBasicMaterial||ke.isMeshStandardMaterial||ke.isShaderMaterial)&&w.setValue(oe,"isOrthographic",ae.isOrthographicCamera===!0),ee!==ae&&(ee=ae,Y=!0,q=!0)}if(Se.isSkinnedMesh){w.setOptional(oe,Se,"bindMatrix"),w.setOptional(oe,Se,"bindMatrixInverse");const $=Se.skeleton;$&&($.boneTexture===null&&$.computeBoneTexture(),w.setValue(oe,"boneTexture",$.boneTexture,vt))}Se.isBatchedMesh&&(w.setOptional(oe,Se,"batchingTexture"),w.setValue(oe,"batchingTexture",Se._matricesTexture,vt),w.setOptional(oe,Se,"batchingIdTexture"),w.setValue(oe,"batchingIdTexture",Se._indirectTexture,vt),w.setOptional(oe,Se,"batchingColorTexture"),Se._colorsTexture!==null&&w.setValue(oe,"batchingColorTexture",Se._colorsTexture,vt));const V=Ee.morphAttributes;if((V.position!==void 0||V.normal!==void 0||V.color!==void 0)&&Jt.update(Se,Ee,H),(Y||T.receiveShadow!==Se.receiveShadow)&&(T.receiveShadow=Se.receiveShadow,w.setValue(oe,"receiveShadow",Se.receiveShadow)),ke.isMeshGouraudMaterial&&ke.envMap!==null&&(D.envMap.value=l,D.flipEnvMap.value=l.isCubeTexture&&l.isRenderTargetTexture===!1?-1:1),ke.isMeshStandardMaterial&&ke.envMap===null&&ve.environment!==null&&(D.envMapIntensity.value=ve.environmentIntensity),Y&&(w.setValue(oe,"toneMappingExposure",O.toneMappingExposure),T.needsLights&&qc(D,q),G&&ke.fog===!0&&_t.refreshFogUniforms(D,G),_t.refreshMaterialUniforms(D,ke,ze,Ae,F.state.transmissionRenderTarget[ae.id]),Sp.upload(oe,cl(T),D,vt)),ke.isShaderMaterial&&ke.uniformsNeedUpdate===!0&&(Sp.upload(oe,cl(T),D,vt),ke.uniformsNeedUpdate=!1),ke.isSpriteMaterial&&w.setValue(oe,"center",Se.center),w.setValue(oe,"modelViewMatrix",Se.modelViewMatrix),w.setValue(oe,"normalMatrix",Se.normalMatrix),w.setValue(oe,"modelMatrix",Se.matrixWorld),ke.isShaderMaterial||ke.isRawShaderMaterial){const $=ke.uniformsGroups;for(let Q=0,ne=$.length;Q<ne;Q++){const fe=$[Q];pn.update(fe,H),pn.bind(fe,H)}}return H}function qc(ae,ve){ae.ambientLightColor.needsUpdate=ve,ae.lightProbe.needsUpdate=ve,ae.directionalLights.needsUpdate=ve,ae.directionalLightShadows.needsUpdate=ve,ae.pointLights.needsUpdate=ve,ae.pointLightShadows.needsUpdate=ve,ae.spotLights.needsUpdate=ve,ae.spotLightShadows.needsUpdate=ve,ae.rectAreaLights.needsUpdate=ve,ae.hemisphereLights.needsUpdate=ve}function Zc(ae){return ae.isMeshLambertMaterial||ae.isMeshToonMaterial||ae.isMeshPhongMaterial||ae.isMeshStandardMaterial||ae.isShadowMaterial||ae.isShaderMaterial&&ae.lights===!0}this.getActiveCubeFace=function(){return Z},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return te},this.setRenderTargetTextures=function(ae,ve,Ee){st.get(ae.texture).__webglTexture=ve,st.get(ae.depthTexture).__webglTexture=Ee;const ke=st.get(ae);ke.__hasExternalTextures=!0,ke.__autoAllocateDepthBuffer=Ee===void 0,ke.__autoAllocateDepthBuffer||Ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ke.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(ae,ve){const Ee=st.get(ae);Ee.__webglFramebuffer=ve,Ee.__useDefaultFramebuffer=ve===void 0},this.setRenderTarget=function(ae,ve=0,Ee=0){te=ae,Z=ve,J=Ee;let ke=!0,Se=null,G=!1,r=!1;if(ae){const l=st.get(ae);l.__useDefaultFramebuffer!==void 0?(Be.bindFramebuffer(oe.FRAMEBUFFER,null),ke=!1):l.__webglFramebuffer===void 0?vt.setupRenderTarget(ae):l.__hasExternalTextures&&vt.rebindTextures(ae,st.get(ae.texture).__webglTexture,st.get(ae.depthTexture).__webglTexture);const u=ae.texture;(u.isData3DTexture||u.isDataArrayTexture||u.isCompressedArrayTexture)&&(r=!0);const d=st.get(ae).__webglFramebuffer;ae.isWebGLCubeRenderTarget?(Array.isArray(d[ve])?Se=d[ve][Ee]:Se=d[ve],G=!0):ae.samples>0&&vt.useMultisampledRTT(ae)===!1?Se=st.get(ae).__webglMultisampledFramebuffer:Array.isArray(d)?Se=d[Ee]:Se=d,K.copy(ae.viewport),se.copy(ae.scissor),ge=ae.scissorTest}else K.copy(be).multiplyScalar(ze).floor(),se.copy(Ie).multiplyScalar(ze).floor(),ge=Ke;if(Be.bindFramebuffer(oe.FRAMEBUFFER,Se)&&ke&&Be.drawBuffers(ae,Se),Be.viewport(K),Be.scissor(se),Be.setScissorTest(ge),G){const l=st.get(ae.texture);oe.framebufferTexture2D(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,oe.TEXTURE_CUBE_MAP_POSITIVE_X+ve,l.__webglTexture,Ee)}else if(r){const l=st.get(ae.texture),u=ve||0;oe.framebufferTextureLayer(oe.FRAMEBUFFER,oe.COLOR_ATTACHMENT0,l.__webglTexture,Ee||0,u)}re=-1},this.readRenderTargetPixels=function(ae,ve,Ee,ke,Se,G,r){if(!(ae&&ae.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let a=st.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&r!==void 0&&(a=a[r]),a){Be.bindFramebuffer(oe.FRAMEBUFFER,a);try{const l=ae.texture,u=l.format,d=l.type;if(!lt.textureFormatReadable(u)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!lt.textureTypeReadable(d)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ve>=0&&ve<=ae.width-ke&&Ee>=0&&Ee<=ae.height-Se&&oe.readPixels(ve,Ee,ke,Se,Ut.convert(u),Ut.convert(d),G)}finally{const l=te!==null?st.get(te).__webglFramebuffer:null;Be.bindFramebuffer(oe.FRAMEBUFFER,l)}}},this.readRenderTargetPixelsAsync=async function(ae,ve,Ee,ke,Se,G,r){if(!(ae&&ae.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=st.get(ae).__webglFramebuffer;if(ae.isWebGLCubeRenderTarget&&r!==void 0&&(a=a[r]),a){Be.bindFramebuffer(oe.FRAMEBUFFER,a);try{const l=ae.texture,u=l.format,d=l.type;if(!lt.textureFormatReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!lt.textureTypeReadable(d))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ve>=0&&ve<=ae.width-ke&&Ee>=0&&Ee<=ae.height-Se){const f=oe.createBuffer();oe.bindBuffer(oe.PIXEL_PACK_BUFFER,f),oe.bufferData(oe.PIXEL_PACK_BUFFER,G.byteLength,oe.STREAM_READ),oe.readPixels(ve,Ee,ke,Se,Ut.convert(u),Ut.convert(d),0),oe.flush();const v=oe.fenceSync(oe.SYNC_GPU_COMMANDS_COMPLETE,0);await rI(oe,v,4);try{oe.bindBuffer(oe.PIXEL_PACK_BUFFER,f),oe.getBufferSubData(oe.PIXEL_PACK_BUFFER,0,G)}finally{oe.deleteBuffer(f),oe.deleteSync(v)}return G}}finally{const l=te!==null?st.get(te).__webglFramebuffer:null;Be.bindFramebuffer(oe.FRAMEBUFFER,l)}}},this.copyFramebufferToTexture=function(ae,ve=null,Ee=0){ae.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ve=arguments[0]||null,ae=arguments[1]);const ke=Math.pow(2,-Ee),Se=Math.floor(ae.image.width*ke),G=Math.floor(ae.image.height*ke),r=ve!==null?ve.x:0,a=ve!==null?ve.y:0;vt.setTexture2D(ae,0),oe.copyTexSubImage2D(oe.TEXTURE_2D,Ee,0,0,r,a,Se,G),Be.unbindTexture()},this.copyTextureToTexture=function(ae,ve,Ee=null,ke=null,Se=0){ae.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),ke=arguments[0]||null,ae=arguments[1],ve=arguments[2],Se=arguments[3]||0,Ee=null);let G,r,a,l,u,d;Ee!==null?(G=Ee.max.x-Ee.min.x,r=Ee.max.y-Ee.min.y,a=Ee.min.x,l=Ee.min.y):(G=ae.image.width,r=ae.image.height,a=0,l=0),ke!==null?(u=ke.x,d=ke.y):(u=0,d=0);const f=Ut.convert(ve.format),v=Ut.convert(ve.type);vt.setTexture2D(ve,0),oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,ve.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ve.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,ve.unpackAlignment);const y=oe.getParameter(oe.UNPACK_ROW_LENGTH),_=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),A=oe.getParameter(oe.UNPACK_SKIP_PIXELS),E=oe.getParameter(oe.UNPACK_SKIP_ROWS),T=oe.getParameter(oe.UNPACK_SKIP_IMAGES),N=ae.isCompressedTexture?ae.mipmaps[Se]:ae.image;oe.pixelStorei(oe.UNPACK_ROW_LENGTH,N.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,N.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,a),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,l),ae.isDataTexture?oe.texSubImage2D(oe.TEXTURE_2D,Se,u,d,G,r,f,v,N.data):ae.isCompressedTexture?oe.compressedTexSubImage2D(oe.TEXTURE_2D,Se,u,d,N.width,N.height,f,N.data):oe.texSubImage2D(oe.TEXTURE_2D,Se,u,d,G,r,f,v,N),oe.pixelStorei(oe.UNPACK_ROW_LENGTH,y),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,_),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,A),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,E),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,T),Se===0&&ve.generateMipmaps&&oe.generateMipmap(oe.TEXTURE_2D),Be.unbindTexture()},this.copyTextureToTexture3D=function(ae,ve,Ee=null,ke=null,Se=0){ae.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),Ee=arguments[0]||null,ke=arguments[1]||null,ae=arguments[2],ve=arguments[3],Se=arguments[4]||0);let G,r,a,l,u,d,f,v,y;const _=ae.isCompressedTexture?ae.mipmaps[Se]:ae.image;Ee!==null?(G=Ee.max.x-Ee.min.x,r=Ee.max.y-Ee.min.y,a=Ee.max.z-Ee.min.z,l=Ee.min.x,u=Ee.min.y,d=Ee.min.z):(G=_.width,r=_.height,a=_.depth,l=0,u=0,d=0),ke!==null?(f=ke.x,v=ke.y,y=ke.z):(f=0,v=0,y=0);const A=Ut.convert(ve.format),E=Ut.convert(ve.type);let T;if(ve.isData3DTexture)vt.setTexture3D(ve,0),T=oe.TEXTURE_3D;else if(ve.isDataArrayTexture||ve.isCompressedArrayTexture)vt.setTexture2DArray(ve,0),T=oe.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}oe.pixelStorei(oe.UNPACK_FLIP_Y_WEBGL,ve.flipY),oe.pixelStorei(oe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ve.premultiplyAlpha),oe.pixelStorei(oe.UNPACK_ALIGNMENT,ve.unpackAlignment);const N=oe.getParameter(oe.UNPACK_ROW_LENGTH),U=oe.getParameter(oe.UNPACK_IMAGE_HEIGHT),H=oe.getParameter(oe.UNPACK_SKIP_PIXELS),X=oe.getParameter(oe.UNPACK_SKIP_ROWS),Y=oe.getParameter(oe.UNPACK_SKIP_IMAGES);oe.pixelStorei(oe.UNPACK_ROW_LENGTH,_.width),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,_.height),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,l),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,u),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,d),ae.isDataTexture||ae.isData3DTexture?oe.texSubImage3D(T,Se,f,v,y,G,r,a,A,E,_.data):ve.isCompressedArrayTexture?oe.compressedTexSubImage3D(T,Se,f,v,y,G,r,a,A,_.data):oe.texSubImage3D(T,Se,f,v,y,G,r,a,A,E,_),oe.pixelStorei(oe.UNPACK_ROW_LENGTH,N),oe.pixelStorei(oe.UNPACK_IMAGE_HEIGHT,U),oe.pixelStorei(oe.UNPACK_SKIP_PIXELS,H),oe.pixelStorei(oe.UNPACK_SKIP_ROWS,X),oe.pixelStorei(oe.UNPACK_SKIP_IMAGES,Y),Se===0&&ve.generateMipmaps&&oe.generateMipmap(T),Be.unbindTexture()},this.initRenderTarget=function(ae){st.get(ae).__webglFramebuffer===void 0&&vt.setupRenderTarget(ae)},this.initTexture=function(ae){ae.isCubeTexture?vt.setTextureCube(ae,0):ae.isData3DTexture?vt.setTexture3D(ae,0):ae.isDataArrayTexture||ae.isCompressedArrayTexture?vt.setTexture2DArray(ae,0):vt.setTexture2D(ae,0),Be.unbindTexture()},this.resetState=function(){Z=0,J=0,te=null,Be.reset(),Gt.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ws}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===rm?"display-p3":"srgb",t.unpackColorSpace=fn.workingColorSpace===Kh?"display-p3":"srgb"}}class lm{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new ot(e),this.density=t}clone(){return new lm(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class cm{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new ot(e),this.near=t,this.far=i}clone(){return new cm(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}let _g=class extends Qt{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ci,this.environmentIntensity=1,this.environmentRotation=new ci,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}};class um{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Dh,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=mr()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return bb("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let s=0,o=this.stride;s<o;s++)this.array[e+s]=t.array[i+s];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=mr()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Fi=new le;class el{constructor(e,t,i,s=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=s}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Fi.fromBufferAttribute(this,t),Fi.applyMatrix4(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Fi.fromBufferAttribute(this,t),Fi.applyNormalMatrix(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Fi.fromBufferAttribute(this,t),Fi.transformDirection(e),this.setXYZ(t,Fi.x,Fi.y,Fi.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Ui(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Xt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Xt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Ui(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Ui(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Ui(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Ui(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array),s=Xt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this}setXYZW(e,t,i,s,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=Xt(t,this.array),i=Xt(i,this.array),s=Xt(s,this.array),o=Xt(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=s,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return new xn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new el(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const s=i*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[s+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Eb extends vi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Ul;const Au=new le,Bl=new le,Hl=new le,Vl=new We,Cu=new We,vT=new gt,Nf=new le,Eu=new le,Ff=new le,P_=new We,_x=new We,k_=new We;class xT extends Qt{constructor(e=new Eb){if(super(),this.isSprite=!0,this.type="Sprite",Ul===void 0){Ul=new Bt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new um(t,5);Ul.setIndex([0,1,2,0,2,3]),Ul.setAttribute("position",new el(i,3,0,!1)),Ul.setAttribute("uv",new el(i,2,3,!1))}this.geometry=Ul,this.material=e,this.center=new We(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Bl.setFromMatrixScale(this.matrixWorld),vT.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Hl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Bl.multiplyScalar(-Hl.z);const i=this.material.rotation;let s,o;i!==0&&(o=Math.cos(i),s=Math.sin(i));const c=this.center;Of(Nf.set(-.5,-.5,0),Hl,c,Bl,s,o),Of(Eu.set(.5,-.5,0),Hl,c,Bl,s,o),Of(Ff.set(.5,.5,0),Hl,c,Bl,s,o),P_.set(0,0),_x.set(1,0),k_.set(1,1);let h=e.ray.intersectTriangle(Nf,Eu,Ff,!1,Au);if(h===null&&(Of(Eu.set(-.5,.5,0),Hl,c,Bl,s,o),_x.set(0,1),h=e.ray.intersectTriangle(Nf,Ff,Eu,!1,Au),h===null))return;const m=e.ray.origin.distanceTo(Au);m<e.near||m>e.far||t.push({distance:m,point:Au.clone(),uv:fr.getInterpolation(Au,Nf,Eu,Ff,P_,_x,k_,new We),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Of(n,e,t,i,s,o){Vl.subVectors(n,t).addScalar(.5).multiply(i),s!==void 0?(Cu.x=o*Vl.x-s*Vl.y,Cu.y=s*Vl.x+o*Vl.y):Cu.copy(Vl),n.copy(e),n.x+=Cu.x,n.y+=Cu.y,n.applyMatrix4(vT)}const zf=new le,R_=new le;class yT extends Qt{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,s=t.length;i<s;i++){const o=t[i];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const s=this.levels;let o;for(o=0;o<s.length&&!(t<s[o].distance);o++);return s.splice(o,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),e<o)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){zf.setFromMatrixPosition(this.matrixWorld);const s=e.ray.origin.distanceTo(zf);this.getObjectForDistance(s).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){zf.setFromMatrixPosition(e.matrixWorld),R_.setFromMatrixPosition(this.matrixWorld);const i=zf.distanceTo(R_)/e.zoom;t[0].object.visible=!0;let s,o;for(s=1,o=t.length;s<o;s++){let c=t[s].distance;if(t[s].object.visible&&(c-=c*t[s].hysteresis),i>=c)t[s-1].object.visible=!1,t[s].object.visible=!0;else break}for(this._currentLevel=s-1;s<o;s++)t[s].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let s=0,o=i.length;s<o;s++){const c=i[s];t.object.levels.push({object:c.object.uuid,distance:c.distance,hysteresis:c.hysteresis})}return t}}const L_=new le,I_=new an,D_=new an,mO=new le,N_=new gt,Uf=new le,Mx=new ki,F_=new gt,Ax=new Hc;class Tb extends Gn{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=q0,this.bindMatrix=new gt,this.bindMatrixInverse=new gt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Vi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Uf),this.boundingBox.expandByPoint(Uf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new ki),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Uf),this.boundingSphere.expandByPoint(Uf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,s=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Mx.copy(this.boundingSphere),Mx.applyMatrix4(s),e.ray.intersectsSphere(Mx)!==!1&&(F_.copy(s).invert(),Ax.copy(e.ray).applyMatrix4(F_),!(this.boundingBox!==null&&Ax.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Ax)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new an,t=this.geometry.attributes.skinWeight;for(let i=0,s=t.count;i<s;i++){e.fromBufferAttribute(t,i);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===q0?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===BE?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,s=this.geometry;I_.fromBufferAttribute(s.attributes.skinIndex,e),D_.fromBufferAttribute(s.attributes.skinWeight,e),L_.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const c=D_.getComponent(o);if(c!==0){const h=I_.getComponent(o);N_.multiplyMatrices(i.bones[h].matrixWorld,i.boneInverses[h]),t.addScaledVector(mO.copy(L_).applyMatrix4(N_),c)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Oh extends Qt{constructor(){super(),this.isBone=!0,this.type="Bone"}}class As extends En{constructor(e=null,t=1,i=1,s,o,c,h,m,x=oi,b=oi,S,M){super(null,c,h,m,x,b,s,o,S,M),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const O_=new gt,vO=new gt;class ed{constructor(e=[],t=[]){this.uuid=mr(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,s=this.bones.length;i<s;i++)this.boneInverses.push(new gt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new gt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,s=this.boneTexture;for(let o=0,c=e.length;o<c;o++){const h=e[o]?e[o].matrixWorld:vO;O_.multiplyMatrices(h,t[o]),O_.toArray(i,o*16)}s!==null&&(s.needsUpdate=!0)}clone(){return new ed(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new As(t,e,e,Pi,nr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const s=this.bones[t];if(s.name===e)return s}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,s=e.bones.length;i<s;i++){const o=e.bones[i];let c=t[o];c===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),c=new Oh),this.bones.push(c),this.boneInverses.push(new gt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let s=0,o=t.length;s<o;s++){const c=t[s];e.bones.push(c.uuid);const h=i[s];e.boneInverses.push(h.toArray())}return e}}class kc extends xn{constructor(e,t,i,s=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=s}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Wl=new gt,z_=new gt,Bf=[],U_=new Vi,xO=new gt,Tu=new Gn,Pu=new ki;class bT extends Gn{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new kc(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let s=0;s<i;s++)this.setMatrixAt(s,xO)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Vi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wl),U_.copy(e.boundingBox).applyMatrix4(Wl),this.boundingBox.union(U_)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new ki),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,Wl),Pu.copy(e.boundingSphere).applyMatrix4(Wl),this.boundingSphere.union(Pu)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,s=this.morphTexture.source.data.data,o=i.length+1,c=e*o+1;for(let h=0;h<i.length;h++)i[h]=s[c+h]}raycast(e,t){const i=this.matrixWorld,s=this.count;if(Tu.geometry=this.geometry,Tu.material=this.material,Tu.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Pu.copy(this.boundingSphere),Pu.applyMatrix4(i),e.ray.intersectsSphere(Pu)!==!1))for(let o=0;o<s;o++){this.getMatrixAt(o,Wl),z_.multiplyMatrices(i,Wl),Tu.matrixWorld=z_,Tu.raycast(e,Bf);for(let c=0,h=Bf.length;c<h;c++){const m=Bf[c];m.instanceId=o,m.object=this,t.push(m)}Bf.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new kc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,s=i.length+1;this.morphTexture===null&&(this.morphTexture=new As(new Float32Array(s*this.count),s,this.count,em,nr));const o=this.morphTexture.source.data.data;let c=0;for(let x=0;x<i.length;x++)c+=i[x];const h=this.geometry.morphTargetsRelative?1:1-c,m=s*e;o[m]=h,o.set(i,m+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function yO(n,e){return n.z-e.z}function bO(n,e){return e.z-n.z}class wO{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const c=s[this.index];o.push(c),this.index++,c.start=e.start,c.count=e.count,c.z=t,c.index=i}reset(){this.list.length=0,this.index=0}}const Ma=new gt,Cx=new gt,SO=new gt,_O=new ot(1,1,1),B_=new gt,Ex=new Qh,Hf=new Vi,bo=new ki,ku=new le,H_=new le,MO=new le,Tx=new wO,Ei=new Gn,Vf=[];function AO(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const s=n.count;for(let o=0;o<s;o++)for(let c=0;c<i;c++)e.setComponent(o+t,c,n.getComponent(o,c))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class wT extends Gn{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,i=t*2,s){super(new Bt,s),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new As(t,e,e,Pi,nr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new As(t,e,e,Zh,ra);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxIndexCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new As(t,e,e,Pi,nr);i.colorSpace=fn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,s=this._maxIndexCount;if(this._geometryInitialized===!1){for(const o in e.attributes){const c=e.getAttribute(o),{array:h,itemSize:m,normalized:x}=c,b=new h.constructor(i*m),S=new xn(b,m,x);t.setAttribute(o,S)}if(e.getIndex()!==null){const o=i>65535?new Uint32Array(s):new Uint16Array(s);t.setIndex(new xn(o,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const s=e.getAttribute(i),o=t.getAttribute(i);if(s.itemSize!==o.itemSize||s.normalized!==o.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Vi);const e=this._geometryCount,t=this.boundingBox,i=this._drawInfo;t.makeEmpty();for(let s=0;s<e;s++){if(i[s].active===!1)continue;const o=i[s].geometryIndex;this.getMatrixAt(s,Ma),this.getBoundingBoxAt(o,Hf).applyMatrix4(Ma),t.union(Hf)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new ki);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let i=0,s=t.length;i<s;i++){if(t[i].active===!1)continue;const o=t[i].geometryIndex;this.getMatrixAt(i,Ma),this.getBoundingSphereAt(o,bo).applyMatrix4(Ma),e.union(bo)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,i=this._matricesTexture,s=i.image.data;SO.toArray(s,t*16),i.needsUpdate=!0;const o=this._colorsTexture;return o&&(_O.toArray(o.image.data,t*4),o.needsUpdate=!0),t}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const s={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let o=null;const c=this._reservedRanges,h=this._drawRanges,m=this._bounds;this._geometryCount!==0&&(o=c[c.length-1]),t===-1?s.vertexCount=e.getAttribute("position").count:s.vertexCount=t,o===null?s.vertexStart=0:s.vertexStart=o.vertexStart+o.vertexCount;const x=e.getIndex(),b=x!==null;if(b&&(i===-1?s.indexCount=x.count:s.indexCount=i,o===null?s.indexStart=0:s.indexStart=o.indexStart+o.indexCount),s.indexStart!==-1&&s.indexStart+s.indexCount>this._maxIndexCount||s.vertexStart+s.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const S=this._geometryCount;return this._geometryCount++,c.push(s),h.push({start:b?s.indexStart:s.vertexStart,count:-1}),m.push({boxInitialized:!1,box:new Vi,sphereInitialized:!1,sphere:new ki}),this.setGeometryAt(S,e),S}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,s=i.getIndex()!==null,o=i.getIndex(),c=t.getIndex(),h=this._reservedRanges[e];if(s&&c.count>h.indexCount||t.attributes.position.count>h.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const m=h.vertexStart,x=h.vertexCount;for(const P in i.attributes){const L=t.getAttribute(P),z=i.getAttribute(P);AO(L,z,m);const F=L.itemSize;for(let k=L.count,R=x;k<R;k++){const O=m+k;for(let W=0;W<F;W++)z.setComponent(O,W,0)}z.needsUpdate=!0,z.addUpdateRange(m*F,x*F)}if(s){const P=h.indexStart;for(let L=0;L<c.count;L++)o.setX(P+L,m+c.getX(L));for(let L=c.count,z=h.indexCount;L<z;L++)o.setX(P+L,m);o.needsUpdate=!0,o.addUpdateRange(P,h.indexCount)}const b=this._bounds[e];t.boundingBox!==null?(b.box.copy(t.boundingBox),b.boxInitialized=!0):b.boxInitialized=!1,t.boundingSphere!==null?(b.sphere.copy(t.boundingSphere),b.sphereInitialized=!0):b.sphereInitialized=!1;const S=this._drawRanges[e],M=t.getAttribute("position");return S.count=s?c.count:M.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],s=i.box,o=this.geometry;if(i.boxInitialized===!1){s.makeEmpty();const c=o.index,h=o.attributes.position,m=this._drawRanges[e];for(let x=m.start,b=m.start+m.count;x<b;x++){let S=x;c&&(S=c.getX(S)),s.expandByPoint(ku.fromBufferAttribute(h,S))}i.boxInitialized=!0}return t.copy(s),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],s=i.sphere,o=this.geometry;if(i.sphereInitialized===!1){s.makeEmpty(),this.getBoundingBoxAt(e,Hf),Hf.getCenter(s.center);const c=o.index,h=o.attributes.position,m=this._drawRanges[e];let x=0;for(let b=m.start,S=m.start+m.count;b<S;b++){let M=b;c&&(M=c.getX(M)),ku.fromBufferAttribute(h,M),x=Math.max(x,s.center.distanceToSquared(ku))}s.radius=Math.sqrt(x),i.sphereInitialized=!0}return t.copy(s),t}setMatrixAt(e,t){const i=this._drawInfo,s=this._matricesTexture,o=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(o,e*16),s.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._drawInfo,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(s,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,s=this._colorsTexture.image.data,o=this._drawInfo;return e>=o.length||o[e].active===!1?this:(t.toArray(s,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}raycast(e,t){const i=this._drawInfo,s=this._drawRanges,o=this.matrixWorld,c=this.geometry;Ei.material=this.material,Ei.geometry.index=c.index,Ei.geometry.attributes=c.attributes,Ei.geometry.boundingBox===null&&(Ei.geometry.boundingBox=new Vi),Ei.geometry.boundingSphere===null&&(Ei.geometry.boundingSphere=new ki);for(let h=0,m=i.length;h<m;h++){if(!i[h].visible||!i[h].active)continue;const x=i[h].geometryIndex,b=s[x];Ei.geometry.setDrawRange(b.start,b.count),this.getMatrixAt(h,Ei.matrixWorld).premultiply(o),this.getBoundingBoxAt(x,Ei.geometry.boundingBox),this.getBoundingSphereAt(x,Ei.geometry.boundingSphere),Ei.raycast(e,Vf);for(let S=0,M=Vf.length;S<M;S++){const P=Vf[S];P.object=this,P.batchId=h,t.push(P)}Vf.length=0}Ei.material=null,Ei.geometry.index=null,Ei.geometry.attributes={},Ei.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,s,o){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const c=s.getIndex(),h=c===null?1:c.array.BYTES_PER_ELEMENT,m=this._drawInfo,x=this._multiDrawStarts,b=this._multiDrawCounts,S=this._drawRanges,M=this.perObjectFrustumCulled,P=this._indirectTexture,L=P.image.data;M&&(B_.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Ex.setFromProjectionMatrix(B_,e.coordinateSystem));let z=0;if(this.sortObjects){Cx.copy(this.matrixWorld).invert(),ku.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Cx),H_.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Cx);for(let R=0,O=m.length;R<O;R++)if(m[R].visible&&m[R].active){const W=m[R].geometryIndex;this.getMatrixAt(R,Ma),this.getBoundingSphereAt(W,bo).applyMatrix4(Ma);let Z=!1;if(M&&(Z=!Ex.intersectsSphere(bo)),!Z){const J=MO.subVectors(bo.center,ku).dot(H_);Tx.push(S[W],J,R)}}const F=Tx.list,k=this.customSort;k===null?F.sort(o.transparent?bO:yO):k.call(this,F,i);for(let R=0,O=F.length;R<O;R++){const W=F[R];x[z]=W.start*h,b[z]=W.count,L[z]=W.index,z++}Tx.reset()}else for(let F=0,k=m.length;F<k;F++)if(m[F].visible&&m[F].active){const R=m[F].geometryIndex;let O=!1;if(M&&(this.getMatrixAt(F,Ma),this.getBoundingSphereAt(R,bo).applyMatrix4(Ma),O=!Ex.intersectsSphere(bo)),!O){const W=S[R];x[z]=W.start*h,b[z]=W.count,L[z]=F,z++}}P.needsUpdate=!0,this._multiDrawCount=z,this._visibilityChanged=!1}onBeforeShadow(e,t,i,s,o,c){this.onBeforeRender(e,null,s,o,c)}}class Li extends vi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ot(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Mg=new le,Ag=new le,V_=new gt,Ru=new Hc,Wf=new ki,Px=new le,W_=new le;class sa extends Qt{constructor(e=new Bt,t=new Li){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let s=1,o=t.count;s<o;s++)Mg.fromBufferAttribute(t,s-1),Ag.fromBufferAttribute(t,s),i[s]=i[s-1],i[s]+=Mg.distanceTo(Ag);e.setAttribute("lineDistance",new yt(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Line.threshold,c=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Wf.copy(i.boundingSphere),Wf.applyMatrix4(s),Wf.radius+=o,e.ray.intersectsSphere(Wf)===!1)return;V_.copy(s).invert(),Ru.copy(e.ray).applyMatrix4(V_);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,x=this.isLineSegments?2:1,b=i.index,M=i.attributes.position;if(b!==null){const P=Math.max(0,c.start),L=Math.min(b.count,c.start+c.count);for(let z=P,F=L-1;z<F;z+=x){const k=b.getX(z),R=b.getX(z+1),O=Gf(this,e,Ru,m,k,R);O&&t.push(O)}if(this.isLineLoop){const z=b.getX(L-1),F=b.getX(P),k=Gf(this,e,Ru,m,z,F);k&&t.push(k)}}else{const P=Math.max(0,c.start),L=Math.min(M.count,c.start+c.count);for(let z=P,F=L-1;z<F;z+=x){const k=Gf(this,e,Ru,m,z,z+1);k&&t.push(k)}if(this.isLineLoop){const z=Gf(this,e,Ru,m,L-1,P);z&&t.push(z)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=s.length;o<c;o++){const h=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function Gf(n,e,t,i,s,o){const c=n.geometry.attributes.position;if(Mg.fromBufferAttribute(c,s),Ag.fromBufferAttribute(c,o),t.distanceSqToSegment(Mg,Ag,Px,W_)>i)return;Px.applyMatrix4(n.matrixWorld);const m=e.ray.origin.distanceTo(Px);if(!(m<e.near||m>e.far))return{distance:m,point:W_.clone().applyMatrix4(n.matrixWorld),index:s,face:null,faceIndex:null,object:n}}const G_=new le,X_=new le;class Ts extends sa{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let s=0,o=t.count;s<o;s+=2)G_.fromBufferAttribute(t,s),X_.fromBufferAttribute(t,s+1),i[s]=s===0?0:i[s-1],i[s+1]=i[s]+G_.distanceTo(X_);e.setAttribute("lineDistance",new yt(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class ST extends sa{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Pb extends vi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ot(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Y_=new gt,ey=new Hc,Xf=new ki,Yf=new le;class _T extends Qt{constructor(e=new Bt,t=new Pb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,s=this.matrixWorld,o=e.params.Points.threshold,c=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Xf.copy(i.boundingSphere),Xf.applyMatrix4(s),Xf.radius+=o,e.ray.intersectsSphere(Xf)===!1)return;Y_.copy(s).invert(),ey.copy(e.ray).applyMatrix4(Y_);const h=o/((this.scale.x+this.scale.y+this.scale.z)/3),m=h*h,x=i.index,S=i.attributes.position;if(x!==null){const M=Math.max(0,c.start),P=Math.min(x.count,c.start+c.count);for(let L=M,z=P;L<z;L++){const F=x.getX(L);Yf.fromBufferAttribute(S,F),j_(Yf,F,m,s,e,t,this)}}else{const M=Math.max(0,c.start),P=Math.min(S.count,c.start+c.count);for(let L=M,z=P;L<z;L++)Yf.fromBufferAttribute(S,L),j_(Yf,L,m,s,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const s=t[i[0]];if(s!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,c=s.length;o<c;o++){const h=s[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[h]=o}}}}}function j_(n,e,t,i,s,o,c){const h=ey.distanceSqToPoint(n);if(h<t){const m=new le;ey.closestPointToPoint(n,m),m.applyMatrix4(i);const x=s.ray.origin.distanceTo(m);if(x<s.near||x>s.far)return;o.push({distance:x,distanceToRay:Math.sqrt(h),point:m,index:e,face:null,object:c})}}class CO extends En{constructor(e,t,i,s,o,c,h,m,x){super(e,t,i,s,o,c,h,m,x),this.isVideoTexture=!0,this.minFilter=c!==void 0?c:Jn,this.magFilter=o!==void 0?o:Jn,this.generateMipmaps=!1;const b=this;function S(){b.needsUpdate=!0,e.requestVideoFrameCallback(S)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(S)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class EO extends En{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=oi,this.minFilter=oi,this.generateMipmaps=!1,this.needsUpdate=!0}}class hm extends En{constructor(e,t,i,s,o,c,h,m,x,b,S,M){super(null,c,h,m,x,b,s,o,S,M),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class TO extends hm{constructor(e,t,i,s,o,c){super(e,t,i,o,c),this.isCompressedArrayTexture=!0,this.image.depth=s,this.wrapR=tr,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class PO extends hm{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,ia),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class kO extends En{constructor(e,t,i,s,o,c,h,m,x){super(e,t,i,s,o,c,h,m,x),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Ur{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,s=this.getPoint(0),o=0;t.push(0);for(let c=1;c<=e;c++)i=this.getPoint(c/e),o+=i.distanceTo(s),t.push(o),s=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let s=0;const o=i.length;let c;t?c=t:c=e*i[o-1];let h=0,m=o-1,x;for(;h<=m;)if(s=Math.floor(h+(m-h)/2),x=i[s]-c,x<0)h=s+1;else if(x>0)m=s-1;else{m=s;break}if(s=m,i[s]===c)return s/(o-1);const b=i[s],M=i[s+1]-b,P=(c-b)/M;return(s+P)/(o-1)}getTangent(e,t){let s=e-1e-4,o=e+1e-4;s<0&&(s=0),o>1&&(o=1);const c=this.getPoint(s),h=this.getPoint(o),m=t||(c.isVector2?new We:new le);return m.copy(h).sub(c).normalize(),m}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new le,s=[],o=[],c=[],h=new le,m=new gt;for(let P=0;P<=e;P++){const L=P/e;s[P]=this.getTangentAt(L,new le)}o[0]=new le,c[0]=new le;let x=Number.MAX_VALUE;const b=Math.abs(s[0].x),S=Math.abs(s[0].y),M=Math.abs(s[0].z);b<=x&&(x=b,i.set(1,0,0)),S<=x&&(x=S,i.set(0,1,0)),M<=x&&i.set(0,0,1),h.crossVectors(s[0],i).normalize(),o[0].crossVectors(s[0],h),c[0].crossVectors(s[0],o[0]);for(let P=1;P<=e;P++){if(o[P]=o[P-1].clone(),c[P]=c[P-1].clone(),h.crossVectors(s[P-1],s[P]),h.length()>Number.EPSILON){h.normalize();const L=Math.acos(Un(s[P-1].dot(s[P]),-1,1));o[P].applyMatrix4(m.makeRotationAxis(h,L))}c[P].crossVectors(s[P],o[P])}if(t===!0){let P=Math.acos(Un(o[0].dot(o[e]),-1,1));P/=e,s[0].dot(h.crossVectors(o[0],o[e]))>0&&(P=-P);for(let L=1;L<=e;L++)o[L].applyMatrix4(m.makeRotationAxis(s[L],P*L)),c[L].crossVectors(s[L],o[L])}return{tangents:s,normals:o,binormals:c}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class dm extends Ur{constructor(e=0,t=0,i=1,s=1,o=0,c=Math.PI*2,h=!1,m=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=s,this.aStartAngle=o,this.aEndAngle=c,this.aClockwise=h,this.aRotation=m}getPoint(e,t=new We){const i=t,s=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const c=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=s;for(;o>s;)o-=s;o<Number.EPSILON&&(c?o=0:o=s),this.aClockwise===!0&&!c&&(o===s?o=-s:o=o-s);const h=this.aStartAngle+e*o;let m=this.aX+this.xRadius*Math.cos(h),x=this.aY+this.yRadius*Math.sin(h);if(this.aRotation!==0){const b=Math.cos(this.aRotation),S=Math.sin(this.aRotation),M=m-this.aX,P=x-this.aY;m=M*b-P*S+this.aX,x=M*S+P*b+this.aY}return i.set(m,x)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class MT extends dm{constructor(e,t,i,s,o,c){super(e,t,i,i,s,o,c),this.isArcCurve=!0,this.type="ArcCurve"}}function kb(){let n=0,e=0,t=0,i=0;function s(o,c,h,m){n=o,e=h,t=-3*o+3*c-2*h-m,i=2*o-2*c+h+m}return{initCatmullRom:function(o,c,h,m,x){s(c,h,x*(h-o),x*(m-c))},initNonuniformCatmullRom:function(o,c,h,m,x,b,S){let M=(c-o)/x-(h-o)/(x+b)+(h-c)/b,P=(h-c)/b-(m-c)/(b+S)+(m-h)/S;M*=b,P*=b,s(c,h,M,P)},calc:function(o){const c=o*o,h=c*o;return n+e*o+t*c+i*h}}}const jf=new le,kx=new kb,Rx=new kb,Lx=new kb;class AT extends Ur{constructor(e=[],t=!1,i="centripetal",s=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=s}getPoint(e,t=new le){const i=t,s=this.points,o=s.length,c=(o-(this.closed?0:1))*e;let h=Math.floor(c),m=c-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/o)+1)*o:m===0&&h===o-1&&(h=o-2,m=1);let x,b;this.closed||h>0?x=s[(h-1)%o]:(jf.subVectors(s[0],s[1]).add(s[0]),x=jf);const S=s[h%o],M=s[(h+1)%o];if(this.closed||h+2<o?b=s[(h+2)%o]:(jf.subVectors(s[o-1],s[o-2]).add(s[o-1]),b=jf),this.curveType==="centripetal"||this.curveType==="chordal"){const P=this.curveType==="chordal"?.5:.25;let L=Math.pow(x.distanceToSquared(S),P),z=Math.pow(S.distanceToSquared(M),P),F=Math.pow(M.distanceToSquared(b),P);z<1e-4&&(z=1),L<1e-4&&(L=z),F<1e-4&&(F=z),kx.initNonuniformCatmullRom(x.x,S.x,M.x,b.x,L,z,F),Rx.initNonuniformCatmullRom(x.y,S.y,M.y,b.y,L,z,F),Lx.initNonuniformCatmullRom(x.z,S.z,M.z,b.z,L,z,F)}else this.curveType==="catmullrom"&&(kx.initCatmullRom(x.x,S.x,M.x,b.x,this.tension),Rx.initCatmullRom(x.y,S.y,M.y,b.y,this.tension),Lx.initCatmullRom(x.z,S.z,M.z,b.z,this.tension));return i.set(kx.calc(m),Rx.calc(m),Lx.calc(m)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new le().fromArray(s))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function q_(n,e,t,i,s){const o=(i-e)*.5,c=(s-t)*.5,h=n*n,m=n*h;return(2*t-2*i+o+c)*m+(-3*t+3*i-2*o-c)*h+o*n+t}function RO(n,e){const t=1-n;return t*t*e}function LO(n,e){return 2*(1-n)*n*e}function IO(n,e){return n*n*e}function sh(n,e,t,i){return RO(n,e)+LO(n,t)+IO(n,i)}function DO(n,e){const t=1-n;return t*t*t*e}function NO(n,e){const t=1-n;return 3*t*t*n*e}function FO(n,e){return 3*(1-n)*n*n*e}function OO(n,e){return n*n*n*e}function ah(n,e,t,i,s){return DO(n,e)+NO(n,t)+FO(n,i)+OO(n,s)}class Rb extends Ur{constructor(e=new We,t=new We,i=new We,s=new We){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new We){const i=t,s=this.v0,o=this.v1,c=this.v2,h=this.v3;return i.set(ah(e,s.x,o.x,c.x,h.x),ah(e,s.y,o.y,c.y,h.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class CT extends Ur{constructor(e=new le,t=new le,i=new le,s=new le){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=s}getPoint(e,t=new le){const i=t,s=this.v0,o=this.v1,c=this.v2,h=this.v3;return i.set(ah(e,s.x,o.x,c.x,h.x),ah(e,s.y,o.y,c.y,h.y),ah(e,s.z,o.z,c.z,h.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Lb extends Ur{constructor(e=new We,t=new We){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new We){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new We){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ET extends Ur{constructor(e=new le,t=new le){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new le){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Ib extends Ur{constructor(e=new We,t=new We,i=new We){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new We){const i=t,s=this.v0,o=this.v1,c=this.v2;return i.set(sh(e,s.x,o.x,c.x),sh(e,s.y,o.y,c.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Db extends Ur{constructor(e=new le,t=new le,i=new le){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new le){const i=t,s=this.v0,o=this.v1,c=this.v2;return i.set(sh(e,s.x,o.x,c.x),sh(e,s.y,o.y,c.y),sh(e,s.z,o.z,c.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Nb extends Ur{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new We){const i=t,s=this.points,o=(s.length-1)*e,c=Math.floor(o),h=o-c,m=s[c===0?c:c-1],x=s[c],b=s[c>s.length-2?s.length-1:c+1],S=s[c>s.length-3?s.length-1:c+2];return i.set(q_(h,m.x,x.x,b.x,S.x),q_(h,m.y,x.y,b.y,S.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const s=this.points[t];e.points.push(s.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const s=e.points[t];this.points.push(new We().fromArray(s))}return this}}var Cg=Object.freeze({__proto__:null,ArcCurve:MT,CatmullRomCurve3:AT,CubicBezierCurve:Rb,CubicBezierCurve3:CT,EllipseCurve:dm,LineCurve:Lb,LineCurve3:ET,QuadraticBezierCurve:Ib,QuadraticBezierCurve3:Db,SplineCurve:Nb});class TT extends Ur{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Cg[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),s=this.getCurveLengths();let o=0;for(;o<s.length;){if(s[o]>=i){const c=s[o]-i,h=this.curves[o],m=h.getLength(),x=m===0?0:1-c/m;return h.getPointAt(x,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,s=this.curves.length;i<s;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let s=0,o=this.curves;s<o.length;s++){const c=o[s],h=c.isEllipseCurve?e*2:c.isLineCurve||c.isLineCurve3?1:c.isSplineCurve?e*c.points.length:e,m=c.getPoints(h);for(let x=0;x<m.length;x++){const b=m[x];i&&i.equals(b)||(t.push(b),i=b)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(s.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const s=this.curves[t];e.curves.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const s=e.curves[t];this.curves.push(new Cg[s.type]().fromJSON(s))}return this}}class zh extends TT{constructor(e){super(),this.type="Path",this.currentPoint=new We,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Lb(this.currentPoint.clone(),new We(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,s){const o=new Ib(this.currentPoint.clone(),new We(e,t),new We(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}bezierCurveTo(e,t,i,s,o,c){const h=new Rb(this.currentPoint.clone(),new We(e,t),new We(i,s),new We(o,c));return this.curves.push(h),this.currentPoint.set(o,c),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new Nb(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,s,o,c){const h=this.currentPoint.x,m=this.currentPoint.y;return this.absarc(e+h,t+m,i,s,o,c),this}absarc(e,t,i,s,o,c){return this.absellipse(e,t,i,i,s,o,c),this}ellipse(e,t,i,s,o,c,h,m){const x=this.currentPoint.x,b=this.currentPoint.y;return this.absellipse(e+x,t+b,i,s,o,c,h,m),this}absellipse(e,t,i,s,o,c,h,m){const x=new dm(e,t,i,s,o,c,h,m);if(this.curves.length>0){const S=x.getPoint(0);S.equals(this.currentPoint)||this.lineTo(S.x,S.y)}this.curves.push(x);const b=x.getPoint(1);return this.currentPoint.copy(b),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class td extends Bt{constructor(e=[new We(0,-.5),new We(.5,0),new We(0,.5)],t=12,i=0,s=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:s},t=Math.floor(t),s=Un(s,0,Math.PI*2);const o=[],c=[],h=[],m=[],x=[],b=1/t,S=new le,M=new We,P=new le,L=new le,z=new le;let F=0,k=0;for(let R=0;R<=e.length-1;R++)switch(R){case 0:F=e[R+1].x-e[R].x,k=e[R+1].y-e[R].y,P.x=k*1,P.y=-F,P.z=k*0,z.copy(P),P.normalize(),m.push(P.x,P.y,P.z);break;case e.length-1:m.push(z.x,z.y,z.z);break;default:F=e[R+1].x-e[R].x,k=e[R+1].y-e[R].y,P.x=k*1,P.y=-F,P.z=k*0,L.copy(P),P.x+=z.x,P.y+=z.y,P.z+=z.z,P.normalize(),m.push(P.x,P.y,P.z),z.copy(L)}for(let R=0;R<=t;R++){const O=i+R*b*s,W=Math.sin(O),Z=Math.cos(O);for(let J=0;J<=e.length-1;J++){S.x=e[J].x*W,S.y=e[J].y,S.z=e[J].x*Z,c.push(S.x,S.y,S.z),M.x=R/t,M.y=J/(e.length-1),h.push(M.x,M.y);const te=m[3*J+0]*W,re=m[3*J+1],ee=m[3*J+0]*Z;x.push(te,re,ee)}}for(let R=0;R<t;R++)for(let O=0;O<e.length-1;O++){const W=O+R*e.length,Z=W,J=W+e.length,te=W+e.length+1,re=W+1;o.push(Z,J,re),o.push(te,re,J)}this.setIndex(o),this.setAttribute("position",new yt(c,3)),this.setAttribute("uv",new yt(h,2)),this.setAttribute("normal",new yt(x,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new td(e.points,e.segments,e.phiStart,e.phiLength)}}class fm extends td{constructor(e=1,t=1,i=4,s=8){const o=new zh;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(i),s),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:s}}static fromJSON(e){return new fm(e.radius,e.length,e.capSegments,e.radialSegments)}}class pm extends Bt{constructor(e=1,t=32,i=0,s=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:s},t=Math.max(3,t);const o=[],c=[],h=[],m=[],x=new le,b=new We;c.push(0,0,0),h.push(0,0,1),m.push(.5,.5);for(let S=0,M=3;S<=t;S++,M+=3){const P=i+S/t*s;x.x=e*Math.cos(P),x.y=e*Math.sin(P),c.push(x.x,x.y,x.z),h.push(0,0,1),b.x=(c[M]/e+1)/2,b.y=(c[M+1]/e+1)/2,m.push(b.x,b.y)}for(let S=1;S<=t;S++)o.push(S,S+1,0);this.setIndex(o),this.setAttribute("position",new yt(c,3)),this.setAttribute("normal",new yt(h,3)),this.setAttribute("uv",new yt(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Xc extends Bt{constructor(e=1,t=1,i=1,s=32,o=1,c=!1,h=0,m=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:s,heightSegments:o,openEnded:c,thetaStart:h,thetaLength:m};const x=this;s=Math.floor(s),o=Math.floor(o);const b=[],S=[],M=[],P=[];let L=0;const z=[],F=i/2;let k=0;R(),c===!1&&(e>0&&O(!0),t>0&&O(!1)),this.setIndex(b),this.setAttribute("position",new yt(S,3)),this.setAttribute("normal",new yt(M,3)),this.setAttribute("uv",new yt(P,2));function R(){const W=new le,Z=new le;let J=0;const te=(t-e)/i;for(let re=0;re<=o;re++){const ee=[],K=re/o,se=K*(t-e)+e;for(let ge=0;ge<=s;ge++){const xe=ge/s,Re=xe*m+h,Le=Math.sin(Re),Ae=Math.cos(Re);Z.x=se*Le,Z.y=-K*i+F,Z.z=se*Ae,S.push(Z.x,Z.y,Z.z),W.set(Le,te,Ae).normalize(),M.push(W.x,W.y,W.z),P.push(xe,1-K),ee.push(L++)}z.push(ee)}for(let re=0;re<s;re++)for(let ee=0;ee<o;ee++){const K=z[ee][re],se=z[ee+1][re],ge=z[ee+1][re+1],xe=z[ee][re+1];b.push(K,se,xe),b.push(se,ge,xe),J+=6}x.addGroup(k,J,0),k+=J}function O(W){const Z=L,J=new We,te=new le;let re=0;const ee=W===!0?e:t,K=W===!0?1:-1;for(let ge=1;ge<=s;ge++)S.push(0,F*K,0),M.push(0,K,0),P.push(.5,.5),L++;const se=L;for(let ge=0;ge<=s;ge++){const Re=ge/s*m+h,Le=Math.cos(Re),Ae=Math.sin(Re);te.x=ee*Ae,te.y=F*K,te.z=ee*Le,S.push(te.x,te.y,te.z),M.push(0,K,0),J.x=Le*.5+.5,J.y=Ae*.5*K+.5,P.push(J.x,J.y),L++}for(let ge=0;ge<s;ge++){const xe=Z+ge,Re=se+ge;W===!0?b.push(Re,Re+1,xe):b.push(Re+1,Re,xe),re+=3}x.addGroup(k,re,W===!0?1:2),k+=re}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gm extends Xc{constructor(e=1,t=1,i=32,s=1,o=!1,c=0,h=Math.PI*2){super(0,e,t,i,s,o,c,h),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:c,thetaLength:h}}static fromJSON(e){return new gm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qa extends Bt{constructor(e=[],t=[],i=1,s=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:s};const o=[],c=[];h(s),x(i),b(),this.setAttribute("position",new yt(o,3)),this.setAttribute("normal",new yt(o.slice(),3)),this.setAttribute("uv",new yt(c,2)),s===0?this.computeVertexNormals():this.normalizeNormals();function h(R){const O=new le,W=new le,Z=new le;for(let J=0;J<t.length;J+=3)P(t[J+0],O),P(t[J+1],W),P(t[J+2],Z),m(O,W,Z,R)}function m(R,O,W,Z){const J=Z+1,te=[];for(let re=0;re<=J;re++){te[re]=[];const ee=R.clone().lerp(W,re/J),K=O.clone().lerp(W,re/J),se=J-re;for(let ge=0;ge<=se;ge++)ge===0&&re===J?te[re][ge]=ee:te[re][ge]=ee.clone().lerp(K,ge/se)}for(let re=0;re<J;re++)for(let ee=0;ee<2*(J-re)-1;ee++){const K=Math.floor(ee/2);ee%2===0?(M(te[re][K+1]),M(te[re+1][K]),M(te[re][K])):(M(te[re][K+1]),M(te[re+1][K+1]),M(te[re+1][K]))}}function x(R){const O=new le;for(let W=0;W<o.length;W+=3)O.x=o[W+0],O.y=o[W+1],O.z=o[W+2],O.normalize().multiplyScalar(R),o[W+0]=O.x,o[W+1]=O.y,o[W+2]=O.z}function b(){const R=new le;for(let O=0;O<o.length;O+=3){R.x=o[O+0],R.y=o[O+1],R.z=o[O+2];const W=F(R)/2/Math.PI+.5,Z=k(R)/Math.PI+.5;c.push(W,1-Z)}L(),S()}function S(){for(let R=0;R<c.length;R+=6){const O=c[R+0],W=c[R+2],Z=c[R+4],J=Math.max(O,W,Z),te=Math.min(O,W,Z);J>.9&&te<.1&&(O<.2&&(c[R+0]+=1),W<.2&&(c[R+2]+=1),Z<.2&&(c[R+4]+=1))}}function M(R){o.push(R.x,R.y,R.z)}function P(R,O){const W=R*3;O.x=e[W+0],O.y=e[W+1],O.z=e[W+2]}function L(){const R=new le,O=new le,W=new le,Z=new le,J=new We,te=new We,re=new We;for(let ee=0,K=0;ee<o.length;ee+=9,K+=6){R.set(o[ee+0],o[ee+1],o[ee+2]),O.set(o[ee+3],o[ee+4],o[ee+5]),W.set(o[ee+6],o[ee+7],o[ee+8]),J.set(c[K+0],c[K+1]),te.set(c[K+2],c[K+3]),re.set(c[K+4],c[K+5]),Z.copy(R).add(O).add(W).divideScalar(3);const se=F(Z);z(J,K+0,R,se),z(te,K+2,O,se),z(re,K+4,W,se)}}function z(R,O,W,Z){Z<0&&R.x===1&&(c[O]=R.x-1),W.x===0&&W.z===0&&(c[O]=Z/2/Math.PI+.5)}function F(R){return Math.atan2(R.z,-R.x)}function k(R){return Math.atan2(-R.y,Math.sqrt(R.x*R.x+R.z*R.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qa(e.vertices,e.indices,e.radius,e.details)}}class mm extends Qa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=1/i,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-i,0,-s,i,0,s,-i,0,s,i,-s,-i,0,-s,i,0,s,-i,0,s,i,0,-i,0,-s,i,0,-s,-i,0,s,i,0,s],c=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,c,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new mm(e.radius,e.detail)}}const qf=new le,Zf=new le,Ix=new le,Kf=new fr;class PT extends Bt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const s=Math.pow(10,4),o=Math.cos(Wo*t),c=e.getIndex(),h=e.getAttribute("position"),m=c?c.count:h.count,x=[0,0,0],b=["a","b","c"],S=new Array(3),M={},P=[];for(let L=0;L<m;L+=3){c?(x[0]=c.getX(L),x[1]=c.getX(L+1),x[2]=c.getX(L+2)):(x[0]=L,x[1]=L+1,x[2]=L+2);const{a:z,b:F,c:k}=Kf;if(z.fromBufferAttribute(h,x[0]),F.fromBufferAttribute(h,x[1]),k.fromBufferAttribute(h,x[2]),Kf.getNormal(Ix),S[0]=`${Math.round(z.x*s)},${Math.round(z.y*s)},${Math.round(z.z*s)}`,S[1]=`${Math.round(F.x*s)},${Math.round(F.y*s)},${Math.round(F.z*s)}`,S[2]=`${Math.round(k.x*s)},${Math.round(k.y*s)},${Math.round(k.z*s)}`,!(S[0]===S[1]||S[1]===S[2]||S[2]===S[0]))for(let R=0;R<3;R++){const O=(R+1)%3,W=S[R],Z=S[O],J=Kf[b[R]],te=Kf[b[O]],re=`${W}_${Z}`,ee=`${Z}_${W}`;ee in M&&M[ee]?(Ix.dot(M[ee].normal)<=o&&(P.push(J.x,J.y,J.z),P.push(te.x,te.y,te.z)),M[ee]=null):re in M||(M[re]={index0:x[R],index1:x[O],normal:Ix.clone()})}}for(const L in M)if(M[L]){const{index0:z,index1:F}=M[L];qf.fromBufferAttribute(h,z),Zf.fromBufferAttribute(h,F),P.push(qf.x,qf.y,qf.z),P.push(Zf.x,Zf.y,Zf.z)}this.setAttribute("position",new yt(P,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Xo extends zh{constructor(e){super(e),this.uuid=mr(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,s=this.holes.length;i<s;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(s.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const s=this.holes[t];e.holes.push(s.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const s=e.holes[t];this.holes.push(new zh().fromJSON(s))}return this}}const zO={triangulate:function(n,e,t=2){const i=e&&e.length,s=i?e[0]*t:n.length;let o=kT(n,0,s,t,!0);const c=[];if(!o||o.next===o.prev)return c;let h,m,x,b,S,M,P;if(i&&(o=WO(n,e,o,t)),n.length>80*t){h=x=n[0],m=b=n[1];for(let L=t;L<s;L+=t)S=n[L],M=n[L+1],S<h&&(h=S),M<m&&(m=M),S>x&&(x=S),M>b&&(b=M);P=Math.max(x-h,b-m),P=P!==0?32767/P:0}return Uh(o,c,t,h,m,P,0),c}};function kT(n,e,t,i,s){let o,c;if(s===ez(n,e,t,i)>0)for(o=e;o<t;o+=i)c=Z_(o,n[o],n[o+1],c);else for(o=t-i;o>=e;o-=i)c=Z_(o,n[o],n[o+1],c);return c&&vm(c,c.next)&&(Hh(c),c=c.next),c}function tl(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(vm(t,t.next)||Ln(t.prev,t,t.next)===0)){if(Hh(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function Uh(n,e,t,i,s,o,c){if(!n)return;!c&&o&&qO(n,i,s,o);let h=n,m,x;for(;n.prev!==n.next;){if(m=n.prev,x=n.next,o?BO(n,i,s,o):UO(n)){e.push(m.i/t|0),e.push(n.i/t|0),e.push(x.i/t|0),Hh(n),n=x.next,h=x.next;continue}if(n=x,n===h){c?c===1?(n=HO(tl(n),e,t),Uh(n,e,t,i,s,o,2)):c===2&&VO(n,e,t,i,s,o):Uh(tl(n),e,t,i,s,o,1);break}}}function UO(n){const e=n.prev,t=n,i=n.next;if(Ln(e,t,i)>=0)return!1;const s=e.x,o=t.x,c=i.x,h=e.y,m=t.y,x=i.y,b=s<o?s<c?s:c:o<c?o:c,S=h<m?h<x?h:x:m<x?m:x,M=s>o?s>c?s:c:o>c?o:c,P=h>m?h>x?h:x:m>x?m:x;let L=i.next;for(;L!==e;){if(L.x>=b&&L.x<=M&&L.y>=S&&L.y<=P&&uc(s,h,o,m,c,x,L.x,L.y)&&Ln(L.prev,L,L.next)>=0)return!1;L=L.next}return!0}function BO(n,e,t,i){const s=n.prev,o=n,c=n.next;if(Ln(s,o,c)>=0)return!1;const h=s.x,m=o.x,x=c.x,b=s.y,S=o.y,M=c.y,P=h<m?h<x?h:x:m<x?m:x,L=b<S?b<M?b:M:S<M?S:M,z=h>m?h>x?h:x:m>x?m:x,F=b>S?b>M?b:M:S>M?S:M,k=ty(P,L,e,t,i),R=ty(z,F,e,t,i);let O=n.prevZ,W=n.nextZ;for(;O&&O.z>=k&&W&&W.z<=R;){if(O.x>=P&&O.x<=z&&O.y>=L&&O.y<=F&&O!==s&&O!==c&&uc(h,b,m,S,x,M,O.x,O.y)&&Ln(O.prev,O,O.next)>=0||(O=O.prevZ,W.x>=P&&W.x<=z&&W.y>=L&&W.y<=F&&W!==s&&W!==c&&uc(h,b,m,S,x,M,W.x,W.y)&&Ln(W.prev,W,W.next)>=0))return!1;W=W.nextZ}for(;O&&O.z>=k;){if(O.x>=P&&O.x<=z&&O.y>=L&&O.y<=F&&O!==s&&O!==c&&uc(h,b,m,S,x,M,O.x,O.y)&&Ln(O.prev,O,O.next)>=0)return!1;O=O.prevZ}for(;W&&W.z<=R;){if(W.x>=P&&W.x<=z&&W.y>=L&&W.y<=F&&W!==s&&W!==c&&uc(h,b,m,S,x,M,W.x,W.y)&&Ln(W.prev,W,W.next)>=0)return!1;W=W.nextZ}return!0}function HO(n,e,t){let i=n;do{const s=i.prev,o=i.next.next;!vm(s,o)&&RT(s,i,i.next,o)&&Bh(s,o)&&Bh(o,s)&&(e.push(s.i/t|0),e.push(i.i/t|0),e.push(o.i/t|0),Hh(i),Hh(i.next),i=n=o),i=i.next}while(i!==n);return tl(i)}function VO(n,e,t,i,s,o){let c=n;do{let h=c.next.next;for(;h!==c.prev;){if(c.i!==h.i&&JO(c,h)){let m=LT(c,h);c=tl(c,c.next),m=tl(m,m.next),Uh(c,e,t,i,s,o,0),Uh(m,e,t,i,s,o,0);return}h=h.next}c=c.next}while(c!==n)}function WO(n,e,t,i){const s=[];let o,c,h,m,x;for(o=0,c=e.length;o<c;o++)h=e[o]*i,m=o<c-1?e[o+1]*i:n.length,x=kT(n,h,m,i,!1),x===x.next&&(x.steiner=!0),s.push(KO(x));for(s.sort(GO),o=0;o<s.length;o++)t=XO(s[o],t);return t}function GO(n,e){return n.x-e.x}function XO(n,e){const t=YO(n,e);if(!t)return e;const i=LT(t,n);return tl(i,i.next),tl(t,t.next)}function YO(n,e){let t=e,i=-1/0,s;const o=n.x,c=n.y;do{if(c<=t.y&&c>=t.next.y&&t.next.y!==t.y){const M=t.x+(c-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(M<=o&&M>i&&(i=M,s=t.x<t.next.x?t:t.next,M===o))return s}t=t.next}while(t!==e);if(!s)return null;const h=s,m=s.x,x=s.y;let b=1/0,S;t=s;do o>=t.x&&t.x>=m&&o!==t.x&&uc(c<x?o:i,c,m,x,c<x?i:o,c,t.x,t.y)&&(S=Math.abs(c-t.y)/(o-t.x),Bh(t,n)&&(S<b||S===b&&(t.x>s.x||t.x===s.x&&jO(s,t)))&&(s=t,b=S)),t=t.next;while(t!==h);return s}function jO(n,e){return Ln(n.prev,n,e.prev)<0&&Ln(e.next,n,n.next)<0}function qO(n,e,t,i){let s=n;do s.z===0&&(s.z=ty(s.x,s.y,e,t,i)),s.prevZ=s.prev,s.nextZ=s.next,s=s.next;while(s!==n);s.prevZ.nextZ=null,s.prevZ=null,ZO(s)}function ZO(n){let e,t,i,s,o,c,h,m,x=1;do{for(t=n,n=null,o=null,c=0;t;){for(c++,i=t,h=0,e=0;e<x&&(h++,i=i.nextZ,!!i);e++);for(m=x;h>0||m>0&&i;)h!==0&&(m===0||!i||t.z<=i.z)?(s=t,t=t.nextZ,h--):(s=i,i=i.nextZ,m--),o?o.nextZ=s:n=s,s.prevZ=o,o=s;t=i}o.nextZ=null,x*=2}while(c>1);return n}function ty(n,e,t,i,s){return n=(n-t)*s|0,e=(e-i)*s|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function KO(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function uc(n,e,t,i,s,o,c,h){return(s-c)*(e-h)>=(n-c)*(o-h)&&(n-c)*(i-h)>=(t-c)*(e-h)&&(t-c)*(o-h)>=(s-c)*(i-h)}function JO(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!$O(n,e)&&(Bh(n,e)&&Bh(e,n)&&QO(n,e)&&(Ln(n.prev,n,e.prev)||Ln(n,e.prev,e))||vm(n,e)&&Ln(n.prev,n,n.next)>0&&Ln(e.prev,e,e.next)>0)}function Ln(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function vm(n,e){return n.x===e.x&&n.y===e.y}function RT(n,e,t,i){const s=$f(Ln(n,e,t)),o=$f(Ln(n,e,i)),c=$f(Ln(t,i,n)),h=$f(Ln(t,i,e));return!!(s!==o&&c!==h||s===0&&Jf(n,t,e)||o===0&&Jf(n,i,e)||c===0&&Jf(t,n,i)||h===0&&Jf(t,e,i))}function Jf(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function $f(n){return n>0?1:n<0?-1:0}function $O(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&RT(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Bh(n,e){return Ln(n.prev,n,n.next)<0?Ln(n,e,n.next)>=0&&Ln(n,n.prev,e)>=0:Ln(n,e,n.prev)<0||Ln(n,n.next,e)<0}function QO(n,e){let t=n,i=!1;const s=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&s<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function LT(n,e){const t=new ny(n.i,n.x,n.y),i=new ny(e.i,e.x,e.y),s=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=s,s.prev=t,i.next=t,t.prev=i,o.next=i,i.prev=o,i}function Z_(n,e,t,i){const s=new ny(n,e,t);return i?(s.next=i.next,s.prev=i,i.next.prev=s,i.next=s):(s.prev=s,s.next=s),s}function Hh(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function ny(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ez(n,e,t,i){let s=0;for(let o=e,c=t-i;o<t;o+=i)s+=(n[c]-n[o])*(n[o+1]+n[c+1]),c=o;return s}class Cs{static area(e){const t=e.length;let i=0;for(let s=t-1,o=0;o<t;s=o++)i+=e[s].x*e[o].y-e[o].x*e[s].y;return i*.5}static isClockWise(e){return Cs.area(e)<0}static triangulateShape(e,t){const i=[],s=[],o=[];K_(e),J_(i,e);let c=e.length;t.forEach(K_);for(let m=0;m<t.length;m++)s.push(c),c+=t[m].length,J_(i,t[m]);const h=zO.triangulate(i,s);for(let m=0;m<h.length;m+=3)o.push(h.slice(m,m+3));return o}}function K_(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function J_(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class xm extends Bt{constructor(e=new Xo([new We(.5,.5),new We(-.5,.5),new We(-.5,-.5),new We(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,s=[],o=[];for(let h=0,m=e.length;h<m;h++){const x=e[h];c(x)}this.setAttribute("position",new yt(s,3)),this.setAttribute("uv",new yt(o,2)),this.computeVertexNormals();function c(h){const m=[],x=t.curveSegments!==void 0?t.curveSegments:12,b=t.steps!==void 0?t.steps:1,S=t.depth!==void 0?t.depth:1;let M=t.bevelEnabled!==void 0?t.bevelEnabled:!0,P=t.bevelThickness!==void 0?t.bevelThickness:.2,L=t.bevelSize!==void 0?t.bevelSize:P-.1,z=t.bevelOffset!==void 0?t.bevelOffset:0,F=t.bevelSegments!==void 0?t.bevelSegments:3;const k=t.extrudePath,R=t.UVGenerator!==void 0?t.UVGenerator:tz;let O,W=!1,Z,J,te,re;k&&(O=k.getSpacedPoints(b),W=!0,M=!1,Z=k.computeFrenetFrames(b,!1),J=new le,te=new le,re=new le),M||(F=0,P=0,L=0,z=0);const ee=h.extractPoints(x);let K=ee.shape;const se=ee.holes;if(!Cs.isClockWise(K)){K=K.reverse();for(let oe=0,je=se.length;oe<je;oe++){const Ze=se[oe];Cs.isClockWise(Ze)&&(se[oe]=Ze.reverse())}}const xe=Cs.triangulateShape(K,se),Re=K;for(let oe=0,je=se.length;oe<je;oe++){const Ze=se[oe];K=K.concat(Ze)}function Le(oe,je,Ze){return je||console.error("THREE.ExtrudeGeometry: vec does not exist"),oe.clone().addScaledVector(je,Ze)}const Ae=K.length,ze=xe.length;function ce(oe,je,Ze){let lt,Be,Tt;const st=oe.x-je.x,vt=oe.y-je.y,he=Ze.x-oe.x,ie=Ze.y-oe.y,Pe=st*st+vt*vt,qe=st*ie-vt*he;if(Math.abs(qe)>Number.EPSILON){const Ge=Math.sqrt(Pe),Xe=Math.sqrt(he*he+ie*ie),_t=je.x-vt/Ge,at=je.y+st/Ge,pt=Ze.x-ie/Xe,zt=Ze.y+he/Xe,Qe=((pt-_t)*ie-(zt-at)*he)/(st*ie-vt*he);lt=_t+st*Qe-oe.x,Be=at+vt*Qe-oe.y;const ht=lt*lt+Be*Be;if(ht<=2)return new We(lt,Be);Tt=Math.sqrt(ht/2)}else{let Ge=!1;st>Number.EPSILON?he>Number.EPSILON&&(Ge=!0):st<-Number.EPSILON?he<-Number.EPSILON&&(Ge=!0):Math.sign(vt)===Math.sign(ie)&&(Ge=!0),Ge?(lt=-vt,Be=st,Tt=Math.sqrt(Pe)):(lt=st,Be=vt,Tt=Math.sqrt(Pe/2))}return new We(lt/Tt,Be/Tt)}const we=[];for(let oe=0,je=Re.length,Ze=je-1,lt=oe+1;oe<je;oe++,Ze++,lt++)Ze===je&&(Ze=0),lt===je&&(lt=0),we[oe]=ce(Re[oe],Re[Ze],Re[lt]);const be=[];let Ie,Ke=we.concat();for(let oe=0,je=se.length;oe<je;oe++){const Ze=se[oe];Ie=[];for(let lt=0,Be=Ze.length,Tt=Be-1,st=lt+1;lt<Be;lt++,Tt++,st++)Tt===Be&&(Tt=0),st===Be&&(st=0),Ie[lt]=ce(Ze[lt],Ze[Tt],Ze[st]);be.push(Ie),Ke=Ke.concat(Ie)}for(let oe=0;oe<F;oe++){const je=oe/F,Ze=P*Math.cos(je*Math.PI/2),lt=L*Math.sin(je*Math.PI/2)+z;for(let Be=0,Tt=Re.length;Be<Tt;Be++){const st=Le(Re[Be],we[Be],lt);Ye(st.x,st.y,-Ze)}for(let Be=0,Tt=se.length;Be<Tt;Be++){const st=se[Be];Ie=be[Be];for(let vt=0,he=st.length;vt<he;vt++){const ie=Le(st[vt],Ie[vt],lt);Ye(ie.x,ie.y,-Ze)}}}const rt=L+z;for(let oe=0;oe<Ae;oe++){const je=M?Le(K[oe],Ke[oe],rt):K[oe];W?(te.copy(Z.normals[0]).multiplyScalar(je.x),J.copy(Z.binormals[0]).multiplyScalar(je.y),re.copy(O[0]).add(te).add(J),Ye(re.x,re.y,re.z)):Ye(je.x,je.y,0)}for(let oe=1;oe<=b;oe++)for(let je=0;je<Ae;je++){const Ze=M?Le(K[je],Ke[je],rt):K[je];W?(te.copy(Z.normals[oe]).multiplyScalar(Ze.x),J.copy(Z.binormals[oe]).multiplyScalar(Ze.y),re.copy(O[oe]).add(te).add(J),Ye(re.x,re.y,re.z)):Ye(Ze.x,Ze.y,S/b*oe)}for(let oe=F-1;oe>=0;oe--){const je=oe/F,Ze=P*Math.cos(je*Math.PI/2),lt=L*Math.sin(je*Math.PI/2)+z;for(let Be=0,Tt=Re.length;Be<Tt;Be++){const st=Le(Re[Be],we[Be],lt);Ye(st.x,st.y,S+Ze)}for(let Be=0,Tt=se.length;Be<Tt;Be++){const st=se[Be];Ie=be[Be];for(let vt=0,he=st.length;vt<he;vt++){const ie=Le(st[vt],Ie[vt],lt);W?Ye(ie.x,ie.y+O[b-1].y,O[b-1].x+Ze):Ye(ie.x,ie.y,S+Ze)}}}Te(),Ve();function Te(){const oe=s.length/3;if(M){let je=0,Ze=Ae*je;for(let lt=0;lt<ze;lt++){const Be=xe[lt];kt(Be[2]+Ze,Be[1]+Ze,Be[0]+Ze)}je=b+F*2,Ze=Ae*je;for(let lt=0;lt<ze;lt++){const Be=xe[lt];kt(Be[0]+Ze,Be[1]+Ze,Be[2]+Ze)}}else{for(let je=0;je<ze;je++){const Ze=xe[je];kt(Ze[2],Ze[1],Ze[0])}for(let je=0;je<ze;je++){const Ze=xe[je];kt(Ze[0]+Ae*b,Ze[1]+Ae*b,Ze[2]+Ae*b)}}i.addGroup(oe,s.length/3-oe,0)}function Ve(){const oe=s.length/3;let je=0;Je(Re,je),je+=Re.length;for(let Ze=0,lt=se.length;Ze<lt;Ze++){const Be=se[Ze];Je(Be,je),je+=Be.length}i.addGroup(oe,s.length/3-oe,1)}function Je(oe,je){let Ze=oe.length;for(;--Ze>=0;){const lt=Ze;let Be=Ze-1;Be<0&&(Be=oe.length-1);for(let Tt=0,st=b+F*2;Tt<st;Tt++){const vt=Ae*Tt,he=Ae*(Tt+1),ie=je+lt+vt,Pe=je+Be+vt,qe=je+Be+he,Ge=je+lt+he;Nt(ie,Pe,qe,Ge)}}}function Ye(oe,je,Ze){m.push(oe),m.push(je),m.push(Ze)}function kt(oe,je,Ze){Ct(oe),Ct(je),Ct(Ze);const lt=s.length/3,Be=R.generateTopUV(i,s,lt-3,lt-2,lt-1);Ot(Be[0]),Ot(Be[1]),Ot(Be[2])}function Nt(oe,je,Ze,lt){Ct(oe),Ct(je),Ct(lt),Ct(je),Ct(Ze),Ct(lt);const Be=s.length/3,Tt=R.generateSideWallUV(i,s,Be-6,Be-3,Be-2,Be-1);Ot(Tt[0]),Ot(Tt[1]),Ot(Tt[3]),Ot(Tt[1]),Ot(Tt[2]),Ot(Tt[3])}function Ct(oe){s.push(m[oe*3+0]),s.push(m[oe*3+1]),s.push(m[oe*3+2])}function Ot(oe){o.push(oe.x),o.push(oe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return nz(t,i,e)}static fromJSON(e,t){const i=[];for(let o=0,c=e.shapes.length;o<c;o++){const h=t[e.shapes[o]];i.push(h)}const s=e.options.extrudePath;return s!==void 0&&(e.options.extrudePath=new Cg[s.type]().fromJSON(s)),new xm(i,e.options)}}const tz={generateTopUV:function(n,e,t,i,s){const o=e[t*3],c=e[t*3+1],h=e[i*3],m=e[i*3+1],x=e[s*3],b=e[s*3+1];return[new We(o,c),new We(h,m),new We(x,b)]},generateSideWallUV:function(n,e,t,i,s,o){const c=e[t*3],h=e[t*3+1],m=e[t*3+2],x=e[i*3],b=e[i*3+1],S=e[i*3+2],M=e[s*3],P=e[s*3+1],L=e[s*3+2],z=e[o*3],F=e[o*3+1],k=e[o*3+2];return Math.abs(h-b)<Math.abs(c-x)?[new We(c,1-m),new We(x,1-S),new We(M,1-L),new We(z,1-k)]:[new We(h,1-m),new We(b,1-S),new We(P,1-L),new We(F,1-k)]}};function nz(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,s=n.length;i<s;i++){const o=n[i];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class ym extends Qa{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,s=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(s,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ym(e.radius,e.detail)}}class nd extends Qa{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],s=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,s,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nd(e.radius,e.detail)}}class bm extends Bt{constructor(e=.5,t=1,i=32,s=1,o=0,c=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:s,thetaStart:o,thetaLength:c},i=Math.max(3,i),s=Math.max(1,s);const h=[],m=[],x=[],b=[];let S=e;const M=(t-e)/s,P=new le,L=new We;for(let z=0;z<=s;z++){for(let F=0;F<=i;F++){const k=o+F/i*c;P.x=S*Math.cos(k),P.y=S*Math.sin(k),m.push(P.x,P.y,P.z),x.push(0,0,1),L.x=(P.x/t+1)/2,L.y=(P.y/t+1)/2,b.push(L.x,L.y)}S+=M}for(let z=0;z<s;z++){const F=z*(i+1);for(let k=0;k<i;k++){const R=k+F,O=R,W=R+i+1,Z=R+i+2,J=R+1;h.push(O,W,J),h.push(W,Z,J)}}this.setIndex(h),this.setAttribute("position",new yt(m,3)),this.setAttribute("normal",new yt(x,3)),this.setAttribute("uv",new yt(b,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bm(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class wm extends Bt{constructor(e=new Xo([new We(0,.5),new We(-.5,-.5),new We(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],s=[],o=[],c=[];let h=0,m=0;if(Array.isArray(e)===!1)x(e);else for(let b=0;b<e.length;b++)x(e[b]),this.addGroup(h,m,b),h+=m,m=0;this.setIndex(i),this.setAttribute("position",new yt(s,3)),this.setAttribute("normal",new yt(o,3)),this.setAttribute("uv",new yt(c,2));function x(b){const S=s.length/3,M=b.extractPoints(t);let P=M.shape;const L=M.holes;Cs.isClockWise(P)===!1&&(P=P.reverse());for(let F=0,k=L.length;F<k;F++){const R=L[F];Cs.isClockWise(R)===!0&&(L[F]=R.reverse())}const z=Cs.triangulateShape(P,L);for(let F=0,k=L.length;F<k;F++){const R=L[F];P=P.concat(R)}for(let F=0,k=P.length;F<k;F++){const R=P[F];s.push(R.x,R.y,0),o.push(0,0,1),c.push(R.x,R.y)}for(let F=0,k=z.length;F<k;F++){const R=z[F],O=R[0]+S,W=R[1]+S,Z=R[2]+S;i.push(O,W,Z),m+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return iz(t,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const c=t[e.shapes[s]];i.push(c)}return new wm(i,e.curveSegments)}}function iz(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const s=n[t];e.shapes.push(s.uuid)}else e.shapes.push(n.uuid);return e}class id extends Bt{constructor(e=1,t=32,i=16,s=0,o=Math.PI*2,c=0,h=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:s,phiLength:o,thetaStart:c,thetaLength:h},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const m=Math.min(c+h,Math.PI);let x=0;const b=[],S=new le,M=new le,P=[],L=[],z=[],F=[];for(let k=0;k<=i;k++){const R=[],O=k/i;let W=0;k===0&&c===0?W=.5/t:k===i&&m===Math.PI&&(W=-.5/t);for(let Z=0;Z<=t;Z++){const J=Z/t;S.x=-e*Math.cos(s+J*o)*Math.sin(c+O*h),S.y=e*Math.cos(c+O*h),S.z=e*Math.sin(s+J*o)*Math.sin(c+O*h),L.push(S.x,S.y,S.z),M.copy(S).normalize(),z.push(M.x,M.y,M.z),F.push(J+W,1-O),R.push(x++)}b.push(R)}for(let k=0;k<i;k++)for(let R=0;R<t;R++){const O=b[k][R+1],W=b[k][R],Z=b[k+1][R],J=b[k+1][R+1];(k!==0||c>0)&&P.push(O,W,J),(k!==i-1||m<Math.PI)&&P.push(W,Z,J)}this.setIndex(P),this.setAttribute("position",new yt(L,3)),this.setAttribute("normal",new yt(z,3)),this.setAttribute("uv",new yt(F,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new id(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Sm extends Qa{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],s=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,s,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sm(e.radius,e.detail)}}class _m extends Bt{constructor(e=1,t=.4,i=12,s=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:s,arc:o},i=Math.floor(i),s=Math.floor(s);const c=[],h=[],m=[],x=[],b=new le,S=new le,M=new le;for(let P=0;P<=i;P++)for(let L=0;L<=s;L++){const z=L/s*o,F=P/i*Math.PI*2;S.x=(e+t*Math.cos(F))*Math.cos(z),S.y=(e+t*Math.cos(F))*Math.sin(z),S.z=t*Math.sin(F),h.push(S.x,S.y,S.z),b.x=e*Math.cos(z),b.y=e*Math.sin(z),M.subVectors(S,b).normalize(),m.push(M.x,M.y,M.z),x.push(L/s),x.push(P/i)}for(let P=1;P<=i;P++)for(let L=1;L<=s;L++){const z=(s+1)*P+L-1,F=(s+1)*(P-1)+L-1,k=(s+1)*(P-1)+L,R=(s+1)*P+L;c.push(z,F,R),c.push(F,k,R)}this.setIndex(c),this.setAttribute("position",new yt(h,3)),this.setAttribute("normal",new yt(m,3)),this.setAttribute("uv",new yt(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _m(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Mm extends Bt{constructor(e=1,t=.4,i=64,s=8,o=2,c=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:s,p:o,q:c},i=Math.floor(i),s=Math.floor(s);const h=[],m=[],x=[],b=[],S=new le,M=new le,P=new le,L=new le,z=new le,F=new le,k=new le;for(let O=0;O<=i;++O){const W=O/i*o*Math.PI*2;R(W,o,c,e,P),R(W+.01,o,c,e,L),F.subVectors(L,P),k.addVectors(L,P),z.crossVectors(F,k),k.crossVectors(z,F),z.normalize(),k.normalize();for(let Z=0;Z<=s;++Z){const J=Z/s*Math.PI*2,te=-t*Math.cos(J),re=t*Math.sin(J);S.x=P.x+(te*k.x+re*z.x),S.y=P.y+(te*k.y+re*z.y),S.z=P.z+(te*k.z+re*z.z),m.push(S.x,S.y,S.z),M.subVectors(S,P).normalize(),x.push(M.x,M.y,M.z),b.push(O/i),b.push(Z/s)}}for(let O=1;O<=i;O++)for(let W=1;W<=s;W++){const Z=(s+1)*(O-1)+(W-1),J=(s+1)*O+(W-1),te=(s+1)*O+W,re=(s+1)*(O-1)+W;h.push(Z,J,re),h.push(J,te,re)}this.setIndex(h),this.setAttribute("position",new yt(m,3)),this.setAttribute("normal",new yt(x,3)),this.setAttribute("uv",new yt(b,2));function R(O,W,Z,J,te){const re=Math.cos(O),ee=Math.sin(O),K=Z/W*O,se=Math.cos(K);te.x=J*(2+se)*.5*re,te.y=J*(2+se)*ee*.5,te.z=J*Math.sin(K)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mm(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Am extends Bt{constructor(e=new Db(new le(-1,-1,0),new le(-1,1,0),new le(1,1,0)),t=64,i=1,s=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:s,closed:o};const c=e.computeFrenetFrames(t,o);this.tangents=c.tangents,this.normals=c.normals,this.binormals=c.binormals;const h=new le,m=new le,x=new We;let b=new le;const S=[],M=[],P=[],L=[];z(),this.setIndex(L),this.setAttribute("position",new yt(S,3)),this.setAttribute("normal",new yt(M,3)),this.setAttribute("uv",new yt(P,2));function z(){for(let O=0;O<t;O++)F(O);F(o===!1?t:0),R(),k()}function F(O){b=e.getPointAt(O/t,b);const W=c.normals[O],Z=c.binormals[O];for(let J=0;J<=s;J++){const te=J/s*Math.PI*2,re=Math.sin(te),ee=-Math.cos(te);m.x=ee*W.x+re*Z.x,m.y=ee*W.y+re*Z.y,m.z=ee*W.z+re*Z.z,m.normalize(),M.push(m.x,m.y,m.z),h.x=b.x+i*m.x,h.y=b.y+i*m.y,h.z=b.z+i*m.z,S.push(h.x,h.y,h.z)}}function k(){for(let O=1;O<=t;O++)for(let W=1;W<=s;W++){const Z=(s+1)*(O-1)+(W-1),J=(s+1)*O+(W-1),te=(s+1)*O+W,re=(s+1)*(O-1)+W;L.push(Z,J,re),L.push(J,te,re)}}function R(){for(let O=0;O<=t;O++)for(let W=0;W<=s;W++)x.x=O/t,x.y=W/s,P.push(x.x,x.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Am(new Cg[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class IT extends Bt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,s=new le,o=new le;if(e.index!==null){const c=e.attributes.position,h=e.index;let m=e.groups;m.length===0&&(m=[{start:0,count:h.count,materialIndex:0}]);for(let x=0,b=m.length;x<b;++x){const S=m[x],M=S.start,P=S.count;for(let L=M,z=M+P;L<z;L+=3)for(let F=0;F<3;F++){const k=h.getX(L+F),R=h.getX(L+(F+1)%3);s.fromBufferAttribute(c,k),o.fromBufferAttribute(c,R),$_(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}}else{const c=e.attributes.position;for(let h=0,m=c.count/3;h<m;h++)for(let x=0;x<3;x++){const b=3*h+x,S=3*h+(x+1)%3;s.fromBufferAttribute(c,b),o.fromBufferAttribute(c,S),$_(s,o,i)===!0&&(t.push(s.x,s.y,s.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new yt(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function $_(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,s=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(s)===!0?!1:(t.add(i),t.add(s),!0)}var Q_=Object.freeze({__proto__:null,BoxGeometry:rl,CapsuleGeometry:fm,CircleGeometry:pm,ConeGeometry:gm,CylinderGeometry:Xc,DodecahedronGeometry:mm,EdgesGeometry:PT,ExtrudeGeometry:xm,IcosahedronGeometry:ym,LatheGeometry:td,OctahedronGeometry:nd,PlaneGeometry:Vc,PolyhedronGeometry:Qa,RingGeometry:bm,ShapeGeometry:wm,SphereGeometry:id,TetrahedronGeometry:Sm,TorusGeometry:_m,TorusKnotGeometry:Mm,TubeGeometry:Am,WireframeGeometry:IT});class DT extends vi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new ot(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class NT extends as{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Fb extends vi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new ot(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ci,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FT extends Fb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new We(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Un(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new ot(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new ot(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new ot(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class oh extends vi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ot(16777215),this.specular=new ot(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ci,this.combine=qh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class OT extends vi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new ot(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class zT extends vi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Ob extends vi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new ot(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ot(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ci,this.combine=qh,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class UT extends vi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new ot(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ja,this.normalScale=new We(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BT extends Li{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Oo(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function HT(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function VT(n){function e(s,o){return n[s]-n[o]}const t=n.length,i=new Array(t);for(let s=0;s!==t;++s)i[s]=s;return i.sort(e),i}function iy(n,e,t){const i=n.length,s=new n.constructor(i);for(let o=0,c=0;c!==i;++o){const h=t[o]*e;for(let m=0;m!==e;++m)s[c++]=n[h+m]}return s}function zb(n,e,t,i){let s=1,o=n[0];for(;o!==void 0&&o[i]===void 0;)o=n[s++];if(o===void 0)return;let c=o[i];if(c!==void 0)if(Array.isArray(c))do c=o[i],c!==void 0&&(e.push(o.time),t.push.apply(t,c)),o=n[s++];while(o!==void 0);else if(c.toArray!==void 0)do c=o[i],c!==void 0&&(e.push(o.time),c.toArray(t,t.length)),o=n[s++];while(o!==void 0);else do c=o[i],c!==void 0&&(e.push(o.time),t.push(c)),o=n[s++];while(o!==void 0)}function rz(n,e,t,i,s=30){const o=n.clone();o.name=e;const c=[];for(let m=0;m<o.tracks.length;++m){const x=o.tracks[m],b=x.getValueSize(),S=[],M=[];for(let P=0;P<x.times.length;++P){const L=x.times[P]*s;if(!(L<t||L>=i)){S.push(x.times[P]);for(let z=0;z<b;++z)M.push(x.values[P*b+z])}}S.length!==0&&(x.times=Oo(S,x.times.constructor),x.values=Oo(M,x.values.constructor),c.push(x))}o.tracks=c;let h=1/0;for(let m=0;m<o.tracks.length;++m)h>o.tracks[m].times[0]&&(h=o.tracks[m].times[0]);for(let m=0;m<o.tracks.length;++m)o.tracks[m].shift(-1*h);return o.resetDuration(),o}function sz(n,e=0,t=n,i=30){i<=0&&(i=30);const s=t.tracks.length,o=e/i;for(let c=0;c<s;++c){const h=t.tracks[c],m=h.ValueTypeName;if(m==="bool"||m==="string")continue;const x=n.tracks.find(function(k){return k.name===h.name&&k.ValueTypeName===m});if(x===void 0)continue;let b=0;const S=h.getValueSize();h.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(b=S/3);let M=0;const P=x.getValueSize();x.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(M=P/3);const L=h.times.length-1;let z;if(o<=h.times[0]){const k=b,R=S-b;z=h.values.slice(k,R)}else if(o>=h.times[L]){const k=L*S+b,R=k+S-b;z=h.values.slice(k,R)}else{const k=h.createInterpolant(),R=b,O=S-b;k.evaluate(o),z=k.resultBuffer.slice(R,O)}m==="quaternion"&&new li().fromArray(z).normalize().conjugate().toArray(z);const F=x.times.length;for(let k=0;k<F;++k){const R=k*P+M;if(m==="quaternion")li.multiplyQuaternionsFlat(x.values,R,z,0,x.values,R);else{const O=P-M*2;for(let W=0;W<O;++W)x.values[R+W]-=z[W]}}}return n.blendMode=vb,n}const az={convertArray:Oo,isTypedArray:HT,getKeyframeOrder:VT,sortedArray:iy,flattenJSON:zb,subclip:rz,makeClipAdditive:sz};class rd{constructor(e,t,i,s){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=s!==void 0?s:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,s=t[i],o=t[i-1];e:{t:{let c;n:{i:if(!(e<s)){for(let h=i+2;;){if(s===void 0){if(e<o)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===h)break;if(o=s,s=t[++i],e<s)break t}c=t.length;break n}if(!(e>=o)){const h=t[1];e<h&&(i=2,o=h);for(let m=i-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===m)break;if(s=o,o=t[--i-1],e>=o)break t}c=i,i=0;break n}break e}for(;i<c;){const h=i+c>>>1;e<t[h]?c=h:i=h+1}if(s=t[i],o=t[i-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(s===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,o,s)}return this.interpolate_(i,o,e,s)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,s=this.valueSize,o=e*s;for(let c=0;c!==s;++c)t[c]=i[o+c];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class WT extends rd{constructor(e,t,i,s){super(e,t,i,s),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Do,endingEnd:Do}}intervalChanged_(e,t,i){const s=this.parameterPositions;let o=e-2,c=e+1,h=s[o],m=s[c];if(h===void 0)switch(this.getSettings_().endingStart){case No:o=e,h=2*t-i;break;case kh:o=s.length-2,h=t+s[o]-s[o+1];break;default:o=e,h=i}if(m===void 0)switch(this.getSettings_().endingEnd){case No:c=e,m=2*i-t;break;case kh:c=1,m=i+s[1]-s[0];break;default:c=e-1,m=t}const x=(i-t)*.5,b=this.valueSize;this._weightPrev=x/(t-h),this._weightNext=x/(m-i),this._offsetPrev=o*b,this._offsetNext=c*b}interpolate_(e,t,i,s){const o=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=e*h,x=m-h,b=this._offsetPrev,S=this._offsetNext,M=this._weightPrev,P=this._weightNext,L=(i-t)/(s-t),z=L*L,F=z*L,k=-M*F+2*M*z-M*L,R=(1+M)*F+(-1.5-2*M)*z+(-.5+M)*L+1,O=(-1-P)*F+(1.5+P)*z+.5*L,W=P*F-P*z;for(let Z=0;Z!==h;++Z)o[Z]=k*c[b+Z]+R*c[x+Z]+O*c[m+Z]+W*c[S+Z];return o}}class Ub extends rd{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=e*h,x=m-h,b=(i-t)/(s-t),S=1-b;for(let M=0;M!==h;++M)o[M]=c[x+M]*S+c[m+M]*b;return o}}class GT extends rd{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e){return this.copySampleValue_(e-1)}}class os{constructor(e,t,i,s){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Oo(t,this.TimeBufferType),this.values=Oo(i,this.ValueBufferType),this.setInterpolation(s||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Oo(e.times,Array),values:Oo(e.values,Array)};const s=e.getInterpolation();s!==e.DefaultInterpolation&&(i.interpolation=s)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new GT(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Ub(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new WT(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ph:t=this.InterpolantFactoryMethodDiscrete;break;case Sg:t=this.InterpolantFactoryMethodLinear;break;case wp:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ph;case this.InterpolantFactoryMethodLinear:return Sg;case this.InterpolantFactoryMethodSmooth:return wp}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,s=t.length;i!==s;++i)t[i]*=e}return this}trim(e,t){const i=this.times,s=i.length;let o=0,c=s-1;for(;o!==s&&i[o]<e;)++o;for(;c!==-1&&i[c]>t;)--c;if(++c,o!==0||c!==s){o>=c&&(c=Math.max(c,1),o=c-1);const h=this.getValueSize();this.times=i.slice(o,c),this.values=this.values.slice(o*h,c*h)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,s=this.values,o=i.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let c=null;for(let h=0;h!==o;h++){const m=i[h];if(typeof m=="number"&&isNaN(m)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,h,m),e=!1;break}if(c!==null&&c>m){console.error("THREE.KeyframeTrack: Out of order keys.",this,h,m,c),e=!1;break}c=m}if(s!==void 0&&HT(s))for(let h=0,m=s.length;h!==m;++h){const x=s[h];if(isNaN(x)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,h,x),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),s=this.getInterpolation()===wp,o=e.length-1;let c=1;for(let h=1;h<o;++h){let m=!1;const x=e[h],b=e[h+1];if(x!==b&&(h!==1||x!==e[0]))if(s)m=!0;else{const S=h*i,M=S-i,P=S+i;for(let L=0;L!==i;++L){const z=t[S+L];if(z!==t[M+L]||z!==t[P+L]){m=!0;break}}}if(m){if(h!==c){e[c]=e[h];const S=h*i,M=c*i;for(let P=0;P!==i;++P)t[M+P]=t[S+P]}++c}}if(o>0){e[c]=e[o];for(let h=o*i,m=c*i,x=0;x!==i;++x)t[m+x]=t[h+x];++c}return c!==e.length?(this.times=e.slice(0,c),this.values=t.slice(0,c*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,s=new i(this.name,e,t);return s.createInterpolant=this.createInterpolant,s}}os.prototype.TimeBufferType=Float32Array;os.prototype.ValueBufferType=Float32Array;os.prototype.DefaultInterpolation=Sg;class sl extends os{constructor(e,t,i){super(e,t,i)}}sl.prototype.ValueTypeName="bool";sl.prototype.ValueBufferType=Array;sl.prototype.DefaultInterpolation=Ph;sl.prototype.InterpolantFactoryMethodLinear=void 0;sl.prototype.InterpolantFactoryMethodSmooth=void 0;class Bb extends os{}Bb.prototype.ValueTypeName="color";class Rc extends os{}Rc.prototype.ValueTypeName="number";class XT extends rd{constructor(e,t,i,s){super(e,t,i,s)}interpolate_(e,t,i,s){const o=this.resultBuffer,c=this.sampleValues,h=this.valueSize,m=(i-t)/(s-t);let x=e*h;for(let b=x+h;x!==b;x+=4)li.slerpFlat(o,0,c,x-h,c,x,m);return o}}class Yc extends os{InterpolantFactoryMethodLinear(e){return new XT(this.times,this.values,this.getValueSize(),e)}}Yc.prototype.ValueTypeName="quaternion";Yc.prototype.InterpolantFactoryMethodSmooth=void 0;class al extends os{constructor(e,t,i){super(e,t,i)}}al.prototype.ValueTypeName="string";al.prototype.ValueBufferType=Array;al.prototype.DefaultInterpolation=Ph;al.prototype.InterpolantFactoryMethodLinear=void 0;al.prototype.InterpolantFactoryMethodSmooth=void 0;class Lc extends os{}Lc.prototype.ValueTypeName="vector";class Ic{constructor(e="",t=-1,i=[],s=im){this.name=e,this.tracks=i,this.duration=t,this.blendMode=s,this.uuid=mr(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,s=1/(e.fps||1);for(let c=0,h=i.length;c!==h;++c)t.push(lz(i[c]).scale(s));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],i=e.tracks,s={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,c=i.length;o!==c;++o)t.push(os.toJSON(i[o]));return s}static CreateFromMorphTargetSequence(e,t,i,s){const o=t.length,c=[];for(let h=0;h<o;h++){let m=[],x=[];m.push((h+o-1)%o,h,(h+1)%o),x.push(0,1,0);const b=VT(m);m=iy(m,1,b),x=iy(x,1,b),!s&&m[0]===0&&(m.push(o),x.push(x[0])),c.push(new Rc(".morphTargetInfluences["+t[h].name+"]",m,x).scale(1/i))}return new this(e,-1,c)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const s=e;i=s.geometry&&s.geometry.animations||s.animations}for(let s=0;s<i.length;s++)if(i[s].name===t)return i[s];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const s={},o=/^([\w-]*?)([\d]+)$/;for(let h=0,m=e.length;h<m;h++){const x=e[h],b=x.name.match(o);if(b&&b.length>1){const S=b[1];let M=s[S];M||(s[S]=M=[]),M.push(x)}}const c=[];for(const h in s)c.push(this.CreateFromMorphTargetSequence(h,s[h],t,i));return c}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(S,M,P,L,z){if(P.length!==0){const F=[],k=[];zb(P,F,k,L),F.length!==0&&z.push(new S(M,F,k))}},s=[],o=e.name||"default",c=e.fps||30,h=e.blendMode;let m=e.length||-1;const x=e.hierarchy||[];for(let S=0;S<x.length;S++){const M=x[S].keys;if(!(!M||M.length===0))if(M[0].morphTargets){const P={};let L;for(L=0;L<M.length;L++)if(M[L].morphTargets)for(let z=0;z<M[L].morphTargets.length;z++)P[M[L].morphTargets[z]]=-1;for(const z in P){const F=[],k=[];for(let R=0;R!==M[L].morphTargets.length;++R){const O=M[L];F.push(O.time),k.push(O.morphTarget===z?1:0)}s.push(new Rc(".morphTargetInfluence["+z+"]",F,k))}m=P.length*c}else{const P=".bones["+t[S].name+"]";i(Lc,P+".position",M,"pos",s),i(Yc,P+".quaternion",M,"rot",s),i(Lc,P+".scale",M,"scl",s)}}return s.length===0?null:new this(o,m,s,h)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,s=e.length;i!==s;++i){const o=this.tracks[i];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function oz(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Rc;case"vector":case"vector2":case"vector3":case"vector4":return Lc;case"color":return Bb;case"quaternion":return Yc;case"bool":case"boolean":return sl;case"string":return al}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function lz(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=oz(n.type);if(n.times===void 0){const t=[],i=[];zb(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Zs={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Hb{constructor(e,t,i){const s=this;let o=!1,c=0,h=0,m;const x=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(b){h++,o===!1&&s.onStart!==void 0&&s.onStart(b,c,h),o=!0},this.itemEnd=function(b){c++,s.onProgress!==void 0&&s.onProgress(b,c,h),c===h&&(o=!1,s.onLoad!==void 0&&s.onLoad())},this.itemError=function(b){s.onError!==void 0&&s.onError(b)},this.resolveURL=function(b){return m?m(b):b},this.setURLModifier=function(b){return m=b,this},this.addHandler=function(b,S){return x.push(b,S),this},this.removeHandler=function(b){const S=x.indexOf(b);return S!==-1&&x.splice(S,2),this},this.getHandler=function(b){for(let S=0,M=x.length;S<M;S+=2){const P=x[S],L=x[S+1];if(P.global&&(P.lastIndex=0),P.test(b))return L}return null}}}const YT=new Hb;class Xi{constructor(e){this.manager=e!==void 0?e:YT,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(s,o){i.load(e,s,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Xi.DEFAULT_MATERIAL_NAME="__DEFAULT";const Hs={};class cz extends Error{constructor(e,t){super(e),this.response=t}}class Es extends Xi{constructor(e){super(e)}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Zs.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(Hs[e]!==void 0){Hs[e].push({onLoad:t,onProgress:i,onError:s});return}Hs[e]=[],Hs[e].push({onLoad:t,onProgress:i,onError:s});const c=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,m=this.responseType;fetch(c).then(x=>{if(x.status===200||x.status===0){if(x.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||x.body===void 0||x.body.getReader===void 0)return x;const b=Hs[e],S=x.body.getReader(),M=x.headers.get("X-File-Size")||x.headers.get("Content-Length"),P=M?parseInt(M):0,L=P!==0;let z=0;const F=new ReadableStream({start(k){R();function R(){S.read().then(({done:O,value:W})=>{if(O)k.close();else{z+=W.byteLength;const Z=new ProgressEvent("progress",{lengthComputable:L,loaded:z,total:P});for(let J=0,te=b.length;J<te;J++){const re=b[J];re.onProgress&&re.onProgress(Z)}k.enqueue(W),R()}},O=>{k.error(O)})}}});return new Response(F)}else throw new cz(`fetch for "${x.url}" responded with ${x.status}: ${x.statusText}`,x)}).then(x=>{switch(m){case"arraybuffer":return x.arrayBuffer();case"blob":return x.blob();case"document":return x.text().then(b=>new DOMParser().parseFromString(b,h));case"json":return x.json();default:if(h===void 0)return x.text();{const S=/charset="?([^;"\s]*)"?/i.exec(h),M=S&&S[1]?S[1].toLowerCase():void 0,P=new TextDecoder(M);return x.arrayBuffer().then(L=>P.decode(L))}}}).then(x=>{Zs.add(e,x);const b=Hs[e];delete Hs[e];for(let S=0,M=b.length;S<M;S++){const P=b[S];P.onLoad&&P.onLoad(x)}}).catch(x=>{const b=Hs[e];if(b===void 0)throw this.manager.itemError(e),x;delete Hs[e];for(let S=0,M=b.length;S<M;S++){const P=b[S];P.onError&&P.onError(x)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class uz extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=this,c=new Es(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(h){try{t(o.parse(JSON.parse(h)))}catch(m){s?s(m):console.error(m),o.manager.itemError(e)}},i,s)}parse(e){const t=[];for(let i=0;i<e.length;i++){const s=Ic.parse(e[i]);t.push(s)}return t}}class hz extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=this,c=[],h=new hm,m=new Es(this.manager);m.setPath(this.path),m.setResponseType("arraybuffer"),m.setRequestHeader(this.requestHeader),m.setWithCredentials(o.withCredentials);let x=0;function b(S){m.load(e[S],function(M){const P=o.parse(M,!0);c[S]={width:P.width,height:P.height,format:P.format,mipmaps:P.mipmaps},x+=1,x===6&&(P.mipmapCount===1&&(h.minFilter=Jn),h.image=c,h.format=P.format,h.needsUpdate=!0,t&&t(h))},i,s)}if(Array.isArray(e))for(let S=0,M=e.length;S<M;++S)b(S);else m.load(e,function(S){const M=o.parse(S,!0);if(M.isCubemap){const P=M.mipmaps.length/M.mipmapCount;for(let L=0;L<P;L++){c[L]={mipmaps:[]};for(let z=0;z<M.mipmapCount;z++)c[L].mipmaps.push(M.mipmaps[L*M.mipmapCount+z]),c[L].format=M.format,c[L].width=M.width,c[L].height=M.height}h.image=c}else h.image.width=M.width,h.image.height=M.height,h.mipmaps=M.mipmaps;M.mipmapCount===1&&(h.minFilter=Jn),h.format=M.format,h.needsUpdate=!0,t&&t(h)},i,s);return h}}class Vh extends Xi{constructor(e){super(e)}load(e,t,i,s){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,c=Zs.get(e);if(c!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(c),o.manager.itemEnd(e)},0),c;const h=Fh("img");function m(){b(),Zs.add(e,this),t&&t(this),o.manager.itemEnd(e)}function x(S){b(),s&&s(S),o.manager.itemError(e),o.manager.itemEnd(e)}function b(){h.removeEventListener("load",m,!1),h.removeEventListener("error",x,!1)}return h.addEventListener("load",m,!1),h.addEventListener("error",x,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(h.crossOrigin=this.crossOrigin),o.manager.itemStart(e),h.src=e,h}}class dz extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=new $h;o.colorSpace=Rr;const c=new Vh(this.manager);c.setCrossOrigin(this.crossOrigin),c.setPath(this.path);let h=0;function m(x){c.load(e[x],function(b){o.images[x]=b,h++,h===6&&(o.needsUpdate=!0,t&&t(o))},void 0,s)}for(let x=0;x<e.length;++x)m(x);return o}}class fz extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=this,c=new As,h=new Es(this.manager);return h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setPath(this.path),h.setWithCredentials(o.withCredentials),h.load(e,function(m){let x;try{x=o.parse(m)}catch(b){if(s!==void 0)s(b);else{console.error(b);return}}x.image!==void 0?c.image=x.image:x.data!==void 0&&(c.image.width=x.width,c.image.height=x.height,c.image.data=x.data),c.wrapS=x.wrapS!==void 0?x.wrapS:tr,c.wrapT=x.wrapT!==void 0?x.wrapT:tr,c.magFilter=x.magFilter!==void 0?x.magFilter:Jn,c.minFilter=x.minFilter!==void 0?x.minFilter:Jn,c.anisotropy=x.anisotropy!==void 0?x.anisotropy:1,x.colorSpace!==void 0&&(c.colorSpace=x.colorSpace),x.flipY!==void 0&&(c.flipY=x.flipY),x.format!==void 0&&(c.format=x.format),x.type!==void 0&&(c.type=x.type),x.mipmaps!==void 0&&(c.mipmaps=x.mipmaps,c.minFilter=bs),x.mipmapCount===1&&(c.minFilter=Jn),x.generateMipmaps!==void 0&&(c.generateMipmaps=x.generateMipmaps),c.needsUpdate=!0,t&&t(c,x)},i,s),c}}class jT extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=new En,c=new Vh(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(h){o.image=h,o.needsUpdate=!0,t!==void 0&&t(o)},i,s),o}}class eo extends Qt{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ot(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class qT extends eo{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.groundColor=new ot(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Dx=new gt,eM=new le,tM=new le;class Vb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new We(512,512),this.map=null,this.mapPass=null,this.matrix=new gt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Qh,this._frameExtents=new We(1,1),this._viewportCount=1,this._viewports=[new an(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;eM.setFromMatrixPosition(e.matrixWorld),t.position.copy(eM),tM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(tM),t.updateMatrixWorld(),Dx.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Dx),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(Dx)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pz extends Vb{constructor(){super(new Zn(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=Tc*2*e.angle*this.focus,s=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(i!==t.fov||s!==t.aspect||o!==t.far)&&(t.fov=i,t.aspect=s,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Wb extends eo{constructor(e,t,i=0,s=Math.PI/3,o=0,c=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.target=new Qt,this.distance=i,this.angle=s,this.penumbra=o,this.decay=c,this.map=null,this.shadow=new pz}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const nM=new gt,Lu=new le,Nx=new le;class gz extends Vb{constructor(){super(new Zn(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new We(4,2),this._viewportCount=6,this._viewports=[new an(2,1,1,1),new an(0,1,1,1),new an(3,1,1,1),new an(1,1,1,1),new an(3,0,1,1),new an(1,0,1,1)],this._cubeDirections=[new le(1,0,0),new le(-1,0,0),new le(0,0,1),new le(0,0,-1),new le(0,1,0),new le(0,-1,0)],this._cubeUps=[new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,1,0),new le(0,0,1),new le(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,s=this.matrix,o=e.distance||i.far;o!==i.far&&(i.far=o,i.updateProjectionMatrix()),Lu.setFromMatrixPosition(e.matrixWorld),i.position.copy(Lu),Nx.copy(i.position),Nx.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(Nx),i.updateMatrixWorld(),s.makeTranslation(-Lu.x,-Lu.y,-Lu.z),nM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nM)}}class Eg extends eo{constructor(e,t,i=0,s=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=s,this.shadow=new gz}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mz extends Vb{constructor(){super(new Wc(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Gb extends eo{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Qt.DEFAULT_UP),this.updateMatrix(),this.target=new Qt,this.shadow=new mz}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Xb extends eo{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZT extends eo{constructor(e,t,i=10,s=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=s}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class KT{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new le)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,s=e.y,o=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.282095),t.addScaledVector(c[1],.488603*s),t.addScaledVector(c[2],.488603*o),t.addScaledVector(c[3],.488603*i),t.addScaledVector(c[4],1.092548*(i*s)),t.addScaledVector(c[5],1.092548*(s*o)),t.addScaledVector(c[6],.315392*(3*o*o-1)),t.addScaledVector(c[7],1.092548*(i*o)),t.addScaledVector(c[8],.546274*(i*i-s*s)),t}getIrradianceAt(e,t){const i=e.x,s=e.y,o=e.z,c=this.coefficients;return t.copy(c[0]).multiplyScalar(.886227),t.addScaledVector(c[1],2*.511664*s),t.addScaledVector(c[2],2*.511664*o),t.addScaledVector(c[3],2*.511664*i),t.addScaledVector(c[4],2*.429043*i*s),t.addScaledVector(c[5],2*.429043*s*o),t.addScaledVector(c[6],.743125*o*o-.247708),t.addScaledVector(c[7],2*.429043*i*o),t.addScaledVector(c[8],.429043*(i*i-s*s)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].fromArray(e,t+s*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let s=0;s<9;s++)i[s].toArray(e,t+s*3);return e}static getBasisAt(e,t){const i=e.x,s=e.y,o=e.z;t[0]=.282095,t[1]=.488603*s,t[2]=.488603*o,t[3]=.488603*i,t[4]=1.092548*i*s,t[5]=1.092548*s*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*i*o,t[8]=.546274*(i*i-s*s)}}class JT extends eo{constructor(e=new KT,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Cm extends Xi{constructor(e){super(e),this.textures={}}load(e,t,i,s){const o=this,c=new Es(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.setWithCredentials(o.withCredentials),c.load(e,function(h){try{t(o.parse(JSON.parse(h)))}catch(m){s?s(m):console.error(m),o.manager.itemError(e)}},i,s)}parse(e){const t=this.textures;function i(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const s=Cm.createMaterialFromType(e.type);if(e.uuid!==void 0&&(s.uuid=e.uuid),e.name!==void 0&&(s.name=e.name),e.color!==void 0&&s.color!==void 0&&s.color.setHex(e.color),e.roughness!==void 0&&(s.roughness=e.roughness),e.metalness!==void 0&&(s.metalness=e.metalness),e.sheen!==void 0&&(s.sheen=e.sheen),e.sheenColor!==void 0&&(s.sheenColor=new ot().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(s.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&s.emissive!==void 0&&s.emissive.setHex(e.emissive),e.specular!==void 0&&s.specular!==void 0&&s.specular.setHex(e.specular),e.specularIntensity!==void 0&&(s.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&s.specularColor!==void 0&&s.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(s.shininess=e.shininess),e.clearcoat!==void 0&&(s.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(s.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(s.dispersion=e.dispersion),e.iridescence!==void 0&&(s.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(s.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(s.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(s.transmission=e.transmission),e.thickness!==void 0&&(s.thickness=e.thickness),e.attenuationDistance!==void 0&&(s.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&s.attenuationColor!==void 0&&s.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(s.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(s.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(s.fog=e.fog),e.flatShading!==void 0&&(s.flatShading=e.flatShading),e.blending!==void 0&&(s.blending=e.blending),e.combine!==void 0&&(s.combine=e.combine),e.side!==void 0&&(s.side=e.side),e.shadowSide!==void 0&&(s.shadowSide=e.shadowSide),e.opacity!==void 0&&(s.opacity=e.opacity),e.transparent!==void 0&&(s.transparent=e.transparent),e.alphaTest!==void 0&&(s.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(s.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(s.depthFunc=e.depthFunc),e.depthTest!==void 0&&(s.depthTest=e.depthTest),e.depthWrite!==void 0&&(s.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(s.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(s.blendSrc=e.blendSrc),e.blendDst!==void 0&&(s.blendDst=e.blendDst),e.blendEquation!==void 0&&(s.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(s.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(s.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(s.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&s.blendColor!==void 0&&s.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(s.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(s.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(s.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(s.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(s.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(s.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(s.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(s.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(s.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(s.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(s.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(s.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(s.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(s.rotation=e.rotation),e.linewidth!==void 0&&(s.linewidth=e.linewidth),e.dashSize!==void 0&&(s.dashSize=e.dashSize),e.gapSize!==void 0&&(s.gapSize=e.gapSize),e.scale!==void 0&&(s.scale=e.scale),e.polygonOffset!==void 0&&(s.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(s.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(s.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(s.dithering=e.dithering),e.alphaToCoverage!==void 0&&(s.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(s.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(s.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(s.visible=e.visible),e.toneMapped!==void 0&&(s.toneMapped=e.toneMapped),e.userData!==void 0&&(s.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?s.vertexColors=e.vertexColors>0:s.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const c=e.uniforms[o];switch(s.uniforms[o]={},c.type){case"t":s.uniforms[o].value=i(c.value);break;case"c":s.uniforms[o].value=new ot().setHex(c.value);break;case"v2":s.uniforms[o].value=new We().fromArray(c.value);break;case"v3":s.uniforms[o].value=new le().fromArray(c.value);break;case"v4":s.uniforms[o].value=new an().fromArray(c.value);break;case"m3":s.uniforms[o].value=new Wt().fromArray(c.value);break;case"m4":s.uniforms[o].value=new gt().fromArray(c.value);break;default:s.uniforms[o].value=c.value}}if(e.defines!==void 0&&(s.defines=e.defines),e.vertexShader!==void 0&&(s.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(s.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(s.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)s.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(s.lights=e.lights),e.clipping!==void 0&&(s.clipping=e.clipping),e.size!==void 0&&(s.size=e.size),e.sizeAttenuation!==void 0&&(s.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(s.map=i(e.map)),e.matcap!==void 0&&(s.matcap=i(e.matcap)),e.alphaMap!==void 0&&(s.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(s.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(s.bumpScale=e.bumpScale),e.normalMap!==void 0&&(s.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(s.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),s.normalScale=new We().fromArray(o)}return e.displacementMap!==void 0&&(s.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(s.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(s.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(s.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(s.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(s.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(s.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(s.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(s.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(s.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(s.envMap=i(e.envMap)),e.envMapRotation!==void 0&&s.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(s.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(s.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(s.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(s.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(s.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(s.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(s.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(s.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(s.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(s.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(s.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(s.clearcoatNormalScale=new We().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(s.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(s.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(s.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(s.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(s.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(s.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(s.sheenRoughnessMap=i(e.sheenRoughnessMap)),s}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:DT,SpriteMaterial:Eb,RawShaderMaterial:NT,ShaderMaterial:as,PointsMaterial:Pb,MeshPhysicalMaterial:FT,MeshStandardMaterial:Fb,MeshPhongMaterial:oh,MeshToonMaterial:OT,MeshNormalMaterial:zT,MeshLambertMaterial:Ob,MeshDepthMaterial:Ab,MeshDistanceMaterial:Cb,MeshBasicMaterial:$a,MeshMatcapMaterial:UT,LineDashedMaterial:BT,LineBasicMaterial:Li,Material:vi};return new t[e]}}class Tg{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,s=e.length;i<s;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class $T extends Bt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class QT extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=this,c=new Es(o.manager);c.setPath(o.path),c.setRequestHeader(o.requestHeader),c.setWithCredentials(o.withCredentials),c.load(e,function(h){try{t(o.parse(JSON.parse(h)))}catch(m){s?s(m):console.error(m),o.manager.itemError(e)}},i,s)}parse(e){const t={},i={};function s(P,L){if(t[L]!==void 0)return t[L];const F=P.interleavedBuffers[L],k=o(P,F.buffer),R=lc(F.type,k),O=new um(R,F.stride);return O.uuid=F.uuid,t[L]=O,O}function o(P,L){if(i[L]!==void 0)return i[L];const F=P.arrayBuffers[L],k=new Uint32Array(F).buffer;return i[L]=k,k}const c=e.isInstancedBufferGeometry?new $T:new Bt,h=e.data.index;if(h!==void 0){const P=lc(h.type,h.array);c.setIndex(new xn(P,1))}const m=e.data.attributes;for(const P in m){const L=m[P];let z;if(L.isInterleavedBufferAttribute){const F=s(e.data,L.data);z=new el(F,L.itemSize,L.offset,L.normalized)}else{const F=lc(L.type,L.array),k=L.isInstancedBufferAttribute?kc:xn;z=new k(F,L.itemSize,L.normalized)}L.name!==void 0&&(z.name=L.name),L.usage!==void 0&&z.setUsage(L.usage),c.setAttribute(P,z)}const x=e.data.morphAttributes;if(x)for(const P in x){const L=x[P],z=[];for(let F=0,k=L.length;F<k;F++){const R=L[F];let O;if(R.isInterleavedBufferAttribute){const W=s(e.data,R.data);O=new el(W,R.itemSize,R.offset,R.normalized)}else{const W=lc(R.type,R.array);O=new xn(W,R.itemSize,R.normalized)}R.name!==void 0&&(O.name=R.name),z.push(O)}c.morphAttributes[P]=z}e.data.morphTargetsRelative&&(c.morphTargetsRelative=!0);const S=e.data.groups||e.data.drawcalls||e.data.offsets;if(S!==void 0)for(let P=0,L=S.length;P!==L;++P){const z=S[P];c.addGroup(z.start,z.count,z.materialIndex)}const M=e.data.boundingSphere;if(M!==void 0){const P=new le;M.center!==void 0&&P.fromArray(M.center),c.boundingSphere=new ki(P,M.radius)}return e.name&&(c.name=e.name),e.userData&&(c.userData=e.userData),c}}class vz extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=this,c=this.path===""?Tg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||c;const h=new Es(this.manager);h.setPath(this.path),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(m){let x=null;try{x=JSON.parse(m)}catch(S){s!==void 0&&s(S),console.error("THREE:ObjectLoader: Can't parse "+e+".",S.message);return}const b=x.metadata;if(b===void 0||b.type===void 0||b.type.toLowerCase()==="geometry"){s!==void 0&&s(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(x,t)},i,s)}async loadAsync(e,t){const i=this,s=this.path===""?Tg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Es(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const c=await o.loadAsync(e,t),h=JSON.parse(c),m=h.metadata;if(m===void 0||m.type===void 0||m.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(h)}parse(e,t){const i=this.parseAnimations(e.animations),s=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,s),c=this.parseImages(e.images,function(){t!==void 0&&t(x)}),h=this.parseTextures(e.textures,c),m=this.parseMaterials(e.materials,h),x=this.parseObject(e.object,o,m,h,i),b=this.parseSkeletons(e.skeletons,x);if(this.bindSkeletons(x,b),this.bindLightTargets(x),t!==void 0){let S=!1;for(const M in c)if(c[M].data instanceof HTMLImageElement){S=!0;break}S===!1&&t(x)}return x}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=await this.parseImagesAsync(e.images),c=this.parseTextures(e.textures,o),h=this.parseMaterials(e.materials,c),m=this.parseObject(e.object,s,h,c,t),x=this.parseSkeletons(e.skeletons,m);return this.bindSkeletons(m,x),this.bindLightTargets(m),m}parseShapes(e){const t={};if(e!==void 0)for(let i=0,s=e.length;i<s;i++){const o=new Xo().fromJSON(e[i]);t[o.uuid]=o}return t}parseSkeletons(e,t){const i={},s={};if(t.traverse(function(o){o.isBone&&(s[o.uuid]=o)}),e!==void 0)for(let o=0,c=e.length;o<c;o++){const h=new ed().fromJSON(e[o],s);i[h.uuid]=h}return i}parseGeometries(e,t){const i={};if(e!==void 0){const s=new QT;for(let o=0,c=e.length;o<c;o++){let h;const m=e[o];switch(m.type){case"BufferGeometry":case"InstancedBufferGeometry":h=s.parse(m);break;default:m.type in Q_?h=Q_[m.type].fromJSON(m,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${m.type}"`)}h.uuid=m.uuid,m.name!==void 0&&(h.name=m.name),m.userData!==void 0&&(h.userData=m.userData),i[m.uuid]=h}}return i}parseMaterials(e,t){const i={},s={};if(e!==void 0){const o=new Cm;o.setTextures(t);for(let c=0,h=e.length;c<h;c++){const m=e[c];i[m.uuid]===void 0&&(i[m.uuid]=o.parse(m)),s[m.uuid]=i[m.uuid]}}return s}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const s=e[i],o=Ic.parse(s);t[o.uuid]=o}return t}parseImages(e,t){const i=this,s={};let o;function c(m){return i.manager.itemStart(m),o.load(m,function(){i.manager.itemEnd(m)},void 0,function(){i.manager.itemError(m),i.manager.itemEnd(m)})}function h(m){if(typeof m=="string"){const x=m,b=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(x)?x:i.resourcePath+x;return c(b)}else return m.data?{data:lc(m.type,m.data),width:m.width,height:m.height}:null}if(e!==void 0&&e.length>0){const m=new Hb(t);o=new Vh(m),o.setCrossOrigin(this.crossOrigin);for(let x=0,b=e.length;x<b;x++){const S=e[x],M=S.url;if(Array.isArray(M)){const P=[];for(let L=0,z=M.length;L<z;L++){const F=M[L],k=h(F);k!==null&&(k instanceof HTMLImageElement?P.push(k):P.push(new As(k.data,k.width,k.height)))}s[S.uuid]=new Fo(P)}else{const P=h(S.url);s[S.uuid]=new Fo(P)}}}return s}async parseImagesAsync(e){const t=this,i={};let s;async function o(c){if(typeof c=="string"){const h=c,m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(h)?h:t.resourcePath+h;return await s.loadAsync(m)}else return c.data?{data:lc(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){s=new Vh(this.manager),s.setCrossOrigin(this.crossOrigin);for(let c=0,h=e.length;c<h;c++){const m=e[c],x=m.url;if(Array.isArray(x)){const b=[];for(let S=0,M=x.length;S<M;S++){const P=x[S],L=await o(P);L!==null&&(L instanceof HTMLImageElement?b.push(L):b.push(new As(L.data,L.width,L.height)))}i[m.uuid]=new Fo(b)}else{const b=await o(m.url);i[m.uuid]=new Fo(b)}}}return i}parseTextures(e,t){function i(o,c){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),c[o])}const s={};if(e!==void 0)for(let o=0,c=e.length;o<c;o++){const h=e[o];h.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',h.uuid),t[h.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",h.image);const m=t[h.image],x=m.data;let b;Array.isArray(x)?(b=new $h,x.length===6&&(b.needsUpdate=!0)):(x&&x.data?b=new As:b=new En,x&&(b.needsUpdate=!0)),b.source=m,b.uuid=h.uuid,h.name!==void 0&&(b.name=h.name),h.mapping!==void 0&&(b.mapping=i(h.mapping,xz)),h.channel!==void 0&&(b.channel=h.channel),h.offset!==void 0&&b.offset.fromArray(h.offset),h.repeat!==void 0&&b.repeat.fromArray(h.repeat),h.center!==void 0&&b.center.fromArray(h.center),h.rotation!==void 0&&(b.rotation=h.rotation),h.wrap!==void 0&&(b.wrapS=i(h.wrap[0],iM),b.wrapT=i(h.wrap[1],iM)),h.format!==void 0&&(b.format=h.format),h.internalFormat!==void 0&&(b.internalFormat=h.internalFormat),h.type!==void 0&&(b.type=h.type),h.colorSpace!==void 0&&(b.colorSpace=h.colorSpace),h.minFilter!==void 0&&(b.minFilter=i(h.minFilter,rM)),h.magFilter!==void 0&&(b.magFilter=i(h.magFilter,rM)),h.anisotropy!==void 0&&(b.anisotropy=h.anisotropy),h.flipY!==void 0&&(b.flipY=h.flipY),h.generateMipmaps!==void 0&&(b.generateMipmaps=h.generateMipmaps),h.premultiplyAlpha!==void 0&&(b.premultiplyAlpha=h.premultiplyAlpha),h.unpackAlignment!==void 0&&(b.unpackAlignment=h.unpackAlignment),h.compareFunction!==void 0&&(b.compareFunction=h.compareFunction),h.userData!==void 0&&(b.userData=h.userData),s[h.uuid]=b}return s}parseObject(e,t,i,s,o){let c;function h(M){return t[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",M),t[M]}function m(M){if(M!==void 0){if(Array.isArray(M)){const P=[];for(let L=0,z=M.length;L<z;L++){const F=M[L];i[F]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",F),P.push(i[F])}return P}return i[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",M),i[M]}}function x(M){return s[M]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",M),s[M]}let b,S;switch(e.type){case"Scene":c=new _g,e.background!==void 0&&(Number.isInteger(e.background)?c.background=new ot(e.background):c.background=x(e.background)),e.environment!==void 0&&(c.environment=x(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?c.fog=new cm(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(c.fog=new lm(e.fog.color,e.fog.density)),e.fog.name!==""&&(c.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(c.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(c.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&c.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(c.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&c.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":c=new Zn(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(c.focus=e.focus),e.zoom!==void 0&&(c.zoom=e.zoom),e.filmGauge!==void 0&&(c.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(c.filmOffset=e.filmOffset),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"OrthographicCamera":c=new Wc(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(c.zoom=e.zoom),e.view!==void 0&&(c.view=Object.assign({},e.view));break;case"AmbientLight":c=new Xb(e.color,e.intensity);break;case"DirectionalLight":c=new Gb(e.color,e.intensity),c.target=e.target||"";break;case"PointLight":c=new Eg(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":c=new ZT(e.color,e.intensity,e.width,e.height);break;case"SpotLight":c=new Wb(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),c.target=e.target||"";break;case"HemisphereLight":c=new qT(e.color,e.groundColor,e.intensity);break;case"LightProbe":c=new JT().fromJSON(e);break;case"SkinnedMesh":b=h(e.geometry),S=m(e.material),c=new Tb(b,S),e.bindMode!==void 0&&(c.bindMode=e.bindMode),e.bindMatrix!==void 0&&c.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(c.skeleton=e.skeleton);break;case"Mesh":b=h(e.geometry),S=m(e.material),c=new Gn(b,S);break;case"InstancedMesh":b=h(e.geometry),S=m(e.material);const M=e.count,P=e.instanceMatrix,L=e.instanceColor;c=new bT(b,S,M),c.instanceMatrix=new kc(new Float32Array(P.array),16),L!==void 0&&(c.instanceColor=new kc(new Float32Array(L.array),L.itemSize));break;case"BatchedMesh":b=h(e.geometry),S=m(e.material),c=new wT(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,S),c.geometry=b,c.perObjectFrustumCulled=e.perObjectFrustumCulled,c.sortObjects=e.sortObjects,c._drawRanges=e.drawRanges,c._reservedRanges=e.reservedRanges,c._visibility=e.visibility,c._active=e.active,c._bounds=e.bounds.map(z=>{const F=new Vi;F.min.fromArray(z.boxMin),F.max.fromArray(z.boxMax);const k=new ki;return k.radius=z.sphereRadius,k.center.fromArray(z.sphereCenter),{boxInitialized:z.boxInitialized,box:F,sphereInitialized:z.sphereInitialized,sphere:k}}),c._maxInstanceCount=e.maxInstanceCount,c._maxVertexCount=e.maxVertexCount,c._maxIndexCount=e.maxIndexCount,c._geometryInitialized=e.geometryInitialized,c._geometryCount=e.geometryCount,c._matricesTexture=x(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(c._colorsTexture=x(e.colorsTexture.uuid));break;case"LOD":c=new yT;break;case"Line":c=new sa(h(e.geometry),m(e.material));break;case"LineLoop":c=new ST(h(e.geometry),m(e.material));break;case"LineSegments":c=new Ts(h(e.geometry),m(e.material));break;case"PointCloud":case"Points":c=new _T(h(e.geometry),m(e.material));break;case"Sprite":c=new xT(m(e.material));break;case"Group":c=new Na;break;case"Bone":c=new Oh;break;default:c=new Qt}if(c.uuid=e.uuid,e.name!==void 0&&(c.name=e.name),e.matrix!==void 0?(c.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(c.matrixAutoUpdate=e.matrixAutoUpdate),c.matrixAutoUpdate&&c.matrix.decompose(c.position,c.quaternion,c.scale)):(e.position!==void 0&&c.position.fromArray(e.position),e.rotation!==void 0&&c.rotation.fromArray(e.rotation),e.quaternion!==void 0&&c.quaternion.fromArray(e.quaternion),e.scale!==void 0&&c.scale.fromArray(e.scale)),e.up!==void 0&&c.up.fromArray(e.up),e.castShadow!==void 0&&(c.castShadow=e.castShadow),e.receiveShadow!==void 0&&(c.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(c.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(c.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(c.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(c.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&c.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(c.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(c.visible=e.visible),e.frustumCulled!==void 0&&(c.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(c.renderOrder=e.renderOrder),e.userData!==void 0&&(c.userData=e.userData),e.layers!==void 0&&(c.layers.mask=e.layers),e.children!==void 0){const M=e.children;for(let P=0;P<M.length;P++)c.add(this.parseObject(M[P],t,i,s,o))}if(e.animations!==void 0){const M=e.animations;for(let P=0;P<M.length;P++){const L=M[P];c.animations.push(o[L])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(c.autoUpdate=e.autoUpdate);const M=e.levels;for(let P=0;P<M.length;P++){const L=M[P],z=c.getObjectByProperty("uuid",L.object);z!==void 0&&c.addLevel(z,L.distance,L.hysteresis)}}return c}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const s=t[i.skeleton];s===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(s,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,s=e.getObjectByProperty("uuid",i);s!==void 0?t.target=s:t.target=new Qt}})}}const xz={UVMapping:Kg,CubeReflectionMapping:ia,CubeRefractionMapping:ja,EquirectangularReflectionMapping:Cc,EquirectangularRefractionMapping:Eh,CubeUVReflectionMapping:Uc},iM={RepeatWrapping:Jo,ClampToEdgeWrapping:tr,MirroredRepeatWrapping:Th},rM={NearestFilter:oi,NearestMipmapNearestFilter:ob,NearestMipmapLinearFilter:oc,LinearFilter:Jn,LinearMipmapNearestFilter:$u,LinearMipmapLinearFilter:bs};class yz extends Xi{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,s){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,c=Zs.get(e);if(c!==void 0){if(o.manager.itemStart(e),c.then){c.then(x=>{t&&t(x),o.manager.itemEnd(e)}).catch(x=>{s&&s(x)});return}return setTimeout(function(){t&&t(c),o.manager.itemEnd(e)},0),c}const h={};h.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",h.headers=this.requestHeader;const m=fetch(e,h).then(function(x){return x.blob()}).then(function(x){return createImageBitmap(x,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(x){return Zs.add(e,x),t&&t(x),o.manager.itemEnd(e),x}).catch(function(x){s&&s(x),Zs.remove(e),o.manager.itemError(e),o.manager.itemEnd(e)});Zs.add(e,m),o.manager.itemStart(e)}}let Qf;class Yb{static getContext(){return Qf===void 0&&(Qf=new(window.AudioContext||window.webkitAudioContext)),Qf}static setContext(e){Qf=e}}class bz extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=this,c=new Es(this.manager);c.setResponseType("arraybuffer"),c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(m){try{const x=m.slice(0);Yb.getContext().decodeAudioData(x,function(S){t(S)}).catch(h)}catch(x){h(x)}},i,s);function h(m){s?s(m):console.error(m),o.manager.itemError(e)}}}const sM=new gt,aM=new gt,wo=new gt;class wz{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Zn,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Zn,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,wo.copy(e.projectionMatrix);const s=t.eyeSep/2,o=s*t.near/t.focus,c=t.near*Math.tan(Wo*t.fov*.5)/t.zoom;let h,m;aM.elements[12]=-s,sM.elements[12]=s,h=-c*t.aspect+o,m=c*t.aspect+o,wo.elements[0]=2*t.near/(m-h),wo.elements[8]=(m+h)/(m-h),this.cameraL.projectionMatrix.copy(wo),h=-c*t.aspect-o,m=c*t.aspect-o,wo.elements[0]=2*t.near/(m-h),wo.elements[8]=(m+h)/(m-h),this.cameraR.projectionMatrix.copy(wo)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(aM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(sM)}}class jb{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=oM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=oM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function oM(){return(typeof performance>"u"?Date:performance).now()}const So=new le,lM=new li,Sz=new le,_o=new le;class _z extends Qt{constructor(){super(),this.type="AudioListener",this.context=Yb.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new jb}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(So,lM,Sz),_o.set(0,0,-1).applyQuaternion(lM),t.positionX){const s=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(So.x,s),t.positionY.linearRampToValueAtTime(So.y,s),t.positionZ.linearRampToValueAtTime(So.z,s),t.forwardX.linearRampToValueAtTime(_o.x,s),t.forwardY.linearRampToValueAtTime(_o.y,s),t.forwardZ.linearRampToValueAtTime(_o.z,s),t.upX.linearRampToValueAtTime(i.x,s),t.upY.linearRampToValueAtTime(i.y,s),t.upZ.linearRampToValueAtTime(i.z,s)}else t.setPosition(So.x,So.y,So.z),t.setOrientation(_o.x,_o.y,_o.z,i.x,i.y,i.z)}}class e2 extends Qt{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Mo=new le,cM=new li,Mz=new le,Ao=new le;class Az extends e2{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Mo,cM,Mz),Ao.set(0,0,1).applyQuaternion(cM);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Mo.x,i),t.positionY.linearRampToValueAtTime(Mo.y,i),t.positionZ.linearRampToValueAtTime(Mo.z,i),t.orientationX.linearRampToValueAtTime(Ao.x,i),t.orientationY.linearRampToValueAtTime(Ao.y,i),t.orientationZ.linearRampToValueAtTime(Ao.z,i)}else t.setPosition(Mo.x,Mo.y,Mo.z),t.setOrientation(Ao.x,Ao.y,Ao.z)}}class Cz{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class t2{constructor(e,t,i){this.binding=e,this.valueSize=i;let s,o,c;switch(t){case"quaternion":s=this._slerp,o=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":s=this._select,o=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:s=this._lerp,o=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=s,this._mixBufferRegionAdditive=o,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,s=this.valueSize,o=e*s+s;let c=this.cumulativeWeight;if(c===0){for(let h=0;h!==s;++h)i[o+h]=i[h];c=t}else{c+=t;const h=t/c;this._mixBufferRegion(i,o,0,h,s)}this.cumulativeWeight=c}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,s=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,s,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,s=e*t+t,o=this.cumulativeWeight,c=this.cumulativeWeightAdditive,h=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const m=t*this._origIndex;this._mixBufferRegion(i,s,m,1-o,t)}c>0&&this._mixBufferRegionAdditive(i,s,this._addIndex*t,1,t);for(let m=t,x=t+t;m!==x;++m)if(i[m]!==i[m+t]){h.setValue(i,s);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,s=i*this._origIndex;e.getValue(t,s);for(let o=i,c=s;o!==c;++o)t[o]=t[s+o%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,s,o){if(s>=.5)for(let c=0;c!==o;++c)e[t+c]=e[i+c]}_slerp(e,t,i,s){li.slerpFlat(e,t,e,t,e,i,s)}_slerpAdditive(e,t,i,s,o){const c=this._workIndex*o;li.multiplyQuaternionsFlat(e,c,e,t,e,i),li.slerpFlat(e,t,e,t,e,c,s)}_lerp(e,t,i,s,o){const c=1-s;for(let h=0;h!==o;++h){const m=t+h;e[m]=e[m]*c+e[i+h]*s}}_lerpAdditive(e,t,i,s,o){for(let c=0;c!==o;++c){const h=t+c;e[h]=e[h]+e[i+c]*s}}}const qb="\\[\\]\\.:\\/",Ez=new RegExp("["+qb+"]","g"),Zb="[^"+qb+"]",Tz="[^"+qb.replace("\\.","")+"]",Pz=/((?:WC+[\/:])*)/.source.replace("WC",Zb),kz=/(WCOD+)?/.source.replace("WCOD",Tz),Rz=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Zb),Lz=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Zb),Iz=new RegExp("^"+Pz+kz+Rz+Lz+"$"),Dz=["material","materials","bones","map"];class Nz{constructor(e,t,i){const s=i||tn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,s)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,s=this._bindings[i];s!==void 0&&s.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let s=this._targetGroup.nCachedObjects_,o=i.length;s!==o;++s)i[s].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class tn{constructor(e,t,i){this.path=t,this.parsedPath=i||tn.parseTrackName(t),this.node=tn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new tn.Composite(e,t,i):new tn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Ez,"")}static parseTrackName(e){const t=Iz.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},s=i.nodeName&&i.nodeName.lastIndexOf(".");if(s!==void 0&&s!==-1){const o=i.nodeName.substring(s+1);Dz.indexOf(o)!==-1&&(i.nodeName=i.nodeName.substring(0,s),i.objectName=o)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(o){for(let c=0;c<o.length;c++){const h=o[c];if(h.name===t||h.uuid===t)return h;const m=i(h.children);if(m)return m}return null},s=i(e.children);if(s)return s}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)e[t++]=i[s]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let s=0,o=i.length;s!==o;++s)i[s]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,s=t.propertyName;let o=t.propertyIndex;if(e||(e=tn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let x=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let b=0;b<e.length;b++)if(e[b].name===x){x=b;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(x!==void 0){if(e[x]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[x]}}const c=e[s];if(c===void 0){const x=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+x+"."+s+" but it wasn't found.",e);return}let h=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?h=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(h=this.Versioning.MatrixWorldNeedsUpdate);let m=this.BindingType.Direct;if(o!==void 0){if(s==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}m=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=o}else c.fromArray!==void 0&&c.toArray!==void 0?(m=this.BindingType.HasFromToArray,this.resolvedProperty=c):Array.isArray(c)?(m=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=s;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][h]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}tn.Composite=Nz;tn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};tn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};tn.prototype.GetterByBindingType=[tn.prototype._getValue_direct,tn.prototype._getValue_array,tn.prototype._getValue_arrayElement,tn.prototype._getValue_toArray];tn.prototype.SetterByBindingTypeAndVersioning=[[tn.prototype._setValue_direct,tn.prototype._setValue_direct_setNeedsUpdate,tn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_array,tn.prototype._setValue_array_setNeedsUpdate,tn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_arrayElement,tn.prototype._setValue_arrayElement_setNeedsUpdate,tn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[tn.prototype._setValue_fromArray,tn.prototype._setValue_fromArray_setNeedsUpdate,tn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Fz{constructor(){this.isAnimationObjectGroup=!0,this.uuid=mr(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,s=arguments.length;i!==s;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,s=this._parsedPaths,o=this._bindings,c=o.length;let h,m=e.length,x=this.nCachedObjects_;for(let b=0,S=arguments.length;b!==S;++b){const M=arguments[b],P=M.uuid;let L=t[P];if(L===void 0){L=m++,t[P]=L,e.push(M);for(let z=0,F=c;z!==F;++z)o[z].push(new tn(M,i[z],s[z]))}else if(L<x){h=e[L];const z=--x,F=e[z];t[F.uuid]=L,e[L]=F,t[P]=z,e[z]=M;for(let k=0,R=c;k!==R;++k){const O=o[k],W=O[z];let Z=O[L];O[L]=W,Z===void 0&&(Z=new tn(M,i[k],s[k])),O[z]=Z}}else e[L]!==h&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=x}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const m=arguments[c],x=m.uuid,b=t[x];if(b!==void 0&&b>=o){const S=o++,M=e[S];t[M.uuid]=b,e[b]=M,t[x]=S,e[S]=m;for(let P=0,L=s;P!==L;++P){const z=i[P],F=z[S],k=z[b];z[b]=F,z[S]=k}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,s=i.length;let o=this.nCachedObjects_,c=e.length;for(let h=0,m=arguments.length;h!==m;++h){const x=arguments[h],b=x.uuid,S=t[b];if(S!==void 0)if(delete t[b],S<o){const M=--o,P=e[M],L=--c,z=e[L];t[P.uuid]=S,e[S]=P,t[z.uuid]=M,e[M]=z,e.pop();for(let F=0,k=s;F!==k;++F){const R=i[F],O=R[M],W=R[L];R[S]=O,R[M]=W,R.pop()}}else{const M=--c,P=e[M];M>0&&(t[P.uuid]=S),e[S]=P,e.pop();for(let L=0,z=s;L!==z;++L){const F=i[L];F[S]=F[M],F.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const i=this._bindingsIndicesByPath;let s=i[e];const o=this._bindings;if(s!==void 0)return o[s];const c=this._paths,h=this._parsedPaths,m=this._objects,x=m.length,b=this.nCachedObjects_,S=new Array(x);s=o.length,i[e]=s,c.push(e),h.push(t),o.push(S);for(let M=b,P=m.length;M!==P;++M){const L=m[M];S[M]=new tn(L,e,t)}return S}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const s=this._paths,o=this._parsedPaths,c=this._bindings,h=c.length-1,m=c[h],x=e[h];t[x]=i,c[i]=m,c.pop(),o[i]=o[h],o.pop(),s[i]=s[h],s.pop()}}}class n2{constructor(e,t,i=null,s=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=s;const o=t.tracks,c=o.length,h=new Array(c),m={endingStart:Do,endingEnd:Do};for(let x=0;x!==c;++x){const b=o[x].createInterpolant(null);h[x]=b,b.settings=m}this._interpolantSettings=m,this._interpolants=h,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=VE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const s=this._clip.duration,o=e._clip.duration,c=o/s,h=s/o;e.warp(1,c,t),this.warp(h,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const s=this._mixer,o=s.time,c=this.timeScale;let h=this._timeScaleInterpolant;h===null&&(h=s._lendControlInterpolant(),this._timeScaleInterpolant=h);const m=h.parameterPositions,x=h.sampleValues;return m[0]=o,m[1]=o+i,x[0]=e/c,x[1]=t/c,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,s){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const m=(e-o)*i;m<0||i===0?t=0:(this._startTime=null,t=i*m)}t*=this._updateTimeScale(e);const c=this._updateTime(t),h=this._updateWeight(e);if(h>0){const m=this._interpolants,x=this._propertyBindings;switch(this.blendMode){case vb:for(let b=0,S=m.length;b!==S;++b)m[b].evaluate(c),x[b].accumulateAdditive(h);break;case im:default:for(let b=0,S=m.length;b!==S;++b)m[b].evaluate(c),x[b].accumulate(s,h)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopFading(),s===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const s=i.evaluate(e)[0];t*=s,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let s=this.time+e,o=this._loopCount;const c=i===WE;if(e===0)return o===-1?s:c&&(o&1)===1?t-s:s;if(i===HE){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(s>=t)s=t;else if(s<0)s=0;else{this.time=s;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,c)):this._setEndings(this.repetitions===0,!0,c)),s>=t||s<0){const h=Math.floor(s/t);s-=t*h,o+=Math.abs(h);const m=this.repetitions-o;if(m<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,s=e>0?t:0,this.time=s,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(m===1){const x=e<0;this._setEndings(x,!x,c)}else this._setEndings(!1,!1,c);this._loopCount=o,this.time=s,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:h})}}else this.time=s;if(c&&(o&1)===1)return t-s}return s}_setEndings(e,t,i){const s=this._interpolantSettings;i?(s.endingStart=No,s.endingEnd=No):(e?s.endingStart=this.zeroSlopeAtStart?No:Do:s.endingStart=kh,t?s.endingEnd=this.zeroSlopeAtEnd?No:Do:s.endingEnd=kh)}_scheduleFading(e,t,i){const s=this._mixer,o=s.time;let c=this._weightInterpolant;c===null&&(c=s._lendControlInterpolant(),this._weightInterpolant=c);const h=c.parameterPositions,m=c.sampleValues;return h[0]=o,m[0]=t,h[1]=o+e,m[1]=i,this}}const Oz=new Float32Array(1);class i2 extends la{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,s=e._clip.tracks,o=s.length,c=e._propertyBindings,h=e._interpolants,m=i.uuid,x=this._bindingsByRootAndName;let b=x[m];b===void 0&&(b={},x[m]=b);for(let S=0;S!==o;++S){const M=s[S],P=M.name;let L=b[P];if(L!==void 0)++L.referenceCount,c[S]=L;else{if(L=c[S],L!==void 0){L._cacheIndex===null&&(++L.referenceCount,this._addInactiveBinding(L,m,P));continue}const z=t&&t._propertyBindings[S].binding.parsedPath;L=new t2(tn.create(i,P,z),M.ValueTypeName,M.getValueSize()),++L.referenceCount,this._addInactiveBinding(L,m,P),c[S]=L}h[S].resultBuffer=L.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,s=e._clip.uuid,o=this._actionsByClip[s];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,s,i)}const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const s=this._actions,o=this._actionsByClip;let c=o[t];if(c===void 0)c={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=c;else{const h=c.knownActions;e._byClipCacheIndex=h.length,h.push(e)}e._cacheIndex=s.length,s.push(e),c.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],s=e._cacheIndex;i._cacheIndex=s,t[s]=i,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,c=this._actionsByClip,h=c[o],m=h.knownActions,x=m[m.length-1],b=e._byClipCacheIndex;x._byClipCacheIndex=b,m[b]=x,m.pop(),e._byClipCacheIndex=null;const S=h.actionByRoot,M=(e._localRoot||this._root).uuid;delete S[M],m.length===0&&delete c[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,s=t.length;i!==s;++i){const o=t[i];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,s=this._nActiveActions++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,s=--this._nActiveActions,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_addInactiveBinding(e,t,i){const s=this._bindingsByRootAndName,o=this._bindings;let c=s[t];c===void 0&&(c={},s[t]=c),c[i]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,s=i.rootNode.uuid,o=i.path,c=this._bindingsByRootAndName,h=c[s],m=t[t.length-1],x=e._cacheIndex;m._cacheIndex=x,t[x]=m,t.pop(),delete h[o],Object.keys(h).length===0&&delete c[s]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,s=this._nActiveBindings++,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,s=--this._nActiveBindings,o=t[s];e._cacheIndex=s,t[s]=e,o._cacheIndex=i,t[i]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Ub(new Float32Array(2),new Float32Array(2),1,Oz),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,s=--this._nActiveControlInterpolants,o=t[s];e.__cacheIndex=s,t[s]=e,o.__cacheIndex=i,t[i]=o}clipAction(e,t,i){const s=t||this._root,o=s.uuid;let c=typeof e=="string"?Ic.findByName(s,e):e;const h=c!==null?c.uuid:e,m=this._actionsByClip[h];let x=null;if(i===void 0&&(c!==null?i=c.blendMode:i=im),m!==void 0){const S=m.actionByRoot[o];if(S!==void 0&&S.blendMode===i)return S;x=m.knownActions[0],c===null&&(c=x._clip)}if(c===null)return null;const b=new n2(this,c,t,i);return this._bindAction(b,x),this._addInactiveAction(b,h,o),b}existingAction(e,t){const i=t||this._root,s=i.uuid,o=typeof e=="string"?Ic.findByName(i,e):e,c=o?o.uuid:e,h=this._actionsByClip[c];return h!==void 0&&h.actionByRoot[s]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,s=this.time+=e,o=Math.sign(e),c=this._accuIndex^=1;for(let x=0;x!==i;++x)t[x]._update(s,e,o,c);const h=this._bindings,m=this._nActiveBindings;for(let x=0;x!==m;++x)h[x].apply(c);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,s=this._actionsByClip,o=s[i];if(o!==void 0){const c=o.knownActions;for(let h=0,m=c.length;h!==m;++h){const x=c[h];this._deactivateAction(x);const b=x._cacheIndex,S=t[t.length-1];x._cacheIndex=null,x._byClipCacheIndex=null,S._cacheIndex=b,t[b]=S,t.pop(),this._removeInactiveBindingsForAction(x)}delete s[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const c in i){const h=i[c].actionByRoot,m=h[t];m!==void 0&&(this._deactivateAction(m),this._removeInactiveAction(m))}const s=this._bindingsByRootAndName,o=s[t];if(o!==void 0)for(const c in o){const h=o[c];h.restoreOriginalState(),this._removeInactiveBinding(h)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Kb{constructor(e){this.value=e}clone(){return new Kb(this.value.clone===void 0?this.value:this.value.clone())}}let zz=0;class Uz extends la{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:zz++}),this.name="",this.usage=Dh,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,s=t.length;i<s;i++){const o=Array.isArray(t[i])?t[i]:[t[i]];for(let c=0;c<o.length;c++)this.uniforms.push(o[c].clone())}return this}clone(){return new this.constructor().copy(this)}}class Bz extends um{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Hz{constructor(e,t,i,s,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=s,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const uM=new gt;class r2{constructor(e,t,i=0,s=1/0){this.ray=new Hc(e,t),this.near=i,this.far=s,this.camera=null,this.layers=new Go,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return uM.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(uM),this}intersectObject(e,t=!0,i=[]){return ry(e,this,i,t),i.sort(hM),i}intersectObjects(e,t=!0,i=[]){for(let s=0,o=e.length;s<o;s++)ry(e[s],this,i,t);return i.sort(hM),i}}function hM(n,e){return n.distance-e.distance}function ry(n,e,t,i){let s=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(s=!1),s===!0&&i===!0){const o=n.children;for(let c=0,h=o.length;c<h;c++)ry(o[c],e,t,!0)}}class Vz{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Un(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Wz{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const dM=new We;class Gz{constructor(e=new We(1/0,1/0),t=new We(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=dM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,dM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const fM=new le,ep=new le;class Xz{constructor(e=new le,t=new le){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){fM.subVectors(e,this.start),ep.subVectors(this.end,this.start);const i=ep.dot(ep);let o=ep.dot(fM)/i;return t&&(o=Un(o,0,1)),o}closestPointToPoint(e,t,i){const s=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(s).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const pM=new le;class Yz extends Qt{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Bt,s=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let c=0,h=1,m=32;c<m;c++,h++){const x=c/m*Math.PI*2,b=h/m*Math.PI*2;s.push(Math.cos(x),Math.sin(x),1,Math.cos(b),Math.sin(b),1)}i.setAttribute("position",new yt(s,3));const o=new Li({fog:!1,toneMapped:!1});this.cone=new Ts(i,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),pM.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pM),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Aa=new le,tp=new gt,Fx=new gt;class jz extends Ts{constructor(e){const t=s2(e),i=new Bt,s=[],o=[],c=new ot(0,0,1),h=new ot(0,1,0);for(let x=0;x<t.length;x++){const b=t[x];b.parent&&b.parent.isBone&&(s.push(0,0,0),s.push(0,0,0),o.push(c.r,c.g,c.b),o.push(h.r,h.g,h.b))}i.setAttribute("position",new yt(s,3)),i.setAttribute("color",new yt(o,3));const m=new Li({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,m),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,s=i.getAttribute("position");Fx.copy(this.root.matrixWorld).invert();for(let o=0,c=0;o<t.length;o++){const h=t[o];h.parent&&h.parent.isBone&&(tp.multiplyMatrices(Fx,h.matrixWorld),Aa.setFromMatrixPosition(tp),s.setXYZ(c,Aa.x,Aa.y,Aa.z),tp.multiplyMatrices(Fx,h.parent.matrixWorld),Aa.setFromMatrixPosition(tp),s.setXYZ(c+1,Aa.x,Aa.y,Aa.z),c+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function s2(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,s2(n.children[t]));return e}class qz extends Gn{constructor(e,t,i){const s=new id(t,4,2),o=new $a({wireframe:!0,fog:!1,toneMapped:!1});super(s,o),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Zz=new le,gM=new ot,mM=new ot;class Kz extends Qt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const s=new nd(t);s.rotateY(Math.PI*.5),this.material=new $a({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=s.getAttribute("position"),c=new Float32Array(o.count*3);s.setAttribute("color",new xn(c,3)),this.add(new Gn(s,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");gM.copy(this.light.color),mM.copy(this.light.groundColor);for(let i=0,s=t.count;i<s;i++){const o=i<s/2?gM:mM;t.setXYZ(i,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Zz.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Jz extends Ts{constructor(e=10,t=10,i=4473924,s=8947848){i=new ot(i),s=new ot(s);const o=t/2,c=e/t,h=e/2,m=[],x=[];for(let M=0,P=0,L=-h;M<=t;M++,L+=c){m.push(-h,0,L,h,0,L),m.push(L,0,-h,L,0,h);const z=M===o?i:s;z.toArray(x,P),P+=3,z.toArray(x,P),P+=3,z.toArray(x,P),P+=3,z.toArray(x,P),P+=3}const b=new Bt;b.setAttribute("position",new yt(m,3)),b.setAttribute("color",new yt(x,3));const S=new Li({vertexColors:!0,toneMapped:!1});super(b,S),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class $z extends Ts{constructor(e=10,t=16,i=8,s=64,o=4473924,c=8947848){o=new ot(o),c=new ot(c);const h=[],m=[];if(t>1)for(let S=0;S<t;S++){const M=S/t*(Math.PI*2),P=Math.sin(M)*e,L=Math.cos(M)*e;h.push(0,0,0),h.push(P,0,L);const z=S&1?o:c;m.push(z.r,z.g,z.b),m.push(z.r,z.g,z.b)}for(let S=0;S<i;S++){const M=S&1?o:c,P=e-e/i*S;for(let L=0;L<s;L++){let z=L/s*(Math.PI*2),F=Math.sin(z)*P,k=Math.cos(z)*P;h.push(F,0,k),m.push(M.r,M.g,M.b),z=(L+1)/s*(Math.PI*2),F=Math.sin(z)*P,k=Math.cos(z)*P,h.push(F,0,k),m.push(M.r,M.g,M.b)}}const x=new Bt;x.setAttribute("position",new yt(h,3)),x.setAttribute("color",new yt(m,3));const b=new Li({vertexColors:!0,toneMapped:!1});super(x,b),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const vM=new le,np=new le,xM=new le;class Qz extends Qt{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let s=new Bt;s.setAttribute("position",new yt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Li({fog:!1,toneMapped:!1});this.lightPlane=new sa(s,o),this.add(this.lightPlane),s=new Bt,s.setAttribute("position",new yt([0,0,0,0,0,1],3)),this.targetLine=new sa(s,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),vM.setFromMatrixPosition(this.light.matrixWorld),np.setFromMatrixPosition(this.light.target.matrixWorld),xM.subVectors(np,vM),this.lightPlane.lookAt(np),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(np),this.targetLine.scale.z=xM.length()}}const ip=new le,On=new Jh;class eU extends Ts{constructor(e){const t=new Bt,i=new Li({color:16777215,vertexColors:!0,toneMapped:!1}),s=[],o=[],c={};h("n1","n2"),h("n2","n4"),h("n4","n3"),h("n3","n1"),h("f1","f2"),h("f2","f4"),h("f4","f3"),h("f3","f1"),h("n1","f1"),h("n2","f2"),h("n3","f3"),h("n4","f4"),h("p","n1"),h("p","n2"),h("p","n3"),h("p","n4"),h("u1","u2"),h("u2","u3"),h("u3","u1"),h("c","t"),h("p","c"),h("cn1","cn2"),h("cn3","cn4"),h("cf1","cf2"),h("cf3","cf4");function h(L,z){m(L),m(z)}function m(L){s.push(0,0,0),o.push(0,0,0),c[L]===void 0&&(c[L]=[]),c[L].push(s.length/3-1)}t.setAttribute("position",new yt(s,3)),t.setAttribute("color",new yt(o,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=c,this.update();const x=new ot(16755200),b=new ot(16711680),S=new ot(43775),M=new ot(16777215),P=new ot(3355443);this.setColors(x,b,S,M,P)}setColors(e,t,i,s,o){const h=this.geometry.getAttribute("color");h.setXYZ(0,e.r,e.g,e.b),h.setXYZ(1,e.r,e.g,e.b),h.setXYZ(2,e.r,e.g,e.b),h.setXYZ(3,e.r,e.g,e.b),h.setXYZ(4,e.r,e.g,e.b),h.setXYZ(5,e.r,e.g,e.b),h.setXYZ(6,e.r,e.g,e.b),h.setXYZ(7,e.r,e.g,e.b),h.setXYZ(8,e.r,e.g,e.b),h.setXYZ(9,e.r,e.g,e.b),h.setXYZ(10,e.r,e.g,e.b),h.setXYZ(11,e.r,e.g,e.b),h.setXYZ(12,e.r,e.g,e.b),h.setXYZ(13,e.r,e.g,e.b),h.setXYZ(14,e.r,e.g,e.b),h.setXYZ(15,e.r,e.g,e.b),h.setXYZ(16,e.r,e.g,e.b),h.setXYZ(17,e.r,e.g,e.b),h.setXYZ(18,e.r,e.g,e.b),h.setXYZ(19,e.r,e.g,e.b),h.setXYZ(20,e.r,e.g,e.b),h.setXYZ(21,e.r,e.g,e.b),h.setXYZ(22,e.r,e.g,e.b),h.setXYZ(23,e.r,e.g,e.b),h.setXYZ(24,t.r,t.g,t.b),h.setXYZ(25,t.r,t.g,t.b),h.setXYZ(26,t.r,t.g,t.b),h.setXYZ(27,t.r,t.g,t.b),h.setXYZ(28,t.r,t.g,t.b),h.setXYZ(29,t.r,t.g,t.b),h.setXYZ(30,t.r,t.g,t.b),h.setXYZ(31,t.r,t.g,t.b),h.setXYZ(32,i.r,i.g,i.b),h.setXYZ(33,i.r,i.g,i.b),h.setXYZ(34,i.r,i.g,i.b),h.setXYZ(35,i.r,i.g,i.b),h.setXYZ(36,i.r,i.g,i.b),h.setXYZ(37,i.r,i.g,i.b),h.setXYZ(38,s.r,s.g,s.b),h.setXYZ(39,s.r,s.g,s.b),h.setXYZ(40,o.r,o.g,o.b),h.setXYZ(41,o.r,o.g,o.b),h.setXYZ(42,o.r,o.g,o.b),h.setXYZ(43,o.r,o.g,o.b),h.setXYZ(44,o.r,o.g,o.b),h.setXYZ(45,o.r,o.g,o.b),h.setXYZ(46,o.r,o.g,o.b),h.setXYZ(47,o.r,o.g,o.b),h.setXYZ(48,o.r,o.g,o.b),h.setXYZ(49,o.r,o.g,o.b),h.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,s=1;On.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Hn("c",t,e,On,0,0,-1),Hn("t",t,e,On,0,0,1),Hn("n1",t,e,On,-i,-s,-1),Hn("n2",t,e,On,i,-s,-1),Hn("n3",t,e,On,-i,s,-1),Hn("n4",t,e,On,i,s,-1),Hn("f1",t,e,On,-i,-s,1),Hn("f2",t,e,On,i,-s,1),Hn("f3",t,e,On,-i,s,1),Hn("f4",t,e,On,i,s,1),Hn("u1",t,e,On,i*.7,s*1.1,-1),Hn("u2",t,e,On,-i*.7,s*1.1,-1),Hn("u3",t,e,On,0,s*2,-1),Hn("cf1",t,e,On,-i,0,1),Hn("cf2",t,e,On,i,0,1),Hn("cf3",t,e,On,0,-s,1),Hn("cf4",t,e,On,0,s,1),Hn("cn1",t,e,On,-i,0,-1),Hn("cn2",t,e,On,i,0,-1),Hn("cn3",t,e,On,0,-s,-1),Hn("cn4",t,e,On,0,s,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Hn(n,e,t,i,s,o,c){ip.set(s,o,c).unproject(i);const h=e[n];if(h!==void 0){const m=t.getAttribute("position");for(let x=0,b=h.length;x<b;x++)m.setXYZ(h[x],ip.x,ip.y,ip.z)}}const rp=new Vi;class tU extends Ts{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=new Float32Array(8*3),o=new Bt;o.setIndex(new xn(i,1)),o.setAttribute("position",new xn(s,3)),super(o,new Li({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&rp.setFromObject(this.object),rp.isEmpty())return;const t=rp.min,i=rp.max,s=this.geometry.attributes.position,o=s.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=t.x,o[4]=i.y,o[5]=i.z,o[6]=t.x,o[7]=t.y,o[8]=i.z,o[9]=i.x,o[10]=t.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=t.z,o[15]=t.x,o[16]=i.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=i.x,o[22]=t.y,o[23]=t.z,s.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class nU extends Ts{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),s=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Bt;o.setIndex(new xn(i,1)),o.setAttribute("position",new yt(s,3)),super(o,new Li({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class iU extends sa{constructor(e,t=1,i=16776960){const s=i,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],c=new Bt;c.setAttribute("position",new yt(o,3)),c.computeBoundingSphere(),super(c,new Li({color:s,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const h=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],m=new Bt;m.setAttribute("position",new yt(h,3)),m.computeBoundingSphere(),this.add(new Gn(m,new $a({color:s,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const yM=new le;let sp,Ox;class rU extends Qt{constructor(e=new le(0,0,1),t=new le(0,0,0),i=1,s=16776960,o=i*.2,c=o*.2){super(),this.type="ArrowHelper",sp===void 0&&(sp=new Bt,sp.setAttribute("position",new yt([0,0,0,0,1,0],3)),Ox=new Xc(0,.5,1,5,1),Ox.translate(0,-.5,0)),this.position.copy(t),this.line=new sa(sp,new Li({color:s,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Gn(Ox,new $a({color:s,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,o,c)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{yM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(yM,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class sU extends Ts{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],s=new Bt;s.setAttribute("position",new yt(t,3)),s.setAttribute("color",new yt(i,3));const o=new Li({vertexColors:!0,toneMapped:!1});super(s,o),this.type="AxesHelper"}setColors(e,t,i){const s=new ot,o=this.geometry.attributes.color.array;return s.set(e),s.toArray(o,0),s.toArray(o,3),s.set(t),s.toArray(o,6),s.toArray(o,9),s.set(i),s.toArray(o,12),s.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aU{constructor(){this.type="ShapePath",this.color=new ot,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new zh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,s){return this.currentPath.quadraticCurveTo(e,t,i,s),this}bezierCurveTo(e,t,i,s,o,c){return this.currentPath.bezierCurveTo(e,t,i,s,o,c),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(k){const R=[];for(let O=0,W=k.length;O<W;O++){const Z=k[O],J=new Xo;J.curves=Z.curves,R.push(J)}return R}function i(k,R){const O=R.length;let W=!1;for(let Z=O-1,J=0;J<O;Z=J++){let te=R[Z],re=R[J],ee=re.x-te.x,K=re.y-te.y;if(Math.abs(K)>Number.EPSILON){if(K<0&&(te=R[J],ee=-ee,re=R[Z],K=-K),k.y<te.y||k.y>re.y)continue;if(k.y===te.y){if(k.x===te.x)return!0}else{const se=K*(k.x-te.x)-ee*(k.y-te.y);if(se===0)return!0;if(se<0)continue;W=!W}}else{if(k.y!==te.y)continue;if(re.x<=k.x&&k.x<=te.x||te.x<=k.x&&k.x<=re.x)return!0}}return W}const s=Cs.isClockWise,o=this.subPaths;if(o.length===0)return[];let c,h,m;const x=[];if(o.length===1)return h=o[0],m=new Xo,m.curves=h.curves,x.push(m),x;let b=!s(o[0].getPoints());b=e?!b:b;const S=[],M=[];let P=[],L=0,z;M[L]=void 0,P[L]=[];for(let k=0,R=o.length;k<R;k++)h=o[k],z=h.getPoints(),c=s(z),c=e?!c:c,c?(!b&&M[L]&&L++,M[L]={s:new Xo,p:z},M[L].s.curves=h.curves,b&&L++,P[L]=[]):P[L].push({h,p:z[0]});if(!M[0])return t(o);if(M.length>1){let k=!1,R=0;for(let O=0,W=M.length;O<W;O++)S[O]=[];for(let O=0,W=M.length;O<W;O++){const Z=P[O];for(let J=0;J<Z.length;J++){const te=Z[J];let re=!0;for(let ee=0;ee<M.length;ee++)i(te.p,M[ee].p)&&(O!==ee&&R++,re?(re=!1,S[ee].push(te)):k=!0);re&&S[O].push(te)}}R>0&&k===!1&&(P=S)}let F;for(let k=0,R=M.length;k<R;k++){m=M[k].s,x.push(m),F=P[k];for(let O=0,W=F.length;O<W;O++)m.holes.push(F[O].h)}return x}}class oU extends ss{constructor(e=1,t=1,i=1,s={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...s,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:qg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=qg);const lU=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:ab,AddEquation:La,AddOperation:IE,AdditiveAnimationBlendMode:vb,AdditiveBlending:X0,AgXToneMapping:zE,AlphaFormat:hb,AlwaysCompare:QE,AlwaysDepth:CE,AlwaysStencilFunc:Z0,AmbientLight:Xb,AnimationAction:n2,AnimationClip:Ic,AnimationLoader:uz,AnimationMixer:i2,AnimationObjectGroup:Fz,AnimationUtils:az,ArcCurve:MT,ArrayCamera:gT,ArrowHelper:rU,AttachedBindMode:q0,Audio:e2,AudioAnalyser:Cz,AudioContext:Yb,AudioListener:_z,AudioLoader:bz,AxesHelper:sU,BackSide:Hi,BasicDepthPacking:GE,BasicShadowMap:aE,BatchedMesh:wT,Bone:Oh,BooleanKeyframeTrack:sl,Box2:Gz,Box3:Vi,Box3Helper:nU,BoxGeometry:rl,BoxHelper:tU,BufferAttribute:xn,BufferGeometry:Bt,BufferGeometryLoader:QT,ByteType:lb,Cache:Zs,Camera:Jh,CameraHelper:eU,CanvasTexture:kO,CapsuleGeometry:fm,CatmullRomCurve3:AT,CineonToneMapping:FE,CircleGeometry:pm,ClampToEdgeWrapping:tr,Clock:jb,Color:ot,ColorKeyframeTrack:Bb,ColorManagement:fn,CompressedArrayTexture:TO,CompressedCubeTexture:PO,CompressedTexture:hm,CompressedTextureLoader:hz,ConeGeometry:gm,ConstantAlphaFactor:_E,ConstantColorFactor:wE,CubeCamera:oT,CubeReflectionMapping:ia,CubeRefractionMapping:ja,CubeTexture:$h,CubeTextureLoader:dz,CubeUVReflectionMapping:Uc,CubicBezierCurve:Rb,CubicBezierCurve3:CT,CubicInterpolant:WT,CullFaceBack:G0,CullFaceFront:sE,CullFaceFrontBack:cL,CullFaceNone:rE,Curve:Ur,CurvePath:TT,CustomBlending:oE,CustomToneMapping:OE,CylinderGeometry:Xc,Cylindrical:Wz,Data3DTexture:wb,DataArrayTexture:sm,DataTexture:As,DataTextureLoader:fz,DataUtils:yI,DecrementStencilOp:wL,DecrementWrapStencilOp:_L,DefaultLoadingManager:YT,DepthFormat:Vo,DepthStencilFormat:Qo,DepthTexture:Mb,DetachedBindMode:BE,DirectionalLight:Gb,DirectionalLightHelper:Qz,DiscreteInterpolant:GT,DisplayP3ColorSpace:rm,DodecahedronGeometry:mm,DoubleSide:ys,DstAlphaFactor:mE,DstColorFactor:xE,DynamicCopyUsage:zL,DynamicDrawUsage:LL,DynamicReadUsage:NL,EdgesGeometry:PT,EllipseCurve:dm,EqualCompare:ZE,EqualDepth:TE,EqualStencilFunc:EL,EquirectangularReflectionMapping:Cc,EquirectangularRefractionMapping:Eh,Euler:ci,EventDispatcher:la,ExtrudeGeometry:xm,FileLoader:Es,Float16BufferAttribute:AI,Float32BufferAttribute:yt,FloatType:nr,Fog:cm,FogExp2:lm,FramebufferTexture:EO,FrontSide:na,Frustum:Qh,GLBufferAttribute:Hz,GLSL1:BL,GLSL3:K0,GreaterCompare:KE,GreaterDepth:kE,GreaterEqualCompare:$E,GreaterEqualDepth:PE,GreaterEqualStencilFunc:RL,GreaterStencilFunc:PL,GridHelper:Jz,Group:Na,HalfFloatType:Bc,HemisphereLight:qT,HemisphereLightHelper:Kz,IcosahedronGeometry:ym,ImageBitmapLoader:yz,ImageLoader:Vh,ImageUtils:nT,IncrementStencilOp:bL,IncrementWrapStencilOp:SL,InstancedBufferAttribute:kc,InstancedBufferGeometry:$T,InstancedInterleavedBuffer:Bz,InstancedMesh:bT,Int16BufferAttribute:_I,Int32BufferAttribute:MI,Int8BufferAttribute:bI,IntType:Jg,InterleavedBuffer:um,InterleavedBufferAttribute:el,Interpolant:rd,InterpolateDiscrete:Ph,InterpolateLinear:Sg,InterpolateSmooth:wp,InvertStencilOp:ML,KeepStencilOp:To,KeyframeTrack:os,LOD:yT,LatheGeometry:td,Layers:Go,LessCompare:qE,LessDepth:EE,LessEqualCompare:xb,LessEqualDepth:Ch,LessEqualStencilFunc:TL,LessStencilFunc:CL,Light:eo,LightProbe:JT,Line:sa,Line3:Xz,LineBasicMaterial:Li,LineCurve:Lb,LineCurve3:ET,LineDashedMaterial:BT,LineLoop:ST,LineSegments:Ts,LinearDisplayP3ColorSpace:Kh,LinearFilter:Jn,LinearInterpolant:Ub,LinearMipMapLinearFilter:fL,LinearMipMapNearestFilter:dL,LinearMipmapLinearFilter:bs,LinearMipmapNearestFilter:$u,LinearSRGBColorSpace:oa,LinearToneMapping:DE,LinearTransfer:Rh,Loader:Xi,LoaderUtils:Tg,LoadingManager:Hb,LoopOnce:HE,LoopPingPong:WE,LoopRepeat:VE,LuminanceAlphaFormat:pb,LuminanceFormat:fb,MOUSE:oL,Material:vi,MaterialLoader:Cm,MathUtils:es,Matrix3:Wt,Matrix4:gt,MaxEquation:hE,Mesh:Gn,MeshBasicMaterial:$a,MeshDepthMaterial:Ab,MeshDistanceMaterial:Cb,MeshLambertMaterial:Ob,MeshMatcapMaterial:UT,MeshNormalMaterial:zT,MeshPhongMaterial:oh,MeshPhysicalMaterial:FT,MeshStandardMaterial:Fb,MeshToonMaterial:OT,MinEquation:uE,MirroredRepeatWrapping:Th,MixOperation:LE,MultiplyBlending:j0,MultiplyOperation:qh,NearestFilter:oi,NearestMipMapLinearFilter:hL,NearestMipMapNearestFilter:uL,NearestMipmapLinearFilter:oc,NearestMipmapNearestFilter:ob,NeutralToneMapping:UE,NeverCompare:jE,NeverDepth:AE,NeverStencilFunc:AL,NoBlending:Js,NoColorSpace:Xs,NoToneMapping:Ms,NormalAnimationBlendMode:im,NormalBlending:Ho,NotEqualCompare:JE,NotEqualDepth:RE,NotEqualStencilFunc:kL,NumberKeyframeTrack:Rc,Object3D:Qt,ObjectLoader:vz,ObjectSpaceNormalMap:YE,OctahedronGeometry:nd,OneFactor:fE,OneMinusConstantAlphaFactor:ME,OneMinusConstantColorFactor:SE,OneMinusDstAlphaFactor:vE,OneMinusDstColorFactor:yE,OneMinusSrcAlphaFactor:Zp,OneMinusSrcColorFactor:gE,OrthographicCamera:Wc,P3Primaries:Ih,PCFShadowMap:Zg,PCFSoftShadowMap:Ju,PMREMGenerator:J0,Path:zh,PerspectiveCamera:Zn,Plane:Pa,PlaneGeometry:Vc,PlaneHelper:iU,PointLight:Eg,PointLightHelper:qz,Points:_T,PointsMaterial:Pb,PolarGridHelper:$z,PolyhedronGeometry:Qa,PositionalAudio:Az,PropertyBinding:tn,PropertyMixer:t2,QuadraticBezierCurve:Ib,QuadraticBezierCurve3:Db,Quaternion:li,QuaternionKeyframeTrack:Yc,QuaternionLinearInterpolant:XT,RED_GREEN_RGTC2_Format:bg,RED_RGTC1_Format:mb,REVISION:qg,RGBADepthPacking:XE,RGBAFormat:Pi,RGBAIntegerFormat:nm,RGBA_ASTC_10x10_Format:pg,RGBA_ASTC_10x5_Format:hg,RGBA_ASTC_10x6_Format:dg,RGBA_ASTC_10x8_Format:fg,RGBA_ASTC_12x10_Format:gg,RGBA_ASTC_12x12_Format:mg,RGBA_ASTC_4x4_Format:ig,RGBA_ASTC_5x4_Format:rg,RGBA_ASTC_5x5_Format:sg,RGBA_ASTC_6x5_Format:ag,RGBA_ASTC_6x6_Format:og,RGBA_ASTC_8x5_Format:lg,RGBA_ASTC_8x6_Format:cg,RGBA_ASTC_8x8_Format:ug,RGBA_BPTC_Format:ih,RGBA_ETC2_EAC_Format:ng,RGBA_PVRTC_2BPPV1_Format:Qp,RGBA_PVRTC_4BPPV1_Format:$p,RGBA_S3TC_DXT1_Format:eh,RGBA_S3TC_DXT3_Format:th,RGBA_S3TC_DXT5_Format:nh,RGBFormat:db,RGBIntegerFormat:pL,RGB_BPTC_SIGNED_Format:vg,RGB_BPTC_UNSIGNED_Format:xg,RGB_ETC1_Format:eg,RGB_ETC2_Format:tg,RGB_PVRTC_2BPPV1_Format:Jp,RGB_PVRTC_4BPPV1_Format:Kp,RGB_S3TC_DXT1_Format:Qu,RGFormat:gb,RGIntegerFormat:tm,RawShaderMaterial:NT,Ray:Hc,Raycaster:r2,Rec709Primaries:Lh,RectAreaLight:ZT,RedFormat:em,RedIntegerFormat:Zh,ReinhardToneMapping:NE,RenderTarget:iT,RepeatWrapping:Jo,ReplaceStencilOp:yL,ReverseSubtractEquation:cE,RingGeometry:bm,SIGNED_RED_GREEN_RGTC2_Format:wg,SIGNED_RED_RGTC1_Format:yg,SRGBColorSpace:Rr,SRGBTransfer:wn,Scene:_g,ShaderChunk:Yt,ShaderLib:Qr,ShaderMaterial:as,ShadowMaterial:DT,Shape:Xo,ShapeGeometry:wm,ShapePath:aU,ShapeUtils:Cs,ShortType:cb,Skeleton:ed,SkeletonHelper:jz,SkinnedMesh:Tb,Source:Fo,Sphere:ki,SphereGeometry:id,Spherical:Vz,SphericalHarmonics3:KT,SplineCurve:Nb,SpotLight:Wb,SpotLightHelper:Yz,Sprite:xT,SpriteMaterial:Eb,SrcAlphaFactor:qp,SrcAlphaSaturateFactor:bE,SrcColorFactor:pE,StaticCopyUsage:OL,StaticDrawUsage:Dh,StaticReadUsage:DL,StereoCamera:wz,StreamCopyUsage:UL,StreamDrawUsage:IL,StreamReadUsage:FL,StringKeyframeTrack:al,SubtractEquation:lE,SubtractiveBlending:Y0,TOUCH:lL,TangentSpaceNormalMap:Ja,TetrahedronGeometry:Sm,Texture:En,TextureLoader:jT,TextureUtils:aO,TorusGeometry:_m,TorusKnotGeometry:Mm,Triangle:fr,TriangleFanDrawMode:vL,TriangleStripDrawMode:mL,TrianglesDrawMode:gL,TubeGeometry:Am,UVMapping:Kg,Uint16BufferAttribute:am,Uint32BufferAttribute:Sb,Uint8BufferAttribute:wI,Uint8ClampedBufferAttribute:SI,Uniform:Kb,UniformsGroup:Uz,UniformsLib:ct,UniformsUtils:aT,UnsignedByteType:rs,UnsignedInt248Type:$o,UnsignedInt5999Type:ub,UnsignedIntType:ra,UnsignedShort4444Type:$g,UnsignedShort5551Type:Qg,UnsignedShortType:Ec,VSMShadowMap:Kr,Vector2:We,Vector3:le,Vector4:an,VectorKeyframeTrack:Lc,VideoTexture:CO,WebGL3DRenderTarget:cI,WebGLArrayRenderTarget:lI,WebGLCoordinateSystem:ws,WebGLCubeRenderTarget:lT,WebGLMultipleRenderTargets:oU,WebGLRenderTarget:ss,WebGLRenderer:mT,WebGLUtils:pT,WebGPUCoordinateSystem:Nh,WireframeGeometry:IT,WrapAroundEnding:kh,ZeroCurvatureEnding:Do,ZeroFactor:dE,ZeroSlopeEnding:No,ZeroStencilOp:xL,createCanvasElement:tT},Symbol.toStringTag,{value:"Module"}));var a2={exports:{}},ol={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ol.ConcurrentRoot=1;ol.ContinuousEventPriority=4;ol.DefaultEventPriority=16;ol.DiscreteEventPriority=1;ol.IdleEventPriority=536870912;ol.LegacyRoot=0;a2.exports=ol;var hc=a2.exports;function cU(n){let e;const t=new Set,i=(x,b)=>{const S=typeof x=="function"?x(e):x;if(S!==e){const M=e;e=b?S:Object.assign({},e,S),t.forEach(P=>P(e,M))}},s=()=>e,o=(x,b=s,S=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let M=b(e);function P(){const L=b(e);if(!S(M,L)){const z=M;x(M=L,z)}}return t.add(P),()=>t.delete(P)},m={setState:i,getState:s,subscribe:(x,b,S)=>b||S?o(x,b,S):(t.add(x),()=>t.delete(x)),destroy:()=>t.clear()};return e=n(i,s,m),m}const uU=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),bM=uU?dt.useEffect:dt.useLayoutEffect;function hU(n){const e=typeof n=="function"?cU(n):n,t=(i=e.getState,s=Object.is)=>{const[,o]=dt.useReducer(F=>F+1,0),c=e.getState(),h=dt.useRef(c),m=dt.useRef(i),x=dt.useRef(s),b=dt.useRef(!1),S=dt.useRef();S.current===void 0&&(S.current=i(c));let M,P=!1;(h.current!==c||m.current!==i||x.current!==s||b.current)&&(M=i(c),P=!s(S.current,M)),bM(()=>{P&&(S.current=M),h.current=c,m.current=i,x.current=s,b.current=!1});const L=dt.useRef(c);bM(()=>{const F=()=>{try{const R=e.getState(),O=m.current(R);x.current(S.current,O)||(h.current=R,S.current=O,o())}catch{b.current=!0,o()}},k=e.subscribe(F);return e.getState()!==L.current&&F(),k},[]);const z=P?M:S.current;return dt.useDebugValue(z),z};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const s=i.length<=0;return{value:i.shift(),done:s}}}},t}var o2={exports:{}},l2={exports:{}},c2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(ce,we){var be=ce.length;ce.push(we);e:for(;0<be;){var Ie=be-1>>>1,Ke=ce[Ie];if(0<s(Ke,we))ce[Ie]=we,ce[be]=Ke,be=Ie;else break e}}function t(ce){return ce.length===0?null:ce[0]}function i(ce){if(ce.length===0)return null;var we=ce[0],be=ce.pop();if(be!==we){ce[0]=be;e:for(var Ie=0,Ke=ce.length,rt=Ke>>>1;Ie<rt;){var Te=2*(Ie+1)-1,Ve=ce[Te],Je=Te+1,Ye=ce[Je];if(0>s(Ve,be))Je<Ke&&0>s(Ye,Ve)?(ce[Ie]=Ye,ce[Je]=be,Ie=Je):(ce[Ie]=Ve,ce[Te]=be,Ie=Te);else if(Je<Ke&&0>s(Ye,be))ce[Ie]=Ye,ce[Je]=be,Ie=Je;else break e}}return we}function s(ce,we){var be=ce.sortIndex-we.sortIndex;return be!==0?be:ce.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var m=[],x=[],b=1,S=null,M=3,P=!1,L=!1,z=!1,F=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(ce){for(var we=t(x);we!==null;){if(we.callback===null)i(x);else if(we.startTime<=ce)i(x),we.sortIndex=we.expirationTime,e(m,we);else break;we=t(x)}}function W(ce){if(z=!1,O(ce),!L)if(t(m)!==null)L=!0,Ae(Z);else{var we=t(x);we!==null&&ze(W,we.startTime-ce)}}function Z(ce,we){L=!1,z&&(z=!1,k(re),re=-1),P=!0;var be=M;try{for(O(we),S=t(m);S!==null&&(!(S.expirationTime>we)||ce&&!se());){var Ie=S.callback;if(typeof Ie=="function"){S.callback=null,M=S.priorityLevel;var Ke=Ie(S.expirationTime<=we);we=n.unstable_now(),typeof Ke=="function"?S.callback=Ke:S===t(m)&&i(m),O(we)}else i(m);S=t(m)}if(S!==null)var rt=!0;else{var Te=t(x);Te!==null&&ze(W,Te.startTime-we),rt=!1}return rt}finally{S=null,M=be,P=!1}}var J=!1,te=null,re=-1,ee=5,K=-1;function se(){return!(n.unstable_now()-K<ee)}function ge(){if(te!==null){var ce=n.unstable_now();K=ce;var we=!0;try{we=te(!0,ce)}finally{we?xe():(J=!1,te=null)}}else J=!1}var xe;if(typeof R=="function")xe=function(){R(ge)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,Le=Re.port2;Re.port1.onmessage=ge,xe=function(){Le.postMessage(null)}}else xe=function(){F(ge,0)};function Ae(ce){te=ce,J||(J=!0,xe())}function ze(ce,we){re=F(function(){ce(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(ce){ce.callback=null},n.unstable_continueExecution=function(){L||P||(L=!0,Ae(Z))},n.unstable_forceFrameRate=function(ce){0>ce||125<ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ee=0<ce?Math.floor(1e3/ce):5},n.unstable_getCurrentPriorityLevel=function(){return M},n.unstable_getFirstCallbackNode=function(){return t(m)},n.unstable_next=function(ce){switch(M){case 1:case 2:case 3:var we=3;break;default:we=M}var be=M;M=we;try{return ce()}finally{M=be}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(ce,we){switch(ce){case 1:case 2:case 3:case 4:case 5:break;default:ce=3}var be=M;M=ce;try{return we()}finally{M=be}},n.unstable_scheduleCallback=function(ce,we,be){var Ie=n.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?Ie+be:Ie):be=Ie,ce){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=be+Ke,ce={id:b++,callback:we,priorityLevel:ce,startTime:be,expirationTime:Ke,sortIndex:-1},be>Ie?(ce.sortIndex=be,e(x,ce),t(m)===null&&ce===t(x)&&(z?(k(re),re=-1):z=!0,ze(W,be-Ie))):(ce.sortIndex=Ke,e(m,ce),L||P||(L=!0,Ae(Z))),ce},n.unstable_shouldYield=se,n.unstable_wrapCallback=function(ce){var we=M;return function(){var be=M;M=we;try{return ce.apply(this,arguments)}finally{M=be}}}})(c2);l2.exports=c2;var sy=l2.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dU=function(e){var t={},i=dt,s=sy,o=Object.assign;function c(p){for(var g="https://reactjs.org/docs/error-decoder.html?invariant="+p,C=1;C<arguments.length;C++)g+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,m=Symbol.for("react.element"),x=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),P=Symbol.for("react.provider"),L=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),W=Symbol.for("react.offscreen"),Z=Symbol.iterator;function J(p){return p===null||typeof p!="object"?null:(p=Z&&p[Z]||p["@@iterator"],typeof p=="function"?p:null)}function te(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case b:return"Fragment";case x:return"Portal";case M:return"Profiler";case S:return"StrictMode";case F:return"Suspense";case k:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case L:return(p.displayName||"Context")+".Consumer";case P:return(p._context.displayName||"Context")+".Provider";case z:var g=p.render;return p=p.displayName,p||(p=g.displayName||g.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case R:return g=p.displayName||null,g!==null?g:te(p.type)||"Memo";case O:g=p._payload,p=p._init;try{return te(p(g))}catch{}}return null}function re(p){var g=p.type;switch(p.tag){case 24:return"Cache";case 9:return(g.displayName||"Context")+".Consumer";case 10:return(g._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=g.render,p=p.displayName||p.name||"",g.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return g;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(g);case 8:return g===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g}return null}function ee(p){var g=p,C=p;if(p.alternate)for(;g.return;)g=g.return;else{p=g;do g=p,g.flags&4098&&(C=g.return),p=g.return;while(p)}return g.tag===3?C:null}function K(p){if(ee(p)!==p)throw Error(c(188))}function se(p){var g=p.alternate;if(!g){if(g=ee(p),g===null)throw Error(c(188));return g!==p?null:p}for(var C=p,I=g;;){var B=C.return;if(B===null)break;var j=B.alternate;if(j===null){if(I=B.return,I!==null){C=I;continue}break}if(B.child===j.child){for(j=B.child;j;){if(j===C)return K(B),p;if(j===I)return K(B),g;j=j.sibling}throw Error(c(188))}if(C.return!==I.return)C=B,I=j;else{for(var ue=!1,pe=B.child;pe;){if(pe===C){ue=!0,C=B,I=j;break}if(pe===I){ue=!0,I=B,C=j;break}pe=pe.sibling}if(!ue){for(pe=j.child;pe;){if(pe===C){ue=!0,C=j,I=B;break}if(pe===I){ue=!0,I=j,C=B;break}pe=pe.sibling}if(!ue)throw Error(c(189))}}if(C.alternate!==I)throw Error(c(190))}if(C.tag!==3)throw Error(c(188));return C.stateNode.current===C?p:g}function ge(p){return p=se(p),p!==null?xe(p):null}function xe(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var g=xe(p);if(g!==null)return g;p=p.sibling}return null}function Re(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var g=Re(p);if(g!==null)return g}p=p.sibling}return null}var Le=Array.isArray,Ae=e.getPublicInstance,ze=e.getRootHostContext,ce=e.getChildHostContext,we=e.prepareForCommit,be=e.resetAfterCommit,Ie=e.createInstance,Ke=e.appendInitialChild,rt=e.finalizeInitialChildren,Te=e.prepareUpdate,Ve=e.shouldSetTextContent,Je=e.createTextInstance,Ye=e.scheduleTimeout,kt=e.cancelTimeout,Nt=e.noTimeout,Ct=e.isPrimaryRenderer,Ot=e.supportsMutation,oe=e.supportsPersistence,je=e.supportsHydration,Ze=e.getInstanceFromNode,lt=e.preparePortalMount,Be=e.getCurrentEventPriority,Tt=e.detachDeletedInstance,st=e.supportsMicrotasks,vt=e.scheduleMicrotask,he=e.supportsTestSelectors,ie=e.findFiberRoot,Pe=e.getBoundingRect,qe=e.getTextContent,Ge=e.isHiddenSubtree,Xe=e.matchAccessibilityRole,_t=e.setFocusIfFocusable,at=e.setupIntersectionObserver,pt=e.appendChild,zt=e.appendChildToContainer,Qe=e.commitTextUpdate,ht=e.commitMount,Jt=e.commitUpdate,Dt=e.insertBefore,xt=e.insertInContainerBefore,Ut=e.removeChild,Gt=e.removeChildFromContainer,pn=e.resetTextContent,me=e.hideInstance,et=e.hideTextInstance,Ue=e.unhideInstance,He=e.unhideTextInstance,nt=e.clearContainer,Lt=e.cloneInstance,$t=e.createContainerChildSet,bn=e.appendChildToContainerChildSet,Nn=e.finalizeContainerChildren,rn=e.replaceContainerChildren,Yi=e.cloneHiddenInstance,Ii=e.cloneHiddenTextInstance,ll=e.canHydrateInstance,Br=e.canHydrateTextInstance,to=e.canHydrateSuspenseInstance,no=e.isSuspenseInstancePending,ls=e.isSuspenseInstanceFallback,cs=e.registerSuspenseInstanceRetry,xi=e.getNextHydratableSibling,Hr=e.getFirstHydratableChild,cl=e.getFirstHydratableChildWithinContainer,io=e.getFirstHydratableChildWithinSuspenseInstance,jc=e.hydrateInstance,qc=e.hydrateTextInstance,Zc=e.hydrateSuspenseInstance,ae=e.getNextHydratableInstanceAfterSuspenseInstance,ve=e.commitHydratedContainer,Ee=e.commitHydratedSuspenseInstance,ke=e.clearSuspenseBoundary,Se=e.clearSuspenseBoundaryFromContainer,G=e.shouldDeleteUnhydratedTailInstances,r=e.didNotMatchHydratedContainerTextInstance,a=e.didNotMatchHydratedTextInstance,l;function u(p){if(l===void 0)try{throw Error()}catch(C){var g=C.stack.trim().match(/\n( *(at )?)/);l=g&&g[1]||""}return`
`+l+p}var d=!1;function f(p,g){if(!p||d)return"";d=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(g)if(g=function(){throw Error()},Object.defineProperty(g.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(g,[])}catch(tt){var I=tt}Reflect.construct(p,[],g)}else{try{g.call()}catch(tt){I=tt}p.call(g.prototype)}else{try{throw Error()}catch(tt){I=tt}p()}}catch(tt){if(tt&&I&&typeof tt.stack=="string"){for(var B=tt.stack.split(`
`),j=I.stack.split(`
`),ue=B.length-1,pe=j.length-1;1<=ue&&0<=pe&&B[ue]!==j[pe];)pe--;for(;1<=ue&&0<=pe;ue--,pe--)if(B[ue]!==j[pe]){if(ue!==1||pe!==1)do if(ue--,pe--,0>pe||B[ue]!==j[pe]){var Fe=`
`+B[ue].replace(" at new "," at ");return p.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",p.displayName)),Fe}while(1<=ue&&0<=pe);break}}}finally{d=!1,Error.prepareStackTrace=C}return(p=p?p.displayName||p.name:"")?u(p):""}var v=Object.prototype.hasOwnProperty,y=[],_=-1;function A(p){return{current:p}}function E(p){0>_||(p.current=y[_],y[_]=null,_--)}function T(p,g){_++,y[_]=p.current,p.current=g}var N={},U=A(N),H=A(!1),X=N;function Y(p,g){var C=p.type.contextTypes;if(!C)return N;var I=p.stateNode;if(I&&I.__reactInternalMemoizedUnmaskedChildContext===g)return I.__reactInternalMemoizedMaskedChildContext;var B={},j;for(j in C)B[j]=g[j];return I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=g,p.__reactInternalMemoizedMaskedChildContext=B),B}function q(p){return p=p.childContextTypes,p!=null}function w(){E(H),E(U)}function D(p,g,C){if(U.current!==N)throw Error(c(168));T(U,g),T(H,C)}function V(p,g,C){var I=p.stateNode;if(g=g.childContextTypes,typeof I.getChildContext!="function")return C;I=I.getChildContext();for(var B in I)if(!(B in g))throw Error(c(108,re(p)||"Unknown",B));return o({},C,I)}function $(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||N,X=U.current,T(U,p),T(H,H.current),!0}function Q(p,g,C){var I=p.stateNode;if(!I)throw Error(c(169));C?(p=V(p,g,X),I.__reactInternalMemoizedMergedChildContext=p,E(H),E(U),T(U,p)):E(H),T(H,C)}var ne=Math.clz32?Math.clz32:Me,fe=Math.log,de=Math.LN2;function Me(p){return p>>>=0,p===0?32:31-(fe(p)/de|0)|0}var Oe=64,_e=4194304;function Ne(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function it(p,g){var C=p.pendingLanes;if(C===0)return 0;var I=0,B=p.suspendedLanes,j=p.pingedLanes,ue=C&268435455;if(ue!==0){var pe=ue&~B;pe!==0?I=Ne(pe):(j&=ue,j!==0&&(I=Ne(j)))}else ue=C&~B,ue!==0?I=Ne(ue):j!==0&&(I=Ne(j));if(I===0)return 0;if(g!==0&&g!==I&&!(g&B)&&(B=I&-I,j=g&-g,B>=j||B===16&&(j&4194240)!==0))return g;if(I&4&&(I|=C&16),g=p.entangledLanes,g!==0)for(p=p.entanglements,g&=I;0<g;)C=31-ne(g),B=1<<C,I|=p[C],g&=~B;return I}function mt(p,g){switch(p){case 1:case 2:case 4:return g+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function St(p,g){for(var C=p.suspendedLanes,I=p.pingedLanes,B=p.expirationTimes,j=p.pendingLanes;0<j;){var ue=31-ne(j),pe=1<<ue,Fe=B[ue];Fe===-1?(!(pe&C)||pe&I)&&(B[ue]=mt(pe,g)):Fe<=g&&(p.expiredLanes|=pe),j&=~pe}}function Mt(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Ft(p){for(var g=[],C=0;31>C;C++)g.push(p);return g}function Rt(p,g,C){p.pendingLanes|=g,g!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,g=31-ne(g),p[g]=C}function jt(p,g){var C=p.pendingLanes&~g;p.pendingLanes=g,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=g,p.mutableReadLanes&=g,p.entangledLanes&=g,g=p.entanglements;var I=p.eventTimes;for(p=p.expirationTimes;0<C;){var B=31-ne(C),j=1<<B;g[B]=0,I[B]=-1,p[B]=-1,C&=~j}}function vn(p,g){var C=p.entangledLanes|=g;for(p=p.entanglements;C;){var I=31-ne(C),B=1<<I;B&g|p[I]&g&&(p[I]|=g),C&=~B}}var Pt=0;function gn(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var hi=s.unstable_scheduleCallback,on=s.unstable_cancelCallback,ln=s.unstable_shouldYield,dn=s.unstable_requestPaint,sn=s.unstable_now,Xn=s.unstable_ImmediatePriority,br=s.unstable_UserBlockingPriority,Ps=s.unstable_NormalPriority,di=s.unstable_IdlePriority,ji=null,wr=null;function eP(p){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(ji,p,void 0,(p.current.flags&128)===128)}catch{}}function tP(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var us=typeof Object.is=="function"?Object.is:tP,ks=null,ld=!1,Tm=!1;function iw(p){ks===null?ks=[p]:ks.push(p)}function nP(p){ld=!0,iw(p)}function hs(){if(!Tm&&ks!==null){Tm=!0;var p=0,g=Pt;try{var C=ks;for(Pt=1;p<C.length;p++){var I=C[p];do I=I(!0);while(I!==null)}ks=null,ld=!1}catch(B){throw ks!==null&&(ks=ks.slice(p+1)),hi(Xn,hs),B}finally{Pt=g,Tm=!1}}return null}var iP=h.ReactCurrentBatchConfig;function cd(p,g){if(us(p,g))return!0;if(typeof p!="object"||p===null||typeof g!="object"||g===null)return!1;var C=Object.keys(p),I=Object.keys(g);if(C.length!==I.length)return!1;for(I=0;I<C.length;I++){var B=C[I];if(!v.call(g,B)||!us(p[B],g[B]))return!1}return!0}function rP(p){switch(p.tag){case 5:return u(p.type);case 16:return u("Lazy");case 13:return u("Suspense");case 19:return u("SuspenseList");case 0:case 2:case 15:return p=f(p.type,!1),p;case 11:return p=f(p.type.render,!1),p;case 1:return p=f(p.type,!0),p;default:return""}}function Vr(p,g){if(p&&p.defaultProps){g=o({},g),p=p.defaultProps;for(var C in p)g[C]===void 0&&(g[C]=p[C]);return g}return g}var ud=A(null),hd=null,ul=null,Pm=null;function km(){Pm=ul=hd=null}function rw(p,g,C){Ct?(T(ud,g._currentValue),g._currentValue=C):(T(ud,g._currentValue2),g._currentValue2=C)}function Rm(p){var g=ud.current;E(ud),Ct?p._currentValue=g:p._currentValue2=g}function Lm(p,g,C){for(;p!==null;){var I=p.alternate;if((p.childLanes&g)!==g?(p.childLanes|=g,I!==null&&(I.childLanes|=g)):I!==null&&(I.childLanes&g)!==g&&(I.childLanes|=g),p===C)break;p=p.return}}function hl(p,g){hd=p,Pm=ul=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&g&&(lr=!0),p.firstContext=null)}function Sr(p){var g=Ct?p._currentValue:p._currentValue2;if(Pm!==p)if(p={context:p,memoizedValue:g,next:null},ul===null){if(hd===null)throw Error(c(308));ul=p,hd.dependencies={lanes:0,firstContext:p}}else ul=ul.next=p;return g}var ds=null,ca=!1;function Im(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function sw(p,g){p=p.updateQueue,g.updateQueue===p&&(g.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function Rs(p,g){return{eventTime:p,lane:g,tag:0,payload:null,callback:null,next:null}}function ua(p,g){var C=p.updateQueue;C!==null&&(C=C.shared,Yn!==null&&p.mode&1&&!(Zt&2)?(p=C.interleaved,p===null?(g.next=g,ds===null?ds=[C]:ds.push(C)):(g.next=p.next,p.next=g),C.interleaved=g):(p=C.pending,p===null?g.next=g:(g.next=p.next,p.next=g),C.pending=g))}function dd(p,g,C){if(g=g.updateQueue,g!==null&&(g=g.shared,(C&4194240)!==0)){var I=g.lanes;I&=p.pendingLanes,C|=I,g.lanes=C,vn(p,C)}}function aw(p,g){var C=p.updateQueue,I=p.alternate;if(I!==null&&(I=I.updateQueue,C===I)){var B=null,j=null;if(C=C.firstBaseUpdate,C!==null){do{var ue={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};j===null?B=j=ue:j=j.next=ue,C=C.next}while(C!==null);j===null?B=j=g:j=j.next=g}else B=j=g;C={baseState:I.baseState,firstBaseUpdate:B,lastBaseUpdate:j,shared:I.shared,effects:I.effects},p.updateQueue=C;return}p=C.lastBaseUpdate,p===null?C.firstBaseUpdate=g:p.next=g,C.lastBaseUpdate=g}function fd(p,g,C,I){var B=p.updateQueue;ca=!1;var j=B.firstBaseUpdate,ue=B.lastBaseUpdate,pe=B.shared.pending;if(pe!==null){B.shared.pending=null;var Fe=pe,tt=Fe.next;Fe.next=null,ue===null?j=tt:ue.next=tt,ue=Fe;var wt=p.alternate;wt!==null&&(wt=wt.updateQueue,pe=wt.lastBaseUpdate,pe!==ue&&(pe===null?wt.firstBaseUpdate=tt:pe.next=tt,wt.lastBaseUpdate=Fe))}if(j!==null){var Ht=B.baseState;ue=0,wt=tt=Fe=null,pe=j;do{var It=pe.lane,yn=pe.eventTime;if((I&It)===It){wt!==null&&(wt=wt.next={eventTime:yn,lane:0,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null});e:{var Et=p,Si=pe;switch(It=g,yn=C,Si.tag){case 1:if(Et=Si.payload,typeof Et=="function"){Ht=Et.call(yn,Ht,It);break e}Ht=Et;break e;case 3:Et.flags=Et.flags&-65537|128;case 0:if(Et=Si.payload,It=typeof Et=="function"?Et.call(yn,Ht,It):Et,It==null)break e;Ht=o({},Ht,It);break e;case 2:ca=!0}}pe.callback!==null&&pe.lane!==0&&(p.flags|=64,It=B.effects,It===null?B.effects=[pe]:It.push(pe))}else yn={eventTime:yn,lane:It,tag:pe.tag,payload:pe.payload,callback:pe.callback,next:null},wt===null?(tt=wt=yn,Fe=Ht):wt=wt.next=yn,ue|=It;if(pe=pe.next,pe===null){if(pe=B.shared.pending,pe===null)break;It=pe,pe=It.next,It.next=null,B.lastBaseUpdate=It,B.shared.pending=null}}while(!0);if(wt===null&&(Fe=Ht),B.baseState=Fe,B.firstBaseUpdate=tt,B.lastBaseUpdate=wt,g=B.shared.interleaved,g!==null){B=g;do ue|=B.lane,B=B.next;while(B!==g)}else j===null&&(B.shared.lanes=0);bl|=ue,p.lanes=ue,p.memoizedState=Ht}}function ow(p,g,C){if(p=g.effects,g.effects=null,p!==null)for(g=0;g<p.length;g++){var I=p[g],B=I.callback;if(B!==null){if(I.callback=null,I=C,typeof B!="function")throw Error(c(191,B));B.call(I)}}}var lw=new i.Component().refs;function Dm(p,g,C,I){g=p.memoizedState,C=C(I,g),C=C==null?g:o({},g,C),p.memoizedState=C,p.lanes===0&&(p.updateQueue.baseState=C)}var pd={isMounted:function(p){return(p=p._reactInternals)?ee(p)===p:!1},enqueueSetState:function(p,g,C){p=p._reactInternals;var I=Ni(),B=fa(p),j=Rs(I,B);j.payload=g,C!=null&&(j.callback=C),ua(p,j),g=Er(p,B,I),g!==null&&dd(g,p,B)},enqueueReplaceState:function(p,g,C){p=p._reactInternals;var I=Ni(),B=fa(p),j=Rs(I,B);j.tag=1,j.payload=g,C!=null&&(j.callback=C),ua(p,j),g=Er(p,B,I),g!==null&&dd(g,p,B)},enqueueForceUpdate:function(p,g){p=p._reactInternals;var C=Ni(),I=fa(p),B=Rs(C,I);B.tag=2,g!=null&&(B.callback=g),ua(p,B),g=Er(p,I,C),g!==null&&dd(g,p,I)}};function cw(p,g,C,I,B,j,ue){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(I,j,ue):g.prototype&&g.prototype.isPureReactComponent?!cd(C,I)||!cd(B,j):!0}function uw(p,g,C){var I=!1,B=N,j=g.contextType;return typeof j=="object"&&j!==null?j=Sr(j):(B=q(g)?X:U.current,I=g.contextTypes,j=(I=I!=null)?Y(p,B):N),g=new g(C,j),p.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=pd,p.stateNode=g,g._reactInternals=p,I&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=B,p.__reactInternalMemoizedMaskedChildContext=j),g}function hw(p,g,C,I){p=g.state,typeof g.componentWillReceiveProps=="function"&&g.componentWillReceiveProps(C,I),typeof g.UNSAFE_componentWillReceiveProps=="function"&&g.UNSAFE_componentWillReceiveProps(C,I),g.state!==p&&pd.enqueueReplaceState(g,g.state,null)}function Nm(p,g,C,I){var B=p.stateNode;B.props=C,B.state=p.memoizedState,B.refs=lw,Im(p);var j=g.contextType;typeof j=="object"&&j!==null?B.context=Sr(j):(j=q(g)?X:U.current,B.context=Y(p,j)),B.state=p.memoizedState,j=g.getDerivedStateFromProps,typeof j=="function"&&(Dm(p,g,j,C),B.state=p.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof B.getSnapshotBeforeUpdate=="function"||typeof B.UNSAFE_componentWillMount!="function"&&typeof B.componentWillMount!="function"||(g=B.state,typeof B.componentWillMount=="function"&&B.componentWillMount(),typeof B.UNSAFE_componentWillMount=="function"&&B.UNSAFE_componentWillMount(),g!==B.state&&pd.enqueueReplaceState(B,B.state,null),fd(p,C,B,I),B.state=p.memoizedState),typeof B.componentDidMount=="function"&&(p.flags|=4194308)}var dl=[],fl=0,gd=null,md=0,_r=[],Mr=0,ro=null,Ls=1,Is="";function so(p,g){dl[fl++]=md,dl[fl++]=gd,gd=p,md=g}function dw(p,g,C){_r[Mr++]=Ls,_r[Mr++]=Is,_r[Mr++]=ro,ro=p;var I=Ls;p=Is;var B=32-ne(I)-1;I&=~(1<<B),C+=1;var j=32-ne(g)+B;if(30<j){var ue=B-B%5;j=(I&(1<<ue)-1).toString(32),I>>=ue,B-=ue,Ls=1<<32-ne(g)+B|C<<B|I,Is=j+p}else Ls=1<<j|C<<B|I,Is=p}function Fm(p){p.return!==null&&(so(p,1),dw(p,1,0))}function Om(p){for(;p===gd;)gd=dl[--fl],dl[fl]=null,md=dl[--fl],dl[fl]=null;for(;p===ro;)ro=_r[--Mr],_r[Mr]=null,Is=_r[--Mr],_r[Mr]=null,Ls=_r[--Mr],_r[Mr]=null}var ar=null,or=null,Tn=!1,Kc=!1,Wr=null;function fw(p,g){var C=Tr(5,null,null,0);C.elementType="DELETED",C.stateNode=g,C.return=p,g=p.deletions,g===null?(p.deletions=[C],p.flags|=16):g.push(C)}function pw(p,g){switch(p.tag){case 5:return g=ll(g,p.type,p.pendingProps),g!==null?(p.stateNode=g,ar=p,or=Hr(g),!0):!1;case 6:return g=Br(g,p.pendingProps),g!==null?(p.stateNode=g,ar=p,or=null,!0):!1;case 13:if(g=to(g),g!==null){var C=ro!==null?{id:Ls,overflow:Is}:null;return p.memoizedState={dehydrated:g,treeContext:C,retryLane:1073741824},C=Tr(18,null,null,0),C.stateNode=g,C.return=p,p.child=C,ar=p,or=null,!0}return!1;default:return!1}}function zm(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Um(p){if(Tn){var g=or;if(g){var C=g;if(!pw(p,g)){if(zm(p))throw Error(c(418));g=xi(C);var I=ar;g&&pw(p,g)?fw(I,C):(p.flags=p.flags&-4097|2,Tn=!1,ar=p)}}else{if(zm(p))throw Error(c(418));p.flags=p.flags&-4097|2,Tn=!1,ar=p}}}function gw(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;ar=p}function Jc(p){if(!je||p!==ar)return!1;if(!Tn)return gw(p),Tn=!0,!1;if(p.tag!==3&&(p.tag!==5||G(p.type)&&!Ve(p.type,p.memoizedProps))){var g=or;if(g){if(zm(p)){for(p=or;p;)p=xi(p);throw Error(c(418))}for(;g;)fw(p,g),g=xi(g)}}if(gw(p),p.tag===13){if(!je)throw Error(c(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(c(317));or=ae(p)}else or=ar?xi(p.stateNode):null;return!0}function pl(){je&&(or=ar=null,Kc=Tn=!1)}function Bm(p){Wr===null?Wr=[p]:Wr.push(p)}function $c(p,g,C){if(p=C.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(c(309));var I=C.stateNode}if(!I)throw Error(c(147,p));var B=I,j=""+p;return g!==null&&g.ref!==null&&typeof g.ref=="function"&&g.ref._stringRef===j?g.ref:(g=function(ue){var pe=B.refs;pe===lw&&(pe=B.refs={}),ue===null?delete pe[j]:pe[j]=ue},g._stringRef=j,g)}if(typeof p!="string")throw Error(c(284));if(!C._owner)throw Error(c(290,p))}return p}function vd(p,g){throw p=Object.prototype.toString.call(g),Error(c(31,p==="[object Object]"?"object with keys {"+Object.keys(g).join(", ")+"}":p))}function mw(p){var g=p._init;return g(p._payload)}function vw(p){function g(Ce,ye){if(p){var De=Ce.deletions;De===null?(Ce.deletions=[ye],Ce.flags|=16):De.push(ye)}}function C(Ce,ye){if(!p)return null;for(;ye!==null;)g(Ce,ye),ye=ye.sibling;return null}function I(Ce,ye){for(Ce=new Map;ye!==null;)ye.key!==null?Ce.set(ye.key,ye):Ce.set(ye.index,ye),ye=ye.sibling;return Ce}function B(Ce,ye){return Ce=ga(Ce,ye),Ce.index=0,Ce.sibling=null,Ce}function j(Ce,ye,De){return Ce.index=De,p?(De=Ce.alternate,De!==null?(De=De.index,De<ye?(Ce.flags|=2,ye):De):(Ce.flags|=2,ye)):(Ce.flags|=1048576,ye)}function ue(Ce){return p&&Ce.alternate===null&&(Ce.flags|=2),Ce}function pe(Ce,ye,De,ft){return ye===null||ye.tag!==6?(ye=_v(De,Ce.mode,ft),ye.return=Ce,ye):(ye=B(ye,De),ye.return=Ce,ye)}function Fe(Ce,ye,De,ft){var At=De.type;return At===b?wt(Ce,ye,De.props.children,ft,De.key):ye!==null&&(ye.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===O&&mw(At)===ye.type)?(ft=B(ye,De.props),ft.ref=$c(Ce,ye,De),ft.return=Ce,ft):(ft=qd(De.type,De.key,De.props,null,Ce.mode,ft),ft.ref=$c(Ce,ye,De),ft.return=Ce,ft)}function tt(Ce,ye,De,ft){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==De.containerInfo||ye.stateNode.implementation!==De.implementation?(ye=Mv(De,Ce.mode,ft),ye.return=Ce,ye):(ye=B(ye,De.children||[]),ye.return=Ce,ye)}function wt(Ce,ye,De,ft,At){return ye===null||ye.tag!==7?(ye=fo(De,Ce.mode,ft,At),ye.return=Ce,ye):(ye=B(ye,De),ye.return=Ce,ye)}function Ht(Ce,ye,De){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=_v(""+ye,Ce.mode,De),ye.return=Ce,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case m:return De=qd(ye.type,ye.key,ye.props,null,Ce.mode,De),De.ref=$c(Ce,null,ye),De.return=Ce,De;case x:return ye=Mv(ye,Ce.mode,De),ye.return=Ce,ye;case O:var ft=ye._init;return Ht(Ce,ft(ye._payload),De)}if(Le(ye)||J(ye))return ye=fo(ye,Ce.mode,De,null),ye.return=Ce,ye;vd(Ce,ye)}return null}function It(Ce,ye,De,ft){var At=ye!==null?ye.key:null;if(typeof De=="string"&&De!==""||typeof De=="number")return At!==null?null:pe(Ce,ye,""+De,ft);if(typeof De=="object"&&De!==null){switch(De.$$typeof){case m:return De.key===At?Fe(Ce,ye,De,ft):null;case x:return De.key===At?tt(Ce,ye,De,ft):null;case O:return At=De._init,It(Ce,ye,At(De._payload),ft)}if(Le(De)||J(De))return At!==null?null:wt(Ce,ye,De,ft,null);vd(Ce,De)}return null}function yn(Ce,ye,De,ft,At){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return Ce=Ce.get(De)||null,pe(ye,Ce,""+ft,At);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case m:return Ce=Ce.get(ft.key===null?De:ft.key)||null,Fe(ye,Ce,ft,At);case x:return Ce=Ce.get(ft.key===null?De:ft.key)||null,tt(ye,Ce,ft,At);case O:var qt=ft._init;return yn(Ce,ye,De,qt(ft._payload),At)}if(Le(ft)||J(ft))return Ce=Ce.get(De)||null,wt(ye,Ce,ft,At,null);vd(ye,ft)}return null}function Et(Ce,ye,De,ft){for(var At=null,qt=null,Vt=ye,un=ye=0,ri=null;Vt!==null&&un<De.length;un++){Vt.index>un?(ri=Vt,Vt=null):ri=Vt.sibling;var hn=It(Ce,Vt,De[un],ft);if(hn===null){Vt===null&&(Vt=ri);break}p&&Vt&&hn.alternate===null&&g(Ce,Vt),ye=j(hn,ye,un),qt===null?At=hn:qt.sibling=hn,qt=hn,Vt=ri}if(un===De.length)return C(Ce,Vt),Tn&&so(Ce,un),At;if(Vt===null){for(;un<De.length;un++)Vt=Ht(Ce,De[un],ft),Vt!==null&&(ye=j(Vt,ye,un),qt===null?At=Vt:qt.sibling=Vt,qt=Vt);return Tn&&so(Ce,un),At}for(Vt=I(Ce,Vt);un<De.length;un++)ri=yn(Vt,Ce,un,De[un],ft),ri!==null&&(p&&ri.alternate!==null&&Vt.delete(ri.key===null?un:ri.key),ye=j(ri,ye,un),qt===null?At=ri:qt.sibling=ri,qt=ri);return p&&Vt.forEach(function(ma){return g(Ce,ma)}),Tn&&so(Ce,un),At}function Si(Ce,ye,De,ft){var At=J(De);if(typeof At!="function")throw Error(c(150));if(De=At.call(De),De==null)throw Error(c(151));for(var qt=At=null,Vt=ye,un=ye=0,ri=null,hn=De.next();Vt!==null&&!hn.done;un++,hn=De.next()){Vt.index>un?(ri=Vt,Vt=null):ri=Vt.sibling;var ma=It(Ce,Vt,hn.value,ft);if(ma===null){Vt===null&&(Vt=ri);break}p&&Vt&&ma.alternate===null&&g(Ce,Vt),ye=j(ma,ye,un),qt===null?At=ma:qt.sibling=ma,qt=ma,Vt=ri}if(hn.done)return C(Ce,Vt),Tn&&so(Ce,un),At;if(Vt===null){for(;!hn.done;un++,hn=De.next())hn=Ht(Ce,hn.value,ft),hn!==null&&(ye=j(hn,ye,un),qt===null?At=hn:qt.sibling=hn,qt=hn);return Tn&&so(Ce,un),At}for(Vt=I(Ce,Vt);!hn.done;un++,hn=De.next())hn=yn(Vt,Ce,un,hn.value,ft),hn!==null&&(p&&hn.alternate!==null&&Vt.delete(hn.key===null?un:hn.key),ye=j(hn,ye,un),qt===null?At=hn:qt.sibling=hn,qt=hn);return p&&Vt.forEach(function(DP){return g(Ce,DP)}),Tn&&so(Ce,un),At}function Pr(Ce,ye,De,ft){if(typeof De=="object"&&De!==null&&De.type===b&&De.key===null&&(De=De.props.children),typeof De=="object"&&De!==null){switch(De.$$typeof){case m:e:{for(var At=De.key,qt=ye;qt!==null;){if(qt.key===At){if(At=De.type,At===b){if(qt.tag===7){C(Ce,qt.sibling),ye=B(qt,De.props.children),ye.return=Ce,Ce=ye;break e}}else if(qt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===O&&mw(At)===qt.type){C(Ce,qt.sibling),ye=B(qt,De.props),ye.ref=$c(Ce,qt,De),ye.return=Ce,Ce=ye;break e}C(Ce,qt);break}else g(Ce,qt);qt=qt.sibling}De.type===b?(ye=fo(De.props.children,Ce.mode,ft,De.key),ye.return=Ce,Ce=ye):(ft=qd(De.type,De.key,De.props,null,Ce.mode,ft),ft.ref=$c(Ce,ye,De),ft.return=Ce,Ce=ft)}return ue(Ce);case x:e:{for(qt=De.key;ye!==null;){if(ye.key===qt)if(ye.tag===4&&ye.stateNode.containerInfo===De.containerInfo&&ye.stateNode.implementation===De.implementation){C(Ce,ye.sibling),ye=B(ye,De.children||[]),ye.return=Ce,Ce=ye;break e}else{C(Ce,ye);break}else g(Ce,ye);ye=ye.sibling}ye=Mv(De,Ce.mode,ft),ye.return=Ce,Ce=ye}return ue(Ce);case O:return qt=De._init,Pr(Ce,ye,qt(De._payload),ft)}if(Le(De))return Et(Ce,ye,De,ft);if(J(De))return Si(Ce,ye,De,ft);vd(Ce,De)}return typeof De=="string"&&De!==""||typeof De=="number"?(De=""+De,ye!==null&&ye.tag===6?(C(Ce,ye.sibling),ye=B(ye,De),ye.return=Ce,Ce=ye):(C(Ce,ye),ye=_v(De,Ce.mode,ft),ye.return=Ce,Ce=ye),ue(Ce)):C(Ce,ye)}return Pr}var gl=vw(!0),xw=vw(!1),Qc={},Ar=A(Qc),eu=A(Qc),ml=A(Qc);function fs(p){if(p===Qc)throw Error(c(174));return p}function Hm(p,g){T(ml,g),T(eu,p),T(Ar,Qc),p=ze(g),E(Ar),T(Ar,p)}function vl(){E(Ar),E(eu),E(ml)}function yw(p){var g=fs(ml.current),C=fs(Ar.current);g=ce(C,p.type,g),C!==g&&(T(eu,p),T(Ar,g))}function Vm(p){eu.current===p&&(E(Ar),E(eu))}var kn=A(0);function xd(p){for(var g=p;g!==null;){if(g.tag===13){var C=g.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||no(C)||ls(C)))return g}else if(g.tag===19&&g.memoizedProps.revealOrder!==void 0){if(g.flags&128)return g}else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return null;g=g.return}g.sibling.return=g.return,g=g.sibling}return null}var Wm=[];function Gm(){for(var p=0;p<Wm.length;p++){var g=Wm[p];Ct?g._workInProgressVersionPrimary=null:g._workInProgressVersionSecondary=null}Wm.length=0}var yd=h.ReactCurrentDispatcher,Cr=h.ReactCurrentBatchConfig,xl=0,Fn=null,yi=null,ii=null,bd=!1,tu=!1,nu=0,sP=0;function bi(){throw Error(c(321))}function Xm(p,g){if(g===null)return!1;for(var C=0;C<g.length&&C<p.length;C++)if(!us(p[C],g[C]))return!1;return!0}function Ym(p,g,C,I,B,j){if(xl=j,Fn=g,g.memoizedState=null,g.updateQueue=null,g.lanes=0,yd.current=p===null||p.memoizedState===null?cP:uP,p=C(I,B),tu){j=0;do{if(tu=!1,nu=0,25<=j)throw Error(c(301));j+=1,ii=yi=null,g.updateQueue=null,yd.current=hP,p=C(I,B)}while(tu)}if(yd.current=Ad,g=yi!==null&&yi.next!==null,xl=0,ii=yi=Fn=null,bd=!1,g)throw Error(c(300));return p}function jm(){var p=nu!==0;return nu=0,p}function Ds(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ii===null?Fn.memoizedState=ii=p:ii=ii.next=p,ii}function ps(){if(yi===null){var p=Fn.alternate;p=p!==null?p.memoizedState:null}else p=yi.next;var g=ii===null?Fn.memoizedState:ii.next;if(g!==null)ii=g,yi=p;else{if(p===null)throw Error(c(310));yi=p,p={memoizedState:yi.memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},ii===null?Fn.memoizedState=ii=p:ii=ii.next=p}return ii}function ao(p,g){return typeof g=="function"?g(p):g}function wd(p){var g=ps(),C=g.queue;if(C===null)throw Error(c(311));C.lastRenderedReducer=p;var I=yi,B=I.baseQueue,j=C.pending;if(j!==null){if(B!==null){var ue=B.next;B.next=j.next,j.next=ue}I.baseQueue=B=j,C.pending=null}if(B!==null){j=B.next,I=I.baseState;var pe=ue=null,Fe=null,tt=j;do{var wt=tt.lane;if((xl&wt)===wt)Fe!==null&&(Fe=Fe.next={lane:0,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null}),I=tt.hasEagerState?tt.eagerState:p(I,tt.action);else{var Ht={lane:wt,action:tt.action,hasEagerState:tt.hasEagerState,eagerState:tt.eagerState,next:null};Fe===null?(pe=Fe=Ht,ue=I):Fe=Fe.next=Ht,Fn.lanes|=wt,bl|=wt}tt=tt.next}while(tt!==null&&tt!==j);Fe===null?ue=I:Fe.next=pe,us(I,g.memoizedState)||(lr=!0),g.memoizedState=I,g.baseState=ue,g.baseQueue=Fe,C.lastRenderedState=I}if(p=C.interleaved,p!==null){B=p;do j=B.lane,Fn.lanes|=j,bl|=j,B=B.next;while(B!==p)}else B===null&&(C.lanes=0);return[g.memoizedState,C.dispatch]}function Sd(p){var g=ps(),C=g.queue;if(C===null)throw Error(c(311));C.lastRenderedReducer=p;var I=C.dispatch,B=C.pending,j=g.memoizedState;if(B!==null){C.pending=null;var ue=B=B.next;do j=p(j,ue.action),ue=ue.next;while(ue!==B);us(j,g.memoizedState)||(lr=!0),g.memoizedState=j,g.baseQueue===null&&(g.baseState=j),C.lastRenderedState=j}return[j,I]}function bw(){}function ww(p,g){var C=Fn,I=ps(),B=g(),j=!us(I.memoizedState,B);if(j&&(I.memoizedState=B,lr=!0),I=I.queue,ru(Mw.bind(null,C,I,p),[p]),I.getSnapshot!==g||j||ii!==null&&ii.memoizedState.tag&1){if(C.flags|=2048,iu(9,_w.bind(null,C,I,B,g),void 0,null),Yn===null)throw Error(c(349));xl&30||Sw(C,g,B)}return B}function Sw(p,g,C){p.flags|=16384,p={getSnapshot:g,value:C},g=Fn.updateQueue,g===null?(g={lastEffect:null,stores:null},Fn.updateQueue=g,g.stores=[p]):(C=g.stores,C===null?g.stores=[p]:C.push(p))}function _w(p,g,C,I){g.value=C,g.getSnapshot=I,Aw(g)&&Er(p,1,-1)}function Mw(p,g,C){return C(function(){Aw(g)&&Er(p,1,-1)})}function Aw(p){var g=p.getSnapshot;p=p.value;try{var C=g();return!us(p,C)}catch{return!0}}function qm(p){var g=Ds();return typeof p=="function"&&(p=p()),g.memoizedState=g.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:p},g.queue=p,p=p.dispatch=lP.bind(null,Fn,p),[g.memoizedState,p]}function iu(p,g,C,I){return p={tag:p,create:g,destroy:C,deps:I,next:null},g=Fn.updateQueue,g===null?(g={lastEffect:null,stores:null},Fn.updateQueue=g,g.lastEffect=p.next=p):(C=g.lastEffect,C===null?g.lastEffect=p.next=p:(I=C.next,C.next=p,p.next=I,g.lastEffect=p)),p}function Cw(){return ps().memoizedState}function _d(p,g,C,I){var B=Ds();Fn.flags|=p,B.memoizedState=iu(1|g,C,void 0,I===void 0?null:I)}function Md(p,g,C,I){var B=ps();I=I===void 0?null:I;var j=void 0;if(yi!==null){var ue=yi.memoizedState;if(j=ue.destroy,I!==null&&Xm(I,ue.deps)){B.memoizedState=iu(g,C,j,I);return}}Fn.flags|=p,B.memoizedState=iu(1|g,C,j,I)}function Zm(p,g){return _d(8390656,8,p,g)}function ru(p,g){return Md(2048,8,p,g)}function Ew(p,g){return Md(4,2,p,g)}function Tw(p,g){return Md(4,4,p,g)}function Pw(p,g){if(typeof g=="function")return p=p(),g(p),function(){g(null)};if(g!=null)return p=p(),g.current=p,function(){g.current=null}}function kw(p,g,C){return C=C!=null?C.concat([p]):null,Md(4,4,Pw.bind(null,g,p),C)}function Km(){}function Rw(p,g){var C=ps();g=g===void 0?null:g;var I=C.memoizedState;return I!==null&&g!==null&&Xm(g,I[1])?I[0]:(C.memoizedState=[p,g],p)}function Lw(p,g){var C=ps();g=g===void 0?null:g;var I=C.memoizedState;return I!==null&&g!==null&&Xm(g,I[1])?I[0]:(p=p(),C.memoizedState=[p,g],p)}function aP(p,g){var C=Pt;Pt=C!==0&&4>C?C:4,p(!0);var I=Cr.transition;Cr.transition={};try{p(!1),g()}finally{Pt=C,Cr.transition=I}}function Iw(){return ps().memoizedState}function oP(p,g,C){var I=fa(p);C={lane:I,action:C,hasEagerState:!1,eagerState:null,next:null},Dw(p)?Nw(g,C):(Fw(p,g,C),C=Ni(),p=Er(p,I,C),p!==null&&Ow(p,g,I))}function lP(p,g,C){var I=fa(p),B={lane:I,action:C,hasEagerState:!1,eagerState:null,next:null};if(Dw(p))Nw(g,B);else{Fw(p,g,B);var j=p.alternate;if(p.lanes===0&&(j===null||j.lanes===0)&&(j=g.lastRenderedReducer,j!==null))try{var ue=g.lastRenderedState,pe=j(ue,C);if(B.hasEagerState=!0,B.eagerState=pe,us(pe,ue))return}catch{}finally{}C=Ni(),p=Er(p,I,C),p!==null&&Ow(p,g,I)}}function Dw(p){var g=p.alternate;return p===Fn||g!==null&&g===Fn}function Nw(p,g){tu=bd=!0;var C=p.pending;C===null?g.next=g:(g.next=C.next,C.next=g),p.pending=g}function Fw(p,g,C){Yn!==null&&p.mode&1&&!(Zt&2)?(p=g.interleaved,p===null?(C.next=C,ds===null?ds=[g]:ds.push(g)):(C.next=p.next,p.next=C),g.interleaved=C):(p=g.pending,p===null?C.next=C:(C.next=p.next,p.next=C),g.pending=C)}function Ow(p,g,C){if(C&4194240){var I=g.lanes;I&=p.pendingLanes,C|=I,g.lanes=C,vn(p,C)}}var Ad={readContext:Sr,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},cP={readContext:Sr,useCallback:function(p,g){return Ds().memoizedState=[p,g===void 0?null:g],p},useContext:Sr,useEffect:Zm,useImperativeHandle:function(p,g,C){return C=C!=null?C.concat([p]):null,_d(4194308,4,Pw.bind(null,g,p),C)},useLayoutEffect:function(p,g){return _d(4194308,4,p,g)},useInsertionEffect:function(p,g){return _d(4,2,p,g)},useMemo:function(p,g){var C=Ds();return g=g===void 0?null:g,p=p(),C.memoizedState=[p,g],p},useReducer:function(p,g,C){var I=Ds();return g=C!==void 0?C(g):g,I.memoizedState=I.baseState=g,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:g},I.queue=p,p=p.dispatch=oP.bind(null,Fn,p),[I.memoizedState,p]},useRef:function(p){var g=Ds();return p={current:p},g.memoizedState=p},useState:qm,useDebugValue:Km,useDeferredValue:function(p){var g=qm(p),C=g[0],I=g[1];return Zm(function(){var B=Cr.transition;Cr.transition={};try{I(p)}finally{Cr.transition=B}},[p]),C},useTransition:function(){var p=qm(!1),g=p[0];return p=aP.bind(null,p[1]),Ds().memoizedState=p,[g,p]},useMutableSource:function(){},useSyncExternalStore:function(p,g,C){var I=Fn,B=Ds();if(Tn){if(C===void 0)throw Error(c(407));C=C()}else{if(C=g(),Yn===null)throw Error(c(349));xl&30||Sw(I,g,C)}B.memoizedState=C;var j={value:C,getSnapshot:g};return B.queue=j,Zm(Mw.bind(null,I,j,p),[p]),I.flags|=2048,iu(9,_w.bind(null,I,j,C,g),void 0,null),C},useId:function(){var p=Ds(),g=Yn.identifierPrefix;if(Tn){var C=Is,I=Ls;C=(I&~(1<<32-ne(I)-1)).toString(32)+C,g=":"+g+"R"+C,C=nu++,0<C&&(g+="H"+C.toString(32)),g+=":"}else C=sP++,g=":"+g+"r"+C.toString(32)+":";return p.memoizedState=g},unstable_isNewReconciler:!1},uP={readContext:Sr,useCallback:Rw,useContext:Sr,useEffect:ru,useImperativeHandle:kw,useInsertionEffect:Ew,useLayoutEffect:Tw,useMemo:Lw,useReducer:wd,useRef:Cw,useState:function(){return wd(ao)},useDebugValue:Km,useDeferredValue:function(p){var g=wd(ao),C=g[0],I=g[1];return ru(function(){var B=Cr.transition;Cr.transition={};try{I(p)}finally{Cr.transition=B}},[p]),C},useTransition:function(){var p=wd(ao)[0],g=ps().memoizedState;return[p,g]},useMutableSource:bw,useSyncExternalStore:ww,useId:Iw,unstable_isNewReconciler:!1},hP={readContext:Sr,useCallback:Rw,useContext:Sr,useEffect:ru,useImperativeHandle:kw,useInsertionEffect:Ew,useLayoutEffect:Tw,useMemo:Lw,useReducer:Sd,useRef:Cw,useState:function(){return Sd(ao)},useDebugValue:Km,useDeferredValue:function(p){var g=Sd(ao),C=g[0],I=g[1];return ru(function(){var B=Cr.transition;Cr.transition={};try{I(p)}finally{Cr.transition=B}},[p]),C},useTransition:function(){var p=Sd(ao)[0],g=ps().memoizedState;return[p,g]},useMutableSource:bw,useSyncExternalStore:ww,useId:Iw,unstable_isNewReconciler:!1};function Jm(p,g){try{var C="",I=g;do C+=rP(I),I=I.return;while(I);var B=C}catch(j){B=`
Error generating stack: `+j.message+`
`+j.stack}return{value:p,source:g,stack:B}}function $m(p,g){try{console.error(g.value)}catch(C){setTimeout(function(){throw C})}}var dP=typeof WeakMap=="function"?WeakMap:Map;function zw(p,g,C){C=Rs(-1,C),C.tag=3,C.payload={element:null};var I=g.value;return C.callback=function(){Hd||(Hd=!0,mv=I),$m(p,g)},C}function Uw(p,g,C){C=Rs(-1,C),C.tag=3;var I=p.type.getDerivedStateFromError;if(typeof I=="function"){var B=g.value;C.payload=function(){return I(B)},C.callback=function(){$m(p,g)}}var j=p.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(C.callback=function(){$m(p,g),typeof I!="function"&&(ha===null?ha=new Set([this]):ha.add(this));var ue=g.stack;this.componentDidCatch(g.value,{componentStack:ue!==null?ue:""})}),C}function Bw(p,g,C){var I=p.pingCache;if(I===null){I=p.pingCache=new dP;var B=new Set;I.set(g,B)}else B=I.get(g),B===void 0&&(B=new Set,I.set(g,B));B.has(C)||(B.add(C),p=CP.bind(null,p,g,C),g.then(p,p))}function Hw(p){do{var g;if((g=p.tag===13)&&(g=p.memoizedState,g=g!==null?g.dehydrated!==null:!0),g)return p;p=p.return}while(p!==null);return null}function Vw(p,g,C,I,B){return p.mode&1?(p.flags|=65536,p.lanes=B,p):(p===g?p.flags|=65536:(p.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(g=Rs(-1,1),g.tag=2,ua(C,g))),C.lanes|=1),p)}function gs(p){p.flags|=4}function Ww(p,g){if(p!==null&&p.child===g.child)return!0;if(g.flags&16)return!1;for(p=g.child;p!==null;){if(p.flags&12854||p.subtreeFlags&12854)return!1;p=p.sibling}return!0}var su,au,Cd,Ed;if(Ot)su=function(p,g){for(var C=g.child;C!==null;){if(C.tag===5||C.tag===6)Ke(p,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===g)break;for(;C.sibling===null;){if(C.return===null||C.return===g)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},au=function(){},Cd=function(p,g,C,I,B){if(p=p.memoizedProps,p!==I){var j=g.stateNode,ue=fs(Ar.current);C=Te(j,C,p,I,B,ue),(g.updateQueue=C)&&gs(g)}},Ed=function(p,g,C,I){C!==I&&gs(g)};else if(oe){su=function(p,g,C,I){for(var B=g.child;B!==null;){if(B.tag===5){var j=B.stateNode;C&&I&&(j=Yi(j,B.type,B.memoizedProps,B)),Ke(p,j)}else if(B.tag===6)j=B.stateNode,C&&I&&(j=Ii(j,B.memoizedProps,B)),Ke(p,j);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)j=B.child,j!==null&&(j.return=B),su(p,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};var Gw=function(p,g,C,I){for(var B=g.child;B!==null;){if(B.tag===5){var j=B.stateNode;C&&I&&(j=Yi(j,B.type,B.memoizedProps,B)),bn(p,j)}else if(B.tag===6)j=B.stateNode,C&&I&&(j=Ii(j,B.memoizedProps,B)),bn(p,j);else if(B.tag!==4){if(B.tag===22&&B.memoizedState!==null)j=B.child,j!==null&&(j.return=B),Gw(p,B,!0,!0);else if(B.child!==null){B.child.return=B,B=B.child;continue}}if(B===g)break;for(;B.sibling===null;){if(B.return===null||B.return===g)return;B=B.return}B.sibling.return=B.return,B=B.sibling}};au=function(p,g){var C=g.stateNode;if(!Ww(p,g)){p=C.containerInfo;var I=$t(p);Gw(I,g,!1,!1),C.pendingChildren=I,gs(g),Nn(p,I)}},Cd=function(p,g,C,I,B){var j=p.stateNode,ue=p.memoizedProps;if((p=Ww(p,g))&&ue===I)g.stateNode=j;else{var pe=g.stateNode,Fe=fs(Ar.current),tt=null;ue!==I&&(tt=Te(pe,C,ue,I,B,Fe)),p&&tt===null?g.stateNode=j:(j=Lt(j,tt,C,ue,I,g,p,pe),rt(j,C,I,B,Fe)&&gs(g),g.stateNode=j,p?gs(g):su(j,g,!1,!1))}},Ed=function(p,g,C,I){C!==I?(p=fs(ml.current),C=fs(Ar.current),g.stateNode=Je(I,p,C,g),gs(g)):g.stateNode=p.stateNode}}else au=function(){},Cd=function(){},Ed=function(){};function ou(p,g){if(!Tn)switch(p.tailMode){case"hidden":g=p.tail;for(var C=null;g!==null;)g.alternate!==null&&(C=g),g=g.sibling;C===null?p.tail=null:C.sibling=null;break;case"collapsed":C=p.tail;for(var I=null;C!==null;)C.alternate!==null&&(I=C),C=C.sibling;I===null?g||p.tail===null?p.tail=null:p.tail.sibling=null:I.sibling=null}}function wi(p){var g=p.alternate!==null&&p.alternate.child===p.child,C=0,I=0;if(g)for(var B=p.child;B!==null;)C|=B.lanes|B.childLanes,I|=B.subtreeFlags&14680064,I|=B.flags&14680064,B.return=p,B=B.sibling;else for(B=p.child;B!==null;)C|=B.lanes|B.childLanes,I|=B.subtreeFlags,I|=B.flags,B.return=p,B=B.sibling;return p.subtreeFlags|=I,p.childLanes=C,g}function fP(p,g,C){var I=g.pendingProps;switch(Om(g),g.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wi(g),null;case 1:return q(g.type)&&w(),wi(g),null;case 3:return I=g.stateNode,vl(),E(H),E(U),Gm(),I.pendingContext&&(I.context=I.pendingContext,I.pendingContext=null),(p===null||p.child===null)&&(Jc(g)?gs(g):p===null||p.memoizedState.isDehydrated&&!(g.flags&256)||(g.flags|=1024,Wr!==null&&(yv(Wr),Wr=null))),au(p,g),wi(g),null;case 5:Vm(g),C=fs(ml.current);var B=g.type;if(p!==null&&g.stateNode!=null)Cd(p,g,B,I,C),p.ref!==g.ref&&(g.flags|=512,g.flags|=2097152);else{if(!I){if(g.stateNode===null)throw Error(c(166));return wi(g),null}if(p=fs(Ar.current),Jc(g)){if(!je)throw Error(c(175));p=jc(g.stateNode,g.type,g.memoizedProps,C,p,g,!Kc),g.updateQueue=p,p!==null&&gs(g)}else{var j=Ie(B,I,C,p,g);su(j,g,!1,!1),g.stateNode=j,rt(j,B,I,C,p)&&gs(g)}g.ref!==null&&(g.flags|=512,g.flags|=2097152)}return wi(g),null;case 6:if(p&&g.stateNode!=null)Ed(p,g,p.memoizedProps,I);else{if(typeof I!="string"&&g.stateNode===null)throw Error(c(166));if(p=fs(ml.current),C=fs(Ar.current),Jc(g)){if(!je)throw Error(c(176));if(p=g.stateNode,I=g.memoizedProps,(C=qc(p,I,g,!Kc))&&(B=ar,B!==null))switch(j=(B.mode&1)!==0,B.tag){case 3:r(B.stateNode.containerInfo,p,I,j);break;case 5:a(B.type,B.memoizedProps,B.stateNode,p,I,j)}C&&gs(g)}else g.stateNode=Je(I,p,C,g)}return wi(g),null;case 13:if(E(kn),I=g.memoizedState,Tn&&or!==null&&g.mode&1&&!(g.flags&128)){for(p=or;p;)p=xi(p);return pl(),g.flags|=98560,g}if(I!==null&&I.dehydrated!==null){if(I=Jc(g),p===null){if(!I)throw Error(c(318));if(!je)throw Error(c(344));if(p=g.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(c(317));Zc(p,g)}else pl(),!(g.flags&128)&&(g.memoizedState=null),g.flags|=4;return wi(g),null}return Wr!==null&&(yv(Wr),Wr=null),g.flags&128?(g.lanes=C,g):(I=I!==null,C=!1,p===null?Jc(g):C=p.memoizedState!==null,I&&!C&&(g.child.flags|=8192,g.mode&1&&(p===null||kn.current&1?$n===0&&($n=3):wv())),g.updateQueue!==null&&(g.flags|=4),wi(g),null);case 4:return vl(),au(p,g),p===null&&lt(g.stateNode.containerInfo),wi(g),null;case 10:return Rm(g.type._context),wi(g),null;case 17:return q(g.type)&&w(),wi(g),null;case 19:if(E(kn),B=g.memoizedState,B===null)return wi(g),null;if(I=(g.flags&128)!==0,j=B.rendering,j===null)if(I)ou(B,!1);else{if($n!==0||p!==null&&p.flags&128)for(p=g.child;p!==null;){if(j=xd(p),j!==null){for(g.flags|=128,ou(B,!1),p=j.updateQueue,p!==null&&(g.updateQueue=p,g.flags|=4),g.subtreeFlags=0,p=C,I=g.child;I!==null;)C=I,B=p,C.flags&=14680066,j=C.alternate,j===null?(C.childLanes=0,C.lanes=B,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=j.childLanes,C.lanes=j.lanes,C.child=j.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=j.memoizedProps,C.memoizedState=j.memoizedState,C.updateQueue=j.updateQueue,C.type=j.type,B=j.dependencies,C.dependencies=B===null?null:{lanes:B.lanes,firstContext:B.firstContext}),I=I.sibling;return T(kn,kn.current&1|2),g.child}p=p.sibling}B.tail!==null&&sn()>gv&&(g.flags|=128,I=!0,ou(B,!1),g.lanes=4194304)}else{if(!I)if(p=xd(j),p!==null){if(g.flags|=128,I=!0,p=p.updateQueue,p!==null&&(g.updateQueue=p,g.flags|=4),ou(B,!0),B.tail===null&&B.tailMode==="hidden"&&!j.alternate&&!Tn)return wi(g),null}else 2*sn()-B.renderingStartTime>gv&&C!==1073741824&&(g.flags|=128,I=!0,ou(B,!1),g.lanes=4194304);B.isBackwards?(j.sibling=g.child,g.child=j):(p=B.last,p!==null?p.sibling=j:g.child=j,B.last=j)}return B.tail!==null?(g=B.tail,B.rendering=g,B.tail=g.sibling,B.renderingStartTime=sn(),g.sibling=null,p=kn.current,T(kn,I?p&1|2:p&1),g):(wi(g),null);case 22:case 23:return bv(),I=g.memoizedState!==null,p!==null&&p.memoizedState!==null!==I&&(g.flags|=8192),I&&g.mode&1?cr&1073741824&&(wi(g),Ot&&g.subtreeFlags&6&&(g.flags|=8192)):wi(g),null;case 24:return null;case 25:return null}throw Error(c(156,g.tag))}var pP=h.ReactCurrentOwner,lr=!1;function Di(p,g,C,I){g.child=p===null?xw(g,null,C,I):gl(g,p.child,C,I)}function Xw(p,g,C,I,B){C=C.render;var j=g.ref;return hl(g,B),I=Ym(p,g,C,I,j,B),C=jm(),p!==null&&!lr?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~B,Ns(p,g,B)):(Tn&&C&&Fm(g),g.flags|=1,Di(p,g,I,B),g.child)}function Yw(p,g,C,I,B){if(p===null){var j=C.type;return typeof j=="function"&&!Sv(j)&&j.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(g.tag=15,g.type=j,jw(p,g,j,I,B)):(p=qd(C.type,null,I,g,g.mode,B),p.ref=g.ref,p.return=g,g.child=p)}if(j=p.child,!(p.lanes&B)){var ue=j.memoizedProps;if(C=C.compare,C=C!==null?C:cd,C(ue,I)&&p.ref===g.ref)return Ns(p,g,B)}return g.flags|=1,p=ga(j,I),p.ref=g.ref,p.return=g,g.child=p}function jw(p,g,C,I,B){if(p!==null&&cd(p.memoizedProps,I)&&p.ref===g.ref)if(lr=!1,(p.lanes&B)!==0)p.flags&131072&&(lr=!0);else return g.lanes=p.lanes,Ns(p,g,B);return Qm(p,g,C,I,B)}function qw(p,g,C){var I=g.pendingProps,B=I.children,j=p!==null?p.memoizedState:null;if(I.mode==="hidden")if(!(g.mode&1))g.memoizedState={baseLanes:0,cachePool:null},T(yl,cr),cr|=C;else if(C&1073741824)g.memoizedState={baseLanes:0,cachePool:null},I=j!==null?j.baseLanes:C,T(yl,cr),cr|=I;else return p=j!==null?j.baseLanes|C:C,g.lanes=g.childLanes=1073741824,g.memoizedState={baseLanes:p,cachePool:null},g.updateQueue=null,T(yl,cr),cr|=p,null;else j!==null?(I=j.baseLanes|C,g.memoizedState=null):I=C,T(yl,cr),cr|=I;return Di(p,g,B,C),g.child}function Zw(p,g){var C=g.ref;(p===null&&C!==null||p!==null&&p.ref!==C)&&(g.flags|=512,g.flags|=2097152)}function Qm(p,g,C,I,B){var j=q(C)?X:U.current;return j=Y(g,j),hl(g,B),C=Ym(p,g,C,I,j,B),I=jm(),p!==null&&!lr?(g.updateQueue=p.updateQueue,g.flags&=-2053,p.lanes&=~B,Ns(p,g,B)):(Tn&&I&&Fm(g),g.flags|=1,Di(p,g,C,B),g.child)}function Kw(p,g,C,I,B){if(q(C)){var j=!0;$(g)}else j=!1;if(hl(g,B),g.stateNode===null)p!==null&&(p.alternate=null,g.alternate=null,g.flags|=2),uw(g,C,I),Nm(g,C,I,B),I=!0;else if(p===null){var ue=g.stateNode,pe=g.memoizedProps;ue.props=pe;var Fe=ue.context,tt=C.contextType;typeof tt=="object"&&tt!==null?tt=Sr(tt):(tt=q(C)?X:U.current,tt=Y(g,tt));var wt=C.getDerivedStateFromProps,Ht=typeof wt=="function"||typeof ue.getSnapshotBeforeUpdate=="function";Ht||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(pe!==I||Fe!==tt)&&hw(g,ue,I,tt),ca=!1;var It=g.memoizedState;ue.state=It,fd(g,I,ue,B),Fe=g.memoizedState,pe!==I||It!==Fe||H.current||ca?(typeof wt=="function"&&(Dm(g,C,wt,I),Fe=g.memoizedState),(pe=ca||cw(g,C,pe,I,It,Fe,tt))?(Ht||typeof ue.UNSAFE_componentWillMount!="function"&&typeof ue.componentWillMount!="function"||(typeof ue.componentWillMount=="function"&&ue.componentWillMount(),typeof ue.UNSAFE_componentWillMount=="function"&&ue.UNSAFE_componentWillMount()),typeof ue.componentDidMount=="function"&&(g.flags|=4194308)):(typeof ue.componentDidMount=="function"&&(g.flags|=4194308),g.memoizedProps=I,g.memoizedState=Fe),ue.props=I,ue.state=Fe,ue.context=tt,I=pe):(typeof ue.componentDidMount=="function"&&(g.flags|=4194308),I=!1)}else{ue=g.stateNode,sw(p,g),pe=g.memoizedProps,tt=g.type===g.elementType?pe:Vr(g.type,pe),ue.props=tt,Ht=g.pendingProps,It=ue.context,Fe=C.contextType,typeof Fe=="object"&&Fe!==null?Fe=Sr(Fe):(Fe=q(C)?X:U.current,Fe=Y(g,Fe));var yn=C.getDerivedStateFromProps;(wt=typeof yn=="function"||typeof ue.getSnapshotBeforeUpdate=="function")||typeof ue.UNSAFE_componentWillReceiveProps!="function"&&typeof ue.componentWillReceiveProps!="function"||(pe!==Ht||It!==Fe)&&hw(g,ue,I,Fe),ca=!1,It=g.memoizedState,ue.state=It,fd(g,I,ue,B);var Et=g.memoizedState;pe!==Ht||It!==Et||H.current||ca?(typeof yn=="function"&&(Dm(g,C,yn,I),Et=g.memoizedState),(tt=ca||cw(g,C,tt,I,It,Et,Fe)||!1)?(wt||typeof ue.UNSAFE_componentWillUpdate!="function"&&typeof ue.componentWillUpdate!="function"||(typeof ue.componentWillUpdate=="function"&&ue.componentWillUpdate(I,Et,Fe),typeof ue.UNSAFE_componentWillUpdate=="function"&&ue.UNSAFE_componentWillUpdate(I,Et,Fe)),typeof ue.componentDidUpdate=="function"&&(g.flags|=4),typeof ue.getSnapshotBeforeUpdate=="function"&&(g.flags|=1024)):(typeof ue.componentDidUpdate!="function"||pe===p.memoizedProps&&It===p.memoizedState||(g.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||pe===p.memoizedProps&&It===p.memoizedState||(g.flags|=1024),g.memoizedProps=I,g.memoizedState=Et),ue.props=I,ue.state=Et,ue.context=Fe,I=tt):(typeof ue.componentDidUpdate!="function"||pe===p.memoizedProps&&It===p.memoizedState||(g.flags|=4),typeof ue.getSnapshotBeforeUpdate!="function"||pe===p.memoizedProps&&It===p.memoizedState||(g.flags|=1024),I=!1)}return ev(p,g,C,I,j,B)}function ev(p,g,C,I,B,j){Zw(p,g);var ue=(g.flags&128)!==0;if(!I&&!ue)return B&&Q(g,C,!1),Ns(p,g,j);I=g.stateNode,pP.current=g;var pe=ue&&typeof C.getDerivedStateFromError!="function"?null:I.render();return g.flags|=1,p!==null&&ue?(g.child=gl(g,p.child,null,j),g.child=gl(g,null,pe,j)):Di(p,g,pe,j),g.memoizedState=I.state,B&&Q(g,C,!0),g.child}function Jw(p){var g=p.stateNode;g.pendingContext?D(p,g.pendingContext,g.pendingContext!==g.context):g.context&&D(p,g.context,!1),Hm(p,g.containerInfo)}function $w(p,g,C,I,B){return pl(),Bm(B),g.flags|=256,Di(p,g,C,I),g.child}var Td={dehydrated:null,treeContext:null,retryLane:0};function Pd(p){return{baseLanes:p,cachePool:null}}function Qw(p,g,C){var I=g.pendingProps,B=kn.current,j=!1,ue=(g.flags&128)!==0,pe;if((pe=ue)||(pe=p!==null&&p.memoizedState===null?!1:(B&2)!==0),pe?(j=!0,g.flags&=-129):(p===null||p.memoizedState!==null)&&(B|=1),T(kn,B&1),p===null)return Um(g),p=g.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(g.mode&1?ls(p)?g.lanes=8:g.lanes=1073741824:g.lanes=1,null):(B=I.children,p=I.fallback,j?(I=g.mode,j=g.child,B={mode:"hidden",children:B},!(I&1)&&j!==null?(j.childLanes=0,j.pendingProps=B):j=Zd(B,I,0,null),p=fo(p,I,C,null),j.return=g,p.return=g,j.sibling=p,g.child=j,g.child.memoizedState=Pd(C),g.memoizedState=Td,p):tv(g,B));if(B=p.memoizedState,B!==null){if(pe=B.dehydrated,pe!==null){if(ue)return g.flags&256?(g.flags&=-257,kd(p,g,C,Error(c(422)))):g.memoizedState!==null?(g.child=p.child,g.flags|=128,null):(j=I.fallback,B=g.mode,I=Zd({mode:"visible",children:I.children},B,0,null),j=fo(j,B,C,null),j.flags|=2,I.return=g,j.return=g,I.sibling=j,g.child=I,g.mode&1&&gl(g,p.child,null,C),g.child.memoizedState=Pd(C),g.memoizedState=Td,j);if(!(g.mode&1))g=kd(p,g,C,null);else if(ls(pe))g=kd(p,g,C,Error(c(419)));else if(I=(C&p.childLanes)!==0,lr||I){if(I=Yn,I!==null){switch(C&-C){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}I=j&(I.suspendedLanes|C)?0:j,I!==0&&I!==B.retryLane&&(B.retryLane=I,Er(p,I,-1))}wv(),g=kd(p,g,C,Error(c(421)))}else no(pe)?(g.flags|=128,g.child=p.child,g=EP.bind(null,p),cs(pe,g),g=null):(C=B.treeContext,je&&(or=io(pe),ar=g,Tn=!0,Wr=null,Kc=!1,C!==null&&(_r[Mr++]=Ls,_r[Mr++]=Is,_r[Mr++]=ro,Ls=C.id,Is=C.overflow,ro=g)),g=tv(g,g.pendingProps.children),g.flags|=4096);return g}return j?(I=t1(p,g,I.children,I.fallback,C),j=g.child,B=p.child.memoizedState,j.memoizedState=B===null?Pd(C):{baseLanes:B.baseLanes|C,cachePool:null},j.childLanes=p.childLanes&~C,g.memoizedState=Td,I):(C=e1(p,g,I.children,C),g.memoizedState=null,C)}return j?(I=t1(p,g,I.children,I.fallback,C),j=g.child,B=p.child.memoizedState,j.memoizedState=B===null?Pd(C):{baseLanes:B.baseLanes|C,cachePool:null},j.childLanes=p.childLanes&~C,g.memoizedState=Td,I):(C=e1(p,g,I.children,C),g.memoizedState=null,C)}function tv(p,g){return g=Zd({mode:"visible",children:g},p.mode,0,null),g.return=p,p.child=g}function e1(p,g,C,I){var B=p.child;return p=B.sibling,C=ga(B,{mode:"visible",children:C}),!(g.mode&1)&&(C.lanes=I),C.return=g,C.sibling=null,p!==null&&(I=g.deletions,I===null?(g.deletions=[p],g.flags|=16):I.push(p)),g.child=C}function t1(p,g,C,I,B){var j=g.mode;p=p.child;var ue=p.sibling,pe={mode:"hidden",children:C};return!(j&1)&&g.child!==p?(C=g.child,C.childLanes=0,C.pendingProps=pe,g.deletions=null):(C=ga(p,pe),C.subtreeFlags=p.subtreeFlags&14680064),ue!==null?I=ga(ue,I):(I=fo(I,j,B,null),I.flags|=2),I.return=g,C.return=g,C.sibling=I,g.child=C,I}function kd(p,g,C,I){return I!==null&&Bm(I),gl(g,p.child,null,C),p=tv(g,g.pendingProps.children),p.flags|=2,g.memoizedState=null,p}function n1(p,g,C){p.lanes|=g;var I=p.alternate;I!==null&&(I.lanes|=g),Lm(p.return,g,C)}function nv(p,g,C,I,B){var j=p.memoizedState;j===null?p.memoizedState={isBackwards:g,rendering:null,renderingStartTime:0,last:I,tail:C,tailMode:B}:(j.isBackwards=g,j.rendering=null,j.renderingStartTime=0,j.last=I,j.tail=C,j.tailMode=B)}function i1(p,g,C){var I=g.pendingProps,B=I.revealOrder,j=I.tail;if(Di(p,g,I.children,C),I=kn.current,I&2)I=I&1|2,g.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=g.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&n1(p,C,g);else if(p.tag===19)n1(p,C,g);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===g)break e;for(;p.sibling===null;){if(p.return===null||p.return===g)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}I&=1}if(T(kn,I),!(g.mode&1))g.memoizedState=null;else switch(B){case"forwards":for(C=g.child,B=null;C!==null;)p=C.alternate,p!==null&&xd(p)===null&&(B=C),C=C.sibling;C=B,C===null?(B=g.child,g.child=null):(B=C.sibling,C.sibling=null),nv(g,!1,B,C,j);break;case"backwards":for(C=null,B=g.child,g.child=null;B!==null;){if(p=B.alternate,p!==null&&xd(p)===null){g.child=B;break}p=B.sibling,B.sibling=C,C=B,B=p}nv(g,!0,C,null,j);break;case"together":nv(g,!1,null,null,void 0);break;default:g.memoizedState=null}return g.child}function Ns(p,g,C){if(p!==null&&(g.dependencies=p.dependencies),bl|=g.lanes,!(C&g.childLanes))return null;if(p!==null&&g.child!==p.child)throw Error(c(153));if(g.child!==null){for(p=g.child,C=ga(p,p.pendingProps),g.child=C,C.return=g;p.sibling!==null;)p=p.sibling,C=C.sibling=ga(p,p.pendingProps),C.return=g;C.sibling=null}return g.child}function gP(p,g,C){switch(g.tag){case 3:Jw(g),pl();break;case 5:yw(g);break;case 1:q(g.type)&&$(g);break;case 4:Hm(g,g.stateNode.containerInfo);break;case 10:rw(g,g.type._context,g.memoizedProps.value);break;case 13:var I=g.memoizedState;if(I!==null)return I.dehydrated!==null?(T(kn,kn.current&1),g.flags|=128,null):C&g.child.childLanes?Qw(p,g,C):(T(kn,kn.current&1),p=Ns(p,g,C),p!==null?p.sibling:null);T(kn,kn.current&1);break;case 19:if(I=(C&g.childLanes)!==0,p.flags&128){if(I)return i1(p,g,C);g.flags|=128}var B=g.memoizedState;if(B!==null&&(B.rendering=null,B.tail=null,B.lastEffect=null),T(kn,kn.current),I)break;return null;case 22:case 23:return g.lanes=0,qw(p,g,C)}return Ns(p,g,C)}function mP(p,g){switch(Om(g),g.tag){case 1:return q(g.type)&&w(),p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 3:return vl(),E(H),E(U),Gm(),p=g.flags,p&65536&&!(p&128)?(g.flags=p&-65537|128,g):null;case 5:return Vm(g),null;case 13:if(E(kn),p=g.memoizedState,p!==null&&p.dehydrated!==null){if(g.alternate===null)throw Error(c(340));pl()}return p=g.flags,p&65536?(g.flags=p&-65537|128,g):null;case 19:return E(kn),null;case 4:return vl(),null;case 10:return Rm(g.type._context),null;case 22:case 23:return bv(),null;case 24:return null;default:return null}}var Rd=!1,oo=!1,vP=typeof WeakSet=="function"?WeakSet:Set,ut=null;function Ld(p,g){var C=p.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(I){Ki(p,g,I)}else C.current=null}function iv(p,g,C){try{C()}catch(I){Ki(p,g,I)}}var r1=!1;function xP(p,g){for(we(p.containerInfo),ut=g;ut!==null;)if(p=ut,g=p.child,(p.subtreeFlags&1028)!==0&&g!==null)g.return=p,ut=g;else for(;ut!==null;){p=ut;try{var C=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var I=C.memoizedProps,B=C.memoizedState,j=p.stateNode,ue=j.getSnapshotBeforeUpdate(p.elementType===p.type?I:Vr(p.type,I),B);j.__reactInternalSnapshotBeforeUpdate=ue}break;case 3:Ot&&nt(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(pe){Ki(p,p.return,pe)}if(g=p.sibling,g!==null){g.return=p.return,ut=g;break}ut=p.return}return C=r1,r1=!1,C}function lo(p,g,C){var I=g.updateQueue;if(I=I!==null?I.lastEffect:null,I!==null){var B=I=I.next;do{if((B.tag&p)===p){var j=B.destroy;B.destroy=void 0,j!==void 0&&iv(g,C,j)}B=B.next}while(B!==I)}}function lu(p,g){if(g=g.updateQueue,g=g!==null?g.lastEffect:null,g!==null){var C=g=g.next;do{if((C.tag&p)===p){var I=C.create;C.destroy=I()}C=C.next}while(C!==g)}}function rv(p){var g=p.ref;if(g!==null){var C=p.stateNode;switch(p.tag){case 5:p=Ae(C);break;default:p=C}typeof g=="function"?g(p):g.current=p}}function s1(p,g,C){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(ji,g)}catch{}switch(g.tag){case 0:case 11:case 14:case 15:if(p=g.updateQueue,p!==null&&(p=p.lastEffect,p!==null)){var I=p=p.next;do{var B=I,j=B.destroy;B=B.tag,j!==void 0&&(B&2||B&4)&&iv(g,C,j),I=I.next}while(I!==p)}break;case 1:if(Ld(g,C),p=g.stateNode,typeof p.componentWillUnmount=="function")try{p.props=g.memoizedProps,p.state=g.memoizedState,p.componentWillUnmount()}catch(ue){Ki(g,C,ue)}break;case 5:Ld(g,C);break;case 4:Ot?h1(p,g,C):oe&&oe&&(g=g.stateNode.containerInfo,C=$t(g),rn(g,C))}}function a1(p,g,C){for(var I=g;;)if(s1(p,I,C),I.child===null||Ot&&I.tag===4){if(I===g)break;for(;I.sibling===null;){if(I.return===null||I.return===g)return;I=I.return}I.sibling.return=I.return,I=I.sibling}else I.child.return=I,I=I.child}function o1(p){var g=p.alternate;g!==null&&(p.alternate=null,o1(g)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(g=p.stateNode,g!==null&&Tt(g)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function l1(p){return p.tag===5||p.tag===3||p.tag===4}function c1(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||l1(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function u1(p){if(Ot){e:{for(var g=p.return;g!==null;){if(l1(g))break e;g=g.return}throw Error(c(160))}var C=g;switch(C.tag){case 5:g=C.stateNode,C.flags&32&&(pn(g),C.flags&=-33),C=c1(p),av(p,C,g);break;case 3:case 4:g=C.stateNode.containerInfo,C=c1(p),sv(p,C,g);break;default:throw Error(c(161))}}}function sv(p,g,C){var I=p.tag;if(I===5||I===6)p=p.stateNode,g?xt(C,p,g):zt(C,p);else if(I!==4&&(p=p.child,p!==null))for(sv(p,g,C),p=p.sibling;p!==null;)sv(p,g,C),p=p.sibling}function av(p,g,C){var I=p.tag;if(I===5||I===6)p=p.stateNode,g?Dt(C,p,g):pt(C,p);else if(I!==4&&(p=p.child,p!==null))for(av(p,g,C),p=p.sibling;p!==null;)av(p,g,C),p=p.sibling}function h1(p,g,C){for(var I=g,B=!1,j,ue;;){if(!B){B=I.return;e:for(;;){if(B===null)throw Error(c(160));switch(j=B.stateNode,B.tag){case 5:ue=!1;break e;case 3:j=j.containerInfo,ue=!0;break e;case 4:j=j.containerInfo,ue=!0;break e}B=B.return}B=!0}if(I.tag===5||I.tag===6)a1(p,I,C),ue?Gt(j,I.stateNode):Ut(j,I.stateNode);else if(I.tag===18)ue?Se(j,I.stateNode):ke(j,I.stateNode);else if(I.tag===4){if(I.child!==null){j=I.stateNode.containerInfo,ue=!0,I.child.return=I,I=I.child;continue}}else if(s1(p,I,C),I.child!==null){I.child.return=I,I=I.child;continue}if(I===g)break;for(;I.sibling===null;){if(I.return===null||I.return===g)return;I=I.return,I.tag===4&&(B=!1)}I.sibling.return=I.return,I=I.sibling}}function ov(p,g){if(Ot){switch(g.tag){case 0:case 11:case 14:case 15:lo(3,g,g.return),lu(3,g),lo(5,g,g.return);return;case 1:return;case 5:var C=g.stateNode;if(C!=null){var I=g.memoizedProps;p=p!==null?p.memoizedProps:I;var B=g.type,j=g.updateQueue;g.updateQueue=null,j!==null&&Jt(C,j,B,p,I,g)}return;case 6:if(g.stateNode===null)throw Error(c(162));C=g.memoizedProps,Qe(g.stateNode,p!==null?p.memoizedProps:C,C);return;case 3:je&&p!==null&&p.memoizedState.isDehydrated&&ve(g.stateNode.containerInfo);return;case 12:return;case 13:Id(g);return;case 19:Id(g);return;case 17:return}throw Error(c(163))}switch(g.tag){case 0:case 11:case 14:case 15:lo(3,g,g.return),lu(3,g),lo(5,g,g.return);return;case 12:return;case 13:Id(g);return;case 19:Id(g);return;case 3:je&&p!==null&&p.memoizedState.isDehydrated&&ve(g.stateNode.containerInfo);break;case 22:case 23:return}e:if(oe){switch(g.tag){case 1:case 5:case 6:break e;case 3:case 4:g=g.stateNode,rn(g.containerInfo,g.pendingChildren);break e}throw Error(c(163))}}function Id(p){var g=p.updateQueue;if(g!==null){p.updateQueue=null;var C=p.stateNode;C===null&&(C=p.stateNode=new vP),g.forEach(function(I){var B=TP.bind(null,p,I);C.has(I)||(C.add(I),I.then(B,B))})}}function yP(p,g){for(ut=g;ut!==null;){g=ut;var C=g.deletions;if(C!==null)for(var I=0;I<C.length;I++){var B=C[I];try{var j=p;Ot?h1(j,B,g):a1(j,B,g);var ue=B.alternate;ue!==null&&(ue.return=null),B.return=null}catch(At){Ki(B,g,At)}}if(C=g.child,g.subtreeFlags&12854&&C!==null)C.return=g,ut=C;else for(;ut!==null;){g=ut;try{var pe=g.flags;if(pe&32&&Ot&&pn(g.stateNode),pe&512){var Fe=g.alternate;if(Fe!==null){var tt=Fe.ref;tt!==null&&(typeof tt=="function"?tt(null):tt.current=null)}}if(pe&8192)switch(g.tag){case 13:if(g.memoizedState!==null){var wt=g.alternate;(wt===null||wt.memoizedState===null)&&(pv=sn())}break;case 22:var Ht=g.memoizedState!==null,It=g.alternate,yn=It!==null&&It.memoizedState!==null;if(C=g,Ot){e:if(I=C,B=Ht,j=null,Ot)for(var Et=I;;){if(Et.tag===5){if(j===null){j=Et;var Si=Et.stateNode;B?me(Si):Ue(Et.stateNode,Et.memoizedProps)}}else if(Et.tag===6){if(j===null){var Pr=Et.stateNode;B?et(Pr):He(Pr,Et.memoizedProps)}}else if((Et.tag!==22&&Et.tag!==23||Et.memoizedState===null||Et===I)&&Et.child!==null){Et.child.return=Et,Et=Et.child;continue}if(Et===I)break;for(;Et.sibling===null;){if(Et.return===null||Et.return===I)break e;j===Et&&(j=null),Et=Et.return}j===Et&&(j=null),Et.sibling.return=Et.return,Et=Et.sibling}}if(Ht&&!yn&&C.mode&1){ut=C;for(var Ce=C.child;Ce!==null;){for(C=ut=Ce;ut!==null;){I=ut;var ye=I.child;switch(I.tag){case 0:case 11:case 14:case 15:lo(4,I,I.return);break;case 1:Ld(I,I.return);var De=I.stateNode;if(typeof De.componentWillUnmount=="function"){var ft=I.return;try{De.props=I.memoizedProps,De.state=I.memoizedState,De.componentWillUnmount()}catch(At){Ki(I,ft,At)}}break;case 5:Ld(I,I.return);break;case 22:if(I.memoizedState!==null){p1(C);continue}}ye!==null?(ye.return=I,ut=ye):p1(C)}Ce=Ce.sibling}}}switch(pe&4102){case 2:u1(g),g.flags&=-3;break;case 6:u1(g),g.flags&=-3,ov(g.alternate,g);break;case 4096:g.flags&=-4097;break;case 4100:g.flags&=-4097,ov(g.alternate,g);break;case 4:ov(g.alternate,g)}}catch(At){Ki(g,g.return,At)}if(C=g.sibling,C!==null){C.return=g.return,ut=C;break}ut=g.return}}}function bP(p,g,C){ut=p,d1(p)}function d1(p,g,C){for(var I=(p.mode&1)!==0;ut!==null;){var B=ut,j=B.child;if(B.tag===22&&I){var ue=B.memoizedState!==null||Rd;if(!ue){var pe=B.alternate,Fe=pe!==null&&pe.memoizedState!==null||oo;pe=Rd;var tt=oo;if(Rd=ue,(oo=Fe)&&!tt)for(ut=B;ut!==null;)ue=ut,Fe=ue.child,ue.tag===22&&ue.memoizedState!==null?g1(B):Fe!==null?(Fe.return=ue,ut=Fe):g1(B);for(;j!==null;)ut=j,d1(j),j=j.sibling;ut=B,Rd=pe,oo=tt}f1(p)}else B.subtreeFlags&8772&&j!==null?(j.return=B,ut=j):f1(p)}}function f1(p){for(;ut!==null;){var g=ut;if(g.flags&8772){var C=g.alternate;try{if(g.flags&8772)switch(g.tag){case 0:case 11:case 15:oo||lu(5,g);break;case 1:var I=g.stateNode;if(g.flags&4&&!oo)if(C===null)I.componentDidMount();else{var B=g.elementType===g.type?C.memoizedProps:Vr(g.type,C.memoizedProps);I.componentDidUpdate(B,C.memoizedState,I.__reactInternalSnapshotBeforeUpdate)}var j=g.updateQueue;j!==null&&ow(g,j,I);break;case 3:var ue=g.updateQueue;if(ue!==null){if(C=null,g.child!==null)switch(g.child.tag){case 5:C=Ae(g.child.stateNode);break;case 1:C=g.child.stateNode}ow(g,ue,C)}break;case 5:var pe=g.stateNode;C===null&&g.flags&4&&ht(pe,g.type,g.memoizedProps,g);break;case 6:break;case 4:break;case 12:break;case 13:if(je&&g.memoizedState===null){var Fe=g.alternate;if(Fe!==null){var tt=Fe.memoizedState;if(tt!==null){var wt=tt.dehydrated;wt!==null&&Ee(wt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(c(163))}oo||g.flags&512&&rv(g)}catch(Ht){Ki(g,g.return,Ht)}}if(g===p){ut=null;break}if(C=g.sibling,C!==null){C.return=g.return,ut=C;break}ut=g.return}}function p1(p){for(;ut!==null;){var g=ut;if(g===p){ut=null;break}var C=g.sibling;if(C!==null){C.return=g.return,ut=C;break}ut=g.return}}function g1(p){for(;ut!==null;){var g=ut;try{switch(g.tag){case 0:case 11:case 15:var C=g.return;try{lu(4,g)}catch(Fe){Ki(g,C,Fe)}break;case 1:var I=g.stateNode;if(typeof I.componentDidMount=="function"){var B=g.return;try{I.componentDidMount()}catch(Fe){Ki(g,B,Fe)}}var j=g.return;try{rv(g)}catch(Fe){Ki(g,j,Fe)}break;case 5:var ue=g.return;try{rv(g)}catch(Fe){Ki(g,ue,Fe)}}}catch(Fe){Ki(g,g.return,Fe)}if(g===p){ut=null;break}var pe=g.sibling;if(pe!==null){pe.return=g.return,ut=pe;break}ut=g.return}}var Dd=0,Nd=1,Fd=2,Od=3,zd=4;if(typeof Symbol=="function"&&Symbol.for){var cu=Symbol.for;Dd=cu("selector.component"),Nd=cu("selector.has_pseudo_class"),Fd=cu("selector.role"),Od=cu("selector.test_id"),zd=cu("selector.text")}function lv(p){var g=Ze(p);if(g!=null){if(typeof g.memoizedProps["data-testname"]!="string")throw Error(c(364));return g}if(p=ie(p),p===null)throw Error(c(362));return p.stateNode.current}function cv(p,g){switch(g.$$typeof){case Dd:if(p.type===g.value)return!0;break;case Nd:e:{g=g.value,p=[p,0];for(var C=0;C<p.length;){var I=p[C++],B=p[C++],j=g[B];if(I.tag!==5||!Ge(I)){for(;j!=null&&cv(I,j);)B++,j=g[B];if(B===g.length){g=!0;break e}else for(I=I.child;I!==null;)p.push(I,B),I=I.sibling}}g=!1}return g;case Fd:if(p.tag===5&&Xe(p.stateNode,g.value))return!0;break;case zd:if((p.tag===5||p.tag===6)&&(p=qe(p),p!==null&&0<=p.indexOf(g.value)))return!0;break;case Od:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===g.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function uv(p){switch(p.$$typeof){case Dd:return"<"+(te(p.value)||"Unknown")+">";case Nd:return":has("+(uv(p)||"")+")";case Fd:return'[role="'+p.value+'"]';case zd:return'"'+p.value+'"';case Od:return'[data-testname="'+p.value+'"]';default:throw Error(c(365))}}function m1(p,g){var C=[];p=[p,0];for(var I=0;I<p.length;){var B=p[I++],j=p[I++],ue=g[j];if(B.tag!==5||!Ge(B)){for(;ue!=null&&cv(B,ue);)j++,ue=g[j];if(j===g.length)C.push(B);else for(B=B.child;B!==null;)p.push(B,j),B=B.sibling}}return C}function hv(p,g){if(!he)throw Error(c(363));p=lv(p),p=m1(p,g),g=[],p=Array.from(p);for(var C=0;C<p.length;){var I=p[C++];if(I.tag===5)Ge(I)||g.push(I.stateNode);else for(I=I.child;I!==null;)p.push(I),I=I.sibling}return g}var wP=Math.ceil,Ud=h.ReactCurrentDispatcher,dv=h.ReactCurrentOwner,Bn=h.ReactCurrentBatchConfig,Zt=0,Yn=null,jn=null,fi=0,cr=0,yl=A(0),$n=0,uu=null,bl=0,Bd=0,fv=0,hu=null,qi=null,pv=0,gv=1/0;function wl(){gv=sn()+500}var Hd=!1,mv=null,ha=null,Vd=!1,da=null,Wd=0,du=0,vv=null,Gd=-1,Xd=0;function Ni(){return Zt&6?sn():Gd!==-1?Gd:Gd=sn()}function fa(p){return p.mode&1?Zt&2&&fi!==0?fi&-fi:iP.transition!==null?(Xd===0&&(p=Oe,Oe<<=1,!(Oe&4194240)&&(Oe=64),Xd=p),Xd):(p=Pt,p!==0?p:Be()):1}function Er(p,g,C){if(50<du)throw du=0,vv=null,Error(c(185));var I=Yd(p,g);return I===null?null:(Rt(I,g,C),(!(Zt&2)||I!==Yn)&&(I===Yn&&(!(Zt&2)&&(Bd|=g),$n===4&&pa(I,fi)),Zi(I,C),g===1&&Zt===0&&!(p.mode&1)&&(wl(),ld&&hs())),I)}function Yd(p,g){p.lanes|=g;var C=p.alternate;for(C!==null&&(C.lanes|=g),C=p,p=p.return;p!==null;)p.childLanes|=g,C=p.alternate,C!==null&&(C.childLanes|=g),C=p,p=p.return;return C.tag===3?C.stateNode:null}function Zi(p,g){var C=p.callbackNode;St(p,g);var I=it(p,p===Yn?fi:0);if(I===0)C!==null&&on(C),p.callbackNode=null,p.callbackPriority=0;else if(g=I&-I,p.callbackPriority!==g){if(C!=null&&on(C),g===1)p.tag===0?nP(x1.bind(null,p)):iw(x1.bind(null,p)),st?vt(function(){Zt===0&&hs()}):hi(Xn,hs),C=null;else{switch(gn(I)){case 1:C=Xn;break;case 4:C=br;break;case 16:C=Ps;break;case 536870912:C=di;break;default:C=Ps}C=E1(C,v1.bind(null,p))}p.callbackPriority=g,p.callbackNode=C}}function v1(p,g){if(Gd=-1,Xd=0,Zt&6)throw Error(c(327));var C=p.callbackNode;if(ho()&&p.callbackNode!==C)return null;var I=it(p,p===Yn?fi:0);if(I===0)return null;if(I&30||I&p.expiredLanes||g)g=jd(p,I);else{g=I;var B=Zt;Zt|=2;var j=w1();(Yn!==p||fi!==g)&&(wl(),co(p,g));do try{MP();break}catch(pe){b1(p,pe)}while(!0);km(),Ud.current=j,Zt=B,jn!==null?g=0:(Yn=null,fi=0,g=$n)}if(g!==0){if(g===2&&(B=Mt(p),B!==0&&(I=B,g=xv(p,B))),g===1)throw C=uu,co(p,0),pa(p,I),Zi(p,sn()),C;if(g===6)pa(p,I);else{if(B=p.current.alternate,!(I&30)&&!SP(B)&&(g=jd(p,I),g===2&&(j=Mt(p),j!==0&&(I=j,g=xv(p,j))),g===1))throw C=uu,co(p,0),pa(p,I),Zi(p,sn()),C;switch(p.finishedWork=B,p.finishedLanes=I,g){case 0:case 1:throw Error(c(345));case 2:uo(p,qi);break;case 3:if(pa(p,I),(I&130023424)===I&&(g=pv+500-sn(),10<g)){if(it(p,0)!==0)break;if(B=p.suspendedLanes,(B&I)!==I){Ni(),p.pingedLanes|=p.suspendedLanes&B;break}p.timeoutHandle=Ye(uo.bind(null,p,qi),g);break}uo(p,qi);break;case 4:if(pa(p,I),(I&4194240)===I)break;for(g=p.eventTimes,B=-1;0<I;){var ue=31-ne(I);j=1<<ue,ue=g[ue],ue>B&&(B=ue),I&=~j}if(I=B,I=sn()-I,I=(120>I?120:480>I?480:1080>I?1080:1920>I?1920:3e3>I?3e3:4320>I?4320:1960*wP(I/1960))-I,10<I){p.timeoutHandle=Ye(uo.bind(null,p,qi),I);break}uo(p,qi);break;case 5:uo(p,qi);break;default:throw Error(c(329))}}}return Zi(p,sn()),p.callbackNode===C?v1.bind(null,p):null}function xv(p,g){var C=hu;return p.current.memoizedState.isDehydrated&&(co(p,g).flags|=256),p=jd(p,g),p!==2&&(g=qi,qi=C,g!==null&&yv(g)),p}function yv(p){qi===null?qi=p:qi.push.apply(qi,p)}function SP(p){for(var g=p;;){if(g.flags&16384){var C=g.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var I=0;I<C.length;I++){var B=C[I],j=B.getSnapshot;B=B.value;try{if(!us(j(),B))return!1}catch{return!1}}}if(C=g.child,g.subtreeFlags&16384&&C!==null)C.return=g,g=C;else{if(g===p)break;for(;g.sibling===null;){if(g.return===null||g.return===p)return!0;g=g.return}g.sibling.return=g.return,g=g.sibling}}return!0}function pa(p,g){for(g&=~fv,g&=~Bd,p.suspendedLanes|=g,p.pingedLanes&=~g,p=p.expirationTimes;0<g;){var C=31-ne(g),I=1<<C;p[C]=-1,g&=~I}}function x1(p){if(Zt&6)throw Error(c(327));ho();var g=it(p,0);if(!(g&1))return Zi(p,sn()),null;var C=jd(p,g);if(p.tag!==0&&C===2){var I=Mt(p);I!==0&&(g=I,C=xv(p,I))}if(C===1)throw C=uu,co(p,0),pa(p,g),Zi(p,sn()),C;if(C===6)throw Error(c(345));return p.finishedWork=p.current.alternate,p.finishedLanes=g,uo(p,qi),Zi(p,sn()),null}function y1(p){da!==null&&da.tag===0&&!(Zt&6)&&ho();var g=Zt;Zt|=1;var C=Bn.transition,I=Pt;try{if(Bn.transition=null,Pt=1,p)return p()}finally{Pt=I,Bn.transition=C,Zt=g,!(Zt&6)&&hs()}}function bv(){cr=yl.current,E(yl)}function co(p,g){p.finishedWork=null,p.finishedLanes=0;var C=p.timeoutHandle;if(C!==Nt&&(p.timeoutHandle=Nt,kt(C)),jn!==null)for(C=jn.return;C!==null;){var I=C;switch(Om(I),I.tag){case 1:I=I.type.childContextTypes,I!=null&&w();break;case 3:vl(),E(H),E(U),Gm();break;case 5:Vm(I);break;case 4:vl();break;case 13:E(kn);break;case 19:E(kn);break;case 10:Rm(I.type._context);break;case 22:case 23:bv()}C=C.return}if(Yn=p,jn=p=ga(p.current,null),fi=cr=g,$n=0,uu=null,fv=Bd=bl=0,qi=hu=null,ds!==null){for(g=0;g<ds.length;g++)if(C=ds[g],I=C.interleaved,I!==null){C.interleaved=null;var B=I.next,j=C.pending;if(j!==null){var ue=j.next;j.next=B,I.next=ue}C.pending=I}ds=null}return p}function b1(p,g){do{var C=jn;try{if(km(),yd.current=Ad,bd){for(var I=Fn.memoizedState;I!==null;){var B=I.queue;B!==null&&(B.pending=null),I=I.next}bd=!1}if(xl=0,ii=yi=Fn=null,tu=!1,nu=0,dv.current=null,C===null||C.return===null){$n=1,uu=g,jn=null;break}e:{var j=p,ue=C.return,pe=C,Fe=g;if(g=fi,pe.flags|=32768,Fe!==null&&typeof Fe=="object"&&typeof Fe.then=="function"){var tt=Fe,wt=pe,Ht=wt.tag;if(!(wt.mode&1)&&(Ht===0||Ht===11||Ht===15)){var It=wt.alternate;It?(wt.updateQueue=It.updateQueue,wt.memoizedState=It.memoizedState,wt.lanes=It.lanes):(wt.updateQueue=null,wt.memoizedState=null)}var yn=Hw(ue);if(yn!==null){yn.flags&=-257,Vw(yn,ue,pe,j,g),yn.mode&1&&Bw(j,tt,g),g=yn,Fe=tt;var Et=g.updateQueue;if(Et===null){var Si=new Set;Si.add(Fe),g.updateQueue=Si}else Et.add(Fe);break e}else{if(!(g&1)){Bw(j,tt,g),wv();break e}Fe=Error(c(426))}}else if(Tn&&pe.mode&1){var Pr=Hw(ue);if(Pr!==null){!(Pr.flags&65536)&&(Pr.flags|=256),Vw(Pr,ue,pe,j,g),Bm(Fe);break e}}j=Fe,$n!==4&&($n=2),hu===null?hu=[j]:hu.push(j),Fe=Jm(Fe,pe),pe=ue;do{switch(pe.tag){case 3:pe.flags|=65536,g&=-g,pe.lanes|=g;var Ce=zw(pe,Fe,g);aw(pe,Ce);break e;case 1:j=Fe;var ye=pe.type,De=pe.stateNode;if(!(pe.flags&128)&&(typeof ye.getDerivedStateFromError=="function"||De!==null&&typeof De.componentDidCatch=="function"&&(ha===null||!ha.has(De)))){pe.flags|=65536,g&=-g,pe.lanes|=g;var ft=Uw(pe,j,g);aw(pe,ft);break e}}pe=pe.return}while(pe!==null)}_1(C)}catch(At){g=At,jn===C&&C!==null&&(jn=C=C.return);continue}break}while(!0)}function w1(){var p=Ud.current;return Ud.current=Ad,p===null?Ad:p}function wv(){($n===0||$n===3||$n===2)&&($n=4),Yn===null||!(bl&268435455)&&!(Bd&268435455)||pa(Yn,fi)}function jd(p,g){var C=Zt;Zt|=2;var I=w1();Yn===p&&fi===g||co(p,g);do try{_P();break}catch(B){b1(p,B)}while(!0);if(km(),Zt=C,Ud.current=I,jn!==null)throw Error(c(261));return Yn=null,fi=0,$n}function _P(){for(;jn!==null;)S1(jn)}function MP(){for(;jn!==null&&!ln();)S1(jn)}function S1(p){var g=C1(p.alternate,p,cr);p.memoizedProps=p.pendingProps,g===null?_1(p):jn=g,dv.current=null}function _1(p){var g=p;do{var C=g.alternate;if(p=g.return,g.flags&32768){if(C=mP(C,g),C!==null){C.flags&=32767,jn=C;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{$n=6,jn=null;return}}else if(C=fP(C,g,cr),C!==null){jn=C;return}if(g=g.sibling,g!==null){jn=g;return}jn=g=p}while(g!==null);$n===0&&($n=5)}function uo(p,g){var C=Pt,I=Bn.transition;try{Bn.transition=null,Pt=1,AP(p,g,C)}finally{Bn.transition=I,Pt=C}return null}function AP(p,g,C){do ho();while(da!==null);if(Zt&6)throw Error(c(327));var I=p.finishedWork,B=p.finishedLanes;if(I===null)return null;if(p.finishedWork=null,p.finishedLanes=0,I===p.current)throw Error(c(177));p.callbackNode=null,p.callbackPriority=0;var j=I.lanes|I.childLanes;if(jt(p,j),p===Yn&&(jn=Yn=null,fi=0),!(I.subtreeFlags&2064)&&!(I.flags&2064)||Vd||(Vd=!0,E1(Ps,function(){return ho(),null})),j=(I.flags&15990)!==0,I.subtreeFlags&15990||j){j=Bn.transition,Bn.transition=null;var ue=Pt;Pt=1;var pe=Zt;Zt|=4,dv.current=null,xP(p,I),yP(p,I),be(p.containerInfo),p.current=I,bP(I),dn(),Zt=pe,Pt=ue,Bn.transition=j}else p.current=I;if(Vd&&(Vd=!1,da=p,Wd=B),j=p.pendingLanes,j===0&&(ha=null),eP(I.stateNode),Zi(p,sn()),g!==null)for(C=p.onRecoverableError,I=0;I<g.length;I++)C(g[I]);if(Hd)throw Hd=!1,p=mv,mv=null,p;return Wd&1&&p.tag!==0&&ho(),j=p.pendingLanes,j&1?p===vv?du++:(du=0,vv=p):du=0,hs(),null}function ho(){if(da!==null){var p=gn(Wd),g=Bn.transition,C=Pt;try{if(Bn.transition=null,Pt=16>p?16:p,da===null)var I=!1;else{if(p=da,da=null,Wd=0,Zt&6)throw Error(c(331));var B=Zt;for(Zt|=4,ut=p.current;ut!==null;){var j=ut,ue=j.child;if(ut.flags&16){var pe=j.deletions;if(pe!==null){for(var Fe=0;Fe<pe.length;Fe++){var tt=pe[Fe];for(ut=tt;ut!==null;){var wt=ut;switch(wt.tag){case 0:case 11:case 15:lo(8,wt,j)}var Ht=wt.child;if(Ht!==null)Ht.return=wt,ut=Ht;else for(;ut!==null;){wt=ut;var It=wt.sibling,yn=wt.return;if(o1(wt),wt===tt){ut=null;break}if(It!==null){It.return=yn,ut=It;break}ut=yn}}}var Et=j.alternate;if(Et!==null){var Si=Et.child;if(Si!==null){Et.child=null;do{var Pr=Si.sibling;Si.sibling=null,Si=Pr}while(Si!==null)}}ut=j}}if(j.subtreeFlags&2064&&ue!==null)ue.return=j,ut=ue;else e:for(;ut!==null;){if(j=ut,j.flags&2048)switch(j.tag){case 0:case 11:case 15:lo(9,j,j.return)}var Ce=j.sibling;if(Ce!==null){Ce.return=j.return,ut=Ce;break e}ut=j.return}}var ye=p.current;for(ut=ye;ut!==null;){ue=ut;var De=ue.child;if(ue.subtreeFlags&2064&&De!==null)De.return=ue,ut=De;else e:for(ue=ye;ut!==null;){if(pe=ut,pe.flags&2048)try{switch(pe.tag){case 0:case 11:case 15:lu(9,pe)}}catch(At){Ki(pe,pe.return,At)}if(pe===ue){ut=null;break e}var ft=pe.sibling;if(ft!==null){ft.return=pe.return,ut=ft;break e}ut=pe.return}}if(Zt=B,hs(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(ji,p)}catch{}I=!0}return I}finally{Pt=C,Bn.transition=g}}return!1}function M1(p,g,C){g=Jm(C,g),g=zw(p,g,1),ua(p,g),g=Ni(),p=Yd(p,1),p!==null&&(Rt(p,1,g),Zi(p,g))}function Ki(p,g,C){if(p.tag===3)M1(p,p,C);else for(;g!==null;){if(g.tag===3){M1(g,p,C);break}else if(g.tag===1){var I=g.stateNode;if(typeof g.type.getDerivedStateFromError=="function"||typeof I.componentDidCatch=="function"&&(ha===null||!ha.has(I))){p=Jm(C,p),p=Uw(g,p,1),ua(g,p),p=Ni(),g=Yd(g,1),g!==null&&(Rt(g,1,p),Zi(g,p));break}}g=g.return}}function CP(p,g,C){var I=p.pingCache;I!==null&&I.delete(g),g=Ni(),p.pingedLanes|=p.suspendedLanes&C,Yn===p&&(fi&C)===C&&($n===4||$n===3&&(fi&130023424)===fi&&500>sn()-pv?co(p,0):fv|=C),Zi(p,g)}function A1(p,g){g===0&&(p.mode&1?(g=_e,_e<<=1,!(_e&130023424)&&(_e=4194304)):g=1);var C=Ni();p=Yd(p,g),p!==null&&(Rt(p,g,C),Zi(p,C))}function EP(p){var g=p.memoizedState,C=0;g!==null&&(C=g.retryLane),A1(p,C)}function TP(p,g){var C=0;switch(p.tag){case 13:var I=p.stateNode,B=p.memoizedState;B!==null&&(C=B.retryLane);break;case 19:I=p.stateNode;break;default:throw Error(c(314))}I!==null&&I.delete(g),A1(p,C)}var C1;C1=function(p,g,C){if(p!==null)if(p.memoizedProps!==g.pendingProps||H.current)lr=!0;else{if(!(p.lanes&C)&&!(g.flags&128))return lr=!1,gP(p,g,C);lr=!!(p.flags&131072)}else lr=!1,Tn&&g.flags&1048576&&dw(g,md,g.index);switch(g.lanes=0,g.tag){case 2:var I=g.type;p!==null&&(p.alternate=null,g.alternate=null,g.flags|=2),p=g.pendingProps;var B=Y(g,U.current);hl(g,C),B=Ym(null,g,I,p,B,C);var j=jm();return g.flags|=1,typeof B=="object"&&B!==null&&typeof B.render=="function"&&B.$$typeof===void 0?(g.tag=1,g.memoizedState=null,g.updateQueue=null,q(I)?(j=!0,$(g)):j=!1,g.memoizedState=B.state!==null&&B.state!==void 0?B.state:null,Im(g),B.updater=pd,g.stateNode=B,B._reactInternals=g,Nm(g,I,p,C),g=ev(null,g,I,!0,j,C)):(g.tag=0,Tn&&j&&Fm(g),Di(null,g,B,C),g=g.child),g;case 16:I=g.elementType;e:{switch(p!==null&&(p.alternate=null,g.alternate=null,g.flags|=2),p=g.pendingProps,B=I._init,I=B(I._payload),g.type=I,B=g.tag=kP(I),p=Vr(I,p),B){case 0:g=Qm(null,g,I,p,C);break e;case 1:g=Kw(null,g,I,p,C);break e;case 11:g=Xw(null,g,I,p,C);break e;case 14:g=Yw(null,g,I,Vr(I.type,p),C);break e}throw Error(c(306,I,""))}return g;case 0:return I=g.type,B=g.pendingProps,B=g.elementType===I?B:Vr(I,B),Qm(p,g,I,B,C);case 1:return I=g.type,B=g.pendingProps,B=g.elementType===I?B:Vr(I,B),Kw(p,g,I,B,C);case 3:e:{if(Jw(g),p===null)throw Error(c(387));I=g.pendingProps,j=g.memoizedState,B=j.element,sw(p,g),fd(g,I,null,C);var ue=g.memoizedState;if(I=ue.element,je&&j.isDehydrated)if(j={element:I,isDehydrated:!1,cache:ue.cache,transitions:ue.transitions},g.updateQueue.baseState=j,g.memoizedState=j,g.flags&256){B=Error(c(423)),g=$w(p,g,I,C,B);break e}else if(I!==B){B=Error(c(424)),g=$w(p,g,I,C,B);break e}else for(je&&(or=cl(g.stateNode.containerInfo),ar=g,Tn=!0,Wr=null,Kc=!1),C=xw(g,null,I,C),g.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(pl(),I===B){g=Ns(p,g,C);break e}Di(p,g,I,C)}g=g.child}return g;case 5:return yw(g),p===null&&Um(g),I=g.type,B=g.pendingProps,j=p!==null?p.memoizedProps:null,ue=B.children,Ve(I,B)?ue=null:j!==null&&Ve(I,j)&&(g.flags|=32),Zw(p,g),Di(p,g,ue,C),g.child;case 6:return p===null&&Um(g),null;case 13:return Qw(p,g,C);case 4:return Hm(g,g.stateNode.containerInfo),I=g.pendingProps,p===null?g.child=gl(g,null,I,C):Di(p,g,I,C),g.child;case 11:return I=g.type,B=g.pendingProps,B=g.elementType===I?B:Vr(I,B),Xw(p,g,I,B,C);case 7:return Di(p,g,g.pendingProps,C),g.child;case 8:return Di(p,g,g.pendingProps.children,C),g.child;case 12:return Di(p,g,g.pendingProps.children,C),g.child;case 10:e:{if(I=g.type._context,B=g.pendingProps,j=g.memoizedProps,ue=B.value,rw(g,I,ue),j!==null)if(us(j.value,ue)){if(j.children===B.children&&!H.current){g=Ns(p,g,C);break e}}else for(j=g.child,j!==null&&(j.return=g);j!==null;){var pe=j.dependencies;if(pe!==null){ue=j.child;for(var Fe=pe.firstContext;Fe!==null;){if(Fe.context===I){if(j.tag===1){Fe=Rs(-1,C&-C),Fe.tag=2;var tt=j.updateQueue;if(tt!==null){tt=tt.shared;var wt=tt.pending;wt===null?Fe.next=Fe:(Fe.next=wt.next,wt.next=Fe),tt.pending=Fe}}j.lanes|=C,Fe=j.alternate,Fe!==null&&(Fe.lanes|=C),Lm(j.return,C,g),pe.lanes|=C;break}Fe=Fe.next}}else if(j.tag===10)ue=j.type===g.type?null:j.child;else if(j.tag===18){if(ue=j.return,ue===null)throw Error(c(341));ue.lanes|=C,pe=ue.alternate,pe!==null&&(pe.lanes|=C),Lm(ue,C,g),ue=j.sibling}else ue=j.child;if(ue!==null)ue.return=j;else for(ue=j;ue!==null;){if(ue===g){ue=null;break}if(j=ue.sibling,j!==null){j.return=ue.return,ue=j;break}ue=ue.return}j=ue}Di(p,g,B.children,C),g=g.child}return g;case 9:return B=g.type,I=g.pendingProps.children,hl(g,C),B=Sr(B),I=I(B),g.flags|=1,Di(p,g,I,C),g.child;case 14:return I=g.type,B=Vr(I,g.pendingProps),B=Vr(I.type,B),Yw(p,g,I,B,C);case 15:return jw(p,g,g.type,g.pendingProps,C);case 17:return I=g.type,B=g.pendingProps,B=g.elementType===I?B:Vr(I,B),p!==null&&(p.alternate=null,g.alternate=null,g.flags|=2),g.tag=1,q(I)?(p=!0,$(g)):p=!1,hl(g,C),uw(g,I,B),Nm(g,I,B,C),ev(null,g,I,!0,p,C);case 19:return i1(p,g,C);case 22:return qw(p,g,C)}throw Error(c(156,g.tag))};function E1(p,g){return hi(p,g)}function PP(p,g,C,I){this.tag=p,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=g,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=I,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tr(p,g,C,I){return new PP(p,g,C,I)}function Sv(p){return p=p.prototype,!(!p||!p.isReactComponent)}function kP(p){if(typeof p=="function")return Sv(p)?1:0;if(p!=null){if(p=p.$$typeof,p===z)return 11;if(p===R)return 14}return 2}function ga(p,g){var C=p.alternate;return C===null?(C=Tr(p.tag,g,p.key,p.mode),C.elementType=p.elementType,C.type=p.type,C.stateNode=p.stateNode,C.alternate=p,p.alternate=C):(C.pendingProps=g,C.type=p.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=p.flags&14680064,C.childLanes=p.childLanes,C.lanes=p.lanes,C.child=p.child,C.memoizedProps=p.memoizedProps,C.memoizedState=p.memoizedState,C.updateQueue=p.updateQueue,g=p.dependencies,C.dependencies=g===null?null:{lanes:g.lanes,firstContext:g.firstContext},C.sibling=p.sibling,C.index=p.index,C.ref=p.ref,C}function qd(p,g,C,I,B,j){var ue=2;if(I=p,typeof p=="function")Sv(p)&&(ue=1);else if(typeof p=="string")ue=5;else e:switch(p){case b:return fo(C.children,B,j,g);case S:ue=8,B|=8;break;case M:return p=Tr(12,C,g,B|2),p.elementType=M,p.lanes=j,p;case F:return p=Tr(13,C,g,B),p.elementType=F,p.lanes=j,p;case k:return p=Tr(19,C,g,B),p.elementType=k,p.lanes=j,p;case W:return Zd(C,B,j,g);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case P:ue=10;break e;case L:ue=9;break e;case z:ue=11;break e;case R:ue=14;break e;case O:ue=16,I=null;break e}throw Error(c(130,p==null?p:typeof p,""))}return g=Tr(ue,C,g,B),g.elementType=p,g.type=I,g.lanes=j,g}function fo(p,g,C,I){return p=Tr(7,p,I,g),p.lanes=C,p}function Zd(p,g,C,I){return p=Tr(22,p,I,g),p.elementType=W,p.lanes=C,p.stateNode={},p}function _v(p,g,C){return p=Tr(6,p,null,g),p.lanes=C,p}function Mv(p,g,C){return g=Tr(4,p.children!==null?p.children:[],p.key,g),g.lanes=C,g.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},g}function RP(p,g,C,I,B){this.tag=g,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Nt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ft(0),this.expirationTimes=Ft(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ft(0),this.identifierPrefix=I,this.onRecoverableError=B,je&&(this.mutableSourceEagerHydrationData=null)}function T1(p,g,C,I,B,j,ue,pe,Fe){return p=new RP(p,g,C,pe,Fe),g===1?(g=1,j===!0&&(g|=8)):g=0,j=Tr(3,null,null,g),p.current=j,j.stateNode=p,j.memoizedState={element:I,isDehydrated:C,cache:null,transitions:null},Im(j),p}function P1(p){if(!p)return N;p=p._reactInternals;e:{if(ee(p)!==p||p.tag!==1)throw Error(c(170));var g=p;do{switch(g.tag){case 3:g=g.stateNode.context;break e;case 1:if(q(g.type)){g=g.stateNode.__reactInternalMemoizedMergedChildContext;break e}}g=g.return}while(g!==null);throw Error(c(171))}if(p.tag===1){var C=p.type;if(q(C))return V(p,C,g)}return g}function k1(p){var g=p._reactInternals;if(g===void 0)throw typeof p.render=="function"?Error(c(188)):(p=Object.keys(p).join(","),Error(c(268,p)));return p=ge(g),p===null?null:p.stateNode}function R1(p,g){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var C=p.retryLane;p.retryLane=C!==0&&C<g?C:g}}function Av(p,g){R1(p,g),(p=p.alternate)&&R1(p,g)}function LP(p){return p=ge(p),p===null?null:p.stateNode}function IP(){return null}return t.attemptContinuousHydration=function(p){if(p.tag===13){var g=Ni();Er(p,134217728,g),Av(p,134217728)}},t.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var g=Ni(),C=fa(p);Er(p,C,g),Av(p,C)}},t.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var g=p.stateNode;if(g.current.memoizedState.isDehydrated){var C=Ne(g.pendingLanes);C!==0&&(vn(g,C|1),Zi(g,sn()),!(Zt&6)&&(wl(),hs()))}break;case 13:var I=Ni();y1(function(){return Er(p,1,I)}),Av(p,1)}},t.batchedUpdates=function(p,g){var C=Zt;Zt|=1;try{return p(g)}finally{Zt=C,Zt===0&&(wl(),ld&&hs())}},t.createComponentSelector=function(p){return{$$typeof:Dd,value:p}},t.createContainer=function(p,g,C,I,B,j,ue){return T1(p,g,!1,null,C,I,B,j,ue)},t.createHasPseudoClassSelector=function(p){return{$$typeof:Nd,value:p}},t.createHydrationContainer=function(p,g,C,I,B,j,ue,pe,Fe){return p=T1(C,I,!0,p,B,j,ue,pe,Fe),p.context=P1(null),C=p.current,I=Ni(),B=fa(C),j=Rs(I,B),j.callback=g??null,ua(C,j),p.current.lanes=B,Rt(p,B,I),Zi(p,I),p},t.createPortal=function(p,g,C){var I=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:I==null?null:""+I,children:p,containerInfo:g,implementation:C}},t.createRoleSelector=function(p){return{$$typeof:Fd,value:p}},t.createTestNameSelector=function(p){return{$$typeof:Od,value:p}},t.createTextSelector=function(p){return{$$typeof:zd,value:p}},t.deferredUpdates=function(p){var g=Pt,C=Bn.transition;try{return Bn.transition=null,Pt=16,p()}finally{Pt=g,Bn.transition=C}},t.discreteUpdates=function(p,g,C,I,B){var j=Pt,ue=Bn.transition;try{return Bn.transition=null,Pt=1,p(g,C,I,B)}finally{Pt=j,Bn.transition=ue,Zt===0&&wl()}},t.findAllNodes=hv,t.findBoundingRects=function(p,g){if(!he)throw Error(c(363));g=hv(p,g),p=[];for(var C=0;C<g.length;C++)p.push(Pe(g[C]));for(g=p.length-1;0<g;g--){C=p[g];for(var I=C.x,B=I+C.width,j=C.y,ue=j+C.height,pe=g-1;0<=pe;pe--)if(g!==pe){var Fe=p[pe],tt=Fe.x,wt=tt+Fe.width,Ht=Fe.y,It=Ht+Fe.height;if(I>=tt&&j>=Ht&&B<=wt&&ue<=It){p.splice(g,1);break}else if(I!==tt||C.width!==Fe.width||It<j||Ht>ue){if(!(j!==Ht||C.height!==Fe.height||wt<I||tt>B)){tt>I&&(Fe.width+=tt-I,Fe.x=I),wt<B&&(Fe.width=B-tt),p.splice(g,1);break}}else{Ht>j&&(Fe.height+=Ht-j,Fe.y=j),It<ue&&(Fe.height=ue-Ht),p.splice(g,1);break}}}return p},t.findHostInstance=k1,t.findHostInstanceWithNoPortals=function(p){return p=se(p),p=p!==null?Re(p):null,p===null?null:p.stateNode},t.findHostInstanceWithWarning=function(p){return k1(p)},t.flushControlled=function(p){var g=Zt;Zt|=1;var C=Bn.transition,I=Pt;try{Bn.transition=null,Pt=1,p()}finally{Pt=I,Bn.transition=C,Zt=g,Zt===0&&(wl(),hs())}},t.flushPassiveEffects=ho,t.flushSync=y1,t.focusWithin=function(p,g){if(!he)throw Error(c(363));for(p=lv(p),g=m1(p,g),g=Array.from(g),p=0;p<g.length;){var C=g[p++];if(!Ge(C)){if(C.tag===5&&_t(C.stateNode))return!0;for(C=C.child;C!==null;)g.push(C),C=C.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Pt},t.getFindAllNodesFailureDescription=function(p,g){if(!he)throw Error(c(363));var C=0,I=[];p=[lv(p),0];for(var B=0;B<p.length;){var j=p[B++],ue=p[B++],pe=g[ue];if((j.tag!==5||!Ge(j))&&(cv(j,pe)&&(I.push(uv(pe)),ue++,ue>C&&(C=ue)),ue<g.length))for(j=j.child;j!==null;)p.push(j,ue),j=j.sibling}if(C<g.length){for(p=[];C<g.length;C++)p.push(uv(g[C]));return`findAllNodes was able to match part of the selector:
  `+(I.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},t.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return Ae(p.child.stateNode);default:return p.child.stateNode}},t.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:LP,findFiberByHostInstance:p.findFiberByHostInstance||IP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var g=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(g.isDisabled||!g.supportsFiber)p=!0;else{try{ji=g.inject(p),wr=g}catch{}p=!!g.checkDCE}}return p},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(p,g,C,I){if(!he)throw Error(c(363));p=hv(p,g);var B=at(p,C,I).disconnect;return{disconnect:function(){B()}}},t.registerMutableSourceForHydration=function(p,g){var C=g._getVersion;C=C(g._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[g,C]:p.mutableSourceEagerHydrationData.push(g,C)},t.runWithPriority=function(p,g){var C=Pt;try{return Pt=p,g()}finally{Pt=C}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(p,g,C,I){var B=g.current,j=Ni(),ue=fa(B);return C=P1(C),g.context===null?g.context=C:g.pendingContext=C,g=Rs(j,ue),g.payload={element:p},I=I===void 0?null:I,I!==null&&(g.callback=I),ua(B,g),p=Er(B,ue,j),p!==null&&dd(p,B,ue),ue},t};o2.exports=dU;var fU=o2.exports;const pU=Rg(fU),gU=n=>typeof n=="object"&&typeof n.then=="function",zo=[];function u2(n,e,t=(i,s)=>i===s){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let s=0;s<i;s++)if(!t(n[s],e[s]))return!1;return!0}function h2(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const o of zo)if(u2(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return i.lifespan&&i.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,i.lifespan)),o.response;if(!t)throw o.promise}const s={keys:e,equal:i.equal,remove:()=>{const o=zo.indexOf(s);o!==-1&&zo.splice(o,1)},promise:(gU(n)?n:n(...e)).then(o=>{s.response=o,i.lifespan&&i.lifespan>0&&(s.timeout=setTimeout(s.remove,i.lifespan))}).catch(o=>s.error=o)};if(zo.push(s),!t)throw s.promise}const mU=(n,e,t)=>h2(n,e,!1,t),vU=(n,e,t)=>void h2(n,e,!0,t),xU=n=>{if(n===void 0||n.length===0)zo.splice(0,zo.length);else{const e=zo.find(t=>u2(n,t.keys,t.equal));e&&e.remove()}},Jb={},yU=n=>void Object.assign(Jb,n);function bU(n,e){function t(b,{args:S=[],attach:M,...P},L){let z=`${b[0].toUpperCase()}${b.slice(1)}`,F;if(b==="primitive"){if(P.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const k=P.object;F=jl(k,{type:b,root:L,attach:M,primitive:!0})}else{const k=Jb[z];if(!k)throw new Error(`R3F: ${z} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(S))throw new Error("R3F: The args prop must be an array!");F=jl(new k(...S),{type:b,root:L,attach:M,memoizedProps:{args:S}})}return F.__r3f.attach===void 0&&(F instanceof Bt?F.__r3f.attach="geometry":F instanceof vi&&(F.__r3f.attach="material")),z!=="inject"&&Bx(F,P),F}function i(b,S){let M=!1;if(S){var P,L;(P=S.__r3f)!=null&&P.attach?Ux(b,S,S.__r3f.attach):S.isObject3D&&b.isObject3D&&(b.add(S),M=!0),M||(L=b.__r3f)==null||L.objects.push(S),S.__r3f||jl(S,{}),S.__r3f.parent=b,oy(S),ql(S)}}function s(b,S,M){let P=!1;if(S){var L,z;if((L=S.__r3f)!=null&&L.attach)Ux(b,S,S.__r3f.attach);else if(S.isObject3D&&b.isObject3D){S.parent=b,S.dispatchEvent({type:"added"}),b.dispatchEvent({type:"childadded",child:S});const F=b.children.filter(R=>R!==S),k=F.indexOf(M);b.children=[...F.slice(0,k),S,...F.slice(k)],P=!0}P||(z=b.__r3f)==null||z.objects.push(S),S.__r3f||jl(S,{}),S.__r3f.parent=b,oy(S),ql(S)}}function o(b,S,M=!1){b&&[...b].forEach(P=>c(S,P,M))}function c(b,S,M){if(S){var P,L,z;if(S.__r3f&&(S.__r3f.parent=null),(P=b.__r3f)!=null&&P.objects&&(b.__r3f.objects=b.__r3f.objects.filter(W=>W!==S)),(L=S.__r3f)!=null&&L.attach)AM(b,S,S.__r3f.attach);else if(S.isObject3D&&b.isObject3D){var F;b.remove(S),(F=S.__r3f)!=null&&F.root&&PU(_p(S),S)}const R=(z=S.__r3f)==null?void 0:z.primitive,O=!R&&(M===void 0?S.dispose!==null:M);if(!R){var k;o((k=S.__r3f)==null?void 0:k.objects,S,O),o(S.children,S,O)}if(delete S.__r3f,O&&S.dispose&&S.type!=="Scene"){const W=()=>{try{S.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?sy.unstable_scheduleCallback(sy.unstable_IdlePriority,W):W()}ql(b)}}function h(b,S,M,P){var L;const z=(L=b.__r3f)==null?void 0:L.parent;if(!z)return;const F=t(S,M,b.__r3f.root);if(b.children){for(const k of b.children)k.__r3f&&i(F,k);b.children=b.children.filter(k=>!k.__r3f)}b.__r3f.objects.forEach(k=>i(F,k)),b.__r3f.objects=[],b.__r3f.autoRemovedBeforeAppend||c(z,b),F.parent&&(F.__r3f.autoRemovedBeforeAppend=!0),i(z,F),F.raycast&&F.__r3f.eventCount&&_p(F).getState().internal.interaction.push(F),[P,P.alternate].forEach(k=>{k!==null&&(k.stateNode=F,k.ref&&(typeof k.ref=="function"?k.ref(F):k.ref.current=F))})}const m=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:pU({createInstance:t,removeChild:c,appendChild:i,appendInitialChild:i,insertBefore:s,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(b,S)=>{if(!S)return;const M=b.getState().scene;M.__r3f&&(M.__r3f.root=b,i(M,S))},removeChildFromContainer:(b,S)=>{S&&c(b.getState().scene,S)},insertInContainerBefore:(b,S,M)=>{if(!S||!M)return;const P=b.getState().scene;P.__r3f&&s(P,S,M)},getRootHostContext:()=>null,getChildHostContext:b=>b,finalizeInitialChildren(b){var S;return!!((S=b==null?void 0:b.__r3f)!=null?S:{}).handlers},prepareUpdate(b,S,M,P){var L;if(((L=b==null?void 0:b.__r3f)!=null?L:{}).primitive&&P.object&&P.object!==b)return[!0];{const{args:F=[],children:k,...R}=P,{args:O=[],children:W,...Z}=M;if(!Array.isArray(F))throw new Error("R3F: the args prop must be an array!");if(F.some((te,re)=>te!==O[re]))return[!0];const J=x2(b,R,Z,!0);return J.changes.length?[!1,J]:null}},commitUpdate(b,[S,M],P,L,z,F){S?h(b,P,z,F):Bx(b,M)},commitMount(b,S,M,P){var L;const z=(L=b.__r3f)!=null?L:{};b.raycast&&z.handlers&&z.eventCount&&_p(b).getState().internal.interaction.push(b)},getPublicInstance:b=>b,prepareForCommit:()=>null,preparePortalMount:b=>jl(b.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(b){var S;const{attach:M,parent:P}=(S=b.__r3f)!=null?S:{};M&&P&&AM(P,b,M),b.isObject3D&&(b.visible=!1),ql(b)},unhideInstance(b,S){var M;const{attach:P,parent:L}=(M=b.__r3f)!=null?M:{};P&&L&&Ux(L,b,P),(b.isObject3D&&S.visible==null||S.visible)&&(b.visible=!0),ql(b)},createTextInstance:m,hideTextInstance:m,unhideTextInstance:m,getCurrentEventPriority:()=>e?e():hc.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Sn.fun(performance.now)?performance.now:Sn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Sn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Sn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Bx}}var wM,SM;const zx=n=>"colorSpace"in n||"outputColorSpace"in n,d2=()=>{var n;return(n=Jb.ColorManagement)!=null?n:null},f2=n=>n&&n.isOrthographicCamera,wU=n=>n&&n.hasOwnProperty("current"),sd=typeof window<"u"&&((wM=window.document)!=null&&wM.createElement||((SM=window.navigator)==null?void 0:SM.product)==="ReactNative")?dt.useLayoutEffect:dt.useEffect;function p2(n){const e=dt.useRef(n);return sd(()=>void(e.current=n),[n]),e}function SU({set:n}){return sd(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class g2 extends dt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}g2.getDerivedStateFromError=()=>({error:!0});const m2="__default",_M=new Map,_U=n=>n&&!!n.memoized&&!!n.changes;function v2(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Iu=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function _p(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Sn={obj:n=>n===Object(n)&&!Sn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:s=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Sn.str(n)||Sn.num(n)||Sn.boo(n))return n===e;const o=Sn.obj(n);if(o&&i==="reference")return n===e;const c=Sn.arr(n);if(c&&t==="reference")return n===e;if((c||o)&&n===e)return!0;let h;for(h in n)if(!(h in e))return!1;if(o&&t==="shallow"&&i==="shallow"){for(h in s?e:n)if(!Sn.equ(n[h],e[h],{strict:s,objects:"reference"}))return!1}else for(h in s?e:n)if(n[h]!==e[h])return!1;if(Sn.und(h)){if(c&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function MU(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function AU(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function jl(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function ay(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),s=i.pop();return t=i.reduce((o,c)=>o[c],n),{target:t,key:s}}else return{target:t,key:e}}const MM=/-\d+$/;function Ux(n,e,t){if(Sn.str(t)){if(MM.test(t)){const o=t.replace(MM,""),{target:c,key:h}=ay(n,o);Array.isArray(c[h])||(c[h]=[])}const{target:i,key:s}=ay(n,t);e.__r3f.previousAttach=i[s],i[s]=e}else e.__r3f.previousAttach=t(n,e)}function AM(n,e,t){var i,s;if(Sn.str(t)){const{target:o,key:c}=ay(n,t),h=e.__r3f.previousAttach;h===void 0?delete o[c]:o[c]=h}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(s=e.__r3f)==null||delete s.previousAttach}function x2(n,{children:e,key:t,ref:i,...s},{children:o,key:c,ref:h,...m}={},x=!1){const b=n.__r3f,S=Object.entries(s),M=[];if(x){const L=Object.keys(m);for(let z=0;z<L.length;z++)s.hasOwnProperty(L[z])||S.unshift([L[z],m2+"remove"])}S.forEach(([L,z])=>{var F;if((F=n.__r3f)!=null&&F.primitive&&L==="object"||Sn.equ(z,m[L]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(L))return M.push([L,z,!0,[]]);let k=[];L.includes("-")&&(k=L.split("-")),M.push([L,z,!1,k]);for(const R in s){const O=s[R];R.startsWith(`${L}-`)&&M.push([R,O,!1,R.split("-")])}});const P={...s};return b!=null&&b.memoizedProps&&b!=null&&b.memoizedProps.args&&(P.args=b.memoizedProps.args),b!=null&&b.memoizedProps&&b!=null&&b.memoizedProps.attach&&(P.attach=b.memoizedProps.attach),{memoized:P,changes:M}}const CU=typeof process<"u"&&!1;function Bx(n,e){var t;const i=n.__r3f,s=i==null?void 0:i.root,o=s==null||s.getState==null?void 0:s.getState(),{memoized:c,changes:h}=_U(e)?e:x2(n,e),m=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=c);for(let b=0;b<h.length;b++){let[S,M,P,L]=h[b];if(zx(n)){const R="srgb",O="srgb-linear";S==="encoding"?(S="colorSpace",M=M===3001?R:O):S==="outputEncoding"&&(S="outputColorSpace",M=M===3001?R:O)}let z=n,F=z[S];if(L.length&&(F=L.reduce((k,R)=>k[R],n),!(F&&F.set))){const[k,...R]=L.reverse();z=R.reverse().reduce((O,W)=>O[W],n),S=k}if(M===m2+"remove")if(z.constructor){let k=_M.get(z.constructor);k||(k=new z.constructor,_M.set(z.constructor,k)),M=k[S]}else M=0;if(P&&i)M?i.handlers[S]=M:delete i.handlers[S],i.eventCount=Object.keys(i.handlers).length;else if(F&&F.set&&(F.copy||F instanceof Go)){if(Array.isArray(M))F.fromArray?F.fromArray(M):F.set(...M);else if(F.copy&&M&&M.constructor&&(CU?F.constructor.name===M.constructor.name:F.constructor===M.constructor))F.copy(M);else if(M!==void 0){const k=F instanceof ot;!k&&F.setScalar?F.setScalar(M):F instanceof Go&&M instanceof Go?F.mask=M.mask:F.set(M),!d2()&&o&&!o.linear&&k&&F.convertSRGBToLinear()}}else if(z[S]=M,z[S]instanceof En&&z[S].format===Pi&&z[S].type===rs&&o){const k=z[S];zx(k)&&zx(o.gl)?k.colorSpace=o.gl.outputColorSpace:k.encoding=o.gl.outputEncoding}ql(n)}if(i&&i.parent&&n.raycast&&m!==i.eventCount){const b=_p(n).getState().internal,S=b.interaction.indexOf(n);S>-1&&b.interaction.splice(S,1),i.eventCount&&b.interaction.push(n)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(t=n.__r3f)!=null&&t.parent&&oy(n),n}function ql(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function oy(n){n.onUpdate==null||n.onUpdate(n)}function EU(n,e){n.manual||(f2(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function ap(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function TU(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return hc.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return hc.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return hc.ContinuousEventPriority;default:return hc.DefaultEventPriority}}function y2(n,e,t,i){const s=t.get(e);s&&(t.delete(e),t.size===0&&(n.delete(i),s.target.releasePointerCapture(i)))}function PU(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,s)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(s)}),t.capturedMap.forEach((i,s)=>{y2(t.capturedMap,e,i,s)})}function kU(n){function e(m){const{internal:x}=n.getState(),b=m.offsetX-x.initialClick[0],S=m.offsetY-x.initialClick[1];return Math.round(Math.sqrt(b*b+S*S))}function t(m){return m.filter(x=>["Move","Over","Enter","Out","Leave"].some(b=>{var S;return(S=x.__r3f)==null?void 0:S.handlers["onPointer"+b]}))}function i(m,x){const b=n.getState(),S=new Set,M=[],P=x?x(b.internal.interaction):b.internal.interaction;for(let k=0;k<P.length;k++){const R=Iu(P[k]);R&&(R.raycaster.camera=void 0)}b.previousRoot||b.events.compute==null||b.events.compute(m,b);function L(k){const R=Iu(k);if(!R||!R.events.enabled||R.raycaster.camera===null)return[];if(R.raycaster.camera===void 0){var O;R.events.compute==null||R.events.compute(m,R,(O=R.previousRoot)==null?void 0:O.getState()),R.raycaster.camera===void 0&&(R.raycaster.camera=null)}return R.raycaster.camera?R.raycaster.intersectObject(k,!0):[]}let z=P.flatMap(L).sort((k,R)=>{const O=Iu(k.object),W=Iu(R.object);return!O||!W?k.distance-R.distance:W.events.priority-O.events.priority||k.distance-R.distance}).filter(k=>{const R=ap(k);return S.has(R)?!1:(S.add(R),!0)});b.events.filter&&(z=b.events.filter(z,b));for(const k of z){let R=k.object;for(;R;){var F;(F=R.__r3f)!=null&&F.eventCount&&M.push({...k,eventObject:R}),R=R.parent}}if("pointerId"in m&&b.internal.capturedMap.has(m.pointerId))for(let k of b.internal.capturedMap.get(m.pointerId).values())S.has(ap(k.intersection))||M.push(k.intersection);return M}function s(m,x,b,S){const M=n.getState();if(m.length){const P={stopped:!1};for(const L of m){const z=Iu(L.object)||M,{raycaster:F,pointer:k,camera:R,internal:O}=z,W=new le(k.x,k.y,0).unproject(R),Z=K=>{var se,ge;return(se=(ge=O.capturedMap.get(K))==null?void 0:ge.has(L.eventObject))!=null?se:!1},J=K=>{const se={intersection:L,target:x.target};O.capturedMap.has(K)?O.capturedMap.get(K).set(L.eventObject,se):O.capturedMap.set(K,new Map([[L.eventObject,se]])),x.target.setPointerCapture(K)},te=K=>{const se=O.capturedMap.get(K);se&&y2(O.capturedMap,L.eventObject,se,K)};let re={};for(let K in x){let se=x[K];typeof se!="function"&&(re[K]=se)}let ee={...L,...re,pointer:k,intersections:m,stopped:P.stopped,delta:b,unprojectedPoint:W,ray:F.ray,camera:R,stopPropagation(){const K="pointerId"in x&&O.capturedMap.get(x.pointerId);if((!K||K.has(L.eventObject))&&(ee.stopped=P.stopped=!0,O.hovered.size&&Array.from(O.hovered.values()).find(se=>se.eventObject===L.eventObject))){const se=m.slice(0,m.indexOf(L));o([...se,L])}},target:{hasPointerCapture:Z,setPointerCapture:J,releasePointerCapture:te},currentTarget:{hasPointerCapture:Z,setPointerCapture:J,releasePointerCapture:te},nativeEvent:x};if(S(ee),P.stopped===!0)break}}return m}function o(m){const{internal:x}=n.getState();for(const b of x.hovered.values())if(!m.length||!m.find(S=>S.object===b.object&&S.index===b.index&&S.instanceId===b.instanceId)){const M=b.eventObject.__r3f,P=M==null?void 0:M.handlers;if(x.hovered.delete(ap(b)),M!=null&&M.eventCount){const L={...b,intersections:m};P.onPointerOut==null||P.onPointerOut(L),P.onPointerLeave==null||P.onPointerLeave(L)}}}function c(m,x){for(let b=0;b<x.length;b++){const S=x[b].__r3f;S==null||S.handlers.onPointerMissed==null||S.handlers.onPointerMissed(m)}}function h(m){switch(m){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return x=>{const{internal:b}=n.getState();"pointerId"in x&&b.capturedMap.has(x.pointerId)&&requestAnimationFrame(()=>{b.capturedMap.has(x.pointerId)&&(b.capturedMap.delete(x.pointerId),o([]))})}}return function(b){const{onPointerMissed:S,internal:M}=n.getState();M.lastEvent.current=b;const P=m==="onPointerMove",L=m==="onClick"||m==="onContextMenu"||m==="onDoubleClick",F=i(b,P?t:void 0),k=L?e(b):0;m==="onPointerDown"&&(M.initialClick=[b.offsetX,b.offsetY],M.initialHits=F.map(O=>O.eventObject)),L&&!F.length&&k<=2&&(c(b,M.interaction),S&&S(b)),P&&o(F);function R(O){const W=O.eventObject,Z=W.__r3f,J=Z==null?void 0:Z.handlers;if(Z!=null&&Z.eventCount)if(P){if(J.onPointerOver||J.onPointerEnter||J.onPointerOut||J.onPointerLeave){const te=ap(O),re=M.hovered.get(te);re?re.stopped&&O.stopPropagation():(M.hovered.set(te,O),J.onPointerOver==null||J.onPointerOver(O),J.onPointerEnter==null||J.onPointerEnter(O))}J.onPointerMove==null||J.onPointerMove(O)}else{const te=J[m];te?(!L||M.initialHits.includes(W))&&(c(b,M.interaction.filter(re=>!M.initialHits.includes(re))),te(O)):L&&M.initialHits.includes(W)&&c(b,M.interaction.filter(re=>!M.initialHits.includes(re)))}}s(F,b,k,R)}}return{handlePointer:h}}const b2=n=>!!(n!=null&&n.render),w2=dt.createContext(null),RU=(n,e)=>{const t=hU((h,m)=>{const x=new le,b=new le,S=new le;function M(k=m().camera,R=b,O=m().size){const{width:W,height:Z,top:J,left:te}=O,re=W/Z;R instanceof le?S.copy(R):S.set(...R);const ee=k.getWorldPosition(x).distanceTo(S);if(f2(k))return{width:W/k.zoom,height:Z/k.zoom,top:J,left:te,factor:1,distance:ee,aspect:re};{const K=k.fov*Math.PI/180,se=2*Math.tan(K/2)*ee,ge=se*(W/Z);return{width:ge,height:se,top:J,left:te,factor:W/ge,distance:ee,aspect:re}}}let P;const L=k=>h(R=>({performance:{...R.performance,current:k}})),z=new We;return{set:h,get:m,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(k=1)=>n(m(),k),advance:(k,R)=>e(k,R,m()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new jb,pointer:z,mouse:z,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const k=m();P&&clearTimeout(P),k.performance.current!==k.performance.min&&L(k.performance.min),P=setTimeout(()=>L(m().performance.max),k.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:M},setEvents:k=>h(R=>({...R,events:{...R.events,...k}})),setSize:(k,R,O,W,Z)=>{const J=m().camera,te={width:k,height:R,top:W||0,left:Z||0,updateStyle:O};h(re=>({size:te,viewport:{...re.viewport,...M(J,b,te)}}))},setDpr:k=>h(R=>{const O=v2(k);return{viewport:{...R.viewport,dpr:O,initialDpr:R.viewport.initialDpr||O}}}),setFrameloop:(k="always")=>{const R=m().clock;R.stop(),R.elapsedTime=0,k!=="never"&&(R.start(),R.elapsedTime=0),h(()=>({frameloop:k}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:dt.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(k,R,O)=>{const W=m().internal;return W.priority=W.priority+(R>0?1:0),W.subscribers.push({ref:k,priority:R,store:O}),W.subscribers=W.subscribers.sort((Z,J)=>Z.priority-J.priority),()=>{const Z=m().internal;Z!=null&&Z.subscribers&&(Z.priority=Z.priority-(R>0?1:0),Z.subscribers=Z.subscribers.filter(J=>J.ref!==k))}}}}}),i=t.getState();let s=i.size,o=i.viewport.dpr,c=i.camera;return t.subscribe(()=>{const{camera:h,size:m,viewport:x,gl:b,set:S}=t.getState();if(m.width!==s.width||m.height!==s.height||x.dpr!==o){var M;s=m,o=x.dpr,EU(h,m),b.setPixelRatio(x.dpr);const P=(M=m.updateStyle)!=null?M:typeof HTMLCanvasElement<"u"&&b.domElement instanceof HTMLCanvasElement;b.setSize(m.width,m.height,P)}h!==c&&(c=h,S(P=>({viewport:{...P.viewport,...P.viewport.getCurrentViewport(h)}})))}),t.subscribe(h=>n(h)),t};let op,LU=new Set,IU=new Set,DU=new Set;function Hx(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Du(n,e){switch(n){case"before":return Hx(LU,e);case"after":return Hx(IU,e);case"tail":return Hx(DU,e)}}let Vx,Wx;function Gx(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Vx=e.internal.subscribers,op=0;op<Vx.length;op++)Wx=Vx[op],Wx.ref.current(Wx.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function NU(n){let e=!1,t=!1,i,s,o;function c(x){s=requestAnimationFrame(c),e=!0,i=0,Du("before",x),t=!0;for(const S of n.values()){var b;o=S.store.getState(),o.internal.active&&(o.frameloop==="always"||o.internal.frames>0)&&!((b=o.gl.xr)!=null&&b.isPresenting)&&(i+=Gx(x,o))}if(t=!1,Du("after",x),i===0)return Du("tail",x),e=!1,cancelAnimationFrame(s)}function h(x,b=1){var S;if(!x)return n.forEach(M=>h(M.store.getState(),b));(S=x.gl.xr)!=null&&S.isPresenting||!x.internal.active||x.frameloop==="never"||(b>1?x.internal.frames=Math.min(60,x.internal.frames+b):t?x.internal.frames=2:x.internal.frames=1,e||(e=!0,requestAnimationFrame(c)))}function m(x,b=!0,S,M){if(b&&Du("before",x),S)Gx(x,S,M);else for(const P of n.values())Gx(x,P.store.getState());b&&Du("after",x)}return{loop:c,invalidate:h,advance:m}}function FU(){const n=dt.useContext(w2);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function OU(n,e=0){const t=FU(),i=t.getState().internal.subscribe,s=p2(n);return sd(()=>i(s,e,t),[e,i,t]),null}const CM=new WeakMap;function S2(n,e){return function(t,...i){let s=CM.get(t);return s||(s=new t,CM.set(t,s)),n&&n(s),Promise.all(i.map(o=>new Promise((c,h)=>s.load(o,m=>{m.scene&&Object.assign(m,MU(m.scene)),c(m)},e,m=>h(new Error(`Could not load ${o}: ${m==null?void 0:m.message}`))))))}}function ad(n,e,t,i){const s=Array.isArray(e)?e:[e],o=mU(S2(t,i),[n,...s],{equal:Sn.equ});return Array.isArray(e)?o:o[0]}ad.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return vU(S2(t),[n,...i])};ad.clear=function(n,e){const t=Array.isArray(e)?e:[e];return xU([n,...t])};const Dc=new Map,{invalidate:EM,advance:TM}=NU(Dc),{reconciler:Pg,applyProps:Gl}=bU(Dc,TU),Xl={objects:"shallow",strict:!1},zU=(n,e)=>{const t=typeof n=="function"?n(e):n;return b2(t)?t:new mT({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function UU(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:s,top:o,left:c,updateStyle:h=t}=e;return{width:i,height:s,top:o,left:c,updateStyle:h}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:s,top:o,left:c}=n.parentElement.getBoundingClientRect();return{width:i,height:s,top:o,left:c,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function BU(n){const e=Dc.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const s=typeof reportError=="function"?reportError:console.error,o=i||RU(EM,TM),c=t||Pg.createContainer(o,hc.ConcurrentRoot,null,!1,null,"",s,null);e||Dc.set(n,{fiber:c,store:o});let h,m=!1,x;return{configure(b={}){let{gl:S,size:M,scene:P,events:L,onCreated:z,shadows:F=!1,linear:k=!1,flat:R=!1,legacy:O=!1,orthographic:W=!1,frameloop:Z="always",dpr:J=[1,2],performance:te,raycaster:re,camera:ee,onPointerMissed:K}=b,se=o.getState(),ge=se.gl;se.gl||se.set({gl:ge=zU(S,n)});let xe=se.raycaster;xe||se.set({raycaster:xe=new r2});const{params:Re,...Le}=re||{};if(Sn.equ(Le,xe,Xl)||Gl(xe,{...Le}),Sn.equ(Re,xe.params,Xl)||Gl(xe,{params:{...xe.params,...Re}}),!se.camera||se.camera===x&&!Sn.equ(x,ee,Xl)){x=ee;const be=ee instanceof Jh,Ie=be?ee:W?new Wc(0,0,0,0,.1,1e3):new Zn(75,0,.1,1e3);be||(Ie.position.z=5,ee&&(Gl(Ie,ee),("aspect"in ee||"left"in ee||"right"in ee||"bottom"in ee||"top"in ee)&&(Ie.manual=!0,Ie.updateProjectionMatrix())),!se.camera&&!(ee!=null&&ee.rotation)&&Ie.lookAt(0,0,0)),se.set({camera:Ie}),xe.camera=Ie}if(!se.scene){let be;P instanceof _g?be=P:(be=new _g,P&&Gl(be,P)),se.set({scene:jl(be)})}if(!se.xr){var Ae;const be=(rt,Te)=>{const Ve=o.getState();Ve.frameloop!=="never"&&TM(rt,!0,Ve,Te)},Ie=()=>{const rt=o.getState();rt.gl.xr.enabled=rt.gl.xr.isPresenting,rt.gl.xr.setAnimationLoop(rt.gl.xr.isPresenting?be:null),rt.gl.xr.isPresenting||EM(rt)},Ke={connect(){const rt=o.getState().gl;rt.xr.addEventListener("sessionstart",Ie),rt.xr.addEventListener("sessionend",Ie)},disconnect(){const rt=o.getState().gl;rt.xr.removeEventListener("sessionstart",Ie),rt.xr.removeEventListener("sessionend",Ie)}};typeof((Ae=ge.xr)==null?void 0:Ae.addEventListener)=="function"&&Ke.connect(),se.set({xr:Ke})}if(ge.shadowMap){const be=ge.shadowMap.enabled,Ie=ge.shadowMap.type;if(ge.shadowMap.enabled=!!F,Sn.boo(F))ge.shadowMap.type=Ju;else if(Sn.str(F)){var ze;const Ke={basic:aE,percentage:Zg,soft:Ju,variance:Kr};ge.shadowMap.type=(ze=Ke[F])!=null?ze:Ju}else Sn.obj(F)&&Object.assign(ge.shadowMap,F);(be!==ge.shadowMap.enabled||Ie!==ge.shadowMap.type)&&(ge.shadowMap.needsUpdate=!0)}const ce=d2();ce&&("enabled"in ce?ce.enabled=!O:"legacyMode"in ce&&(ce.legacyMode=O)),m||Gl(ge,{outputEncoding:k?3e3:3001,toneMapping:R?Ms:ab}),se.legacy!==O&&se.set(()=>({legacy:O})),se.linear!==k&&se.set(()=>({linear:k})),se.flat!==R&&se.set(()=>({flat:R})),S&&!Sn.fun(S)&&!b2(S)&&!Sn.equ(S,ge,Xl)&&Gl(ge,S),L&&!se.events.handlers&&se.set({events:L(o)});const we=UU(n,M);return Sn.equ(we,se.size,Xl)||se.setSize(we.width,we.height,we.updateStyle,we.top,we.left),J&&se.viewport.dpr!==v2(J)&&se.setDpr(J),se.frameloop!==Z&&se.setFrameloop(Z),se.onPointerMissed||se.set({onPointerMissed:K}),te&&!Sn.equ(te,se.performance,Xl)&&se.set(be=>({performance:{...be.performance,...te}})),h=z,m=!0,this},render(b){return m||this.configure(),Pg.updateContainer(Kt.jsx(HU,{store:o,children:b,onCreated:h,rootElement:n}),c,null,()=>{}),o},unmount(){_2(n)}}}function HU({store:n,children:e,onCreated:t,rootElement:i}){return sd(()=>{const s=n.getState();s.set(o=>({internal:{...o.internal,active:!0}})),t&&t(s),n.getState().events.connected||s.events.connect==null||s.events.connect(i)},[]),Kt.jsx(w2.Provider,{value:n,children:e})}function _2(n,e){const t=Dc.get(n),i=t==null?void 0:t.fiber;if(i){const s=t==null?void 0:t.store.getState();s&&(s.internal.active=!1),Pg.updateContainer(null,i,null,()=>{s&&setTimeout(()=>{try{var o,c,h,m;s.events.disconnect==null||s.events.disconnect(),(o=s.gl)==null||(c=o.renderLists)==null||c.dispose==null||c.dispose(),(h=s.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(m=s.gl)!=null&&m.xr&&s.xr.disconnect(),AU(s),Dc.delete(n)}catch{}},500)})}}Pg.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:dt.version});function ly(n,e,t){var i,s,o,c,h;e==null&&(e=100);function m(){var b=Date.now()-c;b<e&&b>=0?i=setTimeout(m,e-b):(i=null,t||(h=n.apply(o,s),o=s=null))}var x=function(){o=this,s=arguments,c=Date.now();var b=t&&!i;return i||(i=setTimeout(m,e)),b&&(h=n.apply(o,s),o=s=null),h};return x.clear=function(){i&&(clearTimeout(i),i=null)},x.flush=function(){i&&(h=n.apply(o,s),o=s=null,clearTimeout(i),i=null)},x}ly.debounce=ly;var VU=ly;const PM=Rg(VU);function WU(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:s}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const o=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[c,h]=dt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),m=dt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:c}),x=e?typeof e=="number"?e:e.scroll:null,b=e?typeof e=="number"?e:e.resize:null,S=dt.useRef(!1);dt.useEffect(()=>(S.current=!0,()=>void(S.current=!1)));const[M,P,L]=dt.useMemo(()=>{const R=()=>{if(!m.current.element)return;const{left:O,top:W,width:Z,height:J,bottom:te,right:re,x:ee,y:K}=m.current.element.getBoundingClientRect(),se={left:O,top:W,width:Z,height:J,bottom:te,right:re,x:ee,y:K};m.current.element instanceof HTMLElement&&s&&(se.height=m.current.element.offsetHeight,se.width=m.current.element.offsetWidth),Object.freeze(se),S.current&&!jU(m.current.lastBounds,se)&&h(m.current.lastBounds=se)};return[R,b?PM(R,b):R,x?PM(R,x):R]},[h,s,x,b]);function z(){m.current.scrollContainers&&(m.current.scrollContainers.forEach(R=>R.removeEventListener("scroll",L,!0)),m.current.scrollContainers=null),m.current.resizeObserver&&(m.current.resizeObserver.disconnect(),m.current.resizeObserver=null)}function F(){m.current.element&&(m.current.resizeObserver=new o(L),m.current.resizeObserver.observe(m.current.element),t&&m.current.scrollContainers&&m.current.scrollContainers.forEach(R=>R.addEventListener("scroll",L,{capture:!0,passive:!0})))}const k=R=>{!R||R===m.current.element||(z(),m.current.element=R,m.current.scrollContainers=M2(R),F())};return XU(L,!!t),GU(P),dt.useEffect(()=>{z(),F()},[t,L,P]),dt.useEffect(()=>z,[]),[k,c,M]}function GU(n){dt.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function XU(n,e){dt.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function M2(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:s}=window.getComputedStyle(n);return[t,i,s].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...M2(n.parentElement)]}const YU=["x","y","top","bottom","left","right","width","height"],jU=(n,e)=>YU.every(t=>n[t]===e[t]);var qU=Object.defineProperty,ZU=Object.defineProperties,KU=Object.getOwnPropertyDescriptors,kM=Object.getOwnPropertySymbols,JU=Object.prototype.hasOwnProperty,$U=Object.prototype.propertyIsEnumerable,RM=(n,e,t)=>e in n?qU(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,LM=(n,e)=>{for(var t in e||(e={}))JU.call(e,t)&&RM(n,t,e[t]);if(kM)for(var t of kM(e))$U.call(e,t)&&RM(n,t,e[t]);return n},QU=(n,e)=>ZU(n,KU(e)),IM,DM;typeof window<"u"&&((IM=window.document)!=null&&IM.createElement||((DM=window.navigator)==null?void 0:DM.product)==="ReactNative")?dt.useLayoutEffect:dt.useEffect;function A2(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const s=A2(i,e,t);if(s)return s;i=i.sibling}}function C2(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const NM=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=NM;return}return NM.apply(this,arguments)};const $b=C2(dt.createContext(null));class E2 extends dt.Component{render(){return dt.createElement($b.Provider,{value:this._reactInternals},this.props.children)}}function eB(){const n=dt.useContext($b);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=dt.useId();return dt.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const s=A2(i,!1,o=>{let c=o.memoizedState;for(;c;){if(c.memoizedState===e)return!0;c=c.next}});if(s)return s}},[n,e])}function tB(){const n=eB(),[e]=dt.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const s=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;s&&s!==$b&&!e.has(s)&&e.set(s,dt.useContext(C2(s)))}t=t.return}return e}function nB(){const n=tB();return dt.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>dt.createElement(e,null,dt.createElement(t.Provider,QU(LM({},i),{value:n.get(t)}))),e=>dt.createElement(E2,LM({},e))),[n])}const Xx={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function iB(n){const{handlePointer:e}=kU(n);return{priority:1,enabled:!0,compute(t,i,s){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(Xx).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:s}=n.getState();(t=s.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(s.lastEvent.current)},connect:t=>{var i;const{set:s,events:o}=n.getState();o.disconnect==null||o.disconnect(),s(c=>({events:{...c.events,connected:t}})),Object.entries((i=o.handlers)!=null?i:[]).forEach(([c,h])=>{const[m,x]=Xx[c];t.addEventListener(m,h,{passive:x})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var s;Object.entries((s=i.handlers)!=null?s:[]).forEach(([o,c])=>{if(i&&i.connected instanceof HTMLElement){const[h]=Xx[o];i.connected.removeEventListener(h,c)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const rB=dt.forwardRef(function({children:e,fallback:t,resize:i,style:s,gl:o,events:c=iB,eventSource:h,eventPrefix:m,shadows:x,linear:b,flat:S,legacy:M,orthographic:P,frameloop:L,dpr:z,performance:F,raycaster:k,camera:R,scene:O,onPointerMissed:W,onCreated:Z,...J},te){dt.useMemo(()=>yU(lU),[]);const re=nB(),[ee,K]=WU({scroll:!0,debounce:{scroll:50,resize:0},...i}),se=dt.useRef(null),ge=dt.useRef(null);dt.useImperativeHandle(te,()=>se.current);const xe=p2(W),[Re,Le]=dt.useState(!1),[Ae,ze]=dt.useState(!1);if(Re)throw Re;if(Ae)throw Ae;const ce=dt.useRef(null);sd(()=>{const be=se.current;K.width>0&&K.height>0&&be&&(ce.current||(ce.current=BU(be)),ce.current.configure({gl:o,events:c,shadows:x,linear:b,flat:S,legacy:M,orthographic:P,frameloop:L,dpr:z,performance:F,raycaster:k,camera:R,scene:O,size:K,onPointerMissed:(...Ie)=>xe.current==null?void 0:xe.current(...Ie),onCreated:Ie=>{Ie.events.connect==null||Ie.events.connect(h?wU(h)?h.current:h:ge.current),m&&Ie.setEvents({compute:(Ke,rt)=>{const Te=Ke[m+"X"],Ve=Ke[m+"Y"];rt.pointer.set(Te/rt.size.width*2-1,-(Ve/rt.size.height)*2+1),rt.raycaster.setFromCamera(rt.pointer,rt.camera)}}),Z==null||Z(Ie)}}),ce.current.render(Kt.jsx(re,{children:Kt.jsx(g2,{set:ze,children:Kt.jsx(dt.Suspense,{fallback:Kt.jsx(SU,{set:Le}),children:e})})})))}),dt.useEffect(()=>{const be=se.current;if(be)return()=>_2(be)},[]);const we=h?"none":"auto";return Kt.jsx("div",{ref:ge,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:we,...s},...J,children:Kt.jsx("div",{ref:ee,style:{width:"100%",height:"100%"},children:Kt.jsx("canvas",{ref:se,style:{display:"block"},children:t})})})}),sB=dt.forwardRef(function(e,t){return Kt.jsx(E2,{children:Kt.jsx(rB,{...e,ref:t})})});var Dr=Uint8Array,Fa=Uint16Array,cy=Uint32Array,T2=new Dr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),P2=new Dr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aB=new Dr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),k2=function(n,e){for(var t=new Fa(31),i=0;i<31;++i)t[i]=e+=1<<n[i-1];for(var s=new cy(t[30]),i=1;i<30;++i)for(var o=t[i];o<t[i+1];++o)s[o]=o-t[i]<<5|i;return[t,s]},R2=k2(T2,2),L2=R2[0],oB=R2[1];L2[28]=258,oB[258]=28;var lB=k2(P2,0),cB=lB[0],uy=new Fa(32768);for(var An=0;An<32768;++An){var Ca=(An&43690)>>>1|(An&21845)<<1;Ca=(Ca&52428)>>>2|(Ca&13107)<<2,Ca=(Ca&61680)>>>4|(Ca&3855)<<4,uy[An]=((Ca&65280)>>>8|(Ca&255)<<8)>>>1}var lh=function(n,e,t){for(var i=n.length,s=0,o=new Fa(e);s<i;++s)++o[n[s]-1];var c=new Fa(e);for(s=0;s<e;++s)c[s]=c[s-1]+o[s-1]<<1;var h;if(t){h=new Fa(1<<e);var m=15-e;for(s=0;s<i;++s)if(n[s])for(var x=s<<4|n[s],b=e-n[s],S=c[n[s]-1]++<<b,M=S|(1<<b)-1;S<=M;++S)h[uy[S]>>>m]=x}else for(h=new Fa(i),s=0;s<i;++s)n[s]&&(h[s]=uy[c[n[s]-1]++]>>>15-n[s]);return h},od=new Dr(288);for(var An=0;An<144;++An)od[An]=8;for(var An=144;An<256;++An)od[An]=9;for(var An=256;An<280;++An)od[An]=7;for(var An=280;An<288;++An)od[An]=8;var I2=new Dr(32);for(var An=0;An<32;++An)I2[An]=5;var uB=lh(od,9,1),hB=lh(I2,5,1),Yx=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},qr=function(n,e,t){var i=e/8|0;return(n[i]|n[i+1]<<8)>>(e&7)&t},jx=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},dB=function(n){return(n/8|0)+(n&7&&1)},fB=function(n,e,t){(t==null||t>n.length)&&(t=n.length);var i=new(n instanceof Fa?Fa:n instanceof cy?cy:Dr)(t-e);return i.set(n.subarray(e,t)),i},pB=function(n,e,t){var i=n.length;if(!i||t&&!t.l&&i<5)return e||new Dr(0);var s=!e||t,o=!t||t.i;t||(t={}),e||(e=new Dr(i*3));var c=function(Je){var Ye=e.length;if(Je>Ye){var kt=new Dr(Math.max(Ye*2,Je));kt.set(e),e=kt}},h=t.f||0,m=t.p||0,x=t.b||0,b=t.l,S=t.d,M=t.m,P=t.n,L=i*8;do{if(!b){t.f=h=qr(n,m,1);var z=qr(n,m+1,3);if(m+=3,z)if(z==1)b=uB,S=hB,M=9,P=5;else if(z==2){var O=qr(n,m,31)+257,W=qr(n,m+10,15)+4,Z=O+qr(n,m+5,31)+1;m+=14;for(var J=new Dr(Z),te=new Dr(19),re=0;re<W;++re)te[aB[re]]=qr(n,m+re*3,7);m+=W*3;for(var ee=Yx(te),K=(1<<ee)-1,se=lh(te,ee,1),re=0;re<Z;){var ge=se[qr(n,m,K)];m+=ge&15;var F=ge>>>4;if(F<16)J[re++]=F;else{var xe=0,Re=0;for(F==16?(Re=3+qr(n,m,3),m+=2,xe=J[re-1]):F==17?(Re=3+qr(n,m,7),m+=3):F==18&&(Re=11+qr(n,m,127),m+=7);Re--;)J[re++]=xe}}var Le=J.subarray(0,O),Ae=J.subarray(O);M=Yx(Le),P=Yx(Ae),b=lh(Le,M,1),S=lh(Ae,P,1)}else throw"invalid block type";else{var F=dB(m)+4,k=n[F-4]|n[F-3]<<8,R=F+k;if(R>i){if(o)throw"unexpected EOF";break}s&&c(x+k),e.set(n.subarray(F,R),x),t.b=x+=k,t.p=m=R*8;continue}if(m>L){if(o)throw"unexpected EOF";break}}s&&c(x+131072);for(var ze=(1<<M)-1,ce=(1<<P)-1,we=m;;we=m){var xe=b[jx(n,m)&ze],be=xe>>>4;if(m+=xe&15,m>L){if(o)throw"unexpected EOF";break}if(!xe)throw"invalid length/literal";if(be<256)e[x++]=be;else if(be==256){we=m,b=null;break}else{var Ie=be-254;if(be>264){var re=be-257,Ke=T2[re];Ie=qr(n,m,(1<<Ke)-1)+L2[re],m+=Ke}var rt=S[jx(n,m)&ce],Te=rt>>>4;if(!rt)throw"invalid distance";m+=rt&15;var Ae=cB[Te];if(Te>3){var Ke=P2[Te];Ae+=jx(n,m)&(1<<Ke)-1,m+=Ke}if(m>L){if(o)throw"unexpected EOF";break}s&&c(x+131072);for(var Ve=x+Ie;x<Ve;x+=4)e[x]=e[x-Ae],e[x+1]=e[x+1-Ae],e[x+2]=e[x+2-Ae],e[x+3]=e[x+3-Ae];x=Ve}}t.l=b,t.p=we,t.b=x,b&&(h=1,t.m=M,t.d=S,t.n=P)}while(!h);return x==e.length?e:fB(e,0,x)},gB=new Dr(0),mB=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function vB(n,e){return pB((mB(n),n.subarray(2,-4)),e)}var xB=typeof TextDecoder<"u"&&new TextDecoder,yB=0;try{xB.decode(gB,{stream:!0}),yB=1}catch{}function D2(n){if(typeof TextDecoder<"u")return new TextDecoder().decode(n);let e="";for(let t=0,i=n.length;t<i;t++)e+=String.fromCharCode(n[t]);try{return decodeURIComponent(escape(e))}catch{return e}}function N2(n,e,t){const i=t.length-n-1;if(e>=t[i])return i-1;if(e<=t[n])return n;let s=n,o=i,c=Math.floor((s+o)/2);for(;e<t[c]||e>=t[c+1];)e<t[c]?o=c:s=c,c=Math.floor((s+o)/2);return c}function bB(n,e,t,i){const s=[],o=[],c=[];s[0]=1;for(let h=1;h<=t;++h){o[h]=e-i[n+1-h],c[h]=i[n+h]-e;let m=0;for(let x=0;x<h;++x){const b=c[x+1],S=o[h-x],M=s[x]/(b+S);s[x]=m+b*M,m=S*M}s[h]=m}return s}function wB(n,e,t,i){const s=N2(n,i,e),o=bB(s,i,n,e),c=new an(0,0,0,0);for(let h=0;h<=n;++h){const m=t[s-n+h],x=o[h],b=m.w*x;c.x+=m.x*b,c.y+=m.y*b,c.z+=m.z*b,c.w+=m.w*x}return c}function SB(n,e,t,i,s){const o=[];for(let S=0;S<=t;++S)o[S]=0;const c=[];for(let S=0;S<=i;++S)c[S]=o.slice(0);const h=[];for(let S=0;S<=t;++S)h[S]=o.slice(0);h[0][0]=1;const m=o.slice(0),x=o.slice(0);for(let S=1;S<=t;++S){m[S]=e-s[n+1-S],x[S]=s[n+S]-e;let M=0;for(let P=0;P<S;++P){const L=x[P+1],z=m[S-P];h[S][P]=L+z;const F=h[P][S-1]/h[S][P];h[P][S]=M+L*F,M=z*F}h[S][S]=M}for(let S=0;S<=t;++S)c[0][S]=h[S][t];for(let S=0;S<=t;++S){let M=0,P=1;const L=[];for(let z=0;z<=t;++z)L[z]=o.slice(0);L[0][0]=1;for(let z=1;z<=i;++z){let F=0;const k=S-z,R=t-z;S>=z&&(L[P][0]=L[M][0]/h[R+1][k],F=L[P][0]*h[k][R]);const O=k>=-1?1:-k,W=S-1<=R?z-1:t-S;for(let J=O;J<=W;++J)L[P][J]=(L[M][J]-L[M][J-1])/h[R+1][k+J],F+=L[P][J]*h[k+J][R];S<=R&&(L[P][z]=-L[M][z-1]/h[R+1][S],F+=L[P][z]*h[S][R]),c[z][S]=F;const Z=M;M=P,P=Z}}let b=t;for(let S=1;S<=i;++S){for(let M=0;M<=t;++M)c[S][M]*=b;b*=t-S}return c}function _B(n,e,t,i,s){const o=s<n?s:n,c=[],h=N2(n,i,e),m=SB(h,i,n,o,e),x=[];for(let b=0;b<t.length;++b){const S=t[b].clone(),M=S.w;S.x*=M,S.y*=M,S.z*=M,x[b]=S}for(let b=0;b<=o;++b){const S=x[h-n].clone().multiplyScalar(m[b][0]);for(let M=1;M<=n;++M)S.add(x[h-n+M].clone().multiplyScalar(m[b][M]));c[b]=S}for(let b=o+1;b<=s+1;++b)c[b]=new an(0,0,0);return c}function MB(n,e){let t=1;for(let s=2;s<=n;++s)t*=s;let i=1;for(let s=2;s<=e;++s)i*=s;for(let s=2;s<=n-e;++s)i*=s;return t/i}function AB(n){const e=n.length,t=[],i=[];for(let o=0;o<e;++o){const c=n[o];t[o]=new le(c.x,c.y,c.z),i[o]=c.w}const s=[];for(let o=0;o<e;++o){const c=t[o].clone();for(let h=1;h<=o;++h)c.sub(s[o-h].clone().multiplyScalar(MB(o,h)*i[h]));s[o]=c.divideScalar(i[0])}return s}function CB(n,e,t,i,s){const o=_B(n,e,t,i,s);return AB(o)}class FM extends Ur{constructor(e,t,i,s,o){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=s||0,this.endKnot=o||this.knots.length-1;for(let c=0;c<i.length;++c){const h=i[c];this.controlPoints[c]=new an(h.x,h.y,h.z,h.w)}}getPoint(e,t){const i=t||new le,s=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),o=wB(this.degree,this.knots,this.controlPoints,s);return o.w!=1&&o.divideScalar(o.w),i.set(o.x,o.y,o.z)}getTangent(e,t){const i=t||new le,s=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),o=CB(this.degree,this.knots,this.controlPoints,s,1);return i.copy(o[1]).normalize(),i}}let en,Vn,$i;class Qb extends Xi{constructor(e){super(e)}load(e,t,i,s){const o=this,c=o.path===""?Tg.extractUrlBase(e):o.path,h=new Es(this.manager);h.setPath(o.path),h.setResponseType("arraybuffer"),h.setRequestHeader(o.requestHeader),h.setWithCredentials(o.withCredentials),h.load(e,function(m){try{t(o.parse(m,c))}catch(x){s?s(x):console.error(x),o.manager.itemError(e)}},i,s)}parse(e,t){if(LB(e))en=new RB().parse(e);else{const s=U2(e);if(!IB(s))throw new Error("THREE.FBXLoader: Unknown format.");if(zM(s)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+zM(s));en=new kB().parse(s)}const i=new jT(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new EB(i,this.manager).parse(en)}}class EB{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Vn=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),i=this.parseMaterials(t),s=this.parseDeformers(),o=new TB().parse(s);return this.parseScene(s,o,i),$i}parseConnections(){const e=new Map;return"Connections"in en&&en.Connections.connections.forEach(function(i){const s=i[0],o=i[1],c=i[2];e.has(s)||e.set(s,{parents:[],children:[]});const h={ID:o,relationship:c};e.get(s).parents.push(h),e.has(o)||e.set(o,{parents:[],children:[]});const m={ID:s,relationship:c};e.get(o).children.push(m)}),e}parseImages(){const e={},t={};if("Video"in en.Objects){const i=en.Objects.Video;for(const s in i){const o=i[s],c=parseInt(s);if(e[c]=o.RelativeFilename||o.Filename,"Content"in o){const h=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,m=typeof o.Content=="string"&&o.Content!=="";if(h||m){const x=this.parseImage(i[s]);t[o.RelativeFilename||o.Filename]=x}}}}for(const i in e){const s=e[i];t[s]!==void 0?e[i]=t[s]:e[i]=e[i].split("\\").pop()}return e}parseImage(e){const t=e.Content,i=e.RelativeFilename||e.Filename,s=i.slice(i.lastIndexOf(".")+1).toLowerCase();let o;switch(s){case"bmp":o="image/bmp";break;case"jpg":case"jpeg":o="image/jpeg";break;case"png":o="image/png";break;case"tif":o="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&console.warn("FBXLoader: TGA loader not found, skipping ",i),o="image/tga";break;default:console.warn('FBXLoader: Image type "'+s+'" is not supported.');return}if(typeof t=="string")return"data:"+o+";base64,"+t;{const c=new Uint8Array(t);return window.URL.createObjectURL(new Blob([c],{type:o}))}}parseTextures(e){const t=new Map;if("Texture"in en.Objects){const i=en.Objects.Texture;for(const s in i){const o=this.parseTexture(i[s],e);t.set(parseInt(s),o)}}return t}parseTexture(e,t){const i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;const s=e.WrapModeU,o=e.WrapModeV,c=s!==void 0?s.value:0,h=o!==void 0?o.value:0;if(i.wrapS=c===0?Jo:tr,i.wrapT=h===0?Jo:tr,"Scaling"in e){const m=e.Scaling.value;i.repeat.x=m[0],i.repeat.y=m[1]}return i}loadTexture(e,t){let i;const s=this.textureLoader.path,o=Vn.get(e.id).children;o!==void 0&&o.length>0&&t[o[0].ID]!==void 0&&(i=t[o[0].ID],(i.indexOf("blob:")===0||i.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let c;const h=e.FileName.slice(-3).toLowerCase();if(h==="tga"){const m=this.manager.getHandler(".tga");m===null?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),c=new En):(m.setPath(this.textureLoader.path),c=m.load(i))}else h==="psd"?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),c=new En):c=this.textureLoader.load(i);return this.textureLoader.setPath(s),c}parseMaterials(e){const t=new Map;if("Material"in en.Objects){const i=en.Objects.Material;for(const s in i){const o=this.parseMaterial(i[s],e);o!==null&&t.set(parseInt(s),o)}}return t}parseMaterial(e,t){const i=e.id,s=e.attrName;let o=e.ShadingModel;if(typeof o=="object"&&(o=o.value),!Vn.has(i))return null;const c=this.parseParameters(e,t,i);let h;switch(o.toLowerCase()){case"phong":h=new oh;break;case"lambert":h=new Ob;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),h=new oh;break}return h.setValues(c),h.name=s,h}parseParameters(e,t,i){const s={};e.BumpFactor&&(s.bumpScale=e.BumpFactor.value),e.Diffuse?s.color=new ot().fromArray(e.Diffuse.value):e.DiffuseColor&&(e.DiffuseColor.type==="Color"||e.DiffuseColor.type==="ColorRGB")&&(s.color=new ot().fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(s.displacementScale=e.DisplacementFactor.value),e.Emissive?s.emissive=new ot().fromArray(e.Emissive.value):e.EmissiveColor&&(e.EmissiveColor.type==="Color"||e.EmissiveColor.type==="ColorRGB")&&(s.emissive=new ot().fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(s.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(s.opacity=parseFloat(e.Opacity.value)),s.opacity<1&&(s.transparent=!0),e.ReflectionFactor&&(s.reflectivity=e.ReflectionFactor.value),e.Shininess&&(s.shininess=e.Shininess.value),e.Specular?s.specular=new ot().fromArray(e.Specular.value):e.SpecularColor&&e.SpecularColor.type==="Color"&&(s.specular=new ot().fromArray(e.SpecularColor.value));const o=this;return Vn.get(i).children.forEach(function(c){const h=c.relationship;switch(h){case"Bump":s.bumpMap=o.getTexture(t,c.ID);break;case"Maya|TEX_ao_map":s.aoMap=o.getTexture(t,c.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":s.map=o.getTexture(t,c.ID),s.map!==void 0&&("colorSpace"in s.map?s.map.colorSpace="srgb":s.map.encoding=3001);break;case"DisplacementColor":s.displacementMap=o.getTexture(t,c.ID);break;case"EmissiveColor":s.emissiveMap=o.getTexture(t,c.ID),s.emissiveMap!==void 0&&("colorSpace"in s.emissiveMap?s.emissiveMap.colorSpace="srgb":s.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":s.normalMap=o.getTexture(t,c.ID);break;case"ReflectionColor":s.envMap=o.getTexture(t,c.ID),s.envMap!==void 0&&(s.envMap.mapping=Cc,"colorSpace"in s.envMap?s.envMap.colorSpace="srgb":s.envMap.encoding=3001);break;case"SpecularColor":s.specularMap=o.getTexture(t,c.ID),s.specularMap!==void 0&&("colorSpace"in s.specularMap?s.specularMap.colorSpace="srgb":s.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":s.alphaMap=o.getTexture(t,c.ID),s.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",h);break}}),s}getTexture(e,t){return"LayeredTexture"in en.Objects&&t in en.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Vn.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in en.Objects){const i=en.Objects.Deformer;for(const s in i){const o=i[s],c=Vn.get(parseInt(s));if(o.attrType==="Skin"){const h=this.parseSkeleton(c,i);h.ID=s,c.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),h.geometryID=c.parents[0].ID,e[s]=h}else if(o.attrType==="BlendShape"){const h={id:s};h.rawTargets=this.parseMorphTargets(c,i),h.id=s,c.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[s]=h}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const i=[];return e.children.forEach(function(s){const o=t[s.ID];if(o.attrType!=="Cluster")return;const c={ID:s.ID,indices:[],weights:[],transformLink:new gt().fromArray(o.TransformLink.a)};"Indexes"in o&&(c.indices=o.Indexes.a,c.weights=o.Weights.a),i.push(c)}),{rawBones:i,bones:[]}}parseMorphTargets(e,t){const i=[];for(let s=0;s<e.children.length;s++){const o=e.children[s],c=t[o.ID],h={name:c.attrName,initialWeight:c.DeformPercent,id:c.id,fullWeights:c.FullWeights.a};if(c.attrType!=="BlendShapeChannel")return;h.geoID=Vn.get(parseInt(o.ID)).children.filter(function(m){return m.relationship===void 0})[0].ID,i.push(h)}return i}parseScene(e,t,i){$i=new Na;const s=this.parseModels(e.skeletons,t,i),o=en.Objects.Model,c=this;s.forEach(function(m){const x=o[m.ID];c.setLookAtProperties(m,x),Vn.get(m.ID).parents.forEach(function(S){const M=s.get(S.ID);M!==void 0&&M.add(m)}),m.parent===null&&$i.add(m)}),this.bindSkeleton(e.skeletons,t,s),this.createAmbientLight(),$i.traverse(function(m){if(m.userData.transformData){m.parent&&(m.userData.transformData.parentMatrix=m.parent.matrix,m.userData.transformData.parentMatrixWorld=m.parent.matrixWorld);const x=O2(m.userData.transformData);m.applyMatrix4(x),m.updateWorldMatrix()}});const h=new PB().parse();$i.children.length===1&&$i.children[0].isGroup&&($i.children[0].animations=h,$i=$i.children[0]),$i.animations=h}parseModels(e,t,i){const s=new Map,o=en.Objects.Model;for(const c in o){const h=parseInt(c),m=o[c],x=Vn.get(h);let b=this.buildSkeleton(x,e,h,m.attrName);if(!b){switch(m.attrType){case"Camera":b=this.createCamera(x);break;case"Light":b=this.createLight(x);break;case"Mesh":b=this.createMesh(x,t,i);break;case"NurbsCurve":b=this.createCurve(x,t);break;case"LimbNode":case"Root":b=new Oh;break;case"Null":default:b=new Na;break}b.name=m.attrName?tn.sanitizeNodeName(m.attrName):"",b.ID=h}this.getTransformData(b,m),s.set(h,b)}return s}buildSkeleton(e,t,i,s){let o=null;return e.parents.forEach(function(c){for(const h in t){const m=t[h];m.rawBones.forEach(function(x,b){if(x.ID===c.ID){const S=o;o=new Oh,o.matrixWorld.copy(x.transformLink),o.name=s?tn.sanitizeNodeName(s):"",o.ID=i,m.bones[b]=o,S!==null&&o.add(S)}})}}),o}createCamera(e){let t,i;if(e.children.forEach(function(s){const o=en.Objects.NodeAttribute[s.ID];o!==void 0&&(i=o)}),i===void 0)t=new Qt;else{let s=0;i.CameraProjectionType!==void 0&&i.CameraProjectionType.value===1&&(s=1);let o=1;i.NearPlane!==void 0&&(o=i.NearPlane.value/1e3);let c=1e3;i.FarPlane!==void 0&&(c=i.FarPlane.value/1e3);let h=window.innerWidth,m=window.innerHeight;i.AspectWidth!==void 0&&i.AspectHeight!==void 0&&(h=i.AspectWidth.value,m=i.AspectHeight.value);const x=h/m;let b=45;i.FieldOfView!==void 0&&(b=i.FieldOfView.value);const S=i.FocalLength?i.FocalLength.value:null;switch(s){case 0:t=new Zn(b,x,o,c),S!==null&&t.setFocalLength(S);break;case 1:t=new Wc(-h/2,h/2,m/2,-m/2,o,c);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+s+"."),t=new Qt;break}}return t}createLight(e){let t,i;if(e.children.forEach(function(s){const o=en.Objects.NodeAttribute[s.ID];o!==void 0&&(i=o)}),i===void 0)t=new Qt;else{let s;i.LightType===void 0?s=0:s=i.LightType.value;let o=16777215;i.Color!==void 0&&(o=new ot().fromArray(i.Color.value));let c=i.Intensity===void 0?1:i.Intensity.value/100;i.CastLightOnObject!==void 0&&i.CastLightOnObject.value===0&&(c=0);let h=0;i.FarAttenuationEnd!==void 0&&(i.EnableFarAttenuation!==void 0&&i.EnableFarAttenuation.value===0?h=0:h=i.FarAttenuationEnd.value);const m=1;switch(s){case 0:t=new Eg(o,c,h,m);break;case 1:t=new Gb(o,c);break;case 2:let x=Math.PI/3;i.InnerAngle!==void 0&&(x=es.degToRad(i.InnerAngle.value));let b=0;i.OuterAngle!==void 0&&(b=es.degToRad(i.OuterAngle.value),b=Math.max(b,1)),t=new Wb(o,c,h,x,b,m);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),t=new Eg(o,c);break}i.CastShadows!==void 0&&i.CastShadows.value===1&&(t.castShadow=!0)}return t}createMesh(e,t,i){let s,o=null,c=null;const h=[];return e.children.forEach(function(m){t.has(m.ID)&&(o=t.get(m.ID)),i.has(m.ID)&&h.push(i.get(m.ID))}),h.length>1?c=h:h.length>0?c=h[0]:(c=new oh({color:13421772}),h.push(c)),"color"in o.attributes&&h.forEach(function(m){m.vertexColors=!0}),o.FBX_Deformer?(s=new Tb(o,c),s.normalizeSkinWeights()):s=new Gn(o,c),s}createCurve(e,t){const i=e.children.reduce(function(o,c){return t.has(c.ID)&&(o=t.get(c.ID)),o},null),s=new Li({color:3342591,linewidth:1});return new sa(i,s)}getTransformData(e,t){const i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=z2(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i}setLookAtProperties(e,t){"LookAtProperty"in t&&Vn.get(e.ID).children.forEach(function(s){if(s.relationship==="LookAtProperty"){const o=en.Objects.Model[s.ID];if("Lcl_Translation"in o){const c=o.Lcl_Translation.value;e.target!==void 0?(e.target.position.fromArray(c),$i.add(e.target)):e.lookAt(new le().fromArray(c))}}})}bindSkeleton(e,t,i){const s=this.parsePoseNodes();for(const o in e){const c=e[o];Vn.get(parseInt(c.ID)).parents.forEach(function(m){if(t.has(m.ID)){const x=m.ID;Vn.get(x).parents.forEach(function(S){i.has(S.ID)&&i.get(S.ID).bind(new ed(c.bones),s[S.ID])})}})}}parsePoseNodes(){const e={};if("Pose"in en.Objects){const t=en.Objects.Pose;for(const i in t)if(t[i].attrType==="BindPose"&&t[i].NbPoseNodes>0){const s=t[i].PoseNode;Array.isArray(s)?s.forEach(function(o){e[o.Node]=new gt().fromArray(o.Matrix.a)}):e[s.Node]=new gt().fromArray(s.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in en&&"AmbientColor"in en.GlobalSettings){const e=en.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],s=e[2];if(t!==0||i!==0||s!==0){const o=new ot(t,i,s);$i.add(new Xb(o,1))}}}}class TB{parse(e){const t=new Map;if("Geometry"in en.Objects){const i=en.Objects.Geometry;for(const s in i){const o=Vn.get(parseInt(s)),c=this.parseGeometry(o,i[s],e);t.set(parseInt(s),c)}}return t}parseGeometry(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,i){const s=i.skeletons,o=[],c=e.parents.map(function(S){return en.Objects.Model[S.ID]});if(c.length===0)return;const h=e.children.reduce(function(S,M){return s[M.ID]!==void 0&&(S=s[M.ID]),S},null);e.children.forEach(function(S){i.morphTargets[S.ID]!==void 0&&o.push(i.morphTargets[S.ID])});const m=c[0],x={};"RotationOrder"in m&&(x.eulerOrder=z2(m.RotationOrder.value)),"InheritType"in m&&(x.inheritType=parseInt(m.InheritType.value)),"GeometricTranslation"in m&&(x.translation=m.GeometricTranslation.value),"GeometricRotation"in m&&(x.rotation=m.GeometricRotation.value),"GeometricScaling"in m&&(x.scale=m.GeometricScaling.value);const b=O2(x);return this.genGeometry(t,h,o,b)}genGeometry(e,t,i,s){const o=new Bt;e.attrName&&(o.name=e.attrName);const c=this.parseGeoNode(e,t),h=this.genBuffers(c),m=new yt(h.vertex,3);if(m.applyMatrix4(s),o.setAttribute("position",m),h.colors.length>0&&o.setAttribute("color",new yt(h.colors,3)),t&&(o.setAttribute("skinIndex",new am(h.weightsIndices,4)),o.setAttribute("skinWeight",new yt(h.vertexWeights,4)),o.FBX_Deformer=t),h.normal.length>0){const x=new Wt().getNormalMatrix(s),b=new yt(h.normal,3);b.applyNormalMatrix(x),o.setAttribute("normal",b)}if(h.uvs.forEach(function(x,b){let S="uv"+(b+1).toString();b===0&&(S="uv"),o.setAttribute(S,new yt(h.uvs[b],2))}),c.material&&c.material.mappingType!=="AllSame"){let x=h.materialIndex[0],b=0;if(h.materialIndex.forEach(function(S,M){S!==x&&(o.addGroup(b,M-b,x),x=S,b=M)}),o.groups.length>0){const S=o.groups[o.groups.length-1],M=S.start+S.count;M!==h.materialIndex.length&&o.addGroup(M,h.materialIndex.length-M,x)}o.groups.length===0&&o.addGroup(0,h.materialIndex.length,h.materialIndex[0])}return this.addMorphTargets(o,e,i,s),o}parseGeoNode(e,t){const i={};if(i.vertexPositions=e.Vertices!==void 0?e.Vertices.a:[],i.vertexIndices=e.PolygonVertexIndex!==void 0?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];let s=0;for(;e.LayerElementUV[s];)e.LayerElementUV[s].UV&&i.uv.push(this.parseUVs(e.LayerElementUV[s])),s++}return i.weightTable={},t!==null&&(i.skeleton=t,t.rawBones.forEach(function(s,o){s.indices.forEach(function(c,h){i.weightTable[c]===void 0&&(i.weightTable[c]=[]),i.weightTable[c].push({id:o,weight:s.weights[h]})})})),i}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let i=0,s=0,o=!1,c=[],h=[],m=[],x=[],b=[],S=[];const M=this;return e.vertexIndices.forEach(function(P,L){let z,F=!1;P<0&&(P=P^-1,F=!0);let k=[],R=[];if(c.push(P*3,P*3+1,P*3+2),e.color){const O=lp(L,i,P,e.color);m.push(O[0],O[1],O[2])}if(e.skeleton){if(e.weightTable[P]!==void 0&&e.weightTable[P].forEach(function(O){R.push(O.weight),k.push(O.id)}),R.length>4){o||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),o=!0);const O=[0,0,0,0],W=[0,0,0,0];R.forEach(function(Z,J){let te=Z,re=k[J];W.forEach(function(ee,K,se){if(te>ee){se[K]=te,te=ee;const ge=O[K];O[K]=re,re=ge}})}),k=O,R=W}for(;R.length<4;)R.push(0),k.push(0);for(let O=0;O<4;++O)b.push(R[O]),S.push(k[O])}if(e.normal){const O=lp(L,i,P,e.normal);h.push(O[0],O[1],O[2])}e.material&&e.material.mappingType!=="AllSame"&&(z=lp(L,i,P,e.material)[0]),e.uv&&e.uv.forEach(function(O,W){const Z=lp(L,i,P,O);x[W]===void 0&&(x[W]=[]),x[W].push(Z[0]),x[W].push(Z[1])}),s++,F&&(M.genFace(t,e,c,z,h,m,x,b,S,s),i++,s=0,c=[],h=[],m=[],x=[],b=[],S=[])}),t}genFace(e,t,i,s,o,c,h,m,x,b){for(let S=2;S<b;S++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[(S-1)*3]]),e.vertex.push(t.vertexPositions[i[(S-1)*3+1]]),e.vertex.push(t.vertexPositions[i[(S-1)*3+2]]),e.vertex.push(t.vertexPositions[i[S*3]]),e.vertex.push(t.vertexPositions[i[S*3+1]]),e.vertex.push(t.vertexPositions[i[S*3+2]]),t.skeleton&&(e.vertexWeights.push(m[0]),e.vertexWeights.push(m[1]),e.vertexWeights.push(m[2]),e.vertexWeights.push(m[3]),e.vertexWeights.push(m[(S-1)*4]),e.vertexWeights.push(m[(S-1)*4+1]),e.vertexWeights.push(m[(S-1)*4+2]),e.vertexWeights.push(m[(S-1)*4+3]),e.vertexWeights.push(m[S*4]),e.vertexWeights.push(m[S*4+1]),e.vertexWeights.push(m[S*4+2]),e.vertexWeights.push(m[S*4+3]),e.weightsIndices.push(x[0]),e.weightsIndices.push(x[1]),e.weightsIndices.push(x[2]),e.weightsIndices.push(x[3]),e.weightsIndices.push(x[(S-1)*4]),e.weightsIndices.push(x[(S-1)*4+1]),e.weightsIndices.push(x[(S-1)*4+2]),e.weightsIndices.push(x[(S-1)*4+3]),e.weightsIndices.push(x[S*4]),e.weightsIndices.push(x[S*4+1]),e.weightsIndices.push(x[S*4+2]),e.weightsIndices.push(x[S*4+3])),t.color&&(e.colors.push(c[0]),e.colors.push(c[1]),e.colors.push(c[2]),e.colors.push(c[(S-1)*3]),e.colors.push(c[(S-1)*3+1]),e.colors.push(c[(S-1)*3+2]),e.colors.push(c[S*3]),e.colors.push(c[S*3+1]),e.colors.push(c[S*3+2])),t.material&&t.material.mappingType!=="AllSame"&&(e.materialIndex.push(s),e.materialIndex.push(s),e.materialIndex.push(s)),t.normal&&(e.normal.push(o[0]),e.normal.push(o[1]),e.normal.push(o[2]),e.normal.push(o[(S-1)*3]),e.normal.push(o[(S-1)*3+1]),e.normal.push(o[(S-1)*3+2]),e.normal.push(o[S*3]),e.normal.push(o[S*3+1]),e.normal.push(o[S*3+2])),t.uv&&t.uv.forEach(function(M,P){e.uvs[P]===void 0&&(e.uvs[P]=[]),e.uvs[P].push(h[P][0]),e.uvs[P].push(h[P][1]),e.uvs[P].push(h[P][(S-1)*2]),e.uvs[P].push(h[P][(S-1)*2+1]),e.uvs[P].push(h[P][S*2]),e.uvs[P].push(h[P][S*2+1])})}addMorphTargets(e,t,i,s){if(i.length===0)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const o=this;i.forEach(function(c){c.rawTargets.forEach(function(h){const m=en.Objects.Geometry[h.geoID];m!==void 0&&o.genMorphGeometry(e,t,m,s,h.name)})})}genMorphGeometry(e,t,i,s,o){const c=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],h=i.Vertices!==void 0?i.Vertices.a:[],m=i.Indexes!==void 0?i.Indexes.a:[],x=e.attributes.position.count*3,b=new Float32Array(x);for(let L=0;L<m.length;L++){const z=m[L]*3;b[z]=h[L*3],b[z+1]=h[L*3+1],b[z+2]=h[L*3+2]}const S={vertexIndices:c,vertexPositions:b},M=this.genBuffers(S),P=new yt(M.vertex,3);P.name=o||i.attrName,P.applyMatrix4(s),e.morphAttributes.position.push(P)}parseNormals(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,s=e.Normals.a;let o=[];return i==="IndexToDirect"&&("NormalIndex"in e?o=e.NormalIndex.a:"NormalsIndex"in e&&(o=e.NormalsIndex.a)),{dataSize:3,buffer:s,indices:o,mappingType:t,referenceType:i}}parseUVs(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,s=e.UV.a;let o=[];return i==="IndexToDirect"&&(o=e.UVIndex.a),{dataSize:2,buffer:s,indices:o,mappingType:t,referenceType:i}}parseVertexColors(e){const t=e.MappingInformationType,i=e.ReferenceInformationType,s=e.Colors.a;let o=[];return i==="IndexToDirect"&&(o=e.ColorIndex.a),{dataSize:4,buffer:s,indices:o,mappingType:t,referenceType:i}}parseMaterialIndices(e){const t=e.MappingInformationType,i=e.ReferenceInformationType;if(t==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};const s=e.Materials.a,o=[];for(let c=0;c<s.length;++c)o.push(c);return{dataSize:1,buffer:s,indices:o,mappingType:t,referenceType:i}}parseNurbsGeometry(e){if(FM===void 0)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new Bt;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new Bt;const i=t-1,s=e.KnotVector.a,o=[],c=e.Points.a;for(let S=0,M=c.length;S<M;S+=4)o.push(new an().fromArray(c,S));let h,m;if(e.Form==="Closed")o.push(o[0]);else if(e.Form==="Periodic"){h=i,m=s.length-1-h;for(let S=0;S<i;++S)o.push(o[S])}const b=new FM(i,s,o,h,m).getPoints(o.length*12);return new Bt().setFromPoints(b)}}class PB{parse(){const e=[],t=this.parseClips();if(t!==void 0)for(const i in t){const s=t[i],o=this.addClip(s);e.push(o)}return e}parseClips(){if(en.Objects.AnimationCurve===void 0)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=en.Objects.AnimationCurveNode,t=new Map;for(const i in e){const s=e[i];if(s.attrName.match(/S|R|T|DeformPercent/)!==null){const o={id:s.id,attr:s.attrName,curves:{}};t.set(o.id,o)}}return t}parseAnimationCurves(e){const t=en.Objects.AnimationCurve;for(const i in t){const s={id:t[i].id,times:t[i].KeyTime.a.map(DB),values:t[i].KeyValueFloat.a},o=Vn.get(s.id);if(o!==void 0){const c=o.parents[0].ID,h=o.parents[0].relationship;h.match(/X/)?e.get(c).curves.x=s:h.match(/Y/)?e.get(c).curves.y=s:h.match(/Z/)?e.get(c).curves.z=s:h.match(/d|DeformPercent/)&&e.has(c)&&(e.get(c).curves.morph=s)}}}parseAnimationLayers(e){const t=en.Objects.AnimationLayer,i=new Map;for(const s in t){const o=[],c=Vn.get(parseInt(s));c!==void 0&&(c.children.forEach(function(m,x){if(e.has(m.ID)){const b=e.get(m.ID);if(b.curves.x!==void 0||b.curves.y!==void 0||b.curves.z!==void 0){if(o[x]===void 0){const S=Vn.get(m.ID).parents.filter(function(M){return M.relationship!==void 0})[0].ID;if(S!==void 0){const M=en.Objects.Model[S.toString()];if(M===void 0){console.warn("THREE.FBXLoader: Encountered a unused curve.",m);return}const P={modelName:M.attrName?tn.sanitizeNodeName(M.attrName):"",ID:M.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};$i.traverse(function(L){L.ID===M.id&&(P.transform=L.matrix,L.userData.transformData&&(P.eulerOrder=L.userData.transformData.eulerOrder))}),P.transform||(P.transform=new gt),"PreRotation"in M&&(P.preRotation=M.PreRotation.value),"PostRotation"in M&&(P.postRotation=M.PostRotation.value),o[x]=P}}o[x]&&(o[x][b.attr]=b)}else if(b.curves.morph!==void 0){if(o[x]===void 0){const S=Vn.get(m.ID).parents.filter(function(k){return k.relationship!==void 0})[0].ID,M=Vn.get(S).parents[0].ID,P=Vn.get(M).parents[0].ID,L=Vn.get(P).parents[0].ID,z=en.Objects.Model[L],F={modelName:z.attrName?tn.sanitizeNodeName(z.attrName):"",morphName:en.Objects.Deformer[S].attrName};o[x]=F}o[x][b.attr]=b}}}),i.set(parseInt(s),o))}return i}parseAnimStacks(e){const t=en.Objects.AnimationStack,i={};for(const s in t){const o=Vn.get(parseInt(s)).children;o.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const c=e.get(o[0].ID);i[s]={name:t[s].attrName,layer:c}}return i}addClip(e){let t=[];const i=this;return e.layer.forEach(function(s){t=t.concat(i.generateTracks(s))}),new Ic(e.name,-1,t)}generateTracks(e){const t=[];let i=new le,s=new li,o=new le;if(e.transform&&e.transform.decompose(i,s,o),i=i.toArray(),s=new ci().setFromQuaternion(s,e.eulerOrder).toArray(),o=o.toArray(),e.T!==void 0&&Object.keys(e.T.curves).length>0){const c=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");c!==void 0&&t.push(c)}if(e.R!==void 0&&Object.keys(e.R.curves).length>0){const c=this.generateRotationTrack(e.modelName,e.R.curves,s,e.preRotation,e.postRotation,e.eulerOrder);c!==void 0&&t.push(c)}if(e.S!==void 0&&Object.keys(e.S.curves).length>0){const c=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");c!==void 0&&t.push(c)}if(e.DeformPercent!==void 0){const c=this.generateMorphTrack(e);c!==void 0&&t.push(c)}return t}generateVectorTrack(e,t,i,s){const o=this.getTimesForAllAxes(t),c=this.getKeyframeTrackValues(o,t,i);return new Lc(e+"."+s,o,c)}generateRotationTrack(e,t,i,s,o,c){t.x!==void 0&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(es.degToRad)),t.y!==void 0&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(es.degToRad)),t.z!==void 0&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(es.degToRad));const h=this.getTimesForAllAxes(t),m=this.getKeyframeTrackValues(h,t,i);s!==void 0&&(s=s.map(es.degToRad),s.push(c),s=new ci().fromArray(s),s=new li().setFromEuler(s)),o!==void 0&&(o=o.map(es.degToRad),o.push(c),o=new ci().fromArray(o),o=new li().setFromEuler(o).invert());const x=new li,b=new ci,S=[];for(let M=0;M<m.length;M+=3)b.set(m[M],m[M+1],m[M+2],c),x.setFromEuler(b),s!==void 0&&x.premultiply(s),o!==void 0&&x.multiply(o),x.toArray(S,M/3*4);return new Yc(e+".quaternion",h,S)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,i=t.values.map(function(o){return o/100}),s=$i.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Rc(e.modelName+".morphTargetInfluences["+s+"]",t.times,i)}getTimesForAllAxes(e){let t=[];if(e.x!==void 0&&(t=t.concat(e.x.times)),e.y!==void 0&&(t=t.concat(e.y.times)),e.z!==void 0&&(t=t.concat(e.z.times)),t=t.sort(function(i,s){return i-s}),t.length>1){let i=1,s=t[0];for(let o=1;o<t.length;o++){const c=t[o];c!==s&&(t[i]=c,s=c,i++)}t=t.slice(0,i)}return t}getKeyframeTrackValues(e,t,i){const s=i,o=[];let c=-1,h=-1,m=-1;return e.forEach(function(x){if(t.x&&(c=t.x.times.indexOf(x)),t.y&&(h=t.y.times.indexOf(x)),t.z&&(m=t.z.times.indexOf(x)),c!==-1){const b=t.x.values[c];o.push(b),s[0]=b}else o.push(s[0]);if(h!==-1){const b=t.y.values[h];o.push(b),s[1]=b}else o.push(s[1]);if(m!==-1){const b=t.z.values[m];o.push(b),s[2]=b}else o.push(s[2])}),o}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const i=e.values[t-1],s=e.values[t]-i,o=Math.abs(s);if(o>=180){const c=o/180,h=s/c;let m=i+h;const x=e.times[t-1],S=(e.times[t]-x)/c;let M=x+S;const P=[],L=[];for(;M<e.times[t];)P.push(M),M+=S,L.push(m),m+=h;e.times=UM(e.times,t,P),e.values=UM(e.values,t,L)}}}}class kB{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new F2,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,i=e.split(/[\r\n]+/);return i.forEach(function(s,o){const c=s.match(/^[\s\t]*;/),h=s.match(/^[\s\t]*$/);if(c||h)return;const m=s.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),x=s.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),b=s.match("^\\t{"+(t.currentIndent-1)+"}}");m?t.parseNodeBegin(s,m):x?t.parseNodeProperty(s,x,i[++o]):b?t.popStack():s.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(s)}),this.allNodes}parseNodeBegin(e,t){const i=t[1].trim().replace(/^"/,"").replace(/"$/,""),s=t[2].split(",").map(function(m){return m.trim().replace(/^"/,"").replace(/"$/,"")}),o={name:i},c=this.parseNodeAttr(s),h=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(i,o):i in h?(i==="PoseNode"?h.PoseNode.push(o):h[i].id!==void 0&&(h[i]={},h[i][h[i].id]=h[i]),c.id!==""&&(h[i][c.id]=o)):typeof c.id=="number"?(h[i]={},h[i][c.id]=o):i!=="Properties70"&&(i==="PoseNode"?h[i]=[o]:h[i]=o),typeof c.id=="number"&&(o.id=c.id),c.name!==""&&(o.attrName=c.name),c.type!==""&&(o.attrType=c.type),this.pushStack(o)}parseNodeAttr(e){let t=e[0];e[0]!==""&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let i="",s="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),s=e[2]),{id:t,name:i,type:s}}parseNodeProperty(e,t,i){let s=t[1].replace(/^"/,"").replace(/"$/,"").trim(),o=t[2].replace(/^"/,"").replace(/"$/,"").trim();s==="Content"&&o===","&&(o=i.replace(/"/g,"").replace(/,$/,"").trim());const c=this.getCurrentNode();if(c.name==="Properties70"){this.parseNodeSpecialProperty(e,s,o);return}if(s==="C"){const m=o.split(",").slice(1),x=parseInt(m[0]),b=parseInt(m[1]);let S=o.split(",").slice(3);S=S.map(function(M){return M.trim().replace(/^"/,"")}),s="connections",o=[x,b],FB(o,S),c[s]===void 0&&(c[s]=[])}s==="Node"&&(c.id=o),s in c&&Array.isArray(c[s])?c[s].push(o):s!=="a"?c[s]=o:c.a=o,this.setCurrentProp(c,s),s==="a"&&o.slice(-1)!==","&&(c.a=Zx(o))}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,e.slice(-1)!==","&&(t.a=Zx(t.a))}parseNodeSpecialProperty(e,t,i){const s=i.split('",').map(function(b){return b.trim().replace(/^\"/,"").replace(/\s/,"_")}),o=s[0],c=s[1],h=s[2],m=s[3];let x=s[4];switch(c){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":x=parseFloat(x);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":x=Zx(x);break}this.getPrevNode()[o]={type:c,type2:h,flag:m,value:x},this.setCurrentProp(this.getPrevNode(),o)}}class RB{parse(e){const t=new OM(e);t.skip(23);const i=t.getUint32();if(i<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+i);const s=new F2;for(;!this.endOfContent(t);){const o=this.parseNode(t,i);o!==null&&s.add(o.name,o)}return s}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const i={},s=t>=7500?e.getUint64():e.getUint32(),o=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const c=e.getUint8(),h=e.getString(c);if(s===0)return null;const m=[];for(let M=0;M<o;M++)m.push(this.parseProperty(e));const x=m.length>0?m[0]:"",b=m.length>1?m[1]:"",S=m.length>2?m[2]:"";for(i.singleProperty=o===1&&e.getOffset()===s;s>e.getOffset();){const M=this.parseNode(e,t);M!==null&&this.parseSubNode(h,i,M)}return i.propertyList=m,typeof x=="number"&&(i.id=x),b!==""&&(i.attrName=b),S!==""&&(i.attrType=S),h!==""&&(i.name=h),i}parseSubNode(e,t,i){if(i.singleProperty===!0){const s=i.propertyList[0];Array.isArray(s)?(t[i.name]=i,i.a=s):t[i.name]=s}else if(e==="Connections"&&i.name==="C"){const s=[];i.propertyList.forEach(function(o,c){c!==0&&s.push(o)}),t.connections===void 0&&(t.connections=[]),t.connections.push(s)}else if(i.name==="Properties70")Object.keys(i).forEach(function(o){t[o]=i[o]});else if(e==="Properties70"&&i.name==="P"){let s=i.propertyList[0],o=i.propertyList[1];const c=i.propertyList[2],h=i.propertyList[3];let m;s.indexOf("Lcl ")===0&&(s=s.replace("Lcl ","Lcl_")),o.indexOf("Lcl ")===0&&(o=o.replace("Lcl ","Lcl_")),o==="Color"||o==="ColorRGB"||o==="Vector"||o==="Vector3D"||o.indexOf("Lcl_")===0?m=[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:m=i.propertyList[4],t[s]={type:o,type2:c,flag:h,value:m}}else t[i.name]===void 0?typeof i.id=="number"?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:i.name==="PoseNode"?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):t[i.name][i.id]===void 0&&(t[i.name][i.id]=i)}parseProperty(e){const t=e.getString(1);let i;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return i=e.getUint32(),e.getArrayBuffer(i);case"S":return i=e.getUint32(),e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const s=e.getUint32(),o=e.getUint32(),c=e.getUint32();if(o===0)switch(t){case"b":case"c":return e.getBooleanArray(s);case"d":return e.getFloat64Array(s);case"f":return e.getFloat32Array(s);case"i":return e.getInt32Array(s);case"l":return e.getInt64Array(s)}const h=vB(new Uint8Array(e.getArrayBuffer(c))),m=new OM(h.buffer);switch(t){case"b":case"c":return m.getBooleanArray(s);case"d":return m.getFloat64Array(s);case"f":return m.getFloat32Array(s);case"i":return m.getInt32Array(s);case"l":return m.getInt64Array(s)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class OM{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=t!==void 0?t:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(e){const t=[];for(let i=0;i<e;i++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t&2147483648?(t=~t&4294967295,e=~e&4294967295,e===4294967295&&(t=t+1&4294967295),e=e+1&4294967295,-(t*4294967296+e)):t*4294967296+e}getInt64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),t*4294967296+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let i=0;i<e;i++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let s=0;s<e;s++)t[s]=this.getUint8();const i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),D2(new Uint8Array(t))}}class F2{add(e,t){this[e]=t}}function LB(n){const e="Kaydara FBX Binary  \0";return n.byteLength>=e.length&&e===U2(n,0,e.length)}function IB(n){const e=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let t=0;function i(s){const o=n[s-1];return n=n.slice(t+s),t++,o}for(let s=0;s<e.length;++s)if(i(1)===e[s])return!1;return!0}function zM(n){const e=/FBXVersion: (\d+)/,t=n.match(e);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function DB(n){return n/46186158e3}const NB=[];function lp(n,e,t,i){let s;switch(i.mappingType){case"ByPolygonVertex":s=n;break;case"ByPolygon":s=e;break;case"ByVertice":s=t;break;case"AllSame":s=i.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+i.mappingType)}i.referenceType==="IndexToDirect"&&(s=i.indices[s]);const o=s*i.dataSize,c=o+i.dataSize;return OB(NB,i.buffer,o,c)}const qx=new ci,Yl=new le;function O2(n){const e=new gt,t=new gt,i=new gt,s=new gt,o=new gt,c=new gt,h=new gt,m=new gt,x=new gt,b=new gt,S=new gt,M=new gt,P=n.inheritType?n.inheritType:0;if(n.translation&&e.setPosition(Yl.fromArray(n.translation)),n.preRotation){const K=n.preRotation.map(es.degToRad);K.push(n.eulerOrder),t.makeRotationFromEuler(qx.fromArray(K))}if(n.rotation){const K=n.rotation.map(es.degToRad);K.push(n.eulerOrder),i.makeRotationFromEuler(qx.fromArray(K))}if(n.postRotation){const K=n.postRotation.map(es.degToRad);K.push(n.eulerOrder),s.makeRotationFromEuler(qx.fromArray(K)),s.invert()}n.scale&&o.scale(Yl.fromArray(n.scale)),n.scalingOffset&&h.setPosition(Yl.fromArray(n.scalingOffset)),n.scalingPivot&&c.setPosition(Yl.fromArray(n.scalingPivot)),n.rotationOffset&&m.setPosition(Yl.fromArray(n.rotationOffset)),n.rotationPivot&&x.setPosition(Yl.fromArray(n.rotationPivot)),n.parentMatrixWorld&&(S.copy(n.parentMatrix),b.copy(n.parentMatrixWorld));const L=t.clone().multiply(i).multiply(s),z=new gt;z.extractRotation(b);const F=new gt;F.copyPosition(b);const k=F.clone().invert().multiply(b),R=z.clone().invert().multiply(k),O=o,W=new gt;if(P===0)W.copy(z).multiply(L).multiply(R).multiply(O);else if(P===1)W.copy(z).multiply(R).multiply(L).multiply(O);else{const se=new gt().scale(new le().setFromMatrixScale(S)).clone().invert(),ge=R.clone().multiply(se);W.copy(z).multiply(L).multiply(ge).multiply(O)}const Z=x.clone().invert(),J=c.clone().invert();let te=e.clone().multiply(m).multiply(x).multiply(t).multiply(i).multiply(s).multiply(Z).multiply(h).multiply(c).multiply(o).multiply(J);const re=new gt().copyPosition(te),ee=b.clone().multiply(re);return M.copyPosition(ee),te=M.clone().multiply(W),te.premultiply(b.invert()),te}function z2(n){n=n||0;const e=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return n===6?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),e[0]):e[n]}function Zx(n){return n.split(",").map(function(t){return parseFloat(t)})}function U2(n,e,t){return e===void 0&&(e=0),t===void 0&&(t=n.byteLength),D2(new Uint8Array(n,e,t))}function FB(n,e){for(let t=0,i=n.length,s=e.length;t<s;t++,i++)n[i]=e[t]}function OB(n,e,t,i){for(let s=t,o=0;s<i;s++,o++)n[o]=e[s];return n}function UM(n,e,t){return n.slice(0,e).concat(t).concat(n.slice(e))}function ew(n){return ad(Qb,n)}ew.preload=n=>ad.preload(Qb,n);ew.clear=n=>ad.clear(Qb,n);function zB(n,e){const t=dt.useRef(),[i]=dt.useState(()=>e?e instanceof Qt?{current:e}:e:t),[s]=dt.useState(()=>new i2(void 0));dt.useLayoutEffect(()=>{e&&(i.current=e instanceof Qt?e:e.current),s._root=i.current});const o=dt.useRef({}),c=dt.useMemo(()=>{const h={};return n.forEach(m=>Object.defineProperty(h,m.name,{enumerable:!0,get(){if(i.current)return o.current[m.name]||(o.current[m.name]=s.clipAction(m,i.current))},configurable:!0})),{ref:i,clips:n,actions:h,names:n.map(m=>m.name),mixer:s}},[n]);return OU((h,m)=>s.update(m)),dt.useEffect(()=>{const h=i.current;return()=>{o.current={},s.stopAllAction(),Object.values(c.actions).forEach(m=>{h&&s.uncacheAction(m,h)})}},[n]),c}var B2={exports:{}},UB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",BB=UB,HB=BB;function H2(){}function V2(){}V2.resetWarningCache=H2;var VB=function(){function n(i,s,o,c,h,m){if(m!==HB){var x=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw x.name="Invariant Violation",x}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:V2,resetWarningCache:H2};return t.PropTypes=t,t};B2.exports=VB();var WB=B2.exports;const GB=n=>n===0?0:Math.pow(2,10*n-10);function XB({children:n,floor:e=.25,segments:t=20,receiveShadow:i,...s}){const o=dt.useRef(null);return dt.useLayoutEffect(()=>{let c=0;const h=t/t/2,m=o.current.attributes.position;for(let x=0;x<t+1;x++)for(let b=0;b<t+1;b++)m.setXYZ(c++,x/t-h+(x===0?-e:0),b/t-h,GB(x/t));m.needsUpdate=!0,o.current.computeVertexNormals()},[t,e]),dt.createElement("group",s,dt.createElement("mesh",{receiveShadow:i,rotation:[-Math.PI/2,0,Math.PI/2]},dt.createElement("planeGeometry",{ref:o,args:[1,1,t,t]}),n))}var YB={BASE_URL:"/farabi-wizard-game/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const BM=n=>{let e;const t=new Set,i=(b,S)=>{const M=typeof b=="function"?b(e):b;if(!Object.is(M,e)){const P=e;e=S??(typeof M!="object"||M===null)?M:Object.assign({},e,M),t.forEach(L=>L(e,P))}},s=()=>e,m={setState:i,getState:s,getInitialState:()=>x,subscribe:b=>(t.add(b),()=>t.delete(b)),destroy:()=>{(YB?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},x=e=n(i,s,m);return m},jB=n=>n?BM(n):BM;var W2={exports:{}},G2={},X2={exports:{}},Y2={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nc=dt;function qB(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ZB=typeof Object.is=="function"?Object.is:qB,KB=Nc.useState,JB=Nc.useEffect,$B=Nc.useLayoutEffect,QB=Nc.useDebugValue;function e4(n,e){var t=e(),i=KB({inst:{value:t,getSnapshot:e}}),s=i[0].inst,o=i[1];return $B(function(){s.value=t,s.getSnapshot=e,Kx(s)&&o({inst:s})},[n,t,e]),JB(function(){return Kx(s)&&o({inst:s}),n(function(){Kx(s)&&o({inst:s})})},[n]),QB(t),t}function Kx(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ZB(n,t)}catch{return!0}}function t4(n,e){return e()}var n4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t4:e4;Y2.useSyncExternalStore=Nc.useSyncExternalStore!==void 0?Nc.useSyncExternalStore:n4;X2.exports=Y2;var i4=X2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=dt,r4=i4;function s4(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var a4=typeof Object.is=="function"?Object.is:s4,o4=r4.useSyncExternalStore,l4=Em.useRef,c4=Em.useEffect,u4=Em.useMemo,h4=Em.useDebugValue;G2.useSyncExternalStoreWithSelector=function(n,e,t,i,s){var o=l4(null);if(o.current===null){var c={hasValue:!1,value:null};o.current=c}else c=o.current;o=u4(function(){function m(P){if(!x){if(x=!0,b=P,P=i(P),s!==void 0&&c.hasValue){var L=c.value;if(s(L,P))return S=L}return S=P}if(L=S,a4(b,P))return L;var z=i(P);return s!==void 0&&s(L,z)?L:(b=P,S=z)}var x=!1,b,S,M=t===void 0?null:t;return[function(){return m(e())},M===null?void 0:function(){return m(M())}]},[e,t,i,s]);var h=o4(n,o[0],o[1]);return c4(function(){c.hasValue=!0,c.value=h},[h]),h4(h),h};W2.exports=G2;var d4=W2.exports;const f4=Rg(d4);var j2={BASE_URL:"/farabi-wizard-game/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:p4}=tA,{useSyncExternalStoreWithSelector:g4}=f4;let HM=!1;const m4=n=>n;function v4(n,e=m4,t){(j2?"production":void 0)!=="production"&&t&&!HM&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),HM=!0);const i=g4(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return p4(i),i}const VM=n=>{(j2?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?jB(n):n,t=(i,s)=>v4(e,i,s);return Object.assign(t,e),t},q2=n=>n?VM(n):VM,kg=q2((n,e)=>({current:{price:100,symbol:"LBKHND",timestamp:new Date().toISOString()},history:[],status:"POSITIVE",updateSymbol(t){const i=[...e().history,t.price];i.length>50&&i.shift();const s=i.reduce((c,h)=>c+h)/i.length,o=t.price>s?"POSITIVE":"NEGATIVE";n({current:t,history:i,status:o})}})),Z2=q2((n,e)=>({coins:0,status:"IDLE",buy(){const t=kg.getState().status;n(t==="POSITIVE"?{coins:e().coins+=1e3,status:"RIGHT"}:{coins:e().coins-=1e3,status:"WRONG"}),n({coins:e().coins<=0?0:e().coins})},sell(){const t=kg.getState().status;n(t==="NEGATIVE"?{coins:e().coins+=1e3,status:"RIGHT"}:{coins:e().coins-=1e3,status:"WRONG"}),n({coins:e().coins<=0?0:e().coins})}}));function x4(){const n=ew("/Wizard_Gnome.fbx"),{actions:e}=zB(n.animations,n);return dt.useEffect(()=>{const t=e["Wizard_Gnome_Armature|idle"],i=e["Wizard_Gnome_Armature|agree"];i.clampWhenFinished=!0;const s=e["Wizard_Gnome_Armature|disagree"];s.clampWhenFinished=!0,t.play(),Z2.subscribe((o,c)=>{if(o.status==="RIGHT"){if(i.isRunning())return;s.stop(),i.reset(),i.play().setLoop(2201,1).fadeOut(500)}else{if(s.isRunning())return;i.stop(),s.reset(),s.play().setLoop(2201,1).fadeOut(500)}})},[]),n.children[1].material.alphaMap=null,n.children[1].castShadow=!0,n.children[1].receiveShadow=!0,Kt.jsx("primitive",{object:n,scale:[.02,.02,.02],castShadow:!0})}let tw=new Zn(90,1.5,.1,1e3);tw.position.set(0,1.5,8);tw.fov=42;function y4(){return Kt.jsxs(sB,{flat:!0,linear:!0,shadows:"soft",camera:tw,children:[Kt.jsx("ambientLight",{intensity:2.25}),Kt.jsx("directionalLight",{intensity:2,color:"#efefef",position:[0,20,5],castShadow:!0,"shadow-mapSize-height":512,"shadow-mapSize-width":512}),Kt.jsx(x4,{}),Kt.jsx("group",{scale:[50,10,5],position:[0,-.01,-3],children:Kt.jsx(XB,{floor:2,segments:10,receiveShadow:!0,children:Kt.jsx("meshStandardMaterial",{color:"#9e9e9e"})})})]})}function b4(n){let e=100;function t(o,c){return Math.random()*(c-o)+o}function i(){let o=t(-1,1);return e+=o,e=Math.round(e*100)/100,e}function s(){let o=new Date().toISOString(),c=i();return{symbol:n,price:c,timestamp:o}}return{generate:s}}function WM({type:n,block:e,onClick:t,children:i}){const s=`game-button ${n} ${e?"w-full":""}`;return Kt.jsx("button",{onClick:t,className:s,children:i})}var K2={},hy={exports:{}};/*!
 * ApexCharts v3.50.0
 * (c) 2018-2024 ApexCharts
 * Released under the MIT License.
 */(function(n,e){function t(G,r){var a=Object.keys(G);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(G);r&&(l=l.filter(function(u){return Object.getOwnPropertyDescriptor(G,u).enumerable})),a.push.apply(a,l)}return a}function i(G){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?t(Object(a),!0).forEach(function(l){m(G,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(G,Object.getOwnPropertyDescriptors(a)):t(Object(a)).forEach(function(l){Object.defineProperty(G,l,Object.getOwnPropertyDescriptor(a,l))})}return G}function s(G){return s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},s(G)}function o(G,r){if(!(G instanceof r))throw new TypeError("Cannot call a class as a function")}function c(G,r){for(var a=0;a<r.length;a++){var l=r[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(G,l.key,l)}}function h(G,r,a){return r&&c(G.prototype,r),a&&c(G,a),G}function m(G,r,a){return r in G?Object.defineProperty(G,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):G[r]=a,G}function x(G,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");G.prototype=Object.create(r&&r.prototype,{constructor:{value:G,writable:!0,configurable:!0}}),r&&S(G,r)}function b(G){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},b(G)}function S(G,r){return S=Object.setPrototypeOf||function(a,l){return a.__proto__=l,a},S(G,r)}function M(G){if(G===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return G}function P(G){var r=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var a,l=b(G);if(r){var u=b(this).constructor;a=Reflect.construct(l,arguments,u)}else a=l.apply(this,arguments);return function(d,f){if(f&&(typeof f=="object"||typeof f=="function"))return f;if(f!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M(d)}(this,a)}}function L(G,r){return function(a){if(Array.isArray(a))return a}(G)||function(a,l){var u=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(u!=null){var d,f,v=[],y=!0,_=!1;try{for(u=u.call(a);!(y=(d=u.next()).done)&&(v.push(d.value),!l||v.length!==l);y=!0);}catch(A){_=!0,f=A}finally{try{y||u.return==null||u.return()}finally{if(_)throw f}}return v}}(G,r)||F(G,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function z(G){return function(r){if(Array.isArray(r))return k(r)}(G)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(G)||F(G)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function F(G,r){if(G){if(typeof G=="string")return k(G,r);var a=Object.prototype.toString.call(G).slice(8,-1);return a==="Object"&&G.constructor&&(a=G.constructor.name),a==="Map"||a==="Set"?Array.from(G):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?k(G,r):void 0}}function k(G,r){(r==null||r>G.length)&&(r=G.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=G[a];return l}var R=function(){function G(){o(this,G)}return h(G,[{key:"shadeRGBColor",value:function(r,a){var l=a.split(","),u=r<0?0:255,d=r<0?-1*r:r,f=parseInt(l[0].slice(4),10),v=parseInt(l[1],10),y=parseInt(l[2],10);return"rgb("+(Math.round((u-f)*d)+f)+","+(Math.round((u-v)*d)+v)+","+(Math.round((u-y)*d)+y)+")"}},{key:"shadeHexColor",value:function(r,a){var l=parseInt(a.slice(1),16),u=r<0?0:255,d=r<0?-1*r:r,f=l>>16,v=l>>8&255,y=255&l;return"#"+(16777216+65536*(Math.round((u-f)*d)+f)+256*(Math.round((u-v)*d)+v)+(Math.round((u-y)*d)+y)).toString(16).slice(1)}},{key:"shadeColor",value:function(r,a){return G.isColorHex(a)?this.shadeHexColor(r,a):this.shadeRGBColor(r,a)}}],[{key:"bind",value:function(r,a){return function(){return r.apply(a,arguments)}}},{key:"isObject",value:function(r){return r&&s(r)==="object"&&!Array.isArray(r)&&r!=null}},{key:"is",value:function(r,a){return Object.prototype.toString.call(a)==="[object "+r+"]"}},{key:"listToArray",value:function(r){var a,l=[];for(a=0;a<r.length;a++)l[a]=r[a];return l}},{key:"extend",value:function(r,a){var l=this;typeof Object.assign!="function"&&(Object.assign=function(d){if(d==null)throw new TypeError("Cannot convert undefined or null to object");for(var f=Object(d),v=1;v<arguments.length;v++){var y=arguments[v];if(y!=null)for(var _ in y)y.hasOwnProperty(_)&&(f[_]=y[_])}return f});var u=Object.assign({},r);return this.isObject(r)&&this.isObject(a)&&Object.keys(a).forEach(function(d){l.isObject(a[d])&&d in r?u[d]=l.extend(r[d],a[d]):Object.assign(u,m({},d,a[d]))}),u}},{key:"extendArray",value:function(r,a){var l=[];return r.map(function(u){l.push(G.extend(a,u))}),r=l}},{key:"monthMod",value:function(r){return r%12}},{key:"clone",value:function(r){if(G.is("Array",r)){for(var a=[],l=0;l<r.length;l++)a[l]=this.clone(r[l]);return a}if(G.is("Null",r))return null;if(G.is("Date",r))return r;if(s(r)==="object"){var u={};for(var d in r)r.hasOwnProperty(d)&&(u[d]=this.clone(r[d]));return u}return r}},{key:"log10",value:function(r){return Math.log(r)/Math.LN10}},{key:"roundToBase10",value:function(r){return Math.pow(10,Math.floor(Math.log10(r)))}},{key:"roundToBase",value:function(r,a){return Math.pow(a,Math.floor(Math.log(r)/Math.log(a)))}},{key:"parseNumber",value:function(r){return r===null?r:parseFloat(r)}},{key:"stripNumber",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;return Number.isInteger(r)?r:parseFloat(r.toPrecision(a))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(r){var a=String(r).split(/[eE]/);if(a.length===1)return a[0];var l="",u=r<0?"-":"",d=a[0].replace(".",""),f=Number(a[1])+1;if(f<0){for(l=u+"0.";f++;)l+="0";return l+d.replace(/^-/,"")}for(f-=d.length;f--;)l+="0";return d+l}},{key:"getDimensions",value:function(r){var a=getComputedStyle(r,null),l=r.clientHeight,u=r.clientWidth;return l-=parseFloat(a.paddingTop)+parseFloat(a.paddingBottom),[u-=parseFloat(a.paddingLeft)+parseFloat(a.paddingRight),l]}},{key:"getBoundingClientRect",value:function(r){var a=r.getBoundingClientRect();return{top:a.top,right:a.right,bottom:a.bottom,left:a.left,width:r.clientWidth,height:r.clientHeight,x:a.left,y:a.top}}},{key:"getLargestStringFromArr",value:function(r){return r.reduce(function(a,l){return Array.isArray(l)&&(l=l.reduce(function(u,d){return u.length>d.length?u:d})),a.length>l.length?a:l},0)}},{key:"hexToRgba",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"#999999",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.6;r.substring(0,1)!=="#"&&(r="#999999");var l=r.replace("#","");l=l.match(new RegExp("(.{"+l.length/3+"})","g"));for(var u=0;u<l.length;u++)l[u]=parseInt(l[u].length===1?l[u]+l[u]:l[u],16);return a!==void 0&&l.push(a),"rgba("+l.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(r){return parseFloat(r.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(r){return(r=r.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&r.length===4?"#"+("0"+parseInt(r[1],10).toString(16)).slice(-2)+("0"+parseInt(r[2],10).toString(16)).slice(-2)+("0"+parseInt(r[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(r){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(r)}},{key:"getPolygonPos",value:function(r,a){for(var l=[],u=2*Math.PI/a,d=0;d<a;d++){var f={};f.x=r*Math.sin(d*u),f.y=-r*Math.cos(d*u),l.push(f)}return l}},{key:"polarToCartesian",value:function(r,a,l,u){var d=(u-90)*Math.PI/180;return{x:r+l*Math.cos(d),y:a+l*Math.sin(d)}}},{key:"escapeString",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x",l=r.toString().slice();return l=l.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,a)}},{key:"negToZero",value:function(r){return r<0?0:r}},{key:"moveIndexInArray",value:function(r,a,l){if(l>=r.length)for(var u=l-r.length+1;u--;)r.push(void 0);return r.splice(l,0,r.splice(a,1)[0]),r}},{key:"extractNumber",value:function(r){return parseFloat(r.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(r,a){for(;(r=r.parentElement)&&!r.classList.contains(a););return r}},{key:"setELstyles",value:function(r,a){for(var l in a)a.hasOwnProperty(l)&&(r.style.key=a[l])}},{key:"isNumber",value:function(r){return!isNaN(r)&&parseFloat(Number(r))===r&&!isNaN(parseInt(r,10))}},{key:"isFloat",value:function(r){return Number(r)===r&&r%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(window.navigator.userAgent.indexOf("MSIE")!==-1||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var r=window.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0)return parseInt(r.substring(a+5,r.indexOf(".",a)),10);if(r.indexOf("Trident/")>0){var l=r.indexOf("rv:");return parseInt(r.substring(l+3,r.indexOf(".",l)),10)}var u=r.indexOf("Edge/");return u>0&&parseInt(r.substring(u+5,r.indexOf(".",u)),10)}},{key:"getGCD",value:function(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,u=Math.pow(10,l-Math.floor(Math.log10(Math.max(r,a))));for(r=Math.round(Math.abs(r)*u),a=Math.round(Math.abs(a)*u);a;){var d=a;a=r%a,r=d}return r/u}},{key:"getPrimeFactors",value:function(r){for(var a=[],l=2;r>=2;)r%l==0?(a.push(l),r/=l):l++;return a}},{key:"mod",value:function(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:7,u=Math.pow(10,l-Math.floor(Math.log10(Math.max(r,a))));return(r=Math.round(Math.abs(r)*u))%(a=Math.round(Math.abs(a)*u))/u}}]),G}(),O=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.setEasingFunctions()}return h(G,[{key:"setEasingFunctions",value:function(){var r;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":r="-";break;case"easein":r="<";break;case"easeout":r=">";break;case"easeinout":default:r="<>";break;case"swing":r=function(a){var l=1.70158;return(a-=1)*a*((l+1)*a+l)+1};break;case"bounce":r=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375};break;case"elastic":r=function(a){return a===!!a?a:Math.pow(2,-10*a)*Math.sin((a-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=r}}},{key:"animateLine",value:function(r,a,l,u){r.attr(a).animate(u).attr(l)}},{key:"animateMarker",value:function(r,a,l,u,d,f){a||(a=0),r.attr({r:a,opacity:0}).animate(u,d).attr({r:l,opacity:1}).afterAll(function(){f()})}},{key:"animateRect",value:function(r,a,l,u,d){r.attr(a).animate(u).attr(l).afterAll(function(){return d()})}},{key:"animatePathsGradually",value:function(r){var a=r.el,l=r.realIndex,u=r.j,d=r.fill,f=r.pathFrom,v=r.pathTo,y=r.speed,_=r.delay,A=this.w,E=0;A.config.chart.animations.animateGradually.enabled&&(E=A.config.chart.animations.animateGradually.delay),A.config.chart.animations.dynamicAnimation.enabled&&A.globals.dataChanged&&A.config.chart.type!=="bar"&&(E=0),this.morphSVG(a,l,u,A.config.chart.type!=="line"||A.globals.comboCharts?d:"stroke",f,v,y,_*E)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach(function(r){var a=r.el;a.classList.remove("apexcharts-element-hidden"),a.classList.add("apexcharts-hidden-element-shown")})}},{key:"animationCompleted",value:function(r){var a=this.w;a.globals.animationEnded||(a.globals.animationEnded=!0,this.showDelayedElements(),typeof a.config.chart.events.animationEnd=="function"&&a.config.chart.events.animationEnd(this.ctx,{el:r,w:a}))}},{key:"morphSVG",value:function(r,a,l,u,d,f,v,y){var _=this,A=this.w;d||(d=r.attr("pathFrom")),f||(f=r.attr("pathTo"));var E=function(T){return A.config.chart.type==="radar"&&(v=1),"M 0 ".concat(A.globals.gridHeight)};(!d||d.indexOf("undefined")>-1||d.indexOf("NaN")>-1)&&(d=E()),(!f||f.indexOf("undefined")>-1||f.indexOf("NaN")>-1)&&(f=E()),A.globals.shouldAnimate||(v=1),r.plot(d).animate(1,A.globals.easing,y).plot(d).animate(v,A.globals.easing,y).plot(f).afterAll(function(){R.isNumber(l)?l===A.globals.series[A.globals.maxValsInArrayIndex].length-2&&A.globals.shouldAnimate&&_.animationCompleted(r):u!=="none"&&A.globals.shouldAnimate&&(!A.globals.comboCharts&&a===A.globals.series.length-1||A.globals.comboCharts)&&_.animationCompleted(r),_.showDelayedElements()})}}]),G}(),W=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"getDefaultFilter",value:function(r,a){var l=this.w;r.unfilter(!0),new window.SVG.Filter().size("120%","180%","-5%","-40%"),l.config.states.normal.filter!=="none"?this.applyFilter(r,a,l.config.states.normal.filter.type,l.config.states.normal.filter.value):l.config.chart.dropShadow.enabled&&this.dropShadow(r,l.config.chart.dropShadow,a)}},{key:"addNormalFilter",value:function(r,a){var l=this.w;l.config.chart.dropShadow.enabled&&!r.node.classList.contains("apexcharts-marker")&&this.dropShadow(r,l.config.chart.dropShadow,a)}},{key:"addLightenFilter",value:function(r,a,l){var u=this,d=this.w,f=l.intensity;r.unfilter(!0),new window.SVG.Filter,r.filter(function(v){var y=d.config.chart.dropShadow;(y.enabled?u.addShadow(v,a,y):v).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:f}})}),r.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(r.filterer.node)}},{key:"addDarkenFilter",value:function(r,a,l){var u=this,d=this.w,f=l.intensity;r.unfilter(!0),new window.SVG.Filter,r.filter(function(v){var y=d.config.chart.dropShadow;(y.enabled?u.addShadow(v,a,y):v).componentTransfer({rgb:{type:"linear",slope:f}})}),r.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(r.filterer.node)}},{key:"applyFilter",value:function(r,a,l){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.5;switch(l){case"none":this.addNormalFilter(r,a);break;case"lighten":this.addLightenFilter(r,a,{intensity:u});break;case"darken":this.addDarkenFilter(r,a,{intensity:u})}}},{key:"addShadow",value:function(r,a,l){var u,d=this.w,f=l.blur,v=l.top,y=l.left,_=l.color,A=l.opacity;if(((u=d.config.chart.dropShadow.enabledOnSeries)===null||u===void 0?void 0:u.length)>0&&d.config.chart.dropShadow.enabledOnSeries.indexOf(a)===-1)return r;var E=r.flood(Array.isArray(_)?_[a]:_,A).composite(r.sourceAlpha,"in").offset(y,v).gaussianBlur(f).merge(r.source);return r.blend(r.source,E)}},{key:"dropShadow",value:function(r,a){var l,u,d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,f=a.top,v=a.left,y=a.blur,_=a.color,A=a.opacity,E=a.noUserSpaceOnUse,T=this.w;return r.unfilter(!0),R.isIE()&&T.config.chart.type==="radialBar"||((l=T.config.chart.dropShadow.enabledOnSeries)===null||l===void 0?void 0:l.length)>0&&((u=T.config.chart.dropShadow.enabledOnSeries)===null||u===void 0?void 0:u.indexOf(d))===-1||(_=Array.isArray(_)?_[d]:_,r.filter(function(N){var U=null;U=R.isSafari()||R.isFirefox()||R.isIE()?N.flood(_,A).composite(N.sourceAlpha,"in").offset(v,f).gaussianBlur(y):N.flood(_,A).composite(N.sourceAlpha,"in").offset(v,f).gaussianBlur(y).merge(N.source),N.blend(N.source,U)}),E||r.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(r.filterer.node)),r}},{key:"setSelectionFilter",value:function(r,a,l){var u=this.w;if(u.globals.selectedDataPoints[a]!==void 0&&u.globals.selectedDataPoints[a].indexOf(l)>-1){r.node.setAttribute("selected",!0);var d=u.config.states.active.filter;d!=="none"&&this.applyFilter(r,a,d.type,d.value)}}},{key:"_scaleFilterSize",value:function(r){(function(a){for(var l in a)a.hasOwnProperty(l)&&r.setAttribute(l,a[l])})({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),G}(),Z=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"roundPathCorners",value:function(r,a){function l(ne,fe,de){var Me=fe.x-ne.x,Oe=fe.y-ne.y,_e=Math.sqrt(Me*Me+Oe*Oe);return u(ne,fe,Math.min(1,de/_e))}function u(ne,fe,de){return{x:ne.x+(fe.x-ne.x)*de,y:ne.y+(fe.y-ne.y)*de}}function d(ne,fe){ne.length>2&&(ne[ne.length-2]=fe.x,ne[ne.length-1]=fe.y)}function f(ne){return{x:parseFloat(ne[ne.length-2]),y:parseFloat(ne[ne.length-1])}}r.indexOf("NaN")>-1&&(r="");var v=r.split(/[,\s]/).reduce(function(ne,fe){var de=fe.match("([a-zA-Z])(.+)");return de?(ne.push(de[1]),ne.push(de[2])):ne.push(fe),ne},[]).reduce(function(ne,fe){return parseFloat(fe)==fe&&ne.length?ne[ne.length-1].push(fe):ne.push([fe]),ne},[]),y=[];if(v.length>1){var _=f(v[0]),A=null;v[v.length-1][0]=="Z"&&v[0].length>2&&(A=["L",_.x,_.y],v[v.length-1]=A),y.push(v[0]);for(var E=1;E<v.length;E++){var T=y[y.length-1],N=v[E],U=N==A?v[1]:v[E+1];if(U&&T&&T.length>2&&N[0]=="L"&&U.length>2&&U[0]=="L"){var H,X,Y=f(T),q=f(N),w=f(U);H=l(q,Y,a),X=l(q,w,a),d(N,H),N.origPoint=q,y.push(N);var D=u(H,q,.5),V=u(q,X,.5),$=["C",D.x,D.y,V.x,V.y,X.x,X.y];$.origPoint=q,y.push($)}else y.push(N)}if(A){var Q=f(y[y.length-1]);y.push(["Z"]),d(y[0],Q)}}else y=v;return y.reduce(function(ne,fe){return ne+fe.join(" ")+" "},"")}},{key:"drawLine",value:function(r,a,l,u){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"#a8a8a8",f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,v=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:r,y1:a,x2:l,y2:u,stroke:d,"stroke-dasharray":f,"stroke-width":v,"stroke-linecap":y})}},{key:"drawRect",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"#fefefe",v=arguments.length>6&&arguments[6]!==void 0?arguments[6]:1,y=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,_=arguments.length>8&&arguments[8]!==void 0?arguments[8]:null,A=arguments.length>9&&arguments[9]!==void 0?arguments[9]:0,E=this.w.globals.dom.Paper.rect();return E.attr({x:r,y:a,width:l>0?l:0,height:u>0?u:0,rx:d,ry:d,opacity:v,"stroke-width":y!==null?y:0,stroke:_!==null?_:"none","stroke-dasharray":A}),E.node.setAttribute("fill",f),E}},{key:"drawPolygon",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"#e1e1e1",l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(r).attr({fill:u,stroke:a,"stroke-width":l})}},{key:"drawCircle",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;r<0&&(r=0);var l=this.w.globals.dom.Paper.circle(2*r);return a!==null&&l.attr(a),l}},{key:"drawPath",value:function(r){var a=r.d,l=a===void 0?"":a,u=r.stroke,d=u===void 0?"#a8a8a8":u,f=r.strokeWidth,v=f===void 0?1:f,y=r.fill,_=r.fillOpacity,A=_===void 0?1:_,E=r.strokeOpacity,T=E===void 0?1:E,N=r.classes,U=r.strokeLinecap,H=U===void 0?null:U,X=r.strokeDashArray,Y=X===void 0?0:X,q=this.w;return H===null&&(H=q.config.stroke.lineCap),(l.indexOf("undefined")>-1||l.indexOf("NaN")>-1)&&(l="M 0 ".concat(q.globals.gridHeight)),q.globals.dom.Paper.path(l).attr({fill:y,"fill-opacity":A,stroke:d,"stroke-opacity":T,"stroke-linecap":H,"stroke-width":v,"stroke-dasharray":Y,class:N})}},{key:"group",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this.w.globals.dom.Paper.group();return r!==null&&a.attr(r),a}},{key:"move",value:function(r,a){var l=["M",r,a].join(" ");return l}},{key:"line",value:function(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=null;return l===null?u=[" L",r,a].join(" "):l==="H"?u=[" H",r].join(" "):l==="V"&&(u=[" V",a].join(" ")),u}},{key:"curve",value:function(r,a,l,u,d,f){var v=["C",r,a,l,u,d,f].join(" ");return v}},{key:"quadraticCurve",value:function(r,a,l,u){return["Q",r,a,l,u].join(" ")}},{key:"arc",value:function(r,a,l,u,d,f,v){var y="A";arguments.length>7&&arguments[7]!==void 0&&arguments[7]&&(y="a");var _=[y,r,a,l,u,d,f,v].join(" ");return _}},{key:"renderPaths",value:function(r){var a,l=r.j,u=r.realIndex,d=r.pathFrom,f=r.pathTo,v=r.stroke,y=r.strokeWidth,_=r.strokeLinecap,A=r.fill,E=r.animationDelay,T=r.initialSpeed,N=r.dataChangeSpeed,U=r.className,H=r.shouldClipToGrid,X=H===void 0||H,Y=r.bindEventsOnPaths,q=Y===void 0||Y,w=r.drawShadow,D=w===void 0||w,V=this.w,$=new W(this.ctx),Q=new O(this.ctx),ne=this.w.config.chart.animations.enabled,fe=ne&&this.w.config.chart.animations.dynamicAnimation.enabled,de=!!(ne&&!V.globals.resized||fe&&V.globals.dataChanged&&V.globals.shouldAnimate);de?a=d:(a=f,V.globals.animationEnded=!0);var Me=V.config.stroke.dashArray,Oe=0;Oe=Array.isArray(Me)?Me[u]:V.config.stroke.dashArray;var _e=this.drawPath({d:a,stroke:v,strokeWidth:y,fill:A,fillOpacity:1,classes:U,strokeLinecap:_,strokeDashArray:Oe});if(_e.attr("index",u),X&&_e.attr({"clip-path":"url(#gridRectMask".concat(V.globals.cuid,")")}),V.config.states.normal.filter.type!=="none")$.getDefaultFilter(_e,u);else if(V.config.chart.dropShadow.enabled&&D){var Ne=V.config.chart.dropShadow;$.dropShadow(_e,Ne,u)}q&&(_e.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,_e)),_e.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,_e)),_e.node.addEventListener("mousedown",this.pathMouseDown.bind(this,_e))),_e.attr({pathTo:f,pathFrom:d});var it={el:_e,j:l,realIndex:u,pathFrom:d,pathTo:f,fill:A,strokeWidth:y,delay:E};return!ne||V.globals.resized||V.globals.dataChanged?!V.globals.resized&&V.globals.dataChanged||Q.showDelayedElements():Q.animatePathsGradually(i(i({},it),{},{speed:T})),V.globals.dataChanged&&fe&&de&&Q.animatePathsGradually(i(i({},it),{},{speed:N})),_e}},{key:"drawPattern",value:function(r,a,l){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"#a8a8a8",d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;return this.w.globals.dom.Paper.pattern(a,l,function(f){r==="horizontalLines"?f.line(0,0,l,0).stroke({color:u,width:d+1}):r==="verticalLines"?f.line(0,0,0,a).stroke({color:u,width:d+1}):r==="slantedLines"?f.line(0,0,a,l).stroke({color:u,width:d}):r==="squares"?f.rect(a,l).fill("none").stroke({color:u,width:d}):r==="circles"&&f.circle(a).fill("none").stroke({color:u,width:d})})}},{key:"drawGradient",value:function(r,a,l,u,d){var f,v=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,y=arguments.length>6&&arguments[6]!==void 0?arguments[6]:null,_=arguments.length>7&&arguments[7]!==void 0?arguments[7]:null,A=arguments.length>8&&arguments[8]!==void 0?arguments[8]:0,E=this.w;a.length<9&&a.indexOf("#")===0&&(a=R.hexToRgba(a,u)),l.length<9&&l.indexOf("#")===0&&(l=R.hexToRgba(l,d));var T=0,N=1,U=1,H=null;y!==null&&(T=y[0]!==void 0?y[0]/100:0,N=y[1]!==void 0?y[1]/100:1,U=y[2]!==void 0?y[2]/100:1,H=y[3]!==void 0?y[3]/100:null);var X=!(E.config.chart.type!=="donut"&&E.config.chart.type!=="pie"&&E.config.chart.type!=="polarArea"&&E.config.chart.type!=="bubble");if(f=_===null||_.length===0?E.globals.dom.Paper.gradient(X?"radial":"linear",function(w){w.at(T,a,u),w.at(N,l,d),w.at(U,l,d),H!==null&&w.at(H,a,u)}):E.globals.dom.Paper.gradient(X?"radial":"linear",function(w){(Array.isArray(_[A])?_[A]:_).forEach(function(D){w.at(D.offset/100,D.color,D.opacity)})}),X){var Y=E.globals.gridWidth/2,q=E.globals.gridHeight/2;E.config.chart.type!=="bubble"?f.attr({gradientUnits:"userSpaceOnUse",cx:Y,cy:q,r:v}):f.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else r==="vertical"?f.from(0,0).to(0,1):r==="diagonal"?f.from(0,0).to(1,1):r==="horizontal"?f.from(0,1).to(1,1):r==="diagonal2"&&f.from(1,0).to(0,1);return f}},{key:"getTextBasedOnMaxWidth",value:function(r){var a=r.text,l=r.maxWidth,u=r.fontSize,d=r.fontFamily,f=this.getTextRects(a,u,d),v=f.width/a.length,y=Math.floor(l/v);return l<f.width?a.slice(0,y-3)+"...":a}},{key:"drawText",value:function(r){var a=this,l=r.x,u=r.y,d=r.text,f=r.textAnchor,v=r.fontSize,y=r.fontFamily,_=r.fontWeight,A=r.foreColor,E=r.opacity,T=r.maxWidth,N=r.cssClass,U=N===void 0?"":N,H=r.isPlainText,X=H===void 0||H,Y=r.dominantBaseline,q=Y===void 0?"auto":Y,w=this.w;d===void 0&&(d="");var D=d;f||(f="start"),A&&A.length||(A=w.config.chart.foreColor),y=y||w.config.chart.fontFamily,_=_||"regular";var V,$={maxWidth:T,fontSize:v=v||"11px",fontFamily:y};return Array.isArray(d)?V=w.globals.dom.Paper.text(function(Q){for(var ne=0;ne<d.length;ne++)D=d[ne],T&&(D=a.getTextBasedOnMaxWidth(i({text:d[ne]},$))),ne===0?Q.tspan(D):Q.tspan(D).newLine()}):(T&&(D=this.getTextBasedOnMaxWidth(i({text:d},$))),V=X?w.globals.dom.Paper.plain(d):w.globals.dom.Paper.text(function(Q){return Q.tspan(D)})),V.attr({x:l,y:u,"text-anchor":f,"dominant-baseline":q,"font-size":v,"font-family":y,"font-weight":_,fill:A,class:"apexcharts-text "+U}),V.node.style.fontFamily=y,V.node.style.opacity=E,V}},{key:"drawXMarker",value:function(r,a,l,u,d){var f=u/2,v=l==="cross"?"M ".concat(r-f," ").concat(a-f," L ").concat(r+f," ").concat(a+f,"  M ").concat(r-f," ").concat(a+f," L ").concat(r+f," ").concat(a-f):"M ".concat(r-f," ").concat(a," L ").concat(r+f," ").concat(a,"  M ").concat(r," ").concat(a-f," L ").concat(r," ").concat(a+f),y=this.drawPath({d:v,stroke:d.pointStrokeColor,strokeDashArray:d.pointStrokeDashArray,strokeWidth:d.pointStrokeWidth,fill:d.pointFillColor});return y.attr({cx:r,cy:a,class:d.class?d.class:""}),y}},{key:"drawMarker",value:function(r,a,l){r=r||0;var u=l.pSize||0,d=null;if((l==null?void 0:l.shape)==="cross")d=this.drawXMarker(r,a,l==null?void 0:l.shape,1.8*u,i(i({},l),{},{pointStrokeColor:l.pointFillColor}));else if((l==null?void 0:l.shape)==="plus")d=this.drawXMarker(r,a,l==null?void 0:l.shape,2*u,i(i({},l),{},{pointStrokeColor:l.pointFillColor}));else if((l==null?void 0:l.shape)==="line")(d=this.drawLine(r-u,a,r+u,a,l.pointFillColor,l.pointStrokeDashArray,l.pointStrokeWidth,l.pointStrokeLineCap)).attr({cx:r,cy:a,class:l.class?l.class:""});else if(l.shape==="square"||l.shape==="rect"){var f=l.pRadius===void 0?u:l.pRadius;a!==null&&u||(u=0,f=0);var v=2*u,y=this.drawRect(v,v,v,v,f);y.attr({x:r-v/2,y:a-v/2,cx:r,cy:a,class:l.class?l.class:"",fill:l.pointFillColor,"fill-opacity":l.pointFillOpacity?l.pointFillOpacity:1,stroke:l.pointStrokeColor,"stroke-width":l.pointStrokeWidth?l.pointStrokeWidth:0,"stroke-opacity":l.pointStrokeOpacity?l.pointStrokeOpacity:1}),d=y}else l.shape!=="circle"&&l.shape||(R.isNumber(a)||(u=0,a=0),d=this.drawCircle(u,{cx:r,cy:a,class:l.class?l.class:"",stroke:l.pointStrokeColor,fill:l.pointFillColor,"fill-opacity":l.pointFillOpacity?l.pointFillOpacity:1,"stroke-width":l.pointStrokeWidth?l.pointStrokeWidth:0,"stroke-opacity":l.pointStrokeOpacity?l.pointStrokeOpacity:1}));return d}},{key:"pathMouseEnter",value:function(r,a){var l=this.w,u=new W(this.ctx),d=parseInt(r.node.getAttribute("index"),10),f=parseInt(r.node.getAttribute("j"),10);if(typeof l.config.chart.events.dataPointMouseEnter=="function"&&l.config.chart.events.dataPointMouseEnter(a,this.ctx,{seriesIndex:d,dataPointIndex:f,w:l}),this.ctx.events.fireEvent("dataPointMouseEnter",[a,this.ctx,{seriesIndex:d,dataPointIndex:f,w:l}]),(l.config.states.active.filter.type==="none"||r.node.getAttribute("selected")!=="true")&&l.config.states.hover.filter.type!=="none"&&!l.globals.isTouchDevice){var v=l.config.states.hover.filter;u.applyFilter(r,d,v.type,v.value)}}},{key:"pathMouseLeave",value:function(r,a){var l=this.w,u=new W(this.ctx),d=parseInt(r.node.getAttribute("index"),10),f=parseInt(r.node.getAttribute("j"),10);typeof l.config.chart.events.dataPointMouseLeave=="function"&&l.config.chart.events.dataPointMouseLeave(a,this.ctx,{seriesIndex:d,dataPointIndex:f,w:l}),this.ctx.events.fireEvent("dataPointMouseLeave",[a,this.ctx,{seriesIndex:d,dataPointIndex:f,w:l}]),l.config.states.active.filter.type!=="none"&&r.node.getAttribute("selected")==="true"||l.config.states.hover.filter.type!=="none"&&u.getDefaultFilter(r,d)}},{key:"pathMouseDown",value:function(r,a){var l=this.w,u=new W(this.ctx),d=parseInt(r.node.getAttribute("index"),10),f=parseInt(r.node.getAttribute("j"),10),v="false";if(r.node.getAttribute("selected")==="true"){if(r.node.setAttribute("selected","false"),l.globals.selectedDataPoints[d].indexOf(f)>-1){var y=l.globals.selectedDataPoints[d].indexOf(f);l.globals.selectedDataPoints[d].splice(y,1)}}else{if(!l.config.states.active.allowMultipleDataPointsSelection&&l.globals.selectedDataPoints.length>0){l.globals.selectedDataPoints=[];var _=l.globals.dom.Paper.select(".apexcharts-series path").members,A=l.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,E=function(U){Array.prototype.forEach.call(U,function(H){H.node.setAttribute("selected","false"),u.getDefaultFilter(H,d)})};E(_),E(A)}r.node.setAttribute("selected","true"),v="true",l.globals.selectedDataPoints[d]===void 0&&(l.globals.selectedDataPoints[d]=[]),l.globals.selectedDataPoints[d].push(f)}if(v==="true"){var T=l.config.states.active.filter;if(T!=="none")u.applyFilter(r,d,T.type,T.value);else if(l.config.states.hover.filter!=="none"&&!l.globals.isTouchDevice){var N=l.config.states.hover.filter;u.applyFilter(r,d,N.type,N.value)}}else l.config.states.active.filter.type!=="none"&&(l.config.states.hover.filter.type==="none"||l.globals.isTouchDevice?u.getDefaultFilter(r,d):(N=l.config.states.hover.filter,u.applyFilter(r,d,N.type,N.value)));typeof l.config.chart.events.dataPointSelection=="function"&&l.config.chart.events.dataPointSelection(a,this.ctx,{selectedDataPoints:l.globals.selectedDataPoints,seriesIndex:d,dataPointIndex:f,w:l}),a&&this.ctx.events.fireEvent("dataPointSelection",[a,this.ctx,{selectedDataPoints:l.globals.selectedDataPoints,seriesIndex:d,dataPointIndex:f,w:l}])}},{key:"rotateAroundCenter",value:function(r){var a={};return r&&typeof r.getBBox=="function"&&(a=r.getBBox()),{x:a.x+a.width/2,y:a.y+a.height/2}}},{key:"getTextRects",value:function(r,a,l,u){var d=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],f=this.w,v=this.drawText({x:-200,y:-200,text:r,textAnchor:"start",fontSize:a,fontFamily:l,foreColor:"#fff",opacity:0});u&&v.attr("transform",u),f.globals.dom.Paper.add(v);var y=v.bbox();return d||(y=v.node.getBoundingClientRect()),v.remove(),{width:y.width,height:y.height}}},{key:"placeTextWithEllipsis",value:function(r,a,l){if(typeof r.getComputedTextLength=="function"&&(r.textContent=a,a.length>0&&r.getComputedTextLength()>=l/1.1)){for(var u=a.length-3;u>0;u-=3)if(r.getSubStringLength(0,u)<=l/1.1)return void(r.textContent=a.substring(0,u)+"...");r.textContent="."}}}],[{key:"setAttrs",value:function(r,a){for(var l in a)a.hasOwnProperty(l)&&r.setAttribute(l,a[l])}}]),G}(),J=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"getStackedSeriesTotals",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=this.w,l=[];if(a.globals.series.length===0)return l;for(var u=0;u<a.globals.series[a.globals.maxValsInArrayIndex].length;u++){for(var d=0,f=0;f<a.globals.series.length;f++)a.globals.series[f][u]!==void 0&&r.indexOf(f)===-1&&(d+=a.globals.series[f][u]);l.push(d)}return l}},{key:"getSeriesTotalByIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return r===null?this.w.config.series.reduce(function(a,l){return a+l},0):this.w.globals.series[r].reduce(function(a,l){return a+l},0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var r=this,a=this.w,l=[];return a.globals.seriesGroups.forEach(function(u){var d=[];a.config.series.forEach(function(v,y){u.indexOf(a.globals.seriesNames[y])>-1&&d.push(y)});var f=a.globals.series.map(function(v,y){return d.indexOf(y)===-1?y:-1}).filter(function(v){return v!==-1});l.push(r.getStackedSeriesTotals(f))}),l}},{key:"setSeriesYAxisMappings",value:function(){var r=this.w.globals,a=this.w.config,l=[],u=[],d=[],f=r.series.length>a.yaxis.length||a.yaxis.some(function(E){return Array.isArray(E.seriesName)});a.series.forEach(function(E,T){d.push(T),u.push(null)}),a.yaxis.forEach(function(E,T){l[T]=[]});var v=[];a.yaxis.forEach(function(E,T){var N=!1;if(E.seriesName){var U=[];Array.isArray(E.seriesName)?U=E.seriesName:U.push(E.seriesName),U.forEach(function(H){a.series.forEach(function(X,Y){if(X.name===H){var q=Y;T===Y||f?!f||d.indexOf(Y)>-1?l[T].push([T,Y]):console.warn("Series '"+X.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(l[Y].push([Y,T]),q=T),N=!0,(q=d.indexOf(q))!==-1&&d.splice(q,1)}})})}N||v.push(T)}),l=l.map(function(E,T){var N=[];return E.forEach(function(U){u[U[1]]=U[0],N.push(U[1])}),N});for(var y=a.yaxis.length-1,_=0;_<v.length&&(y=v[_],l[y]=[],d);_++){var A=d[0];d.shift(),l[y].push(A),u[A]=y}d.forEach(function(E){l[y].push(E),u[E]=y}),r.seriesYAxisMap=l.map(function(E){return E}),r.seriesYAxisReverseMap=u.map(function(E){return E}),r.seriesYAxisMap.forEach(function(E,T){E.forEach(function(N){a.series[N]&&a.series[N].group===void 0&&(a.series[N].group="apexcharts-axis-".concat(T.toString()))})})}},{key:"isSeriesNull",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return(r===null?this.w.config.series.filter(function(a){return a!==null}):this.w.config.series[r].data.filter(function(a){return a!==null})).length===0}},{key:"seriesHaveSameValues",value:function(r){return this.w.globals.series[r].every(function(a,l,u){return a===u[0]})}},{key:"getCategoryLabels",value:function(r){var a=this.w,l=r.slice();return a.config.xaxis.convertedCatToNumeric&&(l=r.map(function(u,d){return a.config.xaxis.labels.formatter(u-a.globals.minX+1)})),l}},{key:"getLargestSeries",value:function(){var r=this.w;r.globals.maxValsInArrayIndex=r.globals.series.map(function(a){return a.length}).indexOf(Math.max.apply(Math,r.globals.series.map(function(a){return a.length})))}},{key:"getLargestMarkerSize",value:function(){var r=this.w,a=0;return r.globals.markers.size.forEach(function(l){a=Math.max(a,l)}),r.config.markers.discrete&&r.config.markers.discrete.length&&r.config.markers.discrete.forEach(function(l){a=Math.max(a,l.size)}),a>0&&(a+=r.config.markers.hover.sizeOffset+1),r.globals.markers.largestSize=a,a}},{key:"getSeriesTotals",value:function(){var r=this.w;r.globals.seriesTotals=r.globals.series.map(function(a,l){var u=0;if(Array.isArray(a))for(var d=0;d<a.length;d++)u+=a[d];else u+=a;return u})}},{key:"getSeriesTotalsXRange",value:function(r,a){var l=this.w;return l.globals.series.map(function(u,d){for(var f=0,v=0;v<u.length;v++)l.globals.seriesX[d][v]>r&&l.globals.seriesX[d][v]<a&&(f+=u[v]);return f})}},{key:"getPercentSeries",value:function(){var r=this.w;r.globals.seriesPercent=r.globals.series.map(function(a,l){var u=[];if(Array.isArray(a))for(var d=0;d<a.length;d++){var f=r.globals.stackedSeriesTotals[d],v=0;f&&(v=100*a[d]/f),u.push(v)}else{var y=100*a/r.globals.seriesTotals.reduce(function(_,A){return _+A},0);u.push(y)}return u})}},{key:"getCalculatedRatios",value:function(){var r,a,l,u=this,d=this.w,f=d.globals,v=[],y=0,_=[],A=.1,E=0;if(f.yRange=[],f.isMultipleYAxis)for(var T=0;T<f.minYArr.length;T++)f.yRange.push(Math.abs(f.minYArr[T]-f.maxYArr[T])),_.push(0);else f.yRange.push(Math.abs(f.minY-f.maxY));f.xRange=Math.abs(f.maxX-f.minX),f.zRange=Math.abs(f.maxZ-f.minZ);for(var N=0;N<f.yRange.length;N++)v.push(f.yRange[N]/f.gridHeight);if(a=f.xRange/f.gridWidth,r=f.yRange/f.gridWidth,l=f.xRange/f.gridHeight,(y=f.zRange/f.gridHeight*16)||(y=1),f.minY!==Number.MIN_VALUE&&Math.abs(f.minY)!==0&&(f.hasNegs=!0),d.globals.seriesYAxisReverseMap.length>0){var U=function(X,Y){var q=d.config.yaxis[d.globals.seriesYAxisReverseMap[Y]],w=X<0?-1:1;return X=Math.abs(X),q.logarithmic&&(X=u.getBaseLog(q.logBase,X)),-w*X/v[Y]};if(f.isMultipleYAxis){_=[];for(var H=0;H<v.length;H++)_.push(U(f.minYArr[H],H))}else(_=[]).push(U(f.minY,0)),f.minY!==Number.MIN_VALUE&&Math.abs(f.minY)!==0&&(A=-f.minY/r,E=f.minX/a)}else(_=[]).push(0),A=0,E=0;return{yRatio:v,invertedYRatio:r,zRatio:y,xRatio:a,invertedXRatio:l,baseLineInvertedY:A,baseLineY:_,baseLineX:E}}},{key:"getLogSeries",value:function(r){var a=this,l=this.w;return l.globals.seriesLog=r.map(function(u,d){var f=l.globals.seriesYAxisReverseMap[d];return l.config.yaxis[f]&&l.config.yaxis[f].logarithmic?u.map(function(v){return v===null?null:a.getLogVal(l.config.yaxis[f].logBase,v,d)}):u}),l.globals.invalidLogScale?r:l.globals.seriesLog}},{key:"getBaseLog",value:function(r,a){return Math.log(a)/Math.log(r)}},{key:"getLogVal",value:function(r,a,l){if(a<=0)return 0;var u=this.w,d=u.globals.minYArr[l]===0?-1:this.getBaseLog(r,u.globals.minYArr[l]),f=(u.globals.maxYArr[l]===0?0:this.getBaseLog(r,u.globals.maxYArr[l]))-d;return a<1?a/f:(this.getBaseLog(r,a)-d)/f}},{key:"getLogYRatios",value:function(r){var a=this,l=this.w,u=this.w.globals;return u.yLogRatio=r.slice(),u.logYRange=u.yRange.map(function(d,f){var v=l.globals.seriesYAxisReverseMap[f];if(l.config.yaxis[v]&&a.w.config.yaxis[v].logarithmic){var y,_=-Number.MAX_VALUE,A=Number.MIN_VALUE;return u.seriesLog.forEach(function(E,T){E.forEach(function(N){l.config.yaxis[T]&&l.config.yaxis[T].logarithmic&&(_=Math.max(N,_),A=Math.min(N,A))})}),y=Math.pow(u.yRange[f],Math.abs(A-_)/u.yRange[f]),u.yLogRatio[f]=y/u.gridHeight,y}}),u.invalidLogScale?r.slice():u.yLogRatio}},{key:"drawSeriesByGroup",value:function(r,a,l,u){var d=this.w,f=[];return r.series.length>0&&a.forEach(function(v){var y=[],_=[];r.i.forEach(function(A,E){d.config.series[A].group===v&&(y.push(r.series[E]),_.push(A))}),y.length>0&&f.push(u.draw(y,l,_))}),f}}],[{key:"checkComboSeries",value:function(r,a){var l=!1,u=0,d=0;return a===void 0&&(a="line"),r.length&&r[0].type!==void 0&&r.forEach(function(f){f.type!=="bar"&&f.type!=="column"&&f.type!=="candlestick"&&f.type!=="boxPlot"||u++,f.type!==void 0&&f.type!==a&&d++}),d>0&&(l=!0),{comboBarCount:u,comboCharts:l}}},{key:"extendArrayProps",value:function(r,a,l){var u,d,f,v,y,_;return(u=a)!==null&&u!==void 0&&u.yaxis&&(a=r.extendYAxis(a,l)),(d=a)!==null&&d!==void 0&&d.annotations&&(a.annotations.yaxis&&(a=r.extendYAxisAnnotations(a)),(f=a)!==null&&f!==void 0&&(v=f.annotations)!==null&&v!==void 0&&v.xaxis&&(a=r.extendXAxisAnnotations(a)),(y=a)!==null&&y!==void 0&&(_=y.annotations)!==null&&_!==void 0&&_.points&&(a=r.extendPointAnnotations(a))),a}}]),G}(),te=function(){function G(r){o(this,G),this.w=r.w,this.annoCtx=r}return h(G,[{key:"setOrientations",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=this.w;if(r.label.orientation==="vertical"){var u=a!==null?a:0,d=l.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(u,"']"));if(d!==null){var f=d.getBoundingClientRect();d.setAttribute("x",parseFloat(d.getAttribute("x"))-f.height+4),r.label.position==="top"?d.setAttribute("y",parseFloat(d.getAttribute("y"))+f.width):d.setAttribute("y",parseFloat(d.getAttribute("y"))-f.width);var v=this.annoCtx.graphics.rotateAroundCenter(d),y=v.x,_=v.y;d.setAttribute("transform","rotate(-90 ".concat(y," ").concat(_,")"))}}}},{key:"addBackgroundToAnno",value:function(r,a){var l=this.w;if(!r||a.label.text===void 0||a.label.text!==void 0&&!String(a.label.text).trim())return null;var u=l.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),d=r.getBoundingClientRect(),f=a.label.style.padding.left,v=a.label.style.padding.right,y=a.label.style.padding.top,_=a.label.style.padding.bottom;a.label.orientation==="vertical"&&(y=a.label.style.padding.left,_=a.label.style.padding.right,f=a.label.style.padding.top,v=a.label.style.padding.bottom);var A=d.left-u.left-f,E=d.top-u.top-y,T=this.annoCtx.graphics.drawRect(A-l.globals.barPadForNumericAxis,E,d.width+f+v,d.height+y+_,a.label.borderRadius,a.label.style.background,1,a.label.borderWidth,a.label.borderColor,0);return a.id&&T.node.classList.add(a.id),T}},{key:"annotationsBackground",value:function(){var r=this,a=this.w,l=function(u,d,f){var v=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(f,"-annotations .apexcharts-").concat(f,"-annotation-label[rel='").concat(d,"']"));if(v){var y=v.parentNode,_=r.addBackgroundToAnno(v,u);_&&(y.insertBefore(_.node,v),u.label.mouseEnter&&_.node.addEventListener("mouseenter",u.label.mouseEnter.bind(r,u)),u.label.mouseLeave&&_.node.addEventListener("mouseleave",u.label.mouseLeave.bind(r,u)),u.label.click&&_.node.addEventListener("click",u.label.click.bind(r,u)))}};a.config.annotations.xaxis.map(function(u,d){l(u,d,"xaxis")}),a.config.annotations.yaxis.map(function(u,d){l(u,d,"yaxis")}),a.config.annotations.points.map(function(u,d){l(u,d,"point")})}},{key:"getY1Y2",value:function(r,a){var l,u=r==="y1"?a.y:a.y2,d=!1,f=this.w;if(this.annoCtx.invertAxis){var v=f.globals.labels;f.config.xaxis.convertedCatToNumeric&&(v=f.globals.categoryLabels);var y=v.indexOf(u),_=f.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(y+1)+")");l=_?parseFloat(_.getAttribute("y")):(f.globals.gridHeight/v.length-1)*(y+1)-f.globals.barHeight,a.seriesIndex!==void 0&&f.globals.barHeight&&(l=l-f.globals.barHeight/2*(f.globals.series.length-1)+f.globals.barHeight*a.seriesIndex)}else{var A,E=f.globals.seriesYAxisMap[a.yAxisIndex][0];f.config.yaxis[a.yAxisIndex].logarithmic?A=(u=new J(this.annoCtx.ctx).getLogVal(f.config.yaxis[a.yAxisIndex].logBase,u,E))/f.globals.yLogRatio[E]:A=(u-f.globals.minYArr[E])/(f.globals.yRange[E]/f.globals.gridHeight),A>f.globals.gridHeight?(A=f.globals.gridHeight,d=!0):A<0&&(A=0,d=!0),l=f.globals.gridHeight-A,!a.marker||a.y!==void 0&&a.y!==null||(l=0),f.config.yaxis[a.yAxisIndex]&&f.config.yaxis[a.yAxisIndex].reversed&&(l=A)}return typeof u=="string"&&u.indexOf("px")>-1&&(l=parseFloat(u)),{yP:l,clipped:d}}},{key:"getX1X2",value:function(r,a){var l,u=r==="x1"?a.x:a.x2,d=this.w,f=this.annoCtx.invertAxis?d.globals.minY:d.globals.minX,v=this.annoCtx.invertAxis?d.globals.maxY:d.globals.maxX,y=this.annoCtx.invertAxis?d.globals.yRange[0]:d.globals.xRange,_=!1;return l=this.annoCtx.inversedReversedAxis?(v-u)/(y/d.globals.gridWidth):(u-f)/(y/d.globals.gridWidth),d.config.xaxis.type!=="category"&&!d.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||d.globals.dataFormatXNumeric||d.config.chart.sparkline.enabled||(l=this.getStringX(u)),typeof u=="string"&&u.indexOf("px")>-1&&(l=parseFloat(u)),u==null&&a.marker&&(l=d.globals.gridWidth),a.seriesIndex!==void 0&&d.globals.barWidth&&!this.annoCtx.invertAxis&&(l=l-d.globals.barWidth/2*(d.globals.series.length-1)+d.globals.barWidth*a.seriesIndex),l>d.globals.gridWidth?(l=d.globals.gridWidth,_=!0):l<0&&(l=0,_=!0),{x:l,clipped:_}}},{key:"getStringX",value:function(r){var a=this.w,l=r;a.config.xaxis.convertedCatToNumeric&&a.globals.categoryLabels.length&&(r=a.globals.categoryLabels.indexOf(r)+1);var u=a.globals.labels.indexOf(r),d=a.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(u+1)+")");return d&&(l=parseFloat(d.getAttribute("x"))),l}}]),G}(),re=function(){function G(r){o(this,G),this.w=r.w,this.annoCtx=r,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new te(this.annoCtx)}return h(G,[{key:"addXaxisAnnotation",value:function(r,a,l){var u,d=this.w,f=this.helpers.getX1X2("x1",r),v=f.x,y=f.clipped,_=!0,A=r.label.text,E=r.strokeDashArray;if(R.isNumber(v)){if(r.x2===null||r.x2===void 0){if(!y){var T=this.annoCtx.graphics.drawLine(v+r.offsetX,0+r.offsetY,v+r.offsetX,d.globals.gridHeight+r.offsetY,r.borderColor,E,r.borderWidth);a.appendChild(T.node),r.id&&T.node.classList.add(r.id)}}else{var N=this.helpers.getX1X2("x2",r);if(u=N.x,_=N.clipped,!y||!_){if(u<v){var U=v;v=u,u=U}var H=this.annoCtx.graphics.drawRect(v+r.offsetX,0+r.offsetY,u-v,d.globals.gridHeight+r.offsetY,0,r.fillColor,r.opacity,1,r.borderColor,E);H.node.classList.add("apexcharts-annotation-rect"),H.attr("clip-path","url(#gridRectMask".concat(d.globals.cuid,")")),a.appendChild(H.node),r.id&&H.node.classList.add(r.id)}}if(!y||!_){var X=this.annoCtx.graphics.getTextRects(A,parseFloat(r.label.style.fontSize)),Y=r.label.position==="top"?4:r.label.position==="center"?d.globals.gridHeight/2+(r.label.orientation==="vertical"?X.width/2:0):d.globals.gridHeight,q=this.annoCtx.graphics.drawText({x:v+r.label.offsetX,y:Y+r.label.offsetY-(r.label.orientation==="vertical"?r.label.position==="top"?X.width/2-12:-X.width/2:0),text:A,textAnchor:r.label.textAnchor,fontSize:r.label.style.fontSize,fontFamily:r.label.style.fontFamily,fontWeight:r.label.style.fontWeight,foreColor:r.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(r.label.style.cssClass," ").concat(r.id?r.id:"")});q.attr({rel:l}),a.appendChild(q.node),this.annoCtx.helpers.setOrientations(r,l)}}}},{key:"drawXAxisAnnotations",value:function(){var r=this,a=this.w,l=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return a.config.annotations.xaxis.map(function(u,d){r.addXaxisAnnotation(u,l.node,d)}),l}}]),G}(),ee=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return h(G,[{key:"isValidDate",value:function(r){return typeof r!="number"&&!isNaN(this.parseDate(r))}},{key:"getTimeStamp",value:function(r){return Date.parse(r)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(r).toISOString().substr(0,25)).getTime():new Date(r).getTime():r}},{key:"getDate",value:function(r){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(r).toUTCString()):new Date(r)}},{key:"parseDate",value:function(r){var a=Date.parse(r);if(!isNaN(a))return this.getTimeStamp(r);var l=Date.parse(r.replace(/-/g,"/").replace(/[a-z]+/gi," "));return l=this.getTimeStamp(l)}},{key:"parseDateWithTimezone",value:function(r){return Date.parse(r.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(r,a){var l=this.w.globals.locale,u=this.w.config.xaxis.labels.datetimeUTC,d=["\0"].concat(z(l.months)),f=[""].concat(z(l.shortMonths)),v=[""].concat(z(l.days)),y=[""].concat(z(l.shortDays));function _(ne,fe){var de=ne+"";for(fe=fe||2;de.length<fe;)de="0"+de;return de}var A=u?r.getUTCFullYear():r.getFullYear();a=(a=(a=a.replace(/(^|[^\\])yyyy+/g,"$1"+A)).replace(/(^|[^\\])yy/g,"$1"+A.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+A);var E=(u?r.getUTCMonth():r.getMonth())+1;a=(a=(a=(a=a.replace(/(^|[^\\])MMMM+/g,"$1"+d[0])).replace(/(^|[^\\])MMM/g,"$1"+f[0])).replace(/(^|[^\\])MM/g,"$1"+_(E))).replace(/(^|[^\\])M/g,"$1"+E);var T=u?r.getUTCDate():r.getDate();a=(a=(a=(a=a.replace(/(^|[^\\])dddd+/g,"$1"+v[0])).replace(/(^|[^\\])ddd/g,"$1"+y[0])).replace(/(^|[^\\])dd/g,"$1"+_(T))).replace(/(^|[^\\])d/g,"$1"+T);var N=u?r.getUTCHours():r.getHours(),U=N>12?N-12:N===0?12:N;a=(a=(a=(a=a.replace(/(^|[^\\])HH+/g,"$1"+_(N))).replace(/(^|[^\\])H/g,"$1"+N)).replace(/(^|[^\\])hh+/g,"$1"+_(U))).replace(/(^|[^\\])h/g,"$1"+U);var H=u?r.getUTCMinutes():r.getMinutes();a=(a=a.replace(/(^|[^\\])mm+/g,"$1"+_(H))).replace(/(^|[^\\])m/g,"$1"+H);var X=u?r.getUTCSeconds():r.getSeconds();a=(a=a.replace(/(^|[^\\])ss+/g,"$1"+_(X))).replace(/(^|[^\\])s/g,"$1"+X);var Y=u?r.getUTCMilliseconds():r.getMilliseconds();a=a.replace(/(^|[^\\])fff+/g,"$1"+_(Y,3)),Y=Math.round(Y/10),a=a.replace(/(^|[^\\])ff/g,"$1"+_(Y)),Y=Math.round(Y/10);var q=N<12?"AM":"PM";a=(a=(a=a.replace(/(^|[^\\])f/g,"$1"+Y)).replace(/(^|[^\\])TT+/g,"$1"+q)).replace(/(^|[^\\])T/g,"$1"+q.charAt(0));var w=q.toLowerCase();a=(a=a.replace(/(^|[^\\])tt+/g,"$1"+w)).replace(/(^|[^\\])t/g,"$1"+w.charAt(0));var D=-r.getTimezoneOffset(),V=u||!D?"Z":D>0?"+":"-";if(!u){var $=(D=Math.abs(D))%60;V+=_(Math.floor(D/60))+":"+_($)}a=a.replace(/(^|[^\\])K/g,"$1"+V);var Q=(u?r.getUTCDay():r.getDay())+1;return a=(a=(a=(a=(a=a.replace(new RegExp(v[0],"g"),v[Q])).replace(new RegExp(y[0],"g"),y[Q])).replace(new RegExp(d[0],"g"),d[E])).replace(new RegExp(f[0],"g"),f[E])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(r,a,l){var u=this.w;u.config.xaxis.min!==void 0&&(r=u.config.xaxis.min),u.config.xaxis.max!==void 0&&(a=u.config.xaxis.max);var d=this.getDate(r),f=this.getDate(a),v=this.formatDate(d,"yyyy MM dd HH mm ss fff").split(" "),y=this.formatDate(f,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(v[6],10),maxMillisecond:parseInt(y[6],10),minSecond:parseInt(v[5],10),maxSecond:parseInt(y[5],10),minMinute:parseInt(v[4],10),maxMinute:parseInt(y[4],10),minHour:parseInt(v[3],10),maxHour:parseInt(y[3],10),minDate:parseInt(v[2],10),maxDate:parseInt(y[2],10),minMonth:parseInt(v[1],10)-1,maxMonth:parseInt(y[1],10)-1,minYear:parseInt(v[0],10),maxYear:parseInt(y[0],10)}}},{key:"isLeapYear",value:function(r){return r%4==0&&r%100!=0||r%400==0}},{key:"calculcateLastDaysOfMonth",value:function(r,a,l){return this.determineDaysOfMonths(r,a)-l}},{key:"determineDaysOfYear",value:function(r){var a=365;return this.isLeapYear(r)&&(a=366),a}},{key:"determineRemainingDaysOfYear",value:function(r,a,l){var u=this.daysCntOfYear[a]+l;return a>1&&this.isLeapYear()&&u++,u}},{key:"determineDaysOfMonths",value:function(r,a){var l=30;switch(r=R.monthMod(r),!0){case this.months30.indexOf(r)>-1:r===2&&(l=this.isLeapYear(a)?29:28);break;case this.months31.indexOf(r)>-1:default:l=31}return l}}]),G}(),K=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.tooltipKeyFormat="dd MMM"}return h(G,[{key:"xLabelFormat",value:function(r,a,l,u){var d=this.w;if(d.config.xaxis.type==="datetime"&&d.config.xaxis.labels.formatter===void 0&&d.config.tooltip.x.formatter===void 0){var f=new ee(this.ctx);return f.formatDate(f.getDate(a),d.config.tooltip.x.format)}return r(a,l,u)}},{key:"defaultGeneralFormatter",value:function(r){return Array.isArray(r)?r.map(function(a){return a}):r}},{key:"defaultYFormatter",value:function(r,a,l){var u=this.w;if(R.isNumber(r))if(u.globals.yValueDecimal!==0)r=r.toFixed(a.decimalsInFloat!==void 0?a.decimalsInFloat:u.globals.yValueDecimal);else{var d=r.toFixed(0);r=r==d?d:r.toFixed(1)}return r}},{key:"setLabelFormatters",value:function(){var r=this,a=this.w;return a.globals.xaxisTooltipFormatter=function(l){return r.defaultGeneralFormatter(l)},a.globals.ttKeyFormatter=function(l){return r.defaultGeneralFormatter(l)},a.globals.ttZFormatter=function(l){return l},a.globals.legendFormatter=function(l){return r.defaultGeneralFormatter(l)},a.config.xaxis.labels.formatter!==void 0?a.globals.xLabelFormatter=a.config.xaxis.labels.formatter:a.globals.xLabelFormatter=function(l){if(R.isNumber(l)){if(!a.config.xaxis.convertedCatToNumeric&&a.config.xaxis.type==="numeric"){if(R.isNumber(a.config.xaxis.decimalsInFloat))return l.toFixed(a.config.xaxis.decimalsInFloat);var u=a.globals.maxX-a.globals.minX;return u>0&&u<100?l.toFixed(1):l.toFixed(0)}return a.globals.isBarHorizontal&&a.globals.maxY-a.globals.minYArr<4?l.toFixed(1):l.toFixed(0)}return l},typeof a.config.tooltip.x.formatter=="function"?a.globals.ttKeyFormatter=a.config.tooltip.x.formatter:a.globals.ttKeyFormatter=a.globals.xLabelFormatter,typeof a.config.xaxis.tooltip.formatter=="function"&&(a.globals.xaxisTooltipFormatter=a.config.xaxis.tooltip.formatter),(Array.isArray(a.config.tooltip.y)||a.config.tooltip.y.formatter!==void 0)&&(a.globals.ttVal=a.config.tooltip.y),a.config.tooltip.z.formatter!==void 0&&(a.globals.ttZFormatter=a.config.tooltip.z.formatter),a.config.legend.formatter!==void 0&&(a.globals.legendFormatter=a.config.legend.formatter),a.config.yaxis.forEach(function(l,u){l.labels.formatter!==void 0?a.globals.yLabelFormatters[u]=l.labels.formatter:a.globals.yLabelFormatters[u]=function(d){return a.globals.xyCharts?Array.isArray(d)?d.map(function(f){return r.defaultYFormatter(f,l,u)}):r.defaultYFormatter(d,l,u):d}}),a.globals}},{key:"heatmapLabelFormatters",value:function(){var r=this.w;if(r.config.chart.type==="heatmap"){r.globals.yAxisScale[0].result=r.globals.seriesNames.slice();var a=r.globals.seriesNames.reduce(function(l,u){return l.length>u.length?l:u},0);r.globals.yAxisScale[0].niceMax=a,r.globals.yAxisScale[0].niceMin=a}}}]),G}(),se=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"getLabel",value:function(r,a,l,u){var d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],f=arguments.length>5&&arguments[5]!==void 0?arguments[5]:"12px",v=!(arguments.length>6&&arguments[6]!==void 0)||arguments[6],y=this.w,_=r[u]===void 0?"":r[u],A=_,E=y.globals.xLabelFormatter,T=y.config.xaxis.labels.formatter,N=!1,U=new K(this.ctx),H=_;v&&(A=U.xLabelFormat(E,_,H,{i:u,dateFormatter:new ee(this.ctx).formatDate,w:y}),T!==void 0&&(A=T(_,r[u],{i:u,dateFormatter:new ee(this.ctx).formatDate,w:y})));var X,Y;a.length>0?(X=a[u].unit,Y=null,a.forEach(function(V){V.unit==="month"?Y="year":V.unit==="day"?Y="month":V.unit==="hour"?Y="day":V.unit==="minute"&&(Y="hour")}),N=Y===X,l=a[u].position,A=a[u].value):y.config.xaxis.type==="datetime"&&T===void 0&&(A=""),A===void 0&&(A=""),A=Array.isArray(A)?A:A.toString();var q=new Z(this.ctx),w={};w=y.globals.rotateXLabels&&v?q.getTextRects(A,parseInt(f,10),null,"rotate(".concat(y.config.xaxis.labels.rotate," 0 0)"),!1):q.getTextRects(A,parseInt(f,10));var D=!y.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(A)&&(String(A)==="NaN"||d.indexOf(A)>=0&&D)&&(A=""),{x:l,text:A,textRect:w,isBold:N}}},{key:"checkLabelBasedOnTickamount",value:function(r,a,l){var u=this.w,d=u.config.xaxis.tickAmount;return d==="dataPoints"&&(d=Math.round(u.globals.gridWidth/120)),d>l||r%Math.round(l/(d+1))==0||(a.text=""),a}},{key:"checkForOverflowingLabels",value:function(r,a,l,u,d){var f=this.w;if(r===0&&f.globals.skipFirstTimelinelabel&&(a.text=""),r===l-1&&f.globals.skipLastTimelinelabel&&(a.text=""),f.config.xaxis.labels.hideOverlappingLabels&&u.length>0){var v=d[d.length-1];a.x<v.textRect.width/(f.globals.rotateXLabels?Math.abs(f.config.xaxis.labels.rotate)/12:1.01)+v.x&&(a.text="")}return a}},{key:"checkForReversedLabels",value:function(r,a){var l=this.w;return l.config.yaxis[r]&&l.config.yaxis[r].reversed&&a.reverse(),a}},{key:"yAxisAllSeriesCollapsed",value:function(r){var a=this.w.globals;return!a.seriesYAxisMap[r].some(function(l){return a.collapsedSeriesIndices.indexOf(l)===-1})}},{key:"translateYAxisIndex",value:function(r){var a=this.w,l=a.globals,u=a.config.yaxis;return l.series.length>u.length||u.some(function(d){return Array.isArray(d.seriesName)})?r:l.seriesYAxisReverseMap[r]}},{key:"isYAxisHidden",value:function(r){var a=this.w,l=a.config.yaxis[r];if(!l.show||this.yAxisAllSeriesCollapsed(r))return!0;if(!l.showForNullSeries){var u=a.globals.seriesYAxisMap[r],d=new J(this.ctx);return u.every(function(f){return d.isSeriesNull(f)})}return!1}},{key:"getYAxisForeColor",value:function(r,a){var l=this.w;return Array.isArray(r)&&l.globals.yAxisScale[a]&&this.ctx.theme.pushExtraColors(r,l.globals.yAxisScale[a].result.length,!1),r}},{key:"drawYAxisTicks",value:function(r,a,l,u,d,f,v){var y=this.w,_=new Z(this.ctx),A=y.globals.translateY+y.config.yaxis[d].labels.offsetY;if(y.globals.isBarHorizontal?A=0:y.config.chart.type==="heatmap"&&(A+=f/2),u.show&&a>0){y.config.yaxis[d].opposite===!0&&(r+=u.width);for(var E=a;E>=0;E--){var T=_.drawLine(r+l.offsetX-u.width+u.offsetX,A+u.offsetY,r+l.offsetX+u.offsetX,A+u.offsetY,u.color);v.add(T),A+=f}}}}]),G}(),ge=function(){function G(r){o(this,G),this.w=r.w,this.annoCtx=r,this.helpers=new te(this.annoCtx),this.axesUtils=new se(this.annoCtx)}return h(G,[{key:"addYaxisAnnotation",value:function(r,a,l){var u,d=this.w,f=r.strokeDashArray,v=this.helpers.getY1Y2("y1",r),y=v.yP,_=v.clipped,A=!0,E=!1,T=r.label.text;if(r.y2===null||r.y2===void 0){if(!_){E=!0;var N=this.annoCtx.graphics.drawLine(0+r.offsetX,y+r.offsetY,this._getYAxisAnnotationWidth(r),y+r.offsetY,r.borderColor,f,r.borderWidth);a.appendChild(N.node),r.id&&N.node.classList.add(r.id)}}else{if(u=(v=this.helpers.getY1Y2("y2",r)).yP,A=v.clipped,u>y){var U=y;y=u,u=U}if(!_||!A){E=!0;var H=this.annoCtx.graphics.drawRect(0+r.offsetX,u+r.offsetY,this._getYAxisAnnotationWidth(r),y-u,0,r.fillColor,r.opacity,1,r.borderColor,f);H.node.classList.add("apexcharts-annotation-rect"),H.attr("clip-path","url(#gridRectMask".concat(d.globals.cuid,")")),a.appendChild(H.node),r.id&&H.node.classList.add(r.id)}}if(E){var X=r.label.position==="right"?d.globals.gridWidth:r.label.position==="center"?d.globals.gridWidth/2:0,Y=this.annoCtx.graphics.drawText({x:X+r.label.offsetX,y:(u??y)+r.label.offsetY-3,text:T,textAnchor:r.label.textAnchor,fontSize:r.label.style.fontSize,fontFamily:r.label.style.fontFamily,fontWeight:r.label.style.fontWeight,foreColor:r.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(r.label.style.cssClass," ").concat(r.id?r.id:"")});Y.attr({rel:l}),a.appendChild(Y.node)}}},{key:"_getYAxisAnnotationWidth",value:function(r){var a=this.w;return a.globals.gridWidth,(r.width.indexOf("%")>-1?a.globals.gridWidth*parseInt(r.width,10)/100:parseInt(r.width,10))+r.offsetX}},{key:"drawYAxisAnnotations",value:function(){var r=this,a=this.w,l=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return a.config.annotations.yaxis.forEach(function(u,d){u.yAxisIndex=r.axesUtils.translateYAxisIndex(u.yAxisIndex),r.axesUtils.isYAxisHidden(u.yAxisIndex)&&r.axesUtils.yAxisAllSeriesCollapsed(u.yAxisIndex)||r.addYaxisAnnotation(u,l.node,d)}),l}}]),G}(),xe=function(){function G(r){o(this,G),this.w=r.w,this.annoCtx=r,this.helpers=new te(this.annoCtx)}return h(G,[{key:"addPointAnnotation",value:function(r,a,l){if(!(this.w.globals.collapsedSeriesIndices.indexOf(r.seriesIndex)>-1)){var u=this.helpers.getX1X2("x1",r),d=u.x,f=u.clipped,v=(u=this.helpers.getY1Y2("y1",r)).yP,y=u.clipped;if(R.isNumber(d)&&!y&&!f){var _={pSize:r.marker.size,pointStrokeWidth:r.marker.strokeWidth,pointFillColor:r.marker.fillColor,pointStrokeColor:r.marker.strokeColor,shape:r.marker.shape,pRadius:r.marker.radius,class:"apexcharts-point-annotation-marker ".concat(r.marker.cssClass," ").concat(r.id?r.id:"")},A=this.annoCtx.graphics.drawMarker(d+r.marker.offsetX,v+r.marker.offsetY,_);a.appendChild(A.node);var E=r.label.text?r.label.text:"",T=this.annoCtx.graphics.drawText({x:d+r.label.offsetX,y:v+r.label.offsetY-r.marker.size-parseFloat(r.label.style.fontSize)/1.6,text:E,textAnchor:r.label.textAnchor,fontSize:r.label.style.fontSize,fontFamily:r.label.style.fontFamily,fontWeight:r.label.style.fontWeight,foreColor:r.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(r.label.style.cssClass," ").concat(r.id?r.id:"")});if(T.attr({rel:l}),a.appendChild(T.node),r.customSVG.SVG){var N=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+r.customSVG.cssClass});N.attr({transform:"translate(".concat(d+r.customSVG.offsetX,", ").concat(v+r.customSVG.offsetY,")")}),N.node.innerHTML=r.customSVG.SVG,a.appendChild(N.node)}if(r.image.path){var U=r.image.width?r.image.width:20,H=r.image.height?r.image.height:20;A=this.annoCtx.addImage({x:d+r.image.offsetX-U/2,y:v+r.image.offsetY-H/2,width:U,height:H,path:r.image.path,appendTo:".apexcharts-point-annotations"})}r.mouseEnter&&A.node.addEventListener("mouseenter",r.mouseEnter.bind(this,r)),r.mouseLeave&&A.node.addEventListener("mouseleave",r.mouseLeave.bind(this,r)),r.click&&A.node.addEventListener("click",r.click.bind(this,r))}}}},{key:"drawPointAnnotations",value:function(){var r=this,a=this.w,l=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return a.config.annotations.points.map(function(u,d){r.addPointAnnotation(u,l.node,d)}),l}}]),G}(),Re={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},Le=function(){function G(){o(this,G),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return h(G,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"",locales:[Re],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",categoryFormatter:void 0,valueFormatter:void 0},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{line:{isSlopeChart:!1},area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(r){return r}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(r){return r+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(r){return r.globals.seriesTotals.reduce(function(a,l){return a+l},0)/r.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(r){return r},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(r){return r}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(r){return r}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(r){return r.globals.seriesTotals.reduce(function(a,l){return a+l},0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(r){return r!==null?r:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{size:6,fillColors:void 0,strokeWidth:2,shape:void 0,radius:2,offsetX:0,offsetY:0,customHTML:void 0,onClick:void 0},itemMargin:{horizontal:5,vertical:4},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",radius:2,offsetX:0,offsetY:0,showNullDataPoints:!0,onClick:void 0,onDblClick:void 0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(r){return r?r+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),G}(),Ae=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.graphics=new Z(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new te(this),this.xAxisAnnotations=new re(this),this.yAxisAnnotations=new ge(this),this.pointsAnnotations=new xe(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return h(G,[{key:"drawAxesAnnotations",value:function(){var r=this.w;if(r.globals.axisCharts){for(var a=this.yAxisAnnotations.drawYAxisAnnotations(),l=this.xAxisAnnotations.drawXAxisAnnotations(),u=this.pointsAnnotations.drawPointAnnotations(),d=r.config.chart.animations.enabled,f=[a,l,u],v=[l.node,a.node,u.node],y=0;y<3;y++)r.globals.dom.elGraphical.add(f[y]),!d||r.globals.resized||r.globals.dataChanged||r.config.chart.type!=="scatter"&&r.config.chart.type!=="bubble"&&r.globals.dataPoints>1&&v[y].classList.add("apexcharts-element-hidden"),r.globals.delayedElements.push({el:v[y],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var r=this;this.w.config.annotations.images.map(function(a,l){r.addImage(a,l)})}},{key:"drawTextAnnos",value:function(){var r=this;this.w.config.annotations.texts.map(function(a,l){r.addText(a,l)})}},{key:"addXaxisAnnotation",value:function(r,a,l){this.xAxisAnnotations.addXaxisAnnotation(r,a,l)}},{key:"addYaxisAnnotation",value:function(r,a,l){this.yAxisAnnotations.addYaxisAnnotation(r,a,l)}},{key:"addPointAnnotation",value:function(r,a,l){this.pointsAnnotations.addPointAnnotation(r,a,l)}},{key:"addText",value:function(r,a){var l=r.x,u=r.y,d=r.text,f=r.textAnchor,v=r.foreColor,y=r.fontSize,_=r.fontFamily,A=r.fontWeight,E=r.cssClass,T=r.backgroundColor,N=r.borderWidth,U=r.strokeDashArray,H=r.borderRadius,X=r.borderColor,Y=r.appendTo,q=Y===void 0?".apexcharts-svg":Y,w=r.paddingLeft,D=w===void 0?4:w,V=r.paddingRight,$=V===void 0?4:V,Q=r.paddingBottom,ne=Q===void 0?2:Q,fe=r.paddingTop,de=fe===void 0?2:fe,Me=this.w,Oe=this.graphics.drawText({x:l,y:u,text:d,textAnchor:f||"start",fontSize:y||"12px",fontWeight:A||"regular",fontFamily:_||Me.config.chart.fontFamily,foreColor:v||Me.config.chart.foreColor,cssClass:E}),_e=Me.globals.dom.baseEl.querySelector(q);_e&&_e.appendChild(Oe.node);var Ne=Oe.bbox();if(d){var it=this.graphics.drawRect(Ne.x-D,Ne.y-de,Ne.width+D+$,Ne.height+ne+de,H,T||"transparent",1,N,X,U);_e.insertBefore(it.node,Oe.node)}}},{key:"addImage",value:function(r,a){var l=this.w,u=r.path,d=r.x,f=d===void 0?0:d,v=r.y,y=v===void 0?0:v,_=r.width,A=_===void 0?20:_,E=r.height,T=E===void 0?20:E,N=r.appendTo,U=N===void 0?".apexcharts-svg":N,H=l.globals.dom.Paper.image(u);H.size(A,T).move(f,y);var X=l.globals.dom.baseEl.querySelector(U);return X&&X.appendChild(H.node),H}},{key:"addXaxisAnnotationExternal",value:function(r,a,l){return this.addAnnotationExternal({params:r,pushToMemory:a,context:l,type:"xaxis",contextMethod:l.addXaxisAnnotation}),l}},{key:"addYaxisAnnotationExternal",value:function(r,a,l){return this.addAnnotationExternal({params:r,pushToMemory:a,context:l,type:"yaxis",contextMethod:l.addYaxisAnnotation}),l}},{key:"addPointAnnotationExternal",value:function(r,a,l){return this.invertAxis===void 0&&(this.invertAxis=l.w.globals.isBarHorizontal),this.addAnnotationExternal({params:r,pushToMemory:a,context:l,type:"point",contextMethod:l.addPointAnnotation}),l}},{key:"addAnnotationExternal",value:function(r){var a=r.params,l=r.pushToMemory,u=r.context,d=r.type,f=r.contextMethod,v=u,y=v.w,_=y.globals.dom.baseEl.querySelector(".apexcharts-".concat(d,"-annotations")),A=_.childNodes.length+1,E=new Le,T=Object.assign({},d==="xaxis"?E.xAxisAnnotation:d==="yaxis"?E.yAxisAnnotation:E.pointAnnotation),N=R.extend(T,a);switch(d){case"xaxis":this.addXaxisAnnotation(N,_,A);break;case"yaxis":this.addYaxisAnnotation(N,_,A);break;case"point":this.addPointAnnotation(N,_,A)}var U=y.globals.dom.baseEl.querySelector(".apexcharts-".concat(d,"-annotations .apexcharts-").concat(d,"-annotation-label[rel='").concat(A,"']")),H=this.helpers.addBackgroundToAnno(U,N);return H&&_.insertBefore(H.node,U),l&&y.globals.memory.methodsToExec.push({context:v,id:N.id?N.id:R.randomId(),method:f,label:"addAnnotation",params:a}),u}},{key:"clearAnnotations",value:function(r){var a=r.w,l=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");a.globals.memory.methodsToExec.map(function(u,d){u.label!=="addText"&&u.label!=="addAnnotation"||a.globals.memory.methodsToExec.splice(d,1)}),l=R.listToArray(l),Array.prototype.forEach.call(l,function(u){for(;u.firstChild;)u.removeChild(u.firstChild)})}},{key:"removeAnnotation",value:function(r,a){var l=r.w,u=l.globals.dom.baseEl.querySelectorAll(".".concat(a));u&&(l.globals.memory.methodsToExec.map(function(d,f){d.id===a&&l.globals.memory.methodsToExec.splice(f,1)}),Array.prototype.forEach.call(u,function(d){d.parentElement.removeChild(d)}))}}]),G}(),ze=function(G){var r,a=G.isTimeline,l=G.ctx,u=G.seriesIndex,d=G.dataPointIndex,f=G.y1,v=G.y2,y=G.w,_=y.globals.seriesRangeStart[u][d],A=y.globals.seriesRangeEnd[u][d],E=y.globals.labels[d],T=y.config.series[u].name?y.config.series[u].name:"",N=y.globals.ttKeyFormatter,U=y.config.tooltip.y.title.formatter,H={w:y,seriesIndex:u,dataPointIndex:d,start:_,end:A};typeof U=="function"&&(T=U(T,H)),(r=y.config.series[u].data[d])!==null&&r!==void 0&&r.x&&(E=y.config.series[u].data[d].x),a||y.config.xaxis.type==="datetime"&&(E=new K(l).xLabelFormat(y.globals.ttKeyFormatter,E,E,{i:void 0,dateFormatter:new ee(l).formatDate,w:y})),typeof N=="function"&&(E=N(E,H)),Number.isFinite(f)&&Number.isFinite(v)&&(_=f,A=v);var X="",Y="",q=y.globals.colors[u];if(y.config.tooltip.x.formatter===void 0)if(y.config.xaxis.type==="datetime"){var w=new ee(l);X=w.formatDate(w.getDate(_),y.config.tooltip.x.format),Y=w.formatDate(w.getDate(A),y.config.tooltip.x.format)}else X=_,Y=A;else X=y.config.tooltip.x.formatter(_),Y=y.config.tooltip.x.formatter(A);return{start:_,end:A,startVal:X,endVal:Y,ylabel:E,color:q,seriesName:T}},ce=function(G){var r=G.color,a=G.seriesName,l=G.ylabel,u=G.start,d=G.end,f=G.seriesIndex,v=G.dataPointIndex,y=G.ctx.tooltip.tooltipLabels.getFormatters(f);u=y.yLbFormatter(u),d=y.yLbFormatter(d);var _=y.yLbFormatter(G.w.globals.series[f][v]),A=`<span class="value start-value">
  `.concat(u,`
  </span> <span class="separator">-</span> <span class="value end-value">
  `).concat(d,`
  </span>`);return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+r+'">'+(a||"")+'</span></div><div> <span class="category">'+l+": </span> "+(G.w.globals.comboCharts?G.w.config.series[f].type==="rangeArea"||G.w.config.series[f].type==="rangeBar"?A:"<span>".concat(_,"</span>"):A)+" </div></div>"},we=function(){function G(r){o(this,G),this.opts=r}return h(G,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(r){return this.hideYAxis(),R.extend(r,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"slope",value:function(){return this.hideYAxis(),{chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!0,formatter:function(r,a){var l=a.w.config.series[a.seriesIndex].name;return r!==null?l+": "+r:""},background:{enabled:!1},offsetX:-5},grid:{xaxis:{lines:{show:!0}},yaxis:{lines:{show:!1}}},xaxis:{position:"top",labels:{style:{fontSize:14,fontWeight:900}},tooltip:{enabled:!1},crosshairs:{show:!1}},markers:{size:8,hover:{sizeOffset:1}},legend:{show:!1},tooltip:{shared:!1,intersect:!0,followCursor:!0},stroke:{width:5,curve:"straight"}}}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),i(i({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var r=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(a){var l=a.seriesIndex,u=a.dataPointIndex,d=a.w;return r._getBoxTooltip(d,l,u,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var r=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(a){var l=a.seriesIndex,u=a.dataPointIndex,d=a.w;return r._getBoxTooltip(d,l,u,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(r,a){a.ctx;var l=a.seriesIndex,u=a.dataPointIndex,d=a.w,f=function(){var v=d.globals.seriesRangeStart[l][u];return d.globals.seriesRangeEnd[l][u]-v};return d.globals.comboCharts?d.config.series[l].type==="rangeBar"||d.config.series[l].type==="rangeArea"?f():r:f()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(r){return r.w.config.plotOptions&&r.w.config.plotOptions.bar&&r.w.config.plotOptions.bar.horizontal?function(a){var l=ze(i(i({},a),{},{isTimeline:!0})),u=l.color,d=l.seriesName,f=l.ylabel,v=l.startVal,y=l.endVal;return ce(i(i({},a),{},{color:u,seriesName:d,ylabel:f,start:v,end:y}))}(r):function(a){var l=ze(a),u=l.color,d=l.seriesName,f=l.ylabel,v=l.start,y=l.end;return ce(i(i({},a),{},{color:u,seriesName:d,ylabel:f,start:v,end:y}))}(r)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(r){var a,l;return(a=r.plotOptions.bar)!==null&&a!==void 0&&a.barHeight||(r.plotOptions.bar.barHeight=2),(l=r.plotOptions.bar)!==null&&l!==void 0&&l.columnWidth||(r.plotOptions.bar.columnWidth=2),r}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(r){return function(a){var l=ze(a),u=l.color,d=l.seriesName,f=l.ylabel,v=l.start,y=l.end;return ce(i(i({},a),{},{color:u,seriesName:d,ylabel:f,start:v,end:y}))}(r)}}}}},{key:"brush",value:function(r){return R.extend(r,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(r){r.dataLabels=r.dataLabels||{},r.dataLabels.formatter=r.dataLabels.formatter||void 0;var a=r.dataLabels.formatter;return r.yaxis.forEach(function(l,u){r.yaxis[u].min=0,r.yaxis[u].max=100}),r.chart.type==="bar"&&(r.dataLabels.formatter=a||function(l){return typeof l=="number"&&l?l.toFixed(0)+"%":l}),r}},{key:"stackedBars",value:function(){var r=this.bar();return i(i({},r),{},{plotOptions:i(i({},r.plotOptions),{},{bar:i(i({},r.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(r){return r.xaxis.convertedCatToNumeric=!0,r}},{key:"convertCatToNumericXaxis",value:function(r,a,l){r.xaxis.type="numeric",r.xaxis.labels=r.xaxis.labels||{},r.xaxis.labels.formatter=r.xaxis.labels.formatter||function(f){return R.isNumber(f)?Math.floor(f):f};var u=r.xaxis.labels.formatter,d=r.xaxis.categories&&r.xaxis.categories.length?r.xaxis.categories:r.labels;return l&&l.length&&(d=l.map(function(f){return Array.isArray(f)?f:String(f)})),d&&d.length&&(r.xaxis.labels.formatter=function(f){return R.isNumber(f)?u(d[Math.floor(f)-1]):u(f)}),r.xaxis.categories=[],r.labels=[],r.xaxis.tickAmount=r.xaxis.tickAmount||"dataPoints",r}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square"}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{opacity:1,gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(r){return r.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(r){return r.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(r){return r.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(r){return r},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(r,a,l,u,d){var f=r.globals.seriesCandleO[a][l],v=r.globals.seriesCandleH[a][l],y=r.globals.seriesCandleM[a][l],_=r.globals.seriesCandleL[a][l],A=r.globals.seriesCandleC[a][l];return r.config.series[a].type&&r.config.series[a].type!==d?`<div class="apexcharts-custom-tooltip">
          `.concat(r.config.series[a].name?r.config.series[a].name:"series-"+(a+1),": <strong>").concat(r.globals.series[a][l],`</strong>
        </div>`):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(r.config.chart.type,'">')+"<div>".concat(u[0],': <span class="value">')+f+"</span></div>"+"<div>".concat(u[1],': <span class="value">')+v+"</span></div>"+(y?"<div>".concat(u[2],': <span class="value">')+y+"</span></div>":"")+"<div>".concat(u[3],': <span class="value">')+_+"</span></div>"+"<div>".concat(u[4],': <span class="value">')+A+"</span></div></div>"}}]),G}(),be=function(){function G(r){o(this,G),this.opts=r}return h(G,[{key:"init",value:function(r){var a=r.responsiveOverride,l=this.opts,u=new Le,d=new we(l);this.chartType=l.chart.type,l=this.extendYAxis(l),l=this.extendAnnotations(l);var f=u.init(),v={};if(l&&s(l)==="object"){var y,_,A,E,T,N,U,H,X,Y,q={};q=["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(l.chart.type)!==-1?d[l.chart.type]():d.line(),(y=l.plotOptions)!==null&&y!==void 0&&(_=y.bar)!==null&&_!==void 0&&_.isFunnel&&(q=d.funnel()),l.chart.stacked&&l.chart.type==="bar"&&(q=d.stackedBars()),(A=l.chart.brush)!==null&&A!==void 0&&A.enabled&&(q=d.brush(q)),(E=l.plotOptions)!==null&&E!==void 0&&(T=E.line)!==null&&T!==void 0&&T.isSlopeChart&&(q=d.slope()),l.chart.stacked&&l.chart.stackType==="100%"&&(l=d.stacked100(l)),(N=l.plotOptions)!==null&&N!==void 0&&(U=N.bar)!==null&&U!==void 0&&U.isDumbbell&&(l=d.dumbbell(l)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(l),l.xaxis=l.xaxis||window.Apex.xaxis||{},a||(l.xaxis.convertedCatToNumeric=!1),((H=(l=this.checkForCatToNumericXAxis(this.chartType,q,l)).chart.sparkline)!==null&&H!==void 0&&H.enabled||(X=window.Apex.chart)!==null&&X!==void 0&&(Y=X.sparkline)!==null&&Y!==void 0&&Y.enabled)&&(q=d.sparkline(q)),v=R.extend(f,q)}var w=R.extend(v,window.Apex);return f=R.extend(w,l),f=this.handleUserInputErrors(f)}},{key:"checkForCatToNumericXAxis",value:function(r,a,l){var u,d,f=new we(l),v=(r==="bar"||r==="boxPlot")&&((u=l.plotOptions)===null||u===void 0||(d=u.bar)===null||d===void 0?void 0:d.horizontal),y=r==="pie"||r==="polarArea"||r==="donut"||r==="radar"||r==="radialBar"||r==="heatmap",_=l.xaxis.type!=="datetime"&&l.xaxis.type!=="numeric",A=l.xaxis.tickPlacement?l.xaxis.tickPlacement:a.xaxis&&a.xaxis.tickPlacement;return v||y||!_||A==="between"||(l=f.convertCatToNumeric(l)),l}},{key:"extendYAxis",value:function(r,a){var l=new Le;(r.yaxis===void 0||!r.yaxis||Array.isArray(r.yaxis)&&r.yaxis.length===0)&&(r.yaxis={}),r.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(r.yaxis=R.extend(r.yaxis,window.Apex.yaxis)),r.yaxis.constructor!==Array?r.yaxis=[R.extend(l.yAxis,r.yaxis)]:r.yaxis=R.extendArray(r.yaxis,l.yAxis);var u=!1;r.yaxis.forEach(function(f){f.logarithmic&&(u=!0)});var d=r.series;return a&&!d&&(d=a.config.series),u&&d.length!==r.yaxis.length&&d.length&&(r.yaxis=d.map(function(f,v){if(f.name||(d[v].name="series-".concat(v+1)),r.yaxis[v])return r.yaxis[v].seriesName=d[v].name,r.yaxis[v];var y=R.extend(l.yAxis,r.yaxis[0]);return y.show=!1,y})),u&&d.length>1&&d.length!==r.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),r}},{key:"extendAnnotations",value:function(r){return r.annotations===void 0&&(r.annotations={},r.annotations.yaxis=[],r.annotations.xaxis=[],r.annotations.points=[]),r=this.extendYAxisAnnotations(r),r=this.extendXAxisAnnotations(r),r=this.extendPointAnnotations(r)}},{key:"extendYAxisAnnotations",value:function(r){var a=new Le;return r.annotations.yaxis=R.extendArray(r.annotations.yaxis!==void 0?r.annotations.yaxis:[],a.yAxisAnnotation),r}},{key:"extendXAxisAnnotations",value:function(r){var a=new Le;return r.annotations.xaxis=R.extendArray(r.annotations.xaxis!==void 0?r.annotations.xaxis:[],a.xAxisAnnotation),r}},{key:"extendPointAnnotations",value:function(r){var a=new Le;return r.annotations.points=R.extendArray(r.annotations.points!==void 0?r.annotations.points:[],a.pointAnnotation),r}},{key:"checkForDarkTheme",value:function(r){r.theme&&r.theme.mode==="dark"&&(r.tooltip||(r.tooltip={}),r.tooltip.theme!=="light"&&(r.tooltip.theme="dark"),r.chart.foreColor||(r.chart.foreColor="#f6f7f8"),r.theme.palette||(r.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(r){var a=r;if(a.tooltip.shared&&a.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if(a.chart.type==="bar"&&a.plotOptions.bar.horizontal){if(a.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");a.yaxis[0].reversed&&(a.yaxis[0].opposite=!0),a.xaxis.tooltip.enabled=!1,a.yaxis[0].tooltip.enabled=!1,a.chart.zoom.enabled=!1}return a.chart.type!=="bar"&&a.chart.type!=="rangeBar"||a.tooltip.shared&&a.xaxis.crosshairs.width==="barWidth"&&a.series.length>1&&(a.xaxis.crosshairs.width="tickWidth"),a.chart.type!=="candlestick"&&a.chart.type!=="boxPlot"||a.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(a.chart.type," chart is not supported.")),a.yaxis[0].reversed=!1),a}}]),G}(),Ie=function(){function G(){o(this,G)}return h(G,[{key:"initGlobalVars",value:function(r){r.series=[],r.seriesCandleO=[],r.seriesCandleH=[],r.seriesCandleM=[],r.seriesCandleL=[],r.seriesCandleC=[],r.seriesRangeStart=[],r.seriesRangeEnd=[],r.seriesRange=[],r.seriesPercent=[],r.seriesGoals=[],r.seriesX=[],r.seriesZ=[],r.seriesNames=[],r.seriesTotals=[],r.seriesLog=[],r.seriesColors=[],r.stackedSeriesTotals=[],r.seriesXvalues=[],r.seriesYvalues=[],r.labels=[],r.hasXaxisGroups=!1,r.groups=[],r.barGroups=[],r.lineGroups=[],r.areaGroups=[],r.hasSeriesGroups=!1,r.seriesGroups=[],r.categoryLabels=[],r.timescaleLabels=[],r.noLabelsProvided=!1,r.resizeTimer=null,r.selectionResizeTimer=null,r.delayedElements=[],r.pointsArray=[],r.dataLabelsRects=[],r.isXNumeric=!1,r.skipLastTimelinelabel=!1,r.skipFirstTimelinelabel=!1,r.isDataXYZ=!1,r.isMultiLineX=!1,r.isMultipleYAxis=!1,r.maxY=-Number.MAX_VALUE,r.minY=Number.MIN_VALUE,r.minYArr=[],r.maxYArr=[],r.maxX=-Number.MAX_VALUE,r.minX=Number.MAX_VALUE,r.initialMaxX=-Number.MAX_VALUE,r.initialMinX=Number.MAX_VALUE,r.maxDate=0,r.minDate=Number.MAX_VALUE,r.minZ=Number.MAX_VALUE,r.maxZ=-Number.MAX_VALUE,r.minXDiff=Number.MAX_VALUE,r.yAxisScale=[],r.xAxisScale=null,r.xAxisTicksPositions=[],r.yLabelsCoords=[],r.yTitleCoords=[],r.barPadForNumericAxis=0,r.padHorizontal=0,r.xRange=0,r.yRange=[],r.zRange=0,r.dataPoints=0,r.xTickAmount=0,r.multiAxisTickAmount=0}},{key:"globalVars",value:function(r){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:r.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:r.chart.toolbar.autoSelected==="zoom"&&r.chart.toolbar.tools.zoom&&r.chart.zoom.enabled,panEnabled:r.chart.toolbar.autoSelected==="pan"&&r.chart.toolbar.tools.pan,selectionEnabled:r.chart.toolbar.autoSelected==="selection"&&r.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,isSlopeChart:r.plotOptions.line.isSlopeChart,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(r){var a=this.globalVars(r);return this.initGlobalVars(a),a.initialConfig=R.extend({},r),a.initialSeries=R.clone(r.series),a.lastXAxis=R.clone(a.initialConfig.xaxis),a.lastYAxis=R.clone(a.initialConfig.yaxis),a}}]),G}(),Ke=function(){function G(r){o(this,G),this.opts=r}return h(G,[{key:"init",value:function(){var r=new be(this.opts).init({responsiveOverride:!1});return{config:r,globals:new Ie().init(r)}}}]),G}(),rt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.opts=null,this.seriesIndex=0}return h(G,[{key:"clippedImgArea",value:function(r){var a=this.w,l=a.config,u=parseInt(a.globals.gridWidth,10),d=parseInt(a.globals.gridHeight,10),f=u>d?u:d,v=r.image,y=0,_=0;r.width===void 0&&r.height===void 0?l.fill.image.width!==void 0&&l.fill.image.height!==void 0?(y=l.fill.image.width+1,_=l.fill.image.height):(y=f+1,_=f):(y=r.width,_=r.height);var A=document.createElementNS(a.globals.SVGNS,"pattern");Z.setAttrs(A,{id:r.patternID,patternUnits:r.patternUnits?r.patternUnits:"userSpaceOnUse",width:y+"px",height:_+"px"});var E=document.createElementNS(a.globals.SVGNS,"image");A.appendChild(E),E.setAttributeNS(window.SVG.xlink,"href",v),Z.setAttrs(E,{x:0,y:0,preserveAspectRatio:"none",width:y+"px",height:_+"px"}),E.style.opacity=r.opacity,a.globals.dom.elDefs.node.appendChild(A)}},{key:"getSeriesIndex",value:function(r){var a=this.w,l=a.config.chart.type;return(l==="bar"||l==="rangeBar")&&a.config.plotOptions.bar.distributed||l==="heatmap"||l==="treemap"?this.seriesIndex=r.seriesNumber:this.seriesIndex=r.seriesNumber%a.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(r){var a=this.w;this.opts=r;var l,u,d,f=this.w.config;this.seriesIndex=this.getSeriesIndex(r);var v=this.getFillColors()[this.seriesIndex];a.globals.seriesColors[this.seriesIndex]!==void 0&&(v=a.globals.seriesColors[this.seriesIndex]),typeof v=="function"&&(v=v({seriesIndex:this.seriesIndex,dataPointIndex:r.dataPointIndex,value:r.value,w:a}));var y=r.fillType?r.fillType:this.getFillType(this.seriesIndex),_=Array.isArray(f.fill.opacity)?f.fill.opacity[this.seriesIndex]:f.fill.opacity;r.color&&(v=r.color),v||(v="#fff",console.warn("undefined color - ApexCharts"));var A=v;if(v.indexOf("rgb")===-1?v.length<9&&(A=R.hexToRgba(v,_)):v.indexOf("rgba")>-1&&(_=R.getOpacityFromRGBA(v)),r.opacity&&(_=r.opacity),y==="pattern"&&(u=this.handlePatternFill({fillConfig:r.fillConfig,patternFill:u,fillColor:v,fillOpacity:_,defaultColor:A})),y==="gradient"&&(d=this.handleGradientFill({fillConfig:r.fillConfig,fillColor:v,fillOpacity:_,i:this.seriesIndex})),y==="image"){var E=f.fill.image.src,T=r.patternID?r.patternID:"";this.clippedImgArea({opacity:_,image:Array.isArray(E)?r.seriesNumber<E.length?E[r.seriesNumber]:E[0]:E,width:r.width?r.width:void 0,height:r.height?r.height:void 0,patternUnits:r.patternUnits,patternID:"pattern".concat(a.globals.cuid).concat(r.seriesNumber+1).concat(T)}),l="url(#pattern".concat(a.globals.cuid).concat(r.seriesNumber+1).concat(T,")")}else l=y==="gradient"?d:y==="pattern"?u:A;return r.solid&&(l=A),l}},{key:"getFillType",value:function(r){var a=this.w;return Array.isArray(a.config.fill.type)?a.config.fill.type[r]:a.config.fill.type}},{key:"getFillColors",value:function(){var r=this.w,a=r.config,l=this.opts,u=[];return r.globals.comboCharts?r.config.series[this.seriesIndex].type==="line"?Array.isArray(r.globals.stroke.colors)?u=r.globals.stroke.colors:u.push(r.globals.stroke.colors):Array.isArray(r.globals.fill.colors)?u=r.globals.fill.colors:u.push(r.globals.fill.colors):a.chart.type==="line"?Array.isArray(r.globals.stroke.colors)?u=r.globals.stroke.colors:u.push(r.globals.stroke.colors):Array.isArray(r.globals.fill.colors)?u=r.globals.fill.colors:u.push(r.globals.fill.colors),l.fillColors!==void 0&&(u=[],Array.isArray(l.fillColors)?u=l.fillColors.slice():u.push(l.fillColors)),u}},{key:"handlePatternFill",value:function(r){var a=r.fillConfig,l=r.patternFill,u=r.fillColor,d=r.fillOpacity,f=r.defaultColor,v=this.w.config.fill;a&&(v=a);var y=this.opts,_=new Z(this.ctx),A=Array.isArray(v.pattern.strokeWidth)?v.pattern.strokeWidth[this.seriesIndex]:v.pattern.strokeWidth,E=u;return Array.isArray(v.pattern.style)?l=v.pattern.style[y.seriesNumber]!==void 0?_.drawPattern(v.pattern.style[y.seriesNumber],v.pattern.width,v.pattern.height,E,A,d):f:l=_.drawPattern(v.pattern.style,v.pattern.width,v.pattern.height,E,A,d),l}},{key:"handleGradientFill",value:function(r){var a=r.fillColor,l=r.fillOpacity,u=r.fillConfig,d=r.i,f=this.w.config.fill;u&&(f=i(i({},f),u));var v,y=this.opts,_=new Z(this.ctx),A=new R,E=f.gradient.type,T=a,N=f.gradient.opacityFrom===void 0?l:Array.isArray(f.gradient.opacityFrom)?f.gradient.opacityFrom[d]:f.gradient.opacityFrom;T.indexOf("rgba")>-1&&(N=R.getOpacityFromRGBA(T));var U=f.gradient.opacityTo===void 0?l:Array.isArray(f.gradient.opacityTo)?f.gradient.opacityTo[d]:f.gradient.opacityTo;if(f.gradient.gradientToColors===void 0||f.gradient.gradientToColors.length===0)v=f.gradient.shade==="dark"?A.shadeColor(-1*parseFloat(f.gradient.shadeIntensity),a.indexOf("rgb")>-1?R.rgb2hex(a):a):A.shadeColor(parseFloat(f.gradient.shadeIntensity),a.indexOf("rgb")>-1?R.rgb2hex(a):a);else if(f.gradient.gradientToColors[y.seriesNumber]){var H=f.gradient.gradientToColors[y.seriesNumber];v=H,H.indexOf("rgba")>-1&&(U=R.getOpacityFromRGBA(H))}else v=a;if(f.gradient.gradientFrom&&(T=f.gradient.gradientFrom),f.gradient.gradientTo&&(v=f.gradient.gradientTo),f.gradient.inverseColors){var X=T;T=v,v=X}return T.indexOf("rgb")>-1&&(T=R.rgb2hex(T)),v.indexOf("rgb")>-1&&(v=R.rgb2hex(v)),_.drawGradient(E,T,v,N,U,y.size,f.gradient.stops,f.gradient.colorStops,d)}}]),G}(),Te=function(){function G(r,a){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"setGlobalMarkerSize",value:function(){var r=this.w;if(r.globals.markers.size=Array.isArray(r.config.markers.size)?r.config.markers.size:[r.config.markers.size],r.globals.markers.size.length>0){if(r.globals.markers.size.length<r.globals.series.length+1)for(var a=0;a<=r.globals.series.length;a++)r.globals.markers.size[a]===void 0&&r.globals.markers.size.push(r.globals.markers.size[0])}else r.globals.markers.size=r.config.series.map(function(l){return r.config.markers.size})}},{key:"plotChartMarkers",value:function(r,a,l,u){var d,f=arguments.length>4&&arguments[4]!==void 0&&arguments[4],v=this.w,y=a,_=r,A=null,E=new Z(this.ctx),T=v.config.markers.discrete&&v.config.markers.discrete.length;if((v.globals.markers.size[a]>0||f||T)&&(A=E.group({class:f||T?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(v.globals.cuid,")")),Array.isArray(_.x))for(var N=0;N<_.x.length;N++){var U=l;l===1&&N===0&&(U=0),l===1&&N===1&&(U=1);var H="apexcharts-marker";if(v.config.chart.type!=="line"&&v.config.chart.type!=="area"||v.globals.comboCharts||v.config.tooltip.intersect||(H+=" no-pointer-events"),(Array.isArray(v.config.markers.size)?v.globals.markers.size[a]>0:v.config.markers.size>0)||f||T){R.isNumber(_.y[N])?H+=" w".concat(R.randomId()):H="apexcharts-nullpoint";var X=this.getMarkerConfig({cssClass:H,seriesIndex:a,dataPointIndex:U});v.config.series[y].data[U]&&(v.config.series[y].data[U].fillColor&&(X.pointFillColor=v.config.series[y].data[U].fillColor),v.config.series[y].data[U].strokeColor&&(X.pointStrokeColor=v.config.series[y].data[U].strokeColor)),u&&(X.pSize=u),(_.x[N]<-v.globals.markers.largestSize||_.x[N]>v.globals.gridWidth+v.globals.markers.largestSize||_.y[N]<-v.globals.markers.largestSize||_.y[N]>v.globals.gridHeight+v.globals.markers.largestSize)&&(X.pSize=0),(d=E.drawMarker(_.x[N],_.y[N],X)).attr("rel",U),d.attr("j",U),d.attr("index",a),d.node.setAttribute("default-marker-size",X.pSize),new W(this.ctx).setSelectionFilter(d,a,U),this.addEvents(d),A&&A.add(d)}else v.globals.pointsArray[a]===void 0&&(v.globals.pointsArray[a]=[]),v.globals.pointsArray[a].push([_.x[N],_.y[N]])}return A}},{key:"getMarkerConfig",value:function(r){var a=r.cssClass,l=r.seriesIndex,u=r.dataPointIndex,d=u===void 0?null:u,f=r.radius,v=f===void 0?null:f,y=r.size,_=y===void 0?null:y,A=r.strokeWidth,E=A===void 0?null:A,T=this.w,N=this.getMarkerStyle(l),U=_===null?T.globals.markers.size[l]:_,H=T.config.markers;return d!==null&&H.discrete.length&&H.discrete.map(function(X){X.seriesIndex===l&&X.dataPointIndex===d&&(N.pointStrokeColor=X.strokeColor,N.pointFillColor=X.fillColor,U=X.size,N.pointShape=X.shape)}),{pSize:v===null?U:v,pRadius:v!==null?v:H.radius,pointStrokeWidth:E!==null?E:Array.isArray(H.strokeWidth)?H.strokeWidth[l]:H.strokeWidth,pointStrokeColor:N.pointStrokeColor,pointFillColor:N.pointFillColor,shape:N.pointShape||(Array.isArray(H.shape)?H.shape[l]:H.shape),class:a,pointStrokeOpacity:Array.isArray(H.strokeOpacity)?H.strokeOpacity[l]:H.strokeOpacity,pointStrokeDashArray:Array.isArray(H.strokeDashArray)?H.strokeDashArray[l]:H.strokeDashArray,pointFillOpacity:Array.isArray(H.fillOpacity)?H.fillOpacity[l]:H.fillOpacity,seriesIndex:l}}},{key:"addEvents",value:function(r){var a=this.w,l=new Z(this.ctx);r.node.addEventListener("mouseenter",l.pathMouseEnter.bind(this.ctx,r)),r.node.addEventListener("mouseleave",l.pathMouseLeave.bind(this.ctx,r)),r.node.addEventListener("mousedown",l.pathMouseDown.bind(this.ctx,r)),r.node.addEventListener("click",a.config.markers.onClick),r.node.addEventListener("dblclick",a.config.markers.onDblClick),r.node.addEventListener("touchstart",l.pathMouseDown.bind(this.ctx,r),{passive:!0})}},{key:"getMarkerStyle",value:function(r){var a=this.w,l=a.globals.markers.colors,u=a.config.markers.strokeColor||a.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(u)?u[r]:u,pointFillColor:Array.isArray(l)?l[r]:l}}}]),G}(),Ve=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.initialAnim=this.w.config.chart.animations.enabled}return h(G,[{key:"draw",value:function(r,a,l){var u=this.w,d=new Z(this.ctx),f=l.realIndex,v=l.pointsPos,y=l.zRatio,_=l.elParent,A=d.group({class:"apexcharts-series-markers apexcharts-series-".concat(u.config.chart.type)});if(A.attr("clip-path","url(#gridRectMarkerMask".concat(u.globals.cuid,")")),Array.isArray(v.x))for(var E=0;E<v.x.length;E++){var T=a+1,N=!0;a===0&&E===0&&(T=0),a===0&&E===1&&(T=1);var U=u.globals.markers.size[f];if(y!==1/0){var H=u.config.plotOptions.bubble;U=u.globals.seriesZ[f][T],H.zScaling&&(U/=y),H.minBubbleRadius&&U<H.minBubbleRadius&&(U=H.minBubbleRadius),H.maxBubbleRadius&&U>H.maxBubbleRadius&&(U=H.maxBubbleRadius)}var X=v.x[E],Y=v.y[E];if(U=U||0,Y!==null&&u.globals.series[f][T]!==void 0||(N=!1),N){var q=this.drawPoint(X,Y,U,f,T,a);A.add(q)}_.add(A)}}},{key:"drawPoint",value:function(r,a,l,u,d,f){var v=this.w,y=u,_=new O(this.ctx),A=new W(this.ctx),E=new rt(this.ctx),T=new Te(this.ctx),N=new Z(this.ctx),U=T.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:y,dataPointIndex:d,radius:v.config.chart.type==="bubble"||v.globals.comboCharts&&v.config.series[u]&&v.config.series[u].type==="bubble"?l:null});l=U.pSize;var H=E.fillPath({seriesNumber:u,dataPointIndex:d,color:U.pointFillColor,patternUnits:"objectBoundingBox",value:v.globals.series[u][f]}),X=N.drawMarker(r,a,U);if(v.config.series[y].data[d]&&v.config.series[y].data[d].fillColor&&(H=v.config.series[y].data[d].fillColor),X.attr({fill:H,r:l}),v.config.chart.dropShadow.enabled){var Y=v.config.chart.dropShadow;A.dropShadow(X,Y,u)}if(!this.initialAnim||v.globals.dataChanged||v.globals.resized)v.globals.animationEnded=!0;else{var q=v.config.chart.animations.speed;_.animateMarker(X,0,l,q,v.globals.easing,function(){window.setTimeout(function(){_.animationCompleted(X)},100)})}return X.attr({rel:d,j:d,index:u,"default-marker-size":l}),A.setSelectionFilter(X,u,d),T.addEvents(X),X.node.classList.add("apexcharts-marker"),X}},{key:"centerTextInBubble",value:function(r){var a=this.w;return{y:r+=parseInt(a.config.dataLabels.style.fontSize,10)/4}}}]),G}(),Je=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"dataLabelsCorrection",value:function(r,a,l,u,d,f,v){var y=this.w,_=!1,A=new Z(this.ctx).getTextRects(l,v),E=A.width,T=A.height;a<0&&(a=0),a>y.globals.gridHeight+T&&(a=y.globals.gridHeight+T/2),y.globals.dataLabelsRects[u]===void 0&&(y.globals.dataLabelsRects[u]=[]),y.globals.dataLabelsRects[u].push({x:r,y:a,width:E,height:T});var N=y.globals.dataLabelsRects[u].length-2,U=y.globals.lastDrawnDataLabelsIndexes[u]!==void 0?y.globals.lastDrawnDataLabelsIndexes[u][y.globals.lastDrawnDataLabelsIndexes[u].length-1]:0;if(y.globals.dataLabelsRects[u][N]!==void 0){var H=y.globals.dataLabelsRects[u][U];(r>H.x+H.width||a>H.y+H.height||a+T<H.y||r+E<H.x)&&(_=!0)}return(d===0||f)&&(_=!0),{x:r,y:a,textRects:A,drawnextLabel:_}}},{key:"drawDataLabel",value:function(r){var a=this,l=r.type,u=r.pos,d=r.i,f=r.j,v=r.isRangeStart,y=r.strokeWidth,_=y===void 0?2:y,A=this.w,E=new Z(this.ctx),T=A.config.dataLabels,N=0,U=0,H=f,X=null;if(A.globals.collapsedSeriesIndices.indexOf(d)!==-1||!T.enabled||!Array.isArray(u.x))return X;X=E.group({class:"apexcharts-data-labels"});for(var Y=0;Y<u.x.length;Y++)if(N=u.x[Y]+T.offsetX,U=u.y[Y]+T.offsetY+_,!isNaN(N)){f===1&&Y===0&&(H=0),f===1&&Y===1&&(H=1);var q=A.globals.series[d][H];l==="rangeArea"&&(q=v?A.globals.seriesRangeStart[d][H]:A.globals.seriesRangeEnd[d][H]);var w="",D=function($){return A.config.dataLabels.formatter($,{ctx:a.ctx,seriesIndex:d,dataPointIndex:H,w:A})};A.config.chart.type==="bubble"?(w=D(q=A.globals.seriesZ[d][H]),U=u.y[Y],U=new Ve(this.ctx).centerTextInBubble(U,d,H).y):q!==void 0&&(w=D(q));var V=A.config.dataLabels.textAnchor;A.globals.isSlopeChart&&(V=H===0?"end":H===A.config.series[d].data.length-1?"start":"middle"),this.plotDataLabelsText({x:N,y:U,text:w,i:d,j:H,parent:X,offsetCorrection:!0,dataLabelsConfig:A.config.dataLabels,textAnchor:V})}return X}},{key:"plotDataLabelsText",value:function(r){var a=this.w,l=new Z(this.ctx),u=r.x,d=r.y,f=r.i,v=r.j,y=r.text,_=r.textAnchor,A=r.fontSize,E=r.parent,T=r.dataLabelsConfig,N=r.color,U=r.alwaysDrawDataLabel,H=r.offsetCorrection,X=r.className,Y=null;if(Array.isArray(a.config.dataLabels.enabledOnSeries)&&a.config.dataLabels.enabledOnSeries.indexOf(f)<0)return Y;var q={x:u,y:d,drawnextLabel:!0,textRects:null};H&&(q=this.dataLabelsCorrection(u,d,y,f,v,U,parseInt(T.style.fontSize,10))),a.globals.zoomed||(u=q.x,d=q.y),q.textRects&&(u<-20-q.textRects.width||u>a.globals.gridWidth+q.textRects.width+30)&&(y="");var w=a.globals.dataLabels.style.colors[f];((a.config.chart.type==="bar"||a.config.chart.type==="rangeBar")&&a.config.plotOptions.bar.distributed||a.config.dataLabels.distributed)&&(w=a.globals.dataLabels.style.colors[v]),typeof w=="function"&&(w=w({series:a.globals.series,seriesIndex:f,dataPointIndex:v,w:a})),N&&(w=N);var D=T.offsetX,V=T.offsetY;if(a.config.chart.type!=="bar"&&a.config.chart.type!=="rangeBar"||(D=0,V=0),a.globals.isSlopeChart&&(v!==0&&(D=-2*T.offsetX+5),v!==0&&v!==a.config.series[f].data.length-1&&(D=0)),q.drawnextLabel){if((Y=l.drawText({width:100,height:parseInt(T.style.fontSize,10),x:u+D,y:d+V,foreColor:w,textAnchor:_||T.textAnchor,text:y,fontSize:A||T.style.fontSize,fontFamily:T.style.fontFamily,fontWeight:T.style.fontWeight||"normal"})).attr({class:X||"apexcharts-datalabel",cx:u,cy:d}),T.dropShadow.enabled){var $=T.dropShadow;new W(this.ctx).dropShadow(Y,$)}E.add(Y),a.globals.lastDrawnDataLabelsIndexes[f]===void 0&&(a.globals.lastDrawnDataLabelsIndexes[f]=[]),a.globals.lastDrawnDataLabelsIndexes[f].push(v)}return Y}},{key:"addBackgroundToDataLabel",value:function(r,a){var l=this.w,u=l.config.dataLabels.background,d=u.padding,f=u.padding/2,v=a.width,y=a.height,_=new Z(this.ctx).drawRect(a.x-d,a.y-f/2,v+2*d,y+f,u.borderRadius,l.config.chart.background!=="transparent"&&l.config.chart.background?l.config.chart.background:"#fff",u.opacity,u.borderWidth,u.borderColor);return u.dropShadow.enabled&&new W(this.ctx).dropShadow(_,u.dropShadow),_}},{key:"dataLabelsBackground",value:function(){var r=this.w;if(r.config.chart.type!=="bubble")for(var a=r.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),l=0;l<a.length;l++){var u=a[l],d=u.getBBox(),f=null;if(d.width&&d.height&&(f=this.addBackgroundToDataLabel(u,d)),f){u.parentNode.insertBefore(f.node,u);var v=u.getAttribute("fill");r.config.chart.animations.enabled&&!r.globals.resized&&!r.globals.dataChanged?f.animate().attr({fill:v}):f.attr({fill:v}),u.setAttribute("fill",r.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var r=this.w,a=r.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),l=r.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),u=0;u<a.length;u++)l&&l.insertBefore(a[u],l.nextSibling)}}]),G}(),Ye=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.legendInactiveClass="legend-mouseover-inactive"}return h(G,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(r){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(R.escapeString(r),"']"))}},{key:"isSeriesHidden",value:function(r){var a=this.getSeriesByName(r),l=parseInt(a.getAttribute("data:realIndex"),10);return{isHidden:a.classList.contains("apexcharts-series-collapsed"),realIndex:l}}},{key:"addCollapsedClassToSeries",value:function(r,a){var l=this.w;function u(d){for(var f=0;f<d.length;f++)d[f].index===a&&r.node.classList.add("apexcharts-series-collapsed")}u(l.globals.collapsedSeries),u(l.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(r){var a=this.isSeriesHidden(r);return this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,a.isHidden),a.isHidden}},{key:"showSeries",value:function(r){var a=this.isSeriesHidden(r);a.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,!0)}},{key:"hideSeries",value:function(r){var a=this.isSeriesHidden(r);a.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(a.realIndex,!1)}},{key:"resetSeries",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],u=this.w,d=R.clone(u.globals.initialSeries);u.globals.previousPaths=[],l?(u.globals.collapsedSeries=[],u.globals.ancillaryCollapsedSeries=[],u.globals.collapsedSeriesIndices=[],u.globals.ancillaryCollapsedSeriesIndices=[]):d=this.emptyCollapsedSeries(d),u.config.series=d,r&&(a&&(u.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(d,u.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(r){for(var a=this.w,l=0;l<r.length;l++)a.globals.collapsedSeriesIndices.indexOf(l)>-1&&(r[l].data=[]);return r}},{key:"toggleSeriesOnHover",value:function(r,a){var l=this.w;a||(a=r.target);var u=l.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels, .apexcharts-yaxis");if(r.type==="mousemove"){var d=parseInt(a.getAttribute("rel"),10)-1,f=null,v=null,y=null;if(l.globals.axisCharts||l.config.chart.type==="radialBar")if(l.globals.axisCharts){f=l.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(d,"']")),v=l.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(d,"']"));var _=l.globals.seriesYAxisReverseMap[d];y=l.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(_,"']"))}else f=l.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(d+1,"']"));else f=l.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(d+1,"'] path"));for(var A=0;A<u.length;A++)u[A].classList.add(this.legendInactiveClass);f!==null&&(l.globals.axisCharts||f.parentNode.classList.remove(this.legendInactiveClass),f.classList.remove(this.legendInactiveClass),v!==null&&v.classList.remove(this.legendInactiveClass),y!==null&&y.classList.remove(this.legendInactiveClass))}else if(r.type==="mouseout")for(var E=0;E<u.length;E++)u[E].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(r,a){var l=this,u=this.w,d=u.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),f=function(y){for(var _=0;_<d.length;_++)d[_].classList[y](l.legendInactiveClass)};if(r.type==="mousemove"){var v=parseInt(a.getAttribute("rel"),10)-1;f("add"),function(y){for(var _=0;_<d.length;_++){var A=parseInt(d[_].getAttribute("val"),10);A>=y.from&&A<=y.to&&d[_].classList.remove(l.legendInactiveClass)}}(u.config.plotOptions.heatmap.colorScale.ranges[v])}else r.type==="mouseout"&&f("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"asc",a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],l=this.w,u=0;if(l.config.series.length>1){for(var d=l.config.series.map(function(v,y){return v.data&&v.data.length>0&&l.globals.collapsedSeriesIndices.indexOf(y)===-1&&(!l.globals.comboCharts||a.length===0||a.length&&a.indexOf(l.config.series[y].type)>-1)?y:-1}),f=r==="asc"?0:d.length-1;r==="asc"?f<d.length:f>=0;r==="asc"?f++:f--)if(d[f]!==-1){u=d[f];break}}return u}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map(function(r,a){return r.type==="bar"||r.type==="column"?a:-1}).filter(function(r){return r!==-1}):this.w.config.series.map(function(r,a){return a})}},{key:"getPreviousPaths",value:function(){var r=this.w;function a(f,v,y){for(var _=f[v].childNodes,A={type:y,paths:[],realIndex:f[v].getAttribute("data:realIndex")},E=0;E<_.length;E++)if(_[E].hasAttribute("pathTo")){var T=_[E].getAttribute("pathTo");A.paths.push({d:T})}r.globals.previousPaths.push(A)}r.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach(function(f){for(var v,y=(v=f,r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(v,"-series .apexcharts-series"))),_=0;_<y.length;_++)a(y,_,f)}),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var l=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r.config.chart.type," .apexcharts-series"));if(l.length>0)for(var u=function(f){for(var v=r.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(f,"'] rect")),y=[],_=function(E){var T=function(U){return v[E].getAttribute(U)},N={x:parseFloat(T("x")),y:parseFloat(T("y")),width:parseFloat(T("width")),height:parseFloat(T("height"))};y.push({rect:N,color:v[E].getAttribute("color")})},A=0;A<v.length;A++)_(A);r.globals.previousPaths.push(y)},d=0;d<l.length;d++)u(d);r.globals.axisCharts||(r.globals.previousPaths=r.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(r){var a=this.w,l=a.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r,"-series .apexcharts-series"));if(l.length>0)for(var u=0;u<l.length;u++){for(var d=a.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(r,"-series .apexcharts-series[data\\:realIndex='").concat(u,"'] circle")),f=[],v=0;v<d.length;v++)f.push({x:d[v].getAttribute("cx"),y:d[v].getAttribute("cy"),r:d[v].getAttribute("r")});a.globals.previousPaths.push(f)}}},{key:"clearPreviousPaths",value:function(){var r=this.w;r.globals.previousPaths=[],r.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var r=this.w,a=r.config.noData,l=new Z(this.ctx),u=r.globals.svgWidth/2,d=r.globals.svgHeight/2,f="middle";if(r.globals.noData=!0,r.globals.animationEnded=!0,a.align==="left"?(u=10,f="start"):a.align==="right"&&(u=r.globals.svgWidth-10,f="end"),a.verticalAlign==="top"?d=50:a.verticalAlign==="bottom"&&(d=r.globals.svgHeight-50),u+=a.offsetX,d=d+parseInt(a.style.fontSize,10)+2+a.offsetY,a.text!==void 0&&a.text!==""){var v=l.drawText({x:u,y:d,text:a.text,textAnchor:f,fontSize:a.style.fontSize,fontFamily:a.style.fontFamily,foreColor:a.style.color,opacity:1,class:"apexcharts-text-nodata"});r.globals.dom.Paper.add(v)}}},{key:"setNullSeriesToZeroValues",value:function(r){for(var a=this.w,l=0;l<r.length;l++)if(r[l].length===0)for(var u=0;u<r[a.globals.maxValsInArrayIndex].length;u++)r[l].push(0);return r}},{key:"hasAllSeriesEqualX",value:function(){for(var r=!0,a=this.w,l=this.filteredSeriesX(),u=0;u<l.length-1;u++)if(l[u][0]!==l[u+1][0]){r=!1;break}return a.globals.allSeriesHasEqualX=r,r}},{key:"filteredSeriesX",value:function(){var r=this.w.globals.seriesX.map(function(a){return a.length>0?a:[]});return r}}]),G}(),kt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new J(this.ctx)}return h(G,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var r=this.w.config.series.slice(),a=new Ye(this.ctx);if(this.activeSeriesIndex=a.getActiveConfigSeriesIndex(),r[this.activeSeriesIndex].data!==void 0&&r[this.activeSeriesIndex].data.length>0&&r[this.activeSeriesIndex].data[0]!==null&&r[this.activeSeriesIndex].data[0].x!==void 0&&r[this.activeSeriesIndex].data[0]!==null)return!0}},{key:"isFormat2DArray",value:function(){var r=this.w.config.series.slice(),a=new Ye(this.ctx);if(this.activeSeriesIndex=a.getActiveConfigSeriesIndex(),r[this.activeSeriesIndex].data!==void 0&&r[this.activeSeriesIndex].data.length>0&&r[this.activeSeriesIndex].data[0]!==void 0&&r[this.activeSeriesIndex].data[0]!==null&&r[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(r,a){for(var l=this.w.config,u=this.w.globals,d=l.chart.type==="boxPlot"||l.series[a].type==="boxPlot",f=0;f<r[a].data.length;f++)if(r[a].data[f][1]!==void 0&&(Array.isArray(r[a].data[f][1])&&r[a].data[f][1].length===4&&!d?this.twoDSeries.push(R.parseNumber(r[a].data[f][1][3])):r[a].data[f].length>=5?this.twoDSeries.push(R.parseNumber(r[a].data[f][4])):this.twoDSeries.push(R.parseNumber(r[a].data[f][1])),u.dataFormatXNumeric=!0),l.xaxis.type==="datetime"){var v=new Date(r[a].data[f][0]);v=new Date(v).getTime(),this.twoDSeriesX.push(v)}else this.twoDSeriesX.push(r[a].data[f][0]);for(var y=0;y<r[a].data.length;y++)r[a].data[y][2]!==void 0&&(this.threeDSeries.push(r[a].data[y][2]),u.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(r,a){var l=this.w.config,u=this.w.globals,d=new ee(this.ctx),f=a;u.collapsedSeriesIndices.indexOf(a)>-1&&(f=this.activeSeriesIndex);for(var v=0;v<r[a].data.length;v++)r[a].data[v].y!==void 0&&(Array.isArray(r[a].data[v].y)?this.twoDSeries.push(R.parseNumber(r[a].data[v].y[r[a].data[v].y.length-1])):this.twoDSeries.push(R.parseNumber(r[a].data[v].y))),r[a].data[v].goals!==void 0&&Array.isArray(r[a].data[v].goals)?(this.seriesGoals[a]===void 0&&(this.seriesGoals[a]=[]),this.seriesGoals[a].push(r[a].data[v].goals)):(this.seriesGoals[a]===void 0&&(this.seriesGoals[a]=[]),this.seriesGoals[a].push(null));for(var y=0;y<r[f].data.length;y++){var _=typeof r[f].data[y].x=="string",A=Array.isArray(r[f].data[y].x),E=!A&&!!d.isValidDate(r[f].data[y].x);if(_||E)if(_||l.xaxis.convertedCatToNumeric){var T=u.isBarHorizontal&&u.isRangeData;l.xaxis.type!=="datetime"||T?(this.fallbackToCategory=!0,this.twoDSeriesX.push(r[f].data[y].x),isNaN(r[f].data[y].x)||this.w.config.xaxis.type==="category"||typeof r[f].data[y].x=="string"||(u.isXNumeric=!0)):this.twoDSeriesX.push(d.parseDate(r[f].data[y].x))}else l.xaxis.type==="datetime"?this.twoDSeriesX.push(d.parseDate(r[f].data[y].x.toString())):(u.dataFormatXNumeric=!0,u.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(r[f].data[y].x)));else A?(this.fallbackToCategory=!0,this.twoDSeriesX.push(r[f].data[y].x)):(u.isXNumeric=!0,u.dataFormatXNumeric=!0,this.twoDSeriesX.push(r[f].data[y].x))}if(r[a].data[0]&&r[a].data[0].z!==void 0){for(var N=0;N<r[a].data.length;N++)this.threeDSeries.push(r[a].data[N].z);u.isDataXYZ=!0}}},{key:"handleRangeData",value:function(r,a){var l=this.w.globals,u={};return this.isFormat2DArray()?u=this.handleRangeDataFormat("array",r,a):this.isFormatXY()&&(u=this.handleRangeDataFormat("xy",r,a)),l.seriesRangeStart.push(u.start===void 0?[]:u.start),l.seriesRangeEnd.push(u.end===void 0?[]:u.end),l.seriesRange.push(u.rangeUniques),l.seriesRange.forEach(function(d,f){d&&d.forEach(function(v,y){v.y.forEach(function(_,A){for(var E=0;E<v.y.length;E++)if(A!==E){var T=_.y1,N=_.y2,U=v.y[E].y1;T<=v.y[E].y2&&U<=N&&(v.overlaps.indexOf(_.rangeName)<0&&v.overlaps.push(_.rangeName),v.overlaps.indexOf(v.y[E].rangeName)<0&&v.overlaps.push(v.y[E].rangeName))}})})}),u}},{key:"handleCandleStickBoxData",value:function(r,a){var l=this.w.globals,u={};return this.isFormat2DArray()?u=this.handleCandleStickBoxDataFormat("array",r,a):this.isFormatXY()&&(u=this.handleCandleStickBoxDataFormat("xy",r,a)),l.seriesCandleO[a]=u.o,l.seriesCandleH[a]=u.h,l.seriesCandleM[a]=u.m,l.seriesCandleL[a]=u.l,l.seriesCandleC[a]=u.c,u}},{key:"handleRangeDataFormat",value:function(r,a,l){var u=[],d=[],f=a[l].data.filter(function(A,E,T){return E===T.findIndex(function(N){return N.x===A.x})}).map(function(A,E){return{x:A.x,overlaps:[],y:[]}});if(r==="array")for(var v=0;v<a[l].data.length;v++)Array.isArray(a[l].data[v])?(u.push(a[l].data[v][1][0]),d.push(a[l].data[v][1][1])):(u.push(a[l].data[v]),d.push(a[l].data[v]));else if(r==="xy")for(var y=function(A){var E=Array.isArray(a[l].data[A].y),T=R.randomId(),N=a[l].data[A].x,U={y1:E?a[l].data[A].y[0]:a[l].data[A].y,y2:E?a[l].data[A].y[1]:a[l].data[A].y,rangeName:T};a[l].data[A].rangeName=T;var H=f.findIndex(function(X){return X.x===N});f[H].y.push(U),u.push(U.y1),d.push(U.y2)},_=0;_<a[l].data.length;_++)y(_);return{start:u,end:d,rangeUniques:f}}},{key:"handleCandleStickBoxDataFormat",value:function(r,a,l){var u=this.w,d=u.config.chart.type==="boxPlot"||u.config.series[l].type==="boxPlot",f=[],v=[],y=[],_=[],A=[];if(r==="array")if(d&&a[l].data[0].length===6||!d&&a[l].data[0].length===5)for(var E=0;E<a[l].data.length;E++)f.push(a[l].data[E][1]),v.push(a[l].data[E][2]),d?(y.push(a[l].data[E][3]),_.push(a[l].data[E][4]),A.push(a[l].data[E][5])):(_.push(a[l].data[E][3]),A.push(a[l].data[E][4]));else for(var T=0;T<a[l].data.length;T++)Array.isArray(a[l].data[T][1])&&(f.push(a[l].data[T][1][0]),v.push(a[l].data[T][1][1]),d?(y.push(a[l].data[T][1][2]),_.push(a[l].data[T][1][3]),A.push(a[l].data[T][1][4])):(_.push(a[l].data[T][1][2]),A.push(a[l].data[T][1][3])));else if(r==="xy")for(var N=0;N<a[l].data.length;N++)Array.isArray(a[l].data[N].y)&&(f.push(a[l].data[N].y[0]),v.push(a[l].data[N].y[1]),d?(y.push(a[l].data[N].y[2]),_.push(a[l].data[N].y[3]),A.push(a[l].data[N].y[4])):(_.push(a[l].data[N].y[2]),A.push(a[l].data[N].y[3])));return{o:f,h:v,m:y,l:_,c:A}}},{key:"parseDataAxisCharts",value:function(r){var a=this,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.ctx,u=this.w.config,d=this.w.globals,f=new ee(l),v=u.labels.length>0?u.labels.slice():u.xaxis.categories.slice();d.isRangeBar=u.chart.type==="rangeBar"&&d.isBarHorizontal,d.hasXaxisGroups=u.xaxis.type==="category"&&u.xaxis.group.groups.length>0,d.hasXaxisGroups&&(d.groups=u.xaxis.group.groups),r.forEach(function(N,U){N.name!==void 0?d.seriesNames.push(N.name):d.seriesNames.push("series-"+parseInt(U+1,10))}),this.coreUtils.setSeriesYAxisMappings();var y=[],_=z(new Set(u.series.map(function(N){return N.group})));u.series.forEach(function(N,U){var H=_.indexOf(N.group);y[H]||(y[H]=[]),y[H].push(d.seriesNames[U])}),d.seriesGroups=y;for(var A=function(){for(var N=0;N<v.length;N++)if(typeof v[N]=="string"){if(!f.isValidDate(v[N]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");a.twoDSeriesX.push(f.parseDate(v[N]))}else a.twoDSeriesX.push(v[N])},E=0;E<r.length;E++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],r[E].data===void 0)return void console.error("It is a possibility that you may have not included 'data' property in series.");if(u.chart.type!=="rangeBar"&&u.chart.type!=="rangeArea"&&r[E].type!=="rangeBar"&&r[E].type!=="rangeArea"||(d.isRangeData=!0,u.chart.type!=="rangeBar"&&u.chart.type!=="rangeArea"||this.handleRangeData(r,E)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(r,E):this.isFormatXY()&&this.handleFormatXY(r,E),u.chart.type!=="candlestick"&&r[E].type!=="candlestick"&&u.chart.type!=="boxPlot"&&r[E].type!=="boxPlot"||this.handleCandleStickBoxData(r,E),d.series.push(this.twoDSeries),d.labels.push(this.twoDSeriesX),d.seriesX.push(this.twoDSeriesX),d.seriesGoals=this.seriesGoals,E!==this.activeSeriesIndex||this.fallbackToCategory||(d.isXNumeric=!0);else{u.xaxis.type==="datetime"?(d.isXNumeric=!0,A(),d.seriesX.push(this.twoDSeriesX)):u.xaxis.type==="numeric"&&(d.isXNumeric=!0,v.length>0&&(this.twoDSeriesX=v,d.seriesX.push(this.twoDSeriesX))),d.labels.push(this.twoDSeriesX);var T=r[E].data.map(function(N){return R.parseNumber(N)});d.series.push(T)}d.seriesZ.push(this.threeDSeries),r[E].color!==void 0?d.seriesColors.push(r[E].color):d.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(r){var a=this.w.globals,l=this.w.config;a.series=r.slice(),a.seriesNames=l.labels.slice();for(var u=0;u<a.series.length;u++)a.seriesNames[u]===void 0&&a.seriesNames.push("series-"+(u+1));return this.w}},{key:"handleExternalLabelsData",value:function(r){var a=this.w.config,l=this.w.globals;a.xaxis.categories.length>0?l.labels=a.xaxis.categories:a.labels.length>0?l.labels=a.labels.slice():this.fallbackToCategory?(l.labels=l.labels[0],l.seriesRange.length&&(l.seriesRange.map(function(u){u.forEach(function(d){l.labels.indexOf(d.x)<0&&d.x&&l.labels.push(d.x)})}),l.labels=Array.from(new Set(l.labels.map(JSON.stringify)),JSON.parse)),a.xaxis.convertedCatToNumeric&&(new we(a).convertCatToNumericXaxis(a,this.ctx,l.seriesX[0]),this._generateExternalLabels(r))):this._generateExternalLabels(r)}},{key:"_generateExternalLabels",value:function(r){var a=this.w.globals,l=this.w.config,u=[];if(a.axisCharts){if(a.series.length>0)if(this.isFormatXY())for(var d=l.series.map(function(E,T){return E.data.filter(function(N,U,H){return H.findIndex(function(X){return X.x===N.x})===U})}),f=d.reduce(function(E,T,N,U){return U[E].length>T.length?E:N},0),v=0;v<d[f].length;v++)u.push(v+1);else for(var y=0;y<a.series[a.maxValsInArrayIndex].length;y++)u.push(y+1);a.seriesX=[];for(var _=0;_<r.length;_++)a.seriesX.push(u);this.w.globals.isBarHorizontal||(a.isXNumeric=!0)}if(u.length===0){u=a.axisCharts?[]:a.series.map(function(E,T){return T+1});for(var A=0;A<r.length;A++)a.seriesX.push(u)}a.labels=u,l.xaxis.convertedCatToNumeric&&(a.categoryLabels=u.map(function(E){return l.xaxis.labels.formatter(E)})),a.noLabelsProvided=!0}},{key:"parseData",value:function(r){var a=this.w,l=a.config,u=a.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),u.axisCharts?(this.parseDataAxisCharts(r),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(r),l.chart.stacked){var d=new Ye(this.ctx);u.series=d.setNullSeriesToZeroValues(u.series)}this.coreUtils.getSeriesTotals(),u.axisCharts&&(u.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),u.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),u.dataFormatXNumeric||u.isXNumeric&&(l.xaxis.type!=="numeric"||l.labels.length!==0||l.xaxis.categories.length!==0)||this.handleExternalLabelsData(r);for(var f=this.coreUtils.getCategoryLabels(u.labels),v=0;v<f.length;v++)if(Array.isArray(f[v])){u.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var r=this.w,a=[];r.globals.seriesYAxisMap.forEach(function(l,u){var d=0;l.forEach(function(f){r.globals.collapsedSeriesIndices.indexOf(f)!==-1&&d++}),d>0&&d==l.length&&a.push(u)}),r.globals.ignoreYAxisIndexes=a.map(function(l){return l})}}]),G}(),Nt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"scaleSvgNode",value:function(r,a){var l=parseFloat(r.getAttributeNS(null,"width")),u=parseFloat(r.getAttributeNS(null,"height"));r.setAttributeNS(null,"width",l*a),r.setAttributeNS(null,"height",u*a),r.setAttributeNS(null,"viewBox","0 0 "+l+" "+u)}},{key:"fixSvgStringForIe11",value:function(r){if(!R.isIE11())return r.replace(/&nbsp;/g,"&#160;");var a=0,l=r.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,function(u){return++a===2?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':u});return l=(l=l.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(r){r==null&&(r=1);var a=this.w.globals.dom.Paper.svg();if(r!==1){var l=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(l,r),a=new XMLSerializer().serializeToString(l)}return this.fixSvgStringForIe11(a)}},{key:"cleanup",value:function(){var r=this.w,a=r.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),l=r.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),u=r.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(u,function(d){d.setAttribute("width",0)}),a&&a[0]&&(a[0].setAttribute("x",-500),a[0].setAttribute("x1",-500),a[0].setAttribute("x2",-500)),l&&l[0]&&(l[0].setAttribute("y",-100),l[0].setAttribute("y1",-100),l[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var r=this.getSvgString(),a=new Blob([r],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(a)}},{key:"dataURI",value:function(r){var a=this;return new Promise(function(l){var u=a.w,d=r?r.scale||r.width/u.globals.svgWidth:1;a.cleanup();var f=document.createElement("canvas");f.width=u.globals.svgWidth*d,f.height=parseInt(u.globals.dom.elWrap.style.height,10)*d;var v=u.config.chart.background!=="transparent"&&u.config.chart.background?u.config.chart.background:"#fff",y=f.getContext("2d");y.fillStyle=v,y.fillRect(0,0,f.width*d,f.height*d);var _=a.getSvgString(d);if(window.canvg&&R.isIE11()){var A=window.canvg.Canvg.fromString(y,_,{ignoreClear:!0,ignoreDimensions:!0});A.start();var E=f.msToBlob();A.stop(),l({blob:E})}else{var T="data:image/svg+xml,"+encodeURIComponent(_),N=new Image;N.crossOrigin="anonymous",N.onload=function(){if(y.drawImage(N,0,0),f.msToBlob){var U=f.msToBlob();l({blob:U})}else{var H=f.toDataURL("image/png");l({imgURI:H})}},N.src=T}})}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var r=this;this.dataURI().then(function(a){var l=a.imgURI,u=a.blob;u?navigator.msSaveOrOpenBlob(u,r.w.globals.chartID+".png"):r.triggerDownload(l,r.w.config.chart.toolbar.export.png.filename,".png")})}},{key:"exportToCSV",value:function(r){var a=this,l=r.series,u=r.fileName,d=r.columnDelimiter,f=d===void 0?",":d,v=r.lineDelimiter,y=v===void 0?`
`:v,_=this.w;l||(l=_.config.series);var A,E,T=[],N=[],U="",H=_.globals.series.map(function(Q,ne){return _.globals.collapsedSeriesIndices.indexOf(ne)===-1?Q:[]}),X=function(Q){return typeof _.config.chart.toolbar.export.csv.categoryFormatter=="function"?_.config.chart.toolbar.export.csv.categoryFormatter(Q):_.config.xaxis.type==="datetime"&&String(Q).length>=10?new Date(Q).toDateString():R.isNumber(Q)?Q:Q.split(f).join("")},Y=function(Q){return typeof _.config.chart.toolbar.export.csv.valueFormatter=="function"?_.config.chart.toolbar.export.csv.valueFormatter(Q):Q},q=Math.max.apply(Math,z(l.map(function(Q){return Q.data?Q.data.length:0}))),w=new kt(this.ctx),D=new se(this.ctx),V=function(Q){var ne="";if(_.globals.axisCharts){if(_.config.xaxis.type==="category"||_.config.xaxis.convertedCatToNumeric)if(_.globals.isBarHorizontal){var fe=_.globals.yLabelFormatters[0],de=new Ye(a.ctx).getActiveConfigSeriesIndex();ne=fe(_.globals.labels[Q],{seriesIndex:de,dataPointIndex:Q,w:_})}else ne=D.getLabel(_.globals.labels,_.globals.timescaleLabels,0,Q).text;_.config.xaxis.type==="datetime"&&(_.config.xaxis.categories.length?ne=_.config.xaxis.categories[Q]:_.config.labels.length&&(ne=_.config.labels[Q]))}else ne=_.config.labels[Q];return ne===null?"nullvalue":(Array.isArray(ne)&&(ne=ne.join(" ")),R.isNumber(ne)?ne:ne.split(f).join(""))},$=function(Q,ne){if(T.length&&ne===0&&N.push(T.join(f)),Q.data){Q.data=Q.data.length&&Q.data||z(Array(q)).map(function(){return""});for(var fe=0;fe<Q.data.length;fe++){T=[];var de=V(fe);if(de!=="nullvalue"){if(de||(w.isFormatXY()?de=l[ne].data[fe].x:w.isFormat2DArray()&&(de=l[ne].data[fe]?l[ne].data[fe][0]:"")),ne===0){T.push(X(de));for(var Me=0;Me<_.globals.series.length;Me++){var Oe,_e=w.isFormatXY()?(Oe=l[Me].data[fe])===null||Oe===void 0?void 0:Oe.y:H[Me][fe];T.push(Y(_e))}}(_.config.chart.type==="candlestick"||Q.type&&Q.type==="candlestick")&&(T.pop(),T.push(_.globals.seriesCandleO[ne][fe]),T.push(_.globals.seriesCandleH[ne][fe]),T.push(_.globals.seriesCandleL[ne][fe]),T.push(_.globals.seriesCandleC[ne][fe])),(_.config.chart.type==="boxPlot"||Q.type&&Q.type==="boxPlot")&&(T.pop(),T.push(_.globals.seriesCandleO[ne][fe]),T.push(_.globals.seriesCandleH[ne][fe]),T.push(_.globals.seriesCandleM[ne][fe]),T.push(_.globals.seriesCandleL[ne][fe]),T.push(_.globals.seriesCandleC[ne][fe])),_.config.chart.type==="rangeBar"&&(T.pop(),T.push(_.globals.seriesRangeStart[ne][fe]),T.push(_.globals.seriesRangeEnd[ne][fe])),T.length&&N.push(T.join(f))}}}};T.push(_.config.chart.toolbar.export.csv.headerCategory),_.config.chart.type==="boxPlot"?(T.push("minimum"),T.push("q1"),T.push("median"),T.push("q3"),T.push("maximum")):_.config.chart.type==="candlestick"?(T.push("open"),T.push("high"),T.push("low"),T.push("close")):_.config.chart.type==="rangeBar"?(T.push("minimum"),T.push("maximum")):l.map(function(Q,ne){var fe=(Q.name?Q.name:"series-".concat(ne))+"";_.globals.axisCharts&&T.push(fe.split(f).join("")?fe.split(f).join(""):"series-".concat(ne))}),_.globals.axisCharts||(T.push(_.config.chart.toolbar.export.csv.headerValue),N.push(T.join(f))),_.globals.allSeriesHasEqualX||!_.globals.axisCharts||_.config.xaxis.categories.length||_.config.labels.length?l.map(function(Q,ne){_.globals.axisCharts?$(Q,ne):((T=[]).push(X(_.globals.labels[ne])),T.push(Y(H[ne])),N.push(T.join(f)))}):(A=new Set,E={},l.forEach(function(Q,ne){Q==null||Q.data.forEach(function(fe){var de,Me;if(w.isFormatXY())de=fe.x,Me=fe.y;else{if(!w.isFormat2DArray())return;de=fe[0],Me=fe[1]}E[de]||(E[de]=Array(l.length).fill("")),E[de][ne]=Y(Me),A.add(de)})}),T.length&&N.push(T.join(f)),Array.from(A).sort().forEach(function(Q){N.push([X(Q),E[Q].join(f)])})),U+=N.join(y),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\uFEFF"+U),u||_.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(r,a,l){var u=document.createElement("a");u.href=r,u.download=(a||this.w.globals.chartID)+l,document.body.appendChild(u),u.click(),document.body.removeChild(u)}}]),G}(),Ct=function(){function G(r,a){o(this,G),this.ctx=r,this.elgrid=a,this.w=r.w;var l=this.w;this.axesUtils=new se(r),this.xaxisLabels=l.globals.labels.slice(),l.globals.timescaleLabels.length>0&&!l.globals.isBarHorizontal&&(this.xaxisLabels=l.globals.timescaleLabels.slice()),l.config.xaxis.overwriteCategories&&(this.xaxisLabels=l.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],l.config.xaxis.position==="top"?this.offY=0:this.offY=l.globals.gridHeight,this.offY=this.offY+l.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal=l.config.chart.type==="bar"&&l.config.plotOptions.bar.horizontal,this.xaxisFontSize=l.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=l.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=l.config.xaxis.labels.style.colors,this.xaxisBorderWidth=l.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=l.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=l.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=l.config.xaxis.axisBorder.height,this.yaxis=l.config.yaxis[0]}return h(G,[{key:"drawXaxis",value:function(){var r=this.w,a=new Z(this.ctx),l=a.group({class:"apexcharts-xaxis",transform:"translate(".concat(r.config.xaxis.offsetX,", ").concat(r.config.xaxis.offsetY,")")}),u=a.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(r.globals.translateXAxisX,", ").concat(r.globals.translateXAxisY,")")});l.add(u);for(var d=[],f=0;f<this.xaxisLabels.length;f++)d.push(this.xaxisLabels[f]);if(this.drawXAxisLabelAndGroup(!0,a,u,d,r.globals.isXNumeric,function(U,H){return H}),r.globals.hasXaxisGroups){var v=r.globals.groups;d=[];for(var y=0;y<v.length;y++)d.push(v[y].title);var _={};r.config.xaxis.group.style&&(_.xaxisFontSize=r.config.xaxis.group.style.fontSize,_.xaxisFontFamily=r.config.xaxis.group.style.fontFamily,_.xaxisForeColors=r.config.xaxis.group.style.colors,_.fontWeight=r.config.xaxis.group.style.fontWeight,_.cssClass=r.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,a,u,d,!1,function(U,H){return v[U].cols*H},_)}if(r.config.xaxis.title.text!==void 0){var A=a.group({class:"apexcharts-xaxis-title"}),E=a.drawText({x:r.globals.gridWidth/2+r.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+(r.config.xaxis.position==="bottom"?r.globals.xAxisLabelsHeight:-r.globals.xAxisLabelsHeight-10)+r.config.xaxis.title.offsetY,text:r.config.xaxis.title.text,textAnchor:"middle",fontSize:r.config.xaxis.title.style.fontSize,fontFamily:r.config.xaxis.title.style.fontFamily,fontWeight:r.config.xaxis.title.style.fontWeight,foreColor:r.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+r.config.xaxis.title.style.cssClass});A.add(E),l.add(A)}if(r.config.xaxis.axisBorder.show){var T=r.globals.barPadForNumericAxis,N=a.drawLine(r.globals.padHorizontal+r.config.xaxis.axisBorder.offsetX-T,this.offY,this.xaxisBorderWidth+T,this.offY,r.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&r.config.grid.show?this.elgrid.elGridBorders.add(N):l.add(N)}return l}},{key:"drawXAxisLabelAndGroup",value:function(r,a,l,u,d,f){var v,y=this,_=arguments.length>6&&arguments[6]!==void 0?arguments[6]:{},A=[],E=[],T=this.w,N=_.xaxisFontSize||this.xaxisFontSize,U=_.xaxisFontFamily||this.xaxisFontFamily,H=_.xaxisForeColors||this.xaxisForeColors,X=_.fontWeight||T.config.xaxis.labels.style.fontWeight,Y=_.cssClass||T.config.xaxis.labels.style.cssClass,q=T.globals.padHorizontal,w=u.length,D=T.config.xaxis.type==="category"?T.globals.dataPoints:w;if(D===0&&w>D&&(D=w),d){var V=D>1?D-1:D;v=T.globals.gridWidth/Math.min(V,w-1),q=q+f(0,v)/2+T.config.xaxis.labels.offsetX}else v=T.globals.gridWidth/D,q=q+f(0,v)+T.config.xaxis.labels.offsetX;for(var $=function(ne){var fe=q-f(ne,v)/2+T.config.xaxis.labels.offsetX;ne===0&&w===1&&v/2===q&&D===1&&(fe=T.globals.gridWidth/2);var de=y.axesUtils.getLabel(u,T.globals.timescaleLabels,fe,ne,A,N,r),Me=28;if(T.globals.rotateXLabels&&r&&(Me=22),T.config.xaxis.title.text&&T.config.xaxis.position==="top"&&(Me+=parseFloat(T.config.xaxis.title.style.fontSize)+2),r||(Me=Me+parseFloat(N)+(T.globals.xAxisLabelsHeight-T.globals.xAxisGroupLabelsHeight)+(T.globals.rotateXLabels?10:0)),de=T.config.xaxis.tickAmount!==void 0&&T.config.xaxis.tickAmount!=="dataPoints"&&T.config.xaxis.type!=="datetime"?y.axesUtils.checkLabelBasedOnTickamount(ne,de,w):y.axesUtils.checkForOverflowingLabels(ne,de,w,A,E),T.config.xaxis.labels.show){var Oe=a.drawText({x:de.x,y:y.offY+T.config.xaxis.labels.offsetY+Me-(T.config.xaxis.position==="top"?T.globals.xAxisHeight+T.config.xaxis.axisTicks.height-2:0),text:de.text,textAnchor:"middle",fontWeight:de.isBold?600:X,fontSize:N,fontFamily:U,foreColor:Array.isArray(H)?r&&T.config.xaxis.convertedCatToNumeric?H[T.globals.minX+ne-1]:H[ne]:H,isPlainText:!1,cssClass:(r?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+Y});if(l.add(Oe),Oe.on("click",function(Ne){if(typeof T.config.chart.events.xAxisLabelClick=="function"){var it=Object.assign({},T,{labelIndex:ne});T.config.chart.events.xAxisLabelClick(Ne,y.ctx,it)}}),r){var _e=document.createElementNS(T.globals.SVGNS,"title");_e.textContent=Array.isArray(de.text)?de.text.join(" "):de.text,Oe.node.appendChild(_e),de.text!==""&&(A.push(de.text),E.push(de))}}ne<w-1&&(q+=f(ne+1,v))},Q=0;Q<=w-1;Q++)$(Q)}},{key:"drawXaxisInversed",value:function(r){var a,l,u=this,d=this.w,f=new Z(this.ctx),v=d.config.yaxis[0].opposite?d.globals.translateYAxisX[r]:0,y=f.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:r}),_=f.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+v+", 0)"});y.add(_);var A=[];if(d.config.yaxis[r].show)for(var E=0;E<this.xaxisLabels.length;E++)A.push(this.xaxisLabels[E]);a=d.globals.gridHeight/A.length,l=-a/2.2;var T=d.globals.yLabelFormatters[0],N=d.config.yaxis[0].labels;if(N.show)for(var U=function(V){var $=A[V]===void 0?"":A[V];$=T($,{seriesIndex:r,dataPointIndex:V,w:d});var Q=u.axesUtils.getYAxisForeColor(N.style.colors,r),ne=0;Array.isArray($)&&(ne=$.length/2*parseInt(N.style.fontSize,10));var fe=N.offsetX-15,de="end";u.yaxis.opposite&&(de="start"),d.config.yaxis[0].labels.align==="left"?(fe=N.offsetX,de="start"):d.config.yaxis[0].labels.align==="center"?(fe=N.offsetX,de="middle"):d.config.yaxis[0].labels.align==="right"&&(de="end");var Me=f.drawText({x:fe,y:l+a+N.offsetY-ne,text:$,textAnchor:de,foreColor:Array.isArray(Q)?Q[V]:Q,fontSize:N.style.fontSize,fontFamily:N.style.fontFamily,fontWeight:N.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+N.style.cssClass,maxWidth:N.maxWidth});_.add(Me),Me.on("click",function(Ne){if(typeof d.config.chart.events.xAxisLabelClick=="function"){var it=Object.assign({},d,{labelIndex:V});d.config.chart.events.xAxisLabelClick(Ne,u.ctx,it)}});var Oe=document.createElementNS(d.globals.SVGNS,"title");if(Oe.textContent=Array.isArray($)?$.join(" "):$,Me.node.appendChild(Oe),d.config.yaxis[r].labels.rotate!==0){var _e=f.rotateAroundCenter(Me.node);Me.node.setAttribute("transform","rotate(".concat(d.config.yaxis[r].labels.rotate," 0 ").concat(_e.y,")"))}l+=a},H=0;H<=A.length-1;H++)U(H);if(d.config.yaxis[0].title.text!==void 0){var X=f.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+v+", 0)"}),Y=f.drawText({x:d.config.yaxis[0].title.offsetX,y:d.globals.gridHeight/2+d.config.yaxis[0].title.offsetY,text:d.config.yaxis[0].title.text,textAnchor:"middle",foreColor:d.config.yaxis[0].title.style.color,fontSize:d.config.yaxis[0].title.style.fontSize,fontWeight:d.config.yaxis[0].title.style.fontWeight,fontFamily:d.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+d.config.yaxis[0].title.style.cssClass});X.add(Y),y.add(X)}var q=0;this.isCategoryBarHorizontal&&d.config.yaxis[0].opposite&&(q=d.globals.gridWidth);var w=d.config.xaxis.axisBorder;if(w.show){var D=f.drawLine(d.globals.padHorizontal+w.offsetX+q,1+w.offsetY,d.globals.padHorizontal+w.offsetX+q,d.globals.gridHeight+w.offsetY,w.color,0);this.elgrid&&this.elgrid.elGridBorders&&d.config.grid.show?this.elgrid.elGridBorders.add(D):y.add(D)}return d.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(q,A.length,d.config.yaxis[0].axisBorder,d.config.yaxis[0].axisTicks,0,a,y),y}},{key:"drawXaxisTicks",value:function(r,a,l){var u=this.w,d=r;if(!(r<0||r-2>u.globals.gridWidth)){var f=this.offY+u.config.xaxis.axisTicks.offsetY;if(a=a+f+u.config.xaxis.axisTicks.height,u.config.xaxis.position==="top"&&(a=f-u.config.xaxis.axisTicks.height),u.config.xaxis.axisTicks.show){var v=new Z(this.ctx).drawLine(r+u.config.xaxis.axisTicks.offsetX,f+u.config.xaxis.offsetY,d+u.config.xaxis.axisTicks.offsetX,a+u.config.xaxis.offsetY,u.config.xaxis.axisTicks.color);l.add(v),v.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var r=this.w,a=[],l=this.xaxisLabels.length,u=r.globals.padHorizontal;if(r.globals.timescaleLabels.length>0)for(var d=0;d<l;d++)u=this.xaxisLabels[d].position,a.push(u);else for(var f=l,v=0;v<f;v++){var y=f;r.globals.isXNumeric&&r.config.chart.type!=="bar"&&(y-=1),u+=r.globals.gridWidth/y,a.push(u)}return a}},{key:"xAxisLabelCorrections",value:function(){var r=this.w,a=new Z(this.ctx),l=r.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),u=r.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),d=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),f=r.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(r.globals.rotateXLabels||r.config.xaxis.labels.rotateAlways)for(var v=0;v<u.length;v++){var y=a.rotateAroundCenter(u[v]);y.y=y.y-1,y.x=y.x+1,u[v].setAttribute("transform","rotate(".concat(r.config.xaxis.labels.rotate," ").concat(y.x," ").concat(y.y,")")),u[v].setAttribute("text-anchor","end"),l.setAttribute("transform","translate(0, ".concat(-10,")"));var _=u[v].childNodes;r.config.xaxis.labels.trim&&Array.prototype.forEach.call(_,function(N){a.placeTextWithEllipsis(N,N.textContent,r.globals.xAxisLabelsHeight-(r.config.legend.position==="bottom"?20:10))})}else(function(){for(var N=r.globals.gridWidth/(r.globals.labels.length+1),U=0;U<u.length;U++){var H=u[U].childNodes;r.config.xaxis.labels.trim&&r.config.xaxis.type!=="datetime"&&Array.prototype.forEach.call(H,function(X){a.placeTextWithEllipsis(X,X.textContent,N)})}})();if(d.length>0){var A=d[d.length-1].getBBox(),E=d[0].getBBox();A.x<-20&&d[d.length-1].parentNode.removeChild(d[d.length-1]),E.x+E.width>r.globals.gridWidth&&!r.globals.isBarHorizontal&&d[0].parentNode.removeChild(d[0]);for(var T=0;T<f.length;T++)a.placeTextWithEllipsis(f[T],f[T].textContent,r.config.yaxis[0].labels.maxWidth-(r.config.yaxis[0].title.text?2*parseFloat(r.config.yaxis[0].title.style.fontSize):0)-15)}}}]),G}(),Ot=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w;var a=this.w;this.xaxisLabels=a.globals.labels.slice(),this.axesUtils=new se(r),this.isRangeBar=a.globals.seriesRange.length&&a.globals.isBarHorizontal,a.globals.timescaleLabels.length>0&&(this.xaxisLabels=a.globals.timescaleLabels.slice())}return h(G,[{key:"drawGridArea",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,a=this.w,l=new Z(this.ctx);r===null&&(r=l.group({class:"apexcharts-grid"}));var u=l.drawLine(a.globals.padHorizontal,1,a.globals.padHorizontal,a.globals.gridHeight,"transparent"),d=l.drawLine(a.globals.padHorizontal,a.globals.gridHeight,a.globals.gridWidth,a.globals.gridHeight,"transparent");return r.add(d),r.add(u),r}},{key:"drawGrid",value:function(){var r=null;return this.w.globals.axisCharts&&(r=this.renderGrid(),this.drawGridArea(r.el)),r}},{key:"createGridMask",value:function(){var r=this.w,a=r.globals,l=new Z(this.ctx),u=Array.isArray(r.config.stroke.width)?0:r.config.stroke.width;if(Array.isArray(r.config.stroke.width)){var d=0;r.config.stroke.width.forEach(function(E){d=Math.max(d,E)}),u=d}a.dom.elGridRectMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(a.cuid)),a.dom.elGridRectMarkerMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(a.cuid)),a.dom.elForecastMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elForecastMask.setAttribute("id","forecastMask".concat(a.cuid)),a.dom.elNonForecastMask=document.createElementNS(a.SVGNS,"clipPath"),a.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(a.cuid));var f=r.config.chart.type,v=0,y=0;(f==="bar"||f==="rangeBar"||f==="candlestick"||f==="boxPlot"||r.globals.comboBarCount>0)&&r.globals.isXNumeric&&!r.globals.isBarHorizontal&&(v=r.config.grid.padding.left,y=r.config.grid.padding.right,a.barPadForNumericAxis>v&&(v=a.barPadForNumericAxis,y=a.barPadForNumericAxis)),a.dom.elGridRect=l.drawRect(-u/2-v-2,-u/2-2,a.gridWidth+u+y+v+4,a.gridHeight+u+4,0,"#fff");var _=r.globals.markers.largestSize+1;a.dom.elGridRectMarker=l.drawRect(2*-_,2*-_,a.gridWidth+4*_,a.gridHeight+4*_,0,"#fff"),a.dom.elGridRectMask.appendChild(a.dom.elGridRect.node),a.dom.elGridRectMarkerMask.appendChild(a.dom.elGridRectMarker.node);var A=a.dom.baseEl.querySelector("defs");A.appendChild(a.dom.elGridRectMask),A.appendChild(a.dom.elForecastMask),A.appendChild(a.dom.elNonForecastMask),A.appendChild(a.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(r){var a=r.i,l=r.x1,u=r.y1,d=r.x2,f=r.y2,v=r.xCount,y=r.parent,_=this.w;if(!(a===0&&_.globals.skipFirstTimelinelabel||a===v-1&&_.globals.skipLastTimelinelabel&&!_.config.xaxis.labels.formatter||_.config.chart.type==="radar")){_.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,x1:l,y1:u,x2:d,y2:f,xCount:v,parent:y});var A=0;if(_.globals.hasXaxisGroups&&_.config.xaxis.tickPlacement==="between"){var E=_.globals.groups;if(E){for(var T=0,N=0;T<a&&N<E.length;N++)T+=E[N].cols;T===a&&(A=.6*_.globals.xAxisLabelsHeight)}}new Ct(this.ctx).drawXaxisTicks(l,A,_.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(r){var a=r.i,l=r.x1,u=r.y1,d=r.x2,f=r.y2,v=r.xCount,y=r.parent,_=this.w,A=!1,E=y.node.classList.contains("apexcharts-gridlines-horizontal"),T=_.config.grid.strokeDashArray,N=_.globals.barPadForNumericAxis;(u===0&&f===0||l===0&&d===0)&&(A=!0),u===_.globals.gridHeight&&f===_.globals.gridHeight&&(A=!0),!_.globals.isBarHorizontal||a!==0&&a!==v-1||(A=!0);var U=new Z(this).drawLine(l-(E?N:0),u,d+(E?N:0),f,_.config.grid.borderColor,T);U.node.classList.add("apexcharts-gridline"),A&&_.config.grid.show?this.elGridBorders.add(U):y.add(U)}},{key:"_drawGridBandRect",value:function(r){var a=r.c,l=r.x1,u=r.y1,d=r.x2,f=r.y2,v=r.type,y=this.w,_=new Z(this.ctx),A=y.globals.barPadForNumericAxis;if(v!=="column"||y.config.xaxis.type!=="datetime"){var E=y.config.grid[v].colors[a],T=_.drawRect(l-(v==="row"?A:0),u,d+(v==="row"?2*A:0),f,0,E,y.config.grid[v].opacity);this.elg.add(T),T.attr("clip-path","url(#gridRectMask".concat(y.globals.cuid,")")),T.node.classList.add("apexcharts-grid-".concat(v))}}},{key:"_drawXYLines",value:function(r){var a=this,l=r.xCount,u=r.tickAmount,d=this.w;if(d.config.grid.xaxis.lines.show||d.config.xaxis.axisTicks.show){var f,v=d.globals.padHorizontal,y=d.globals.gridHeight;d.globals.timescaleLabels.length?function(U){for(var H=U.xC,X=U.x1,Y=U.y1,q=U.x2,w=U.y2,D=0;D<H;D++)X=a.xaxisLabels[D].position,q=a.xaxisLabels[D].position,a._drawGridLines({i:D,x1:X,y1:Y,x2:q,y2:w,xCount:l,parent:a.elgridLinesV})}({xC:l,x1:v,y1:0,x2:f,y2:y}):(d.globals.isXNumeric&&(l=d.globals.xAxisScale.result.length),function(U){for(var H=U.xC,X=U.x1,Y=U.y1,q=U.x2,w=U.y2,D=0;D<H+(d.globals.isXNumeric?0:1);D++)D===0&&H===1&&d.globals.dataPoints===1&&(q=X=d.globals.gridWidth/2),a._drawGridLines({i:D,x1:X,y1:Y,x2:q,y2:w,xCount:l,parent:a.elgridLinesV}),q=X+=d.globals.gridWidth/(d.globals.isXNumeric?H-1:H)}({xC:l,x1:v,y1:0,x2:f,y2:y}))}if(d.config.grid.yaxis.lines.show){var _=0,A=0,E=d.globals.gridWidth,T=u+1;this.isRangeBar&&(T=d.globals.labels.length);for(var N=0;N<T+(this.isRangeBar?1:0);N++)this._drawGridLine({i:N,xCount:T+(this.isRangeBar?1:0),x1:0,y1:_,x2:E,y2:A,parent:this.elgridLinesH}),A=_+=d.globals.gridHeight/(this.isRangeBar?T:u)}}},{key:"_drawInvertedXYLines",value:function(r){var a=r.xCount,l=this.w;if(l.config.grid.xaxis.lines.show||l.config.xaxis.axisTicks.show)for(var u,d=l.globals.padHorizontal,f=l.globals.gridHeight,v=0;v<a+1;v++)l.config.grid.xaxis.lines.show&&this._drawGridLine({i:v,xCount:a+1,x1:d,y1:0,x2:u,y2:f,parent:this.elgridLinesV}),new Ct(this.ctx).drawXaxisTicks(d,0,l.globals.dom.elGraphical),u=d+=l.globals.gridWidth/a;if(l.config.grid.yaxis.lines.show)for(var y=0,_=0,A=l.globals.gridWidth,E=0;E<l.globals.dataPoints+1;E++)this._drawGridLine({i:E,xCount:l.globals.dataPoints+1,x1:0,y1:y,x2:A,y2:_,parent:this.elgridLinesH}),_=y+=l.globals.gridHeight/l.globals.dataPoints}},{key:"renderGrid",value:function(){var r=this.w,a=r.globals,l=new Z(this.ctx);this.elg=l.group({class:"apexcharts-grid"}),this.elgridLinesH=l.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=l.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=l.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),r.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var u=0;u<a.seriesYAxisMap.length&&a.ignoreYAxisIndexes.indexOf(u)!==-1;)u++;u===a.seriesYAxisMap.length&&(u=0);var d,f=a.yAxisScale[u].result.length-1;if(!a.isBarHorizontal||this.isRangeBar){var v,y,_;d=this.xaxisLabels.length,this.isRangeBar&&(f=a.labels.length,r.config.xaxis.tickAmount&&r.config.xaxis.labels.formatter&&(d=r.config.xaxis.tickAmount),((v=a.yAxisScale)===null||v===void 0||(y=v[u])===null||y===void 0||(_=y.result)===null||_===void 0?void 0:_.length)>0&&r.config.xaxis.type!=="datetime"&&(d=a.yAxisScale[u].result.length-1)),this._drawXYLines({xCount:d,tickAmount:f})}else d=f,f=a.xTickAmount,this._drawInvertedXYLines({xCount:d,tickAmount:f});return this.drawGridBands(d,f),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:a.gridWidth/d}}},{key:"drawGridBands",value:function(r,a){var l=this.w;if(l.config.grid.row.colors!==void 0&&l.config.grid.row.colors.length>0)for(var u=0,d=l.globals.gridHeight/a,f=l.globals.gridWidth,v=0,y=0;v<a;v++,y++)y>=l.config.grid.row.colors.length&&(y=0),this._drawGridBandRect({c:y,x1:0,y1:u,x2:f,y2:d,type:"row"}),u+=l.globals.gridHeight/a;if(l.config.grid.column.colors!==void 0&&l.config.grid.column.colors.length>0)for(var _=l.globals.isBarHorizontal||l.config.xaxis.tickPlacement!=="on"||l.config.xaxis.type!=="category"&&!l.config.xaxis.convertedCatToNumeric?r:r-1,A=l.globals.padHorizontal,E=l.globals.padHorizontal+l.globals.gridWidth/_,T=l.globals.gridHeight,N=0,U=0;N<r;N++,U++)U>=l.config.grid.column.colors.length&&(U=0),this._drawGridBandRect({c:U,x1:A,y1:0,x2:E,y2:T,type:"column"}),A+=l.globals.gridWidth/_}}]),G}(),oe=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"niceScale",value:function(r,a){var l,u,d,f,v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,y=1e-11,_=this.w,A=_.globals;A.isBarHorizontal?(l=_.config.xaxis,u=Math.max((A.svgWidth-100)/25,2)):(l=_.config.yaxis[v],u=Math.max((A.svgHeight-100)/15,2)),d=l.min!==void 0&&l.min!==null,f=l.max!==void 0&&l.min!==null;var E=l.stepSize!==void 0&&l.stepSize!==null,T=l.tickAmount!==void 0&&l.tickAmount!==null,N=T?l.tickAmount:l.forceNiceScale?A.niceScaleDefaultTicks[Math.min(Math.round(u/2),A.niceScaleDefaultTicks.length-1)]:10;if(A.isMultipleYAxis&&!T&&A.multiAxisTickAmount>0&&(N=A.multiAxisTickAmount,T=!0),N=N==="dataPoints"?A.dataPoints-1:Math.abs(Math.round(N)),(r===Number.MIN_VALUE&&a===0||!R.isNumber(r)&&!R.isNumber(a)||r===Number.MIN_VALUE&&a===-Number.MAX_VALUE)&&(r=R.isNumber(l.min)?l.min:0,a=R.isNumber(l.max)?l.max:r+N,A.allSeriesCollapsed=!1),r>a){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var U=a;a=r,r=U}else r===a&&(r=r===0?0:r-1,a=a===0?2:a+1);var H=[];N<1&&(N=1);var X=N,Y=Math.abs(a-r);l.forceNiceScale&&(!d&&r>0&&r/Y<.15&&(r=0,d=!0),!f&&a<0&&-a/Y<.15&&(a=0,f=!0),Y=Math.abs(a-r));var q=Y/X,w=q,D=Math.floor(Math.log10(w)),V=Math.pow(10,D),$=Math.ceil(w/V);if(q=w=($=A.niceScaleAllowedMagMsd[A.yValueDecimal===0?0:1][$])*V,A.isBarHorizontal&&l.stepSize&&l.type!=="datetime"?(q=l.stepSize,E=!0):E&&(q=l.stepSize),E&&l.forceNiceScale){var Q=Math.floor(Math.log10(q));q*=Math.pow(10,D-Q)}if(d&&f){var ne=Y/X;if(T)if(E)if(R.mod(Y,q)!=0){var fe=R.getGCD(q,ne);q=ne/fe<10?fe:ne}else R.mod(q,ne)==0?q=ne:(ne=q,T=!1);else q=ne;else if(E)R.mod(Y,q)==0?ne=q:q=ne;else if(R.mod(Y,q)==0)ne=q;else{ne=Y/(X=Math.ceil(Y/q));var de=R.getGCD(Y,q);Y/de<u&&(ne=de),q=ne}X=Math.round(Y/q)}else{if(d||f){if(f)if(T)r=a-q*X;else{var Me=r;r=q*Math.floor(r/q),Math.abs(a-r)/R.getGCD(Y,q)>u&&(r=a-q*N,r+=q*Math.floor((Me-r)/q))}else if(d)if(T)a=r+q*X;else{var Oe=a;a=q*Math.ceil(a/q),Math.abs(a-r)/R.getGCD(Y,q)>u&&(a=r+q*N,a+=q*Math.ceil((Oe-a)/q))}}else if(T){var _e=q/(a-r>a?1:2),Ne=_e*Math.floor(r/_e);Math.abs(Ne-r)<=_e/2?a=(r=Ne)+q*X:r=(a=_e*Math.ceil(a/_e))-q*X}else r=q*Math.floor(r/q),a=q*Math.ceil(a/q);Y=Math.abs(a-r),q=R.getGCD(Y,q),X=Math.round(Y/q)}if(T||d||f||(X=Math.ceil((Y-y)/(q+y)))>16&&R.getPrimeFactors(X).length<2&&X++,!T&&l.forceNiceScale&&A.yValueDecimal===0&&X>Y&&(X=Y,q=Math.round(Y/X)),X>u&&(!T&&!E||l.forceNiceScale)){var it=R.getPrimeFactors(X),mt=it.length-1,St=X;e:for(var Mt=0;Mt<mt;Mt++)for(var Ft=0;Ft<=mt-Mt;Ft++){for(var Rt=Math.min(Ft+Mt,mt),jt=St,vn=1,Pt=Ft;Pt<=Rt;Pt++)vn*=it[Pt];if((jt/=vn)<u){St=jt;break e}}q=St===X?Y:Y/St,X=Math.round(Y/q)}A.isMultipleYAxis&&A.multiAxisTickAmount==0&&A.ignoreYAxisIndexes.indexOf(v)<0&&(A.multiAxisTickAmount=X);var gn=r-q,hi=q*y;do gn+=q,H.push(R.stripNumber(gn,7));while(a-gn>hi);return{result:H,niceMin:H[0],niceMax:H[H.length-1]}}},{key:"linearScale",value:function(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:10,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:void 0,f=Math.abs(a-r);(l=this._adjustTicksForSmallRange(l,u,f))==="dataPoints"&&(l=this.w.globals.dataPoints-1),d||(d=f/l),l===Number.MAX_VALUE&&(l=5,d=1);for(var v=[],y=r;l>=0;)v.push(y),y+=d,l-=1;return{result:v,niceMin:v[0],niceMax:v[v.length-1]}}},{key:"logarithmicScaleNice",value:function(r,a,l){a<=0&&(a=Math.max(r,l)),r<=0&&(r=Math.min(a,l));for(var u=[],d=Math.ceil(Math.log(a)/Math.log(l)+1),f=Math.floor(Math.log(r)/Math.log(l));f<d;f++)u.push(Math.pow(l,f));return{result:u,niceMin:u[0],niceMax:u[u.length-1]}}},{key:"logarithmicScale",value:function(r,a,l){a<=0&&(a=Math.max(r,l)),r<=0&&(r=Math.min(a,l));for(var u=[],d=Math.log(a)/Math.log(l),f=Math.log(r)/Math.log(l),v=d-f,y=Math.round(v),_=v/y,A=0,E=f;A<y;A++,E+=_)u.push(Math.pow(l,E));return u.push(Math.pow(l,d)),{result:u,niceMin:r,niceMax:a}}},{key:"_adjustTicksForSmallRange",value:function(r,a,l){var u=r;if(a!==void 0&&this.w.config.yaxis[a].labels.formatter&&this.w.config.yaxis[a].tickAmount===void 0){var d=Number(this.w.config.yaxis[a].labels.formatter(1));R.isNumber(d)&&this.w.globals.yValueDecimal===0&&(u=Math.ceil(l))}return u<r?u:r}},{key:"setYScaleForIndex",value:function(r,a,l){var u=this.w.globals,d=this.w.config,f=u.isBarHorizontal?d.xaxis:d.yaxis[r];u.yAxisScale[r]===void 0&&(u.yAxisScale[r]=[]);var v=Math.abs(l-a);f.logarithmic&&v<=5&&(u.invalidLogScale=!0),f.logarithmic&&v>5?(u.allSeriesCollapsed=!1,u.yAxisScale[r]=f.forceNiceScale?this.logarithmicScaleNice(a,l,f.logBase):this.logarithmicScale(a,l,f.logBase)):l!==-Number.MAX_VALUE&&R.isNumber(l)&&a!==Number.MAX_VALUE&&R.isNumber(a)?(u.allSeriesCollapsed=!1,u.yAxisScale[r]=this.niceScale(a,l,r)):u.yAxisScale[r]=this.niceScale(Number.MIN_VALUE,0,r)}},{key:"setXScale",value:function(r,a){var l=this.w,u=l.globals,d=Math.abs(a-r);return a!==-Number.MAX_VALUE&&R.isNumber(a)?u.xAxisScale=this.linearScale(r,a,l.config.xaxis.tickAmount?l.config.xaxis.tickAmount:d<10&&d>1?d+1:10,0,l.config.xaxis.stepSize):u.xAxisScale=this.linearScale(0,10,10),u.xAxisScale}},{key:"setSeriesYAxisMappings",value:function(){var r=this.w.globals,a=this.w.config,l=[],u=[],d=[],f=r.series.length>a.yaxis.length||a.yaxis.some(function(E){return Array.isArray(E.seriesName)});a.series.forEach(function(E,T){d.push(T),u.push(null)}),a.yaxis.forEach(function(E,T){l[T]=[]});var v=[];a.yaxis.forEach(function(E,T){var N=!1;if(E.seriesName){var U=[];Array.isArray(E.seriesName)?U=E.seriesName:U.push(E.seriesName),U.forEach(function(H){a.series.forEach(function(X,Y){if(X.name===H){var q=Y;T===Y||f?!f||d.indexOf(Y)>-1?l[T].push([T,Y]):console.warn("Series '"+X.name+"' referenced more than once in what looks like the new style. That is, when using either seriesName: [], or when there are more series than yaxes."):(l[Y].push([Y,T]),q=T),N=!0,(q=d.indexOf(q))!==-1&&d.splice(q,1)}})})}N||v.push(T)}),l=l.map(function(E,T){var N=[];return E.forEach(function(U){u[U[1]]=U[0],N.push(U[1])}),N});for(var y=a.yaxis.length-1,_=0;_<v.length&&(y=v[_],l[y]=[],d);_++){var A=d[0];d.shift(),l[y].push(A),u[A]=y}d.forEach(function(E){l[y].push(E),u[E]=y}),r.seriesYAxisMap=l.map(function(E){return E}),r.seriesYAxisReverseMap=u.map(function(E){return E})}},{key:"scaleMultipleYAxes",value:function(){var r=this,a=this.w.config,l=this.w.globals;this.setSeriesYAxisMappings();var u=l.seriesYAxisMap,d=l.minYArr,f=l.maxYArr;l.allSeriesCollapsed=!0,l.barGroups=[],u.forEach(function(v,y){var _=[];v.forEach(function(A){var E=a.series[A].group;_.indexOf(E)<0&&_.push(E)}),v.length>0?function(){var A,E,T=Number.MAX_VALUE,N=-Number.MAX_VALUE,U=T,H=N;if(a.chart.stacked)(function(){var q=l.seriesX[v[0]],w=[],D=[],V=[];_.forEach(function(){w.push(q.map(function(){return Number.MIN_VALUE})),D.push(q.map(function(){return Number.MIN_VALUE})),V.push(q.map(function(){return Number.MIN_VALUE}))});for(var $=function(ne){!A&&a.series[v[ne]].type&&(A=a.series[v[ne]].type);var fe=v[ne];E=a.series[fe].group?a.series[fe].group:"axis-".concat(y),!(l.collapsedSeriesIndices.indexOf(fe)<0&&l.ancillaryCollapsedSeriesIndices.indexOf(fe)<0)||(l.allSeriesCollapsed=!1,_.forEach(function(de,Me){if(a.series[fe].group===de)for(var Oe=0;Oe<l.series[fe].length;Oe++){var _e=l.series[fe][Oe];_e>=0?D[Me][Oe]+=_e:V[Me][Oe]+=_e,w[Me][Oe]+=_e,U=Math.min(U,_e),H=Math.max(H,_e)}})),A!=="bar"&&A!=="column"||l.barGroups.push(E)},Q=0;Q<v.length;Q++)$(Q);A||(A=a.chart.type),A==="bar"||A==="column"?_.forEach(function(ne,fe){T=Math.min(T,Math.min.apply(null,V[fe])),N=Math.max(N,Math.max.apply(null,D[fe]))}):(_.forEach(function(ne,fe){U=Math.min(U,Math.min.apply(null,w[fe])),H=Math.max(H,Math.max.apply(null,w[fe]))}),T=U,N=H),T===Number.MIN_VALUE&&N===Number.MIN_VALUE&&(N=-Number.MAX_VALUE)})();else for(var X=0;X<v.length;X++){var Y=v[X];T=Math.min(T,d[Y]),N=Math.max(N,f[Y]),!(l.collapsedSeriesIndices.indexOf(Y)<0&&l.ancillaryCollapsedSeriesIndices.indexOf(Y)<0)||(l.allSeriesCollapsed=!1)}a.yaxis[y].min!==void 0&&(T=typeof a.yaxis[y].min=="function"?a.yaxis[y].min(T):a.yaxis[y].min),a.yaxis[y].max!==void 0&&(N=typeof a.yaxis[y].max=="function"?a.yaxis[y].max(N):a.yaxis[y].max),l.barGroups=l.barGroups.filter(function(q,w,D){return D.indexOf(q)===w}),r.setYScaleForIndex(y,T,N),v.forEach(function(q){d[q]=l.yAxisScale[y].niceMin,f[q]=l.yAxisScale[y].niceMax})}():r.setYScaleForIndex(y,0,-Number.MAX_VALUE)})}}]),G}(),je=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.scales=new oe(r)}return h(G,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-Number.MAX_VALUE,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,d=this.w.config,f=this.w.globals,v=-Number.MAX_VALUE,y=Number.MIN_VALUE;u===null&&(u=r+1);var _=0,A=0,E=void 0;if(f.seriesX.length>=u){var T,N;_=0,A=(E=z(new Set((T=[]).concat.apply(T,z(f.seriesX.slice(r,u)))))).length-1;var U=(N=f.brushSource)===null||N===void 0?void 0:N.w.config.chart.brush;if(d.chart.zoom.enabled&&d.chart.zoom.autoScaleYaxis||U!=null&&U.enabled&&U!=null&&U.autoScaleYaxis){if(d.xaxis.min)for(_=0;_<A&&E[_]<d.xaxis.min;_++);if(d.xaxis.max)for(;A>_&&E[A]>d.xaxis.max;A--);}}var H=f.series,X=H,Y=H;d.chart.type==="candlestick"?(X=f.seriesCandleL,Y=f.seriesCandleH):d.chart.type==="boxPlot"?(X=f.seriesCandleO,Y=f.seriesCandleC):f.isRangeData&&(X=f.seriesRangeStart,Y=f.seriesRangeEnd);for(var q=r;q<u;q++){f.dataPoints=Math.max(f.dataPoints,H[q].length);var w=d.series[q].type;f.categoryLabels.length&&(f.dataPoints=f.categoryLabels.filter(function($){return $!==void 0}).length),f.labels.length&&d.xaxis.type!=="datetime"&&f.series.reduce(function($,Q){return $+Q.length},0)!==0&&(f.dataPoints=Math.max(f.dataPoints,f.labels.length)),E||(_=0,A=f.series[q].length);for(var D=_;D<=A&&D<f.series[q].length;D++){var V=H[q][D];if(V!==null&&R.isNumber(V)){switch(Y[q][D]!==void 0&&(v=Math.max(v,Y[q][D]),a=Math.min(a,Y[q][D])),X[q][D]!==void 0&&(a=Math.min(a,X[q][D]),l=Math.max(l,X[q][D])),w){case"candlestick":f.seriesCandleC[q][D]!==void 0&&(v=Math.max(v,f.seriesCandleH[q][D]),a=Math.min(a,f.seriesCandleL[q][D]));break;case"boxPlot":f.seriesCandleC[q][D]!==void 0&&(v=Math.max(v,f.seriesCandleC[q][D]),a=Math.min(a,f.seriesCandleO[q][D]))}w&&w!=="candlestick"&&w!=="boxPlot"&&w!=="rangeArea"&&w!=="rangeBar"&&(v=Math.max(v,f.series[q][D]),a=Math.min(a,f.series[q][D])),l=v,f.seriesGoals[q]&&f.seriesGoals[q][D]&&Array.isArray(f.seriesGoals[q][D])&&f.seriesGoals[q][D].forEach(function($){y!==Number.MIN_VALUE&&(y=Math.min(y,$.value),a=y),v=Math.max(v,$.value),l=v}),R.isFloat(V)&&(V=R.noExponents(V),f.yValueDecimal=Math.max(f.yValueDecimal,V.toString().split(".")[1].length)),y>X[q][D]&&X[q][D]<0&&(y=X[q][D])}else f.hasNullValues=!0}w!=="bar"&&w!=="column"||(y<0&&v<0&&(v=0,l=Math.max(l,0)),y===Number.MIN_VALUE&&(y=0,a=Math.min(a,0)))}return d.chart.type==="rangeBar"&&f.seriesRangeStart.length&&f.isBarHorizontal&&(y=a),d.chart.type==="bar"&&(y<0&&v<0&&(v=0),y===Number.MIN_VALUE&&(y=0)),{minY:y,maxY:v,lowestY:a,highestY:l}}},{key:"setYRange",value:function(){var r=this.w.globals,a=this.w.config;r.maxY=-Number.MAX_VALUE,r.minY=Number.MIN_VALUE;var l,u=Number.MAX_VALUE;if(r.isMultipleYAxis){u=Number.MAX_VALUE;for(var d=0;d<r.series.length;d++)l=this.getMinYMaxY(d),r.minYArr[d]=l.lowestY,r.maxYArr[d]=l.highestY,u=Math.min(u,l.lowestY)}return l=this.getMinYMaxY(0,u,null,r.series.length),a.chart.type==="bar"?(r.minY=l.minY,r.maxY=l.maxY):(r.minY=l.lowestY,r.maxY=l.highestY),u=l.lowestY,a.chart.stacked&&this._setStackedMinMax(),a.chart.type==="line"||a.chart.type==="area"||a.chart.type==="scatter"||a.chart.type==="candlestick"||a.chart.type==="boxPlot"||a.chart.type==="rangeBar"&&!r.isBarHorizontal?r.minY===Number.MIN_VALUE&&u!==-Number.MAX_VALUE&&u!==r.maxY&&(r.minY=u):r.minY=l.minY,a.yaxis.forEach(function(f,v){f.max!==void 0&&(typeof f.max=="number"?r.maxYArr[v]=f.max:typeof f.max=="function"&&(r.maxYArr[v]=f.max(r.isMultipleYAxis?r.maxYArr[v]:r.maxY)),r.maxY=r.maxYArr[v]),f.min!==void 0&&(typeof f.min=="number"?r.minYArr[v]=f.min:typeof f.min=="function"&&(r.minYArr[v]=f.min(r.isMultipleYAxis?r.minYArr[v]===Number.MIN_VALUE?0:r.minYArr[v]:r.minY)),r.minY=r.minYArr[v])}),r.isBarHorizontal&&["min","max"].forEach(function(f){a.xaxis[f]!==void 0&&typeof a.xaxis[f]=="number"&&(f==="min"?r.minY=a.xaxis[f]:r.maxY=a.xaxis[f])}),r.isMultipleYAxis?(this.scales.scaleMultipleYAxes(),r.minY=u):(this.scales.setYScaleForIndex(0,r.minY,r.maxY),r.minY=r.yAxisScale[0].niceMin,r.maxY=r.yAxisScale[0].niceMax,r.minYArr[0]=r.minY,r.maxYArr[0]=r.maxY),r.barGroups=[],r.lineGroups=[],r.areaGroups=[],a.series.forEach(function(f){switch(f.type||a.chart.type){case"bar":case"column":r.barGroups.push(f.group);break;case"line":r.lineGroups.push(f.group);break;case"area":r.areaGroups.push(f.group)}}),r.barGroups=r.barGroups.filter(function(f,v,y){return y.indexOf(f)===v}),r.lineGroups=r.lineGroups.filter(function(f,v,y){return y.indexOf(f)===v}),r.areaGroups=r.areaGroups.filter(function(f,v,y){return y.indexOf(f)===v}),{minY:r.minY,maxY:r.maxY,minYArr:r.minYArr,maxYArr:r.maxYArr,yAxisScale:r.yAxisScale}}},{key:"setXRange",value:function(){var r=this.w.globals,a=this.w.config,l=a.xaxis.type==="numeric"||a.xaxis.type==="datetime"||a.xaxis.type==="category"&&!r.noLabelsProvided||r.noLabelsProvided||r.isXNumeric;if(r.isXNumeric&&function(){for(var v=0;v<r.series.length;v++)if(r.labels[v])for(var y=0;y<r.labels[v].length;y++)r.labels[v][y]!==null&&R.isNumber(r.labels[v][y])&&(r.maxX=Math.max(r.maxX,r.labels[v][y]),r.initialMaxX=Math.max(r.maxX,r.labels[v][y]),r.minX=Math.min(r.minX,r.labels[v][y]),r.initialMinX=Math.min(r.minX,r.labels[v][y]))}(),r.noLabelsProvided&&a.xaxis.categories.length===0&&(r.maxX=r.labels[r.labels.length-1],r.initialMaxX=r.labels[r.labels.length-1],r.minX=1,r.initialMinX=1),r.isXNumeric||r.noLabelsProvided||r.dataFormatXNumeric){var u;if(a.xaxis.tickAmount===void 0?(u=Math.round(r.svgWidth/150),a.xaxis.type==="numeric"&&r.dataPoints<30&&(u=r.dataPoints-1),u>r.dataPoints&&r.dataPoints!==0&&(u=r.dataPoints-1)):a.xaxis.tickAmount==="dataPoints"?(r.series.length>1&&(u=r.series[r.maxValsInArrayIndex].length-1),r.isXNumeric&&(u=r.maxX-r.minX-1)):u=a.xaxis.tickAmount,r.xTickAmount=u,a.xaxis.max!==void 0&&typeof a.xaxis.max=="number"&&(r.maxX=a.xaxis.max),a.xaxis.min!==void 0&&typeof a.xaxis.min=="number"&&(r.minX=a.xaxis.min),a.xaxis.range!==void 0&&(r.minX=r.maxX-a.xaxis.range),r.minX!==Number.MAX_VALUE&&r.maxX!==-Number.MAX_VALUE)if(a.xaxis.convertedCatToNumeric&&!r.dataFormatXNumeric){for(var d=[],f=r.minX-1;f<r.maxX;f++)d.push(f+1);r.xAxisScale={result:d,niceMin:d[0],niceMax:d[d.length-1]}}else r.xAxisScale=this.scales.setXScale(r.minX,r.maxX);else r.xAxisScale=this.scales.linearScale(0,u,u,0,a.xaxis.stepSize),r.noLabelsProvided&&r.labels.length>0&&(r.xAxisScale=this.scales.linearScale(1,r.labels.length,u-1,0,a.xaxis.stepSize),r.seriesX=r.labels.slice());l&&(r.labels=r.xAxisScale.result.slice())}return r.isBarHorizontal&&r.labels.length&&(r.xTickAmount=r.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:r.minX,maxX:r.maxX}}},{key:"setZRange",value:function(){var r=this.w.globals;if(r.isDataXYZ){for(var a=0;a<r.series.length;a++)if(r.seriesZ[a]!==void 0)for(var l=0;l<r.seriesZ[a].length;l++)r.seriesZ[a][l]!==null&&R.isNumber(r.seriesZ[a][l])&&(r.maxZ=Math.max(r.maxZ,r.seriesZ[a][l]),r.minZ=Math.min(r.minZ,r.seriesZ[a][l]))}}},{key:"_handleSingleDataPoint",value:function(){var r=this.w.globals,a=this.w.config;if(r.minX===r.maxX){var l=new ee(this.ctx);if(a.xaxis.type==="datetime"){var u=l.getDate(r.minX);a.xaxis.labels.datetimeUTC?u.setUTCDate(u.getUTCDate()-2):u.setDate(u.getDate()-2),r.minX=new Date(u).getTime();var d=l.getDate(r.maxX);a.xaxis.labels.datetimeUTC?d.setUTCDate(d.getUTCDate()+2):d.setDate(d.getDate()+2),r.maxX=new Date(d).getTime()}else(a.xaxis.type==="numeric"||a.xaxis.type==="category"&&!r.noLabelsProvided)&&(r.minX=r.minX-2,r.initialMinX=r.minX,r.maxX=r.maxX+2,r.initialMaxX=r.maxX)}}},{key:"_getMinXDiff",value:function(){var r=this.w.globals;r.isXNumeric&&r.seriesX.forEach(function(a,l){a.length===1&&a.push(r.seriesX[r.maxValsInArrayIndex][r.seriesX[r.maxValsInArrayIndex].length-1]);var u=a.slice();u.sort(function(d,f){return d-f}),u.forEach(function(d,f){if(f>0){var v=d-u[f-1];v>0&&(r.minXDiff=Math.min(v,r.minXDiff))}}),r.dataPoints!==1&&r.minXDiff!==Number.MAX_VALUE||(r.minXDiff=.5)})}},{key:"_setStackedMinMax",value:function(){var r=this,a=this.w.globals;if(a.series.length){var l=a.seriesGroups;l.length||(l=[this.w.globals.seriesNames.map(function(f){return f})]);var u={},d={};l.forEach(function(f){u[f]=[],d[f]=[],r.w.config.series.map(function(v,y){return f.indexOf(a.seriesNames[y])>-1?y:null}).filter(function(v){return v!==null}).forEach(function(v){for(var y=0;y<a.series[a.maxValsInArrayIndex].length;y++){var _,A,E,T;u[f][y]===void 0&&(u[f][y]=0,d[f][y]=0),(r.w.config.chart.stacked&&!a.comboCharts||r.w.config.chart.stacked&&a.comboCharts&&(!r.w.config.chart.stackOnlyBar||((_=r.w.config.series)===null||_===void 0||(A=_[v])===null||A===void 0?void 0:A.type)==="bar"||((E=r.w.config.series)===null||E===void 0||(T=E[v])===null||T===void 0?void 0:T.type)==="column"))&&a.series[v][y]!==null&&R.isNumber(a.series[v][y])&&(a.series[v][y]>0?u[f][y]+=parseFloat(a.series[v][y])+1e-4:d[f][y]+=parseFloat(a.series[v][y]))}})}),Object.entries(u).forEach(function(f){var v=L(f,1)[0];u[v].forEach(function(y,_){a.maxY=Math.max(a.maxY,u[v][_]),a.minY=Math.min(a.minY,d[v][_])})})}}}]),G}(),Ze=function(){function G(r,a){o(this,G),this.ctx=r,this.elgrid=a,this.w=r.w;var l=this.w;this.xaxisFontSize=l.config.xaxis.labels.style.fontSize,this.axisFontFamily=l.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=l.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal=l.config.chart.type==="bar"&&l.config.plotOptions.bar.horizontal,this.xAxisoffX=0,l.config.xaxis.position==="bottom"&&(this.xAxisoffX=l.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new se(r)}return h(G,[{key:"drawYaxis",value:function(r){var a=this,l=this.w,u=new Z(this.ctx),d=l.config.yaxis[r].labels.style,f=d.fontSize,v=d.fontFamily,y=d.fontWeight,_=u.group({class:"apexcharts-yaxis",rel:r,transform:"translate("+l.globals.translateYAxisX[r]+", 0)"});if(this.axesUtils.isYAxisHidden(r))return _;var A=u.group({class:"apexcharts-yaxis-texts-g"});_.add(A);var E=l.globals.yAxisScale[r].result.length-1,T=l.globals.gridHeight/E,N=l.globals.yLabelFormatters[r],U=l.globals.yAxisScale[r].result.slice();U=this.axesUtils.checkForReversedLabels(r,U);var H="";if(l.config.yaxis[r].labels.show){var X=l.globals.translateY+l.config.yaxis[r].labels.offsetY;l.globals.isBarHorizontal?X=0:l.config.chart.type==="heatmap"&&(X-=T/2),X+=parseInt(l.config.yaxis[r].labels.style.fontSize,10)/3;for(var Y=function(fe){var de=U[fe];de=N(de,fe,l);var Me=l.config.yaxis[r].labels.padding;l.config.yaxis[r].opposite&&l.config.yaxis.length!==0&&(Me*=-1);var Oe="end";l.config.yaxis[r].opposite&&(Oe="start"),l.config.yaxis[r].labels.align==="left"?Oe="start":l.config.yaxis[r].labels.align==="center"?Oe="middle":l.config.yaxis[r].labels.align==="right"&&(Oe="end");var _e=a.axesUtils.getYAxisForeColor(d.colors,r),Ne=u.drawText({x:Me,y:X,text:de,textAnchor:Oe,fontSize:f,fontFamily:v,fontWeight:y,maxWidth:l.config.yaxis[r].labels.maxWidth,foreColor:Array.isArray(_e)?_e[fe]:_e,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+d.cssClass});fe===E&&(H=Ne),A.add(Ne);var it=document.createElementNS(l.globals.SVGNS,"title");if(it.textContent=Array.isArray(de)?de.join(" "):de,Ne.node.appendChild(it),l.config.yaxis[r].labels.rotate!==0){var mt=u.rotateAroundCenter(H.node),St=u.rotateAroundCenter(Ne.node);Ne.node.setAttribute("transform","rotate(".concat(l.config.yaxis[r].labels.rotate," ").concat(mt.x," ").concat(St.y,")"))}X+=T},q=E;q>=0;q--)Y(q)}if(l.config.yaxis[r].title.text!==void 0){var w=u.group({class:"apexcharts-yaxis-title"}),D=0;l.config.yaxis[r].opposite&&(D=l.globals.translateYAxisX[r]);var V=u.drawText({x:D,y:l.globals.gridHeight/2+l.globals.translateY+l.config.yaxis[r].title.offsetY,text:l.config.yaxis[r].title.text,textAnchor:"end",foreColor:l.config.yaxis[r].title.style.color,fontSize:l.config.yaxis[r].title.style.fontSize,fontWeight:l.config.yaxis[r].title.style.fontWeight,fontFamily:l.config.yaxis[r].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+l.config.yaxis[r].title.style.cssClass});w.add(V),_.add(w)}var $=l.config.yaxis[r].axisBorder,Q=31+$.offsetX;if(l.config.yaxis[r].opposite&&(Q=-31-$.offsetX),$.show){var ne=u.drawLine(Q,l.globals.translateY+$.offsetY-2,Q,l.globals.gridHeight+l.globals.translateY+$.offsetY+2,$.color,0,$.width);_.add(ne)}return l.config.yaxis[r].axisTicks.show&&this.axesUtils.drawYAxisTicks(Q,E,$,l.config.yaxis[r].axisTicks,r,T,_),_}},{key:"drawYaxisInversed",value:function(r){var a=this.w,l=new Z(this.ctx),u=l.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),d=l.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(a.globals.translateXAxisX,", ").concat(a.globals.translateXAxisY,")")});u.add(d);var f=a.globals.yAxisScale[r].result.length-1,v=a.globals.gridWidth/f+.1,y=v+a.config.xaxis.labels.offsetX,_=a.globals.xLabelFormatter,A=a.globals.yAxisScale[r].result.slice(),E=a.globals.timescaleLabels;E.length>0&&(this.xaxisLabels=E.slice(),f=(A=E.slice()).length),A=this.axesUtils.checkForReversedLabels(r,A);var T=E.length;if(a.config.xaxis.labels.show)for(var N=T?0:f;T?N<T:N>=0;T?N++:N--){var U=A[N];U=_(U,N,a);var H=a.globals.gridWidth+a.globals.padHorizontal-(y-v+a.config.xaxis.labels.offsetX);if(E.length){var X=this.axesUtils.getLabel(A,E,H,N,this.drawnLabels,this.xaxisFontSize);H=X.x,U=X.text,this.drawnLabels.push(X.text),N===0&&a.globals.skipFirstTimelinelabel&&(U=""),N===A.length-1&&a.globals.skipLastTimelinelabel&&(U="")}var Y=l.drawText({x:H,y:this.xAxisoffX+a.config.xaxis.labels.offsetY+30-(a.config.xaxis.position==="top"?a.globals.xAxisHeight+a.config.xaxis.axisTicks.height-2:0),text:U,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[r]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:a.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+a.config.xaxis.labels.style.cssClass});d.add(Y),Y.tspan(U);var q=document.createElementNS(a.globals.SVGNS,"title");q.textContent=U,Y.node.appendChild(q),y+=v}return this.inversedYAxisTitleText(u),this.inversedYAxisBorder(u),u}},{key:"inversedYAxisBorder",value:function(r){var a=this.w,l=new Z(this.ctx),u=a.config.xaxis.axisBorder;if(u.show){var d=0;a.config.chart.type==="bar"&&a.globals.isXNumeric&&(d-=15);var f=l.drawLine(a.globals.padHorizontal+d+u.offsetX,this.xAxisoffX,a.globals.gridWidth,this.xAxisoffX,u.color,0,u.height);this.elgrid&&this.elgrid.elGridBorders&&a.config.grid.show?this.elgrid.elGridBorders.add(f):r.add(f)}}},{key:"inversedYAxisTitleText",value:function(r){var a=this.w,l=new Z(this.ctx);if(a.config.xaxis.title.text!==void 0){var u=l.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),d=l.drawText({x:a.globals.gridWidth/2+a.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(a.config.xaxis.title.style.fontSize)+a.config.xaxis.title.offsetY+20,text:a.config.xaxis.title.text,textAnchor:"middle",fontSize:a.config.xaxis.title.style.fontSize,fontFamily:a.config.xaxis.title.style.fontFamily,fontWeight:a.config.xaxis.title.style.fontWeight,foreColor:a.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+a.config.xaxis.title.style.cssClass});u.add(d),r.add(u)}}},{key:"yAxisTitleRotate",value:function(r,a){var l=this.w,u=new Z(this.ctx),d={width:0,height:0},f={width:0,height:0},v=l.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(r,"'] .apexcharts-yaxis-texts-g"));v!==null&&(d=v.getBoundingClientRect());var y=l.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(r,"'] .apexcharts-yaxis-title text"));if(y!==null&&(f=y.getBoundingClientRect()),y!==null){var _=this.xPaddingForYAxisTitle(r,d,f,a);y.setAttribute("x",_.xPos-(a?10:0))}if(y!==null){var A=u.rotateAroundCenter(y);y.setAttribute("transform","rotate(".concat(a?-1*l.config.yaxis[r].title.rotate:l.config.yaxis[r].title.rotate," ").concat(A.x," ").concat(A.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(r,a,l,u){var d=this.w,f=0,v=0,y=10;return d.config.yaxis[r].title.text===void 0||r<0?{xPos:v,padd:0}:(u?(v=a.width+d.config.yaxis[r].title.offsetX+l.width/2+y/2,(f+=1)===0&&(v-=y/2)):(v=-1*a.width+d.config.yaxis[r].title.offsetX+y/2+l.width/2,d.globals.isBarHorizontal&&(y=25,v=-1*a.width-d.config.yaxis[r].title.offsetX-y)),{xPos:v,padd:y})}},{key:"setYAxisXPosition",value:function(r,a){var l=this.w,u=0,d=0,f=18,v=1;l.config.yaxis.length>1&&(this.multipleYs=!0),l.config.yaxis.map(function(y,_){var A=l.globals.ignoreYAxisIndexes.indexOf(_)>-1||!y.show||y.floating||r[_].width===0,E=r[_].width+a[_].width;y.opposite?l.globals.isBarHorizontal?(d=l.globals.gridWidth+l.globals.translateX-1,l.globals.translateYAxisX[_]=d-y.labels.offsetX):(d=l.globals.gridWidth+l.globals.translateX+v,A||(v=v+E+20),l.globals.translateYAxisX[_]=d-y.labels.offsetX+20):(u=l.globals.translateX-f,A||(f=f+E+20),l.globals.translateYAxisX[_]=u+y.labels.offsetX)})}},{key:"setYAxisTextAlignments",value:function(){var r=this.w,a=r.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(a=R.listToArray(a)).forEach(function(l,u){var d=r.config.yaxis[u];if(d&&!d.floating&&d.labels.align!==void 0){var f=r.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(u,"'] .apexcharts-yaxis-texts-g")),v=r.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(u,"'] .apexcharts-yaxis-label"));v=R.listToArray(v);var y=f.getBoundingClientRect();d.labels.align==="left"?(v.forEach(function(_,A){_.setAttribute("text-anchor","start")}),d.opposite||f.setAttribute("transform","translate(-".concat(y.width,", 0)"))):d.labels.align==="center"?(v.forEach(function(_,A){_.setAttribute("text-anchor","middle")}),f.setAttribute("transform","translate(".concat(y.width/2*(d.opposite?1:-1),", 0)"))):d.labels.align==="right"&&(v.forEach(function(_,A){_.setAttribute("text-anchor","end")}),d.opposite&&f.setAttribute("transform","translate(".concat(y.width,", 0)")))}})}}]),G}(),lt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.documentEvent=R.bind(this.documentEvent,this)}return h(G,[{key:"addEventListener",value:function(r,a){var l=this.w;l.globals.events.hasOwnProperty(r)?l.globals.events[r].push(a):l.globals.events[r]=[a]}},{key:"removeEventListener",value:function(r,a){var l=this.w;if(l.globals.events.hasOwnProperty(r)){var u=l.globals.events[r].indexOf(a);u!==-1&&l.globals.events[r].splice(u,1)}}},{key:"fireEvent",value:function(r,a){var l=this.w;if(l.globals.events.hasOwnProperty(r)){a&&a.length||(a=[]);for(var u=l.globals.events[r],d=u.length,f=0;f<d;f++)u[f].apply(null,a)}}},{key:"setupEventHandlers",value:function(){var r=this,a=this.w,l=this.ctx,u=a.globals.dom.baseEl.querySelector(a.globals.chartClass);this.ctx.eventList.forEach(function(d){u.addEventListener(d,function(f){var v=Object.assign({},a,{seriesIndex:a.globals.axisCharts?a.globals.capturedSeriesIndex:0,dataPointIndex:a.globals.capturedDataPointIndex});f.type==="mousemove"||f.type==="touchmove"?typeof a.config.chart.events.mouseMove=="function"&&a.config.chart.events.mouseMove(f,l,v):f.type==="mouseleave"||f.type==="touchleave"?typeof a.config.chart.events.mouseLeave=="function"&&a.config.chart.events.mouseLeave(f,l,v):(f.type==="mouseup"&&f.which===1||f.type==="touchend")&&(typeof a.config.chart.events.click=="function"&&a.config.chart.events.click(f,l,v),l.ctx.events.fireEvent("click",[f,l,v]))},{capture:!1,passive:!0})}),this.ctx.eventList.forEach(function(d){a.globals.dom.baseEl.addEventListener(d,r.documentEvent,{passive:!0})}),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(r){var a=this.w,l=r.target.className;if(r.type==="click"){var u=a.globals.dom.baseEl.querySelector(".apexcharts-menu");u&&u.classList.contains("apexcharts-menu-open")&&l!=="apexcharts-menu-icon"&&u.classList.remove("apexcharts-menu-open")}a.globals.clientX=r.type==="touchmove"?r.touches[0].clientX:r.clientX,a.globals.clientY=r.type==="touchmove"?r.touches[0].clientY:r.clientY}}]),G}(),Be=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"setCurrentLocaleValues",value:function(r){var a=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(a=this.w.config.chart.locales.concat(window.Apex.chart.locales));var l=a.filter(function(d){return d.name===r})[0];if(!l)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var u=R.extend(Re,l);this.w.globals.locale=u.options}}]),G}(),Tt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"drawAxis",value:function(r,a){var l,u,d=this,f=this.w.globals,v=this.w.config,y=new Ct(this.ctx,a),_=new Ze(this.ctx,a);f.axisCharts&&r!=="radar"&&(f.isBarHorizontal?(u=_.drawYaxisInversed(0),l=y.drawXaxisInversed(0),f.dom.elGraphical.add(l),f.dom.elGraphical.add(u)):(l=y.drawXaxis(),f.dom.elGraphical.add(l),v.yaxis.map(function(A,E){if(f.ignoreYAxisIndexes.indexOf(E)===-1&&(u=_.drawYaxis(E),f.dom.Paper.add(u),d.w.config.grid.position==="back")){var T=f.dom.Paper.children()[1];T.remove(),f.dom.Paper.add(T)}})))}}]),G}(),st=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"drawXCrosshairs",value:function(){var r=this.w,a=new Z(this.ctx),l=new W(this.ctx),u=r.config.xaxis.crosshairs.fill.gradient,d=r.config.xaxis.crosshairs.dropShadow,f=r.config.xaxis.crosshairs.fill.type,v=u.colorFrom,y=u.colorTo,_=u.opacityFrom,A=u.opacityTo,E=u.stops,T=d.enabled,N=d.left,U=d.top,H=d.blur,X=d.color,Y=d.opacity,q=r.config.xaxis.crosshairs.fill.color;if(r.config.xaxis.crosshairs.show){f==="gradient"&&(q=a.drawGradient("vertical",v,y,_,A,null,E,null));var w=a.drawRect();r.config.xaxis.crosshairs.width===1&&(w=a.drawLine());var D=r.globals.gridHeight;(!R.isNumber(D)||D<0)&&(D=0);var V=r.config.xaxis.crosshairs.width;(!R.isNumber(V)||V<0)&&(V=0),w.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:D,width:V,height:D,fill:q,filter:"none","fill-opacity":r.config.xaxis.crosshairs.opacity,stroke:r.config.xaxis.crosshairs.stroke.color,"stroke-width":r.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":r.config.xaxis.crosshairs.stroke.dashArray}),T&&(w=l.dropShadow(w,{left:N,top:U,blur:H,color:X,opacity:Y})),r.globals.dom.elGraphical.add(w)}}},{key:"drawYCrosshairs",value:function(){var r=this.w,a=new Z(this.ctx),l=r.config.yaxis[0].crosshairs,u=r.globals.barPadForNumericAxis;if(r.config.yaxis[0].crosshairs.show){var d=a.drawLine(-u,0,r.globals.gridWidth+u,0,l.stroke.color,l.stroke.dashArray,l.stroke.width);d.attr({class:"apexcharts-ycrosshairs"}),r.globals.dom.elGraphical.add(d)}var f=a.drawLine(-u,0,r.globals.gridWidth+u,0,l.stroke.color,0,0);f.attr({class:"apexcharts-ycrosshairs-hidden"}),r.globals.dom.elGraphical.add(f)}}]),G}(),vt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"checkResponsiveConfig",value:function(r){var a=this,l=this.w,u=l.config;if(u.responsive.length!==0){var d=u.responsive.slice();d.sort(function(_,A){return _.breakpoint>A.breakpoint?1:A.breakpoint>_.breakpoint?-1:0}).reverse();var f=new be({}),v=function(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},A=d[0].breakpoint,E=window.innerWidth>0?window.innerWidth:screen.width;if(E>A){var T=R.clone(l.globals.initialConfig);T.series=R.clone(l.config.series);var N=J.extendArrayProps(f,T,l);_=R.extend(N,_),_=R.extend(l.config,_),a.overrideResponsiveOptions(_)}else for(var U=0;U<d.length;U++)E<d[U].breakpoint&&(_=J.extendArrayProps(f,d[U].options,l),_=R.extend(l.config,_),a.overrideResponsiveOptions(_))};if(r){var y=J.extendArrayProps(f,r,l);y=R.extend(l.config,y),v(y=R.extend(y,r))}else v({})}}},{key:"overrideResponsiveOptions",value:function(r){var a=new be(r).init({responsiveOverride:!0});this.w.config=a}}]),G}(),he=function(){function G(r){o(this,G),this.ctx=r,this.colors=[],this.w=r.w;var a=this.w;this.isColorFn=!1,this.isHeatmapDistributed=a.config.chart.type==="treemap"&&a.config.plotOptions.treemap.distributed||a.config.chart.type==="heatmap"&&a.config.plotOptions.heatmap.distributed,this.isBarDistributed=a.config.plotOptions.bar.distributed&&(a.config.chart.type==="bar"||a.config.chart.type==="rangeBar")}return h(G,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var r,a=this,l=this.w,u=new R;if(l.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(l.config.theme.mode)),l.config.colors===void 0||((r=l.config.colors)===null||r===void 0?void 0:r.length)===0?l.globals.colors=this.predefined():(l.globals.colors=l.config.colors,Array.isArray(l.config.colors)&&l.config.colors.length>0&&typeof l.config.colors[0]=="function"&&(l.globals.colors=l.config.series.map(function(U,H){var X=l.config.colors[H];return X||(X=l.config.colors[0]),typeof X=="function"?(a.isColorFn=!0,X({value:l.globals.axisCharts?l.globals.series[H][0]?l.globals.series[H][0]:0:l.globals.series[H],seriesIndex:H,dataPointIndex:H,w:l})):X}))),l.globals.seriesColors.map(function(U,H){U&&(l.globals.colors[H]=U)}),l.config.theme.monochrome.enabled){var d=[],f=l.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(f=l.globals.series[0].length*l.globals.series.length);for(var v=l.config.theme.monochrome.color,y=1/(f/l.config.theme.monochrome.shadeIntensity),_=l.config.theme.monochrome.shadeTo,A=0,E=0;E<f;E++){var T=void 0;_==="dark"?(T=u.shadeColor(-1*A,v),A+=y):(T=u.shadeColor(A,v),A+=y),d.push(T)}l.globals.colors=d.slice()}var N=l.globals.colors.slice();this.pushExtraColors(l.globals.colors),["fill","stroke"].forEach(function(U){l.config[U].colors===void 0?l.globals[U].colors=a.isColorFn?l.config.colors:N:l.globals[U].colors=l.config[U].colors.slice(),a.pushExtraColors(l.globals[U].colors)}),l.config.dataLabels.style.colors===void 0?l.globals.dataLabels.style.colors=N:l.globals.dataLabels.style.colors=l.config.dataLabels.style.colors.slice(),this.pushExtraColors(l.globals.dataLabels.style.colors,50),l.config.plotOptions.radar.polygons.fill.colors===void 0?l.globals.radarPolygons.fill.colors=[l.config.theme.mode==="dark"?"#424242":"none"]:l.globals.radarPolygons.fill.colors=l.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(l.globals.radarPolygons.fill.colors,20),l.config.markers.colors===void 0?l.globals.markers.colors=N:l.globals.markers.colors=l.config.markers.colors.slice(),this.pushExtraColors(l.globals.markers.colors)}},{key:"pushExtraColors",value:function(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=this.w,d=a||u.globals.series.length;if(l===null&&(l=this.isBarDistributed||this.isHeatmapDistributed||u.config.chart.type==="heatmap"&&u.config.plotOptions.heatmap.colorScale.inverse),l&&u.globals.series.length&&(d=u.globals.series[u.globals.maxValsInArrayIndex].length*u.globals.series.length),r.length<d)for(var f=d-r.length,v=0;v<f;v++)r.push(r[v])}},{key:"updateThemeOptions",value:function(r){r.chart=r.chart||{},r.tooltip=r.tooltip||{};var a=r.theme.mode,l=a==="dark"?"palette4":a==="light"?"palette1":r.theme.palette||"palette1",u=a==="dark"?"#f6f7f8":a==="light"?"#373d3f":r.chart.foreColor||"#373d3f";return r.tooltip.theme=a||"light",r.chart.foreColor=u,r.theme.palette=l,r}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),G}(),ie=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(r){var a=this.w,l=r==="title"?a.config.title:a.config.subtitle,u=a.globals.svgWidth/2,d=l.offsetY,f="middle";if(l.align==="left"?(u=10,f="start"):l.align==="right"&&(u=a.globals.svgWidth-10,f="end"),u+=l.offsetX,d=d+parseInt(l.style.fontSize,10)+l.margin/2,l.text!==void 0){var v=new Z(this.ctx).drawText({x:u,y:d,text:l.text,textAnchor:f,fontSize:l.style.fontSize,fontFamily:l.style.fontFamily,fontWeight:l.style.fontWeight,foreColor:l.style.color,opacity:1});v.node.setAttribute("class","apexcharts-".concat(r,"-text")),a.globals.dom.Paper.add(v)}}}]),G}(),Pe=function(){function G(r){o(this,G),this.w=r.w,this.dCtx=r}return h(G,[{key:"getTitleSubtitleCoords",value:function(r){var a=this.w,l=0,u=0,d=r==="title"?a.config.title.floating:a.config.subtitle.floating,f=a.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-text"));if(f!==null&&!d){var v=f.getBoundingClientRect();l=v.width,u=a.globals.axisCharts?v.height+5:v.height}return{width:l,height:u}}},{key:"getLegendsRect",value:function(){var r=this.w,a=r.globals.dom.elLegendWrap;r.config.legend.height||r.config.legend.position!=="top"&&r.config.legend.position!=="bottom"||(a.style.maxHeight=r.globals.svgHeight/2+"px");var l=Object.assign({},R.getBoundingClientRect(a));return a!==null&&!r.config.legend.floating&&r.config.legend.show?this.dCtx.lgRect={x:l.x,y:l.y,height:l.height,width:l.height===0?0:l.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},r.config.legend.position!=="left"&&r.config.legend.position!=="right"||1.5*this.dCtx.lgRect.width>r.globals.svgWidth&&(this.dCtx.lgRect.width=r.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getDatalabelsRect",value:function(){var r=this,a=this.w,l=[];a.config.series.forEach(function(y,_){y.data.forEach(function(A,E){var T;T=a.globals.series[_][E],u=a.config.dataLabels.formatter(T,{ctx:r.dCtx.ctx,seriesIndex:_,dataPointIndex:E,w:a}),l.push(u)})});var u=R.getLargestStringFromArr(l),d=new Z(this.dCtx.ctx),f=a.config.dataLabels.style,v=d.getTextRects(u,parseInt(f.fontSize),f.fontFamily);return{width:1.05*v.width,height:v.height}}},{key:"getLargestStringFromMultiArr",value:function(r,a){var l=r;if(this.w.globals.isMultiLineX){var u=a.map(function(f,v){return Array.isArray(f)?f.length:1}),d=Math.max.apply(Math,z(u));l=a[u.indexOf(d)]}return l}}]),G}(),qe=function(){function G(r){o(this,G),this.w=r.w,this.dCtx=r}return h(G,[{key:"getxAxisLabelsCoords",value:function(){var r,a=this.w,l=a.globals.labels.slice();if(a.config.xaxis.convertedCatToNumeric&&l.length===0&&(l=a.globals.categoryLabels),a.globals.timescaleLabels.length>0){var u=this.getxAxisTimeScaleLabelsCoords();r={width:u.width,height:u.height},a.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends=a.config.legend.position!=="left"&&a.config.legend.position!=="right"||a.config.legend.floating?0:this.dCtx.lgRect.width;var d=a.globals.xLabelFormatter,f=R.getLargestStringFromArr(l),v=this.dCtx.dimHelpers.getLargestStringFromMultiArr(f,l);a.globals.isBarHorizontal&&(v=f=a.globals.yAxisScale[0].result.reduce(function(U,H){return U.length>H.length?U:H},0));var y=new K(this.dCtx.ctx),_=f;f=y.xLabelFormat(d,f,_,{i:void 0,dateFormatter:new ee(this.dCtx.ctx).formatDate,w:a}),v=y.xLabelFormat(d,v,_,{i:void 0,dateFormatter:new ee(this.dCtx.ctx).formatDate,w:a}),(a.config.xaxis.convertedCatToNumeric&&f===void 0||String(f).trim()==="")&&(v=f="1");var A=new Z(this.dCtx.ctx),E=A.getTextRects(f,a.config.xaxis.labels.style.fontSize),T=E;if(f!==v&&(T=A.getTextRects(v,a.config.xaxis.labels.style.fontSize)),(r={width:E.width>=T.width?E.width:T.width,height:E.height>=T.height?E.height:T.height}).width*l.length>a.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&a.config.xaxis.labels.rotate!==0||a.config.xaxis.labels.rotateAlways){if(!a.globals.isBarHorizontal){a.globals.rotateXLabels=!0;var N=function(U){return A.getTextRects(U,a.config.xaxis.labels.style.fontSize,a.config.xaxis.labels.style.fontFamily,"rotate(".concat(a.config.xaxis.labels.rotate," 0 0)"),!1)};E=N(f),f!==v&&(T=N(v)),r.height=(E.height>T.height?E.height:T.height)/1.5,r.width=E.width>T.width?E.width:T.width}}else a.globals.rotateXLabels=!1}return a.config.xaxis.labels.show||(r={width:0,height:0}),{width:r.width,height:r.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var r,a=this.w;if(!a.globals.hasXaxisGroups)return{width:0,height:0};var l,u=((r=a.config.xaxis.group.style)===null||r===void 0?void 0:r.fontSize)||a.config.xaxis.labels.style.fontSize,d=a.globals.groups.map(function(E){return E.title}),f=R.getLargestStringFromArr(d),v=this.dCtx.dimHelpers.getLargestStringFromMultiArr(f,d),y=new Z(this.dCtx.ctx),_=y.getTextRects(f,u),A=_;return f!==v&&(A=y.getTextRects(v,u)),l={width:_.width>=A.width?_.width:A.width,height:_.height>=A.height?_.height:A.height},a.config.xaxis.labels.show||(l={width:0,height:0}),{width:l.width,height:l.height}}},{key:"getxAxisTitleCoords",value:function(){var r=this.w,a=0,l=0;if(r.config.xaxis.title.text!==void 0){var u=new Z(this.dCtx.ctx).getTextRects(r.config.xaxis.title.text,r.config.xaxis.title.style.fontSize);a=u.width,l=u.height}return{width:a,height:l}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var r,a=this.w;this.dCtx.timescaleLabels=a.globals.timescaleLabels.slice();var l=this.dCtx.timescaleLabels.map(function(d){return d.value}),u=l.reduce(function(d,f){return d===void 0?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):d.length>f.length?d:f},0);return 1.05*(r=new Z(this.dCtx.ctx).getTextRects(u,a.config.xaxis.labels.style.fontSize)).width*l.length>a.globals.gridWidth&&a.config.xaxis.labels.rotate!==0&&(a.globals.overlappingXLabels=!0),r}},{key:"additionalPaddingXLabels",value:function(r){var a=this,l=this.w,u=l.globals,d=l.config,f=d.xaxis.type,v=r.width;u.skipLastTimelinelabel=!1,u.skipFirstTimelinelabel=!1;var y=l.config.yaxis[0].opposite&&l.globals.isBarHorizontal,_=function(A,E){d.yaxis.length>1&&function(T){return u.collapsedSeriesIndices.indexOf(T)!==-1}(E)||function(T){if(a.dCtx.timescaleLabels&&a.dCtx.timescaleLabels.length){var N=a.dCtx.timescaleLabels[0],U=a.dCtx.timescaleLabels[a.dCtx.timescaleLabels.length-1].position+v/1.75-a.dCtx.yAxisWidthRight,H=N.position-v/1.75+a.dCtx.yAxisWidthLeft,X=l.config.legend.position==="right"&&a.dCtx.lgRect.width>0?a.dCtx.lgRect.width:0;U>u.svgWidth-u.translateX-X&&(u.skipLastTimelinelabel=!0),H<-(T.show&&!T.floating||d.chart.type!=="bar"&&d.chart.type!=="candlestick"&&d.chart.type!=="rangeBar"&&d.chart.type!=="boxPlot"?10:v/1.75)&&(u.skipFirstTimelinelabel=!0)}else f==="datetime"?a.dCtx.gridPad.right<v&&!u.rotateXLabels&&(u.skipLastTimelinelabel=!0):f!=="datetime"&&a.dCtx.gridPad.right<v/2-a.dCtx.yAxisWidthRight&&!u.rotateXLabels&&!l.config.xaxis.labels.trim&&(l.config.xaxis.tickPlacement!=="between"||l.globals.isBarHorizontal)&&(a.dCtx.xPadRight=v/2+1)}(A)};d.yaxis.forEach(function(A,E){y?(a.dCtx.gridPad.left<v&&(a.dCtx.xPadLeft=v/2+1),a.dCtx.xPadRight=v/2+1):_(A,E)})}}]),G}(),Ge=function(){function G(r){o(this,G),this.w=r.w,this.dCtx=r}return h(G,[{key:"getyAxisLabelsCoords",value:function(){var r=this,a=this.w,l=[],u=10,d=new se(this.dCtx.ctx);return a.config.yaxis.map(function(f,v){var y={seriesIndex:v,dataPointIndex:-1,w:a},_=a.globals.yAxisScale[v],A=0;if(!d.isYAxisHidden(v)&&f.labels.show&&f.labels.minWidth!==void 0&&(A=f.labels.minWidth),!d.isYAxisHidden(v)&&f.labels.show&&_.result.length){var E=a.globals.yLabelFormatters[v],T=_.niceMin===Number.MIN_VALUE?0:_.niceMin,N=_.result.reduce(function(D,V){var $,Q;return(($=String(E(D,y)))===null||$===void 0?void 0:$.length)>((Q=String(E(V,y)))===null||Q===void 0?void 0:Q.length)?D:V},T),U=N=E(N,y);if(N!==void 0&&N.length!==0||(N=_.niceMax),a.globals.isBarHorizontal){u=0;var H=a.globals.labels.slice();N=R.getLargestStringFromArr(H),N=E(N,{seriesIndex:v,dataPointIndex:-1,w:a}),U=r.dCtx.dimHelpers.getLargestStringFromMultiArr(N,H)}var X=new Z(r.dCtx.ctx),Y="rotate(".concat(f.labels.rotate," 0 0)"),q=X.getTextRects(N,f.labels.style.fontSize,f.labels.style.fontFamily,Y,!1),w=q;N!==U&&(w=X.getTextRects(U,f.labels.style.fontSize,f.labels.style.fontFamily,Y,!1)),l.push({width:(A>w.width||A>q.width?A:w.width>q.width?w.width:q.width)+u,height:w.height>q.height?w.height:q.height})}else l.push({width:0,height:0})}),l}},{key:"getyAxisTitleCoords",value:function(){var r=this,a=this.w,l=[];return a.config.yaxis.map(function(u,d){if(u.show&&u.title.text!==void 0){var f=new Z(r.dCtx.ctx),v="rotate(".concat(u.title.rotate," 0 0)"),y=f.getTextRects(u.title.text,u.title.style.fontSize,u.title.style.fontFamily,v,!1);l.push({width:y.width,height:y.height})}else l.push({width:0,height:0})}),l}},{key:"getTotalYAxisWidth",value:function(){var r=this.w,a=0,l=0,u=0,d=r.globals.yAxisScale.length>1?10:0,f=new se(this.dCtx.ctx),v=function(y,_){var A=r.config.yaxis[_].floating,E=0;y.width>0&&!A?(E=y.width+d,function(T){return r.globals.ignoreYAxisIndexes.indexOf(T)>-1}(_)&&(E=E-y.width-d)):E=A||f.isYAxisHidden(_)?0:5,r.config.yaxis[_].opposite?u+=E:l+=E,a+=E};return r.globals.yLabelsCoords.map(function(y,_){v(y,_)}),r.globals.yTitleCoords.map(function(y,_){v(y,_)}),r.globals.isBarHorizontal&&!r.config.yaxis[0].floating&&(a=r.globals.yLabelsCoords[0].width+r.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=l,this.dCtx.yAxisWidthRight=u,a}}]),G}(),Xe=function(){function G(r){o(this,G),this.w=r.w,this.dCtx=r}return h(G,[{key:"gridPadForColumnsInNumericAxis",value:function(r){var a=this.w,l=a.config,u=a.globals;if(u.noData||u.collapsedSeries.length+u.ancillaryCollapsedSeries.length===l.series.length)return 0;var d=function(N){return N==="bar"||N==="rangeBar"||N==="candlestick"||N==="boxPlot"},f=l.chart.type,v=0,y=d(f)?l.series.length:1;u.comboBarCount>0&&(y=u.comboBarCount),u.collapsedSeries.forEach(function(N){d(N.type)&&(y-=1)}),l.chart.stacked&&(y=1);var _=d(f)||u.comboBarCount>0,A=Math.abs(u.initialMaxX-u.initialMinX);if(_&&u.isXNumeric&&!u.isBarHorizontal&&y>0&&A!==0){var E,T;A<=3&&(A=u.dataPoints),E=A/r,u.minXDiff&&u.minXDiff/E>0&&(T=u.minXDiff/E),T>r/2&&(T/=2),(v=T*parseInt(l.plotOptions.bar.columnWidth,10)/100)<1&&(v=1),u.barPadForNumericAxis=v}return v}},{key:"gridPadFortitleSubtitle",value:function(){var r=this,a=this.w,l=a.globals,u=this.dCtx.isSparkline||!a.globals.axisCharts?0:10;["title","subtitle"].forEach(function(v){a.config[v].text!==void 0?u+=a.config[v].margin:u+=r.dCtx.isSparkline||!a.globals.axisCharts?0:5}),!a.config.legend.show||a.config.legend.position!=="bottom"||a.config.legend.floating||a.globals.axisCharts||(u+=10);var d=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),f=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");l.gridHeight=l.gridHeight-d.height-f.height-u,l.translateY=l.translateY+d.height+f.height+u}},{key:"setGridXPosForDualYAxis",value:function(r,a){var l=this.w,u=new se(this.dCtx.ctx);l.config.yaxis.map(function(d,f){l.globals.ignoreYAxisIndexes.indexOf(f)!==-1||d.floating||u.isYAxisHidden(f)||(d.opposite&&(l.globals.translateX=l.globals.translateX-(a[f].width+r[f].width)-parseInt(l.config.yaxis[f].labels.style.fontSize,10)/1.2-12),l.globals.translateX<2&&(l.globals.translateX=2))})}}]),G}(),_t=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new Pe(this),this.dimYAxis=new Ge(this),this.dimXAxis=new qe(this),this.dimGrid=new Xe(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return h(G,[{key:"plotCoords",value:function(){var r=this,a=this.w,l=a.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.datalabelsCoords={width:0,height:0};var u=Array.isArray(a.config.stroke.width)?Math.max.apply(Math,z(a.config.stroke.width)):a.config.stroke.width;this.isSparkline&&((a.config.markers.discrete.length>0||a.config.markers.size>0)&&Object.entries(this.gridPad).forEach(function(f){var v=L(f,2),y=v[0],_=v[1];r.gridPad[y]=Math.max(_,r.w.globals.markers.largestSize/1.5)}),this.gridPad.top=Math.max(u/2,this.gridPad.top),this.gridPad.bottom=Math.max(u/2,this.gridPad.bottom)),l.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),l.gridHeight=l.gridHeight-this.gridPad.top-this.gridPad.bottom,l.gridWidth=l.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var d=this.dimGrid.gridPadForColumnsInNumericAxis(l.gridWidth);l.gridWidth=l.gridWidth-2*d,l.translateX=l.translateX+this.gridPad.left+this.xPadLeft+(d>0?d:0),l.translateY=l.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var r=this,a=this.w,l=a.globals,u=this.dimYAxis.getyAxisLabelsCoords(),d=this.dimYAxis.getyAxisTitleCoords();l.isSlopeChart&&(this.datalabelsCoords=this.dimHelpers.getDatalabelsRect()),a.globals.yLabelsCoords=[],a.globals.yTitleCoords=[],a.config.yaxis.map(function(N,U){a.globals.yLabelsCoords.push({width:u[U].width,index:U}),a.globals.yTitleCoords.push({width:d[U].width,index:U})}),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var f=this.dimXAxis.getxAxisLabelsCoords(),v=this.dimXAxis.getxAxisGroupLabelsCoords(),y=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(f,y,v),l.translateXAxisY=a.globals.rotateXLabels?this.xAxisHeight/8:-4,l.translateXAxisX=a.globals.rotateXLabels&&a.globals.isXNumeric&&a.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,a.globals.isBarHorizontal&&(l.rotateXLabels=!1,l.translateXAxisY=parseInt(a.config.xaxis.labels.style.fontSize,10)/1.5*-1),l.translateXAxisY=l.translateXAxisY+a.config.xaxis.labels.offsetY,l.translateXAxisX=l.translateXAxisX+a.config.xaxis.labels.offsetX;var _=this.yAxisWidth,A=this.xAxisHeight;l.xAxisLabelsHeight=this.xAxisHeight-y.height,l.xAxisGroupLabelsHeight=l.xAxisLabelsHeight-f.height,l.xAxisLabelsWidth=this.xAxisWidth,l.xAxisHeight=this.xAxisHeight;var E=10;(a.config.chart.type==="radar"||this.isSparkline)&&(_=0,A=l.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||a.config.chart.type==="treemap")&&(_=0,A=0,E=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(f);var T=function(){l.translateX=_+r.datalabelsCoords.width,l.gridHeight=l.svgHeight-r.lgRect.height-A-(r.isSparkline||a.config.chart.type==="treemap"?0:a.globals.rotateXLabels?10:15),l.gridWidth=l.svgWidth-_-2*r.datalabelsCoords.width};switch(a.config.xaxis.position==="top"&&(E=l.xAxisHeight-a.config.xaxis.axisTicks.height-5),a.config.legend.position){case"bottom":l.translateY=E,T();break;case"top":l.translateY=this.lgRect.height+E,T();break;case"left":l.translateY=E,l.translateX=this.lgRect.width+_+this.datalabelsCoords.width,l.gridHeight=l.svgHeight-A-12,l.gridWidth=l.svgWidth-this.lgRect.width-_-2*this.datalabelsCoords.width;break;case"right":l.translateY=E,l.translateX=_+this.datalabelsCoords.width,l.gridHeight=l.svgHeight-A-12,l.gridWidth=l.svgWidth-this.lgRect.width-_-2*this.datalabelsCoords.width-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(d,u),new Ze(this.ctx).setYAxisXPosition(u,d)}},{key:"setDimensionsForNonAxisCharts",value:function(){var r=this.w,a=r.globals,l=r.config,u=0;r.config.legend.show&&!r.config.legend.floating&&(u=20);var d=l.chart.type==="pie"||l.chart.type==="polarArea"||l.chart.type==="donut"?"pie":"radialBar",f=l.plotOptions[d].offsetY,v=l.plotOptions[d].offsetX;if(!l.legend.show||l.legend.floating){a.gridHeight=a.svgHeight-l.grid.padding.top-l.grid.padding.bottom;var y=a.dom.elWrap.getBoundingClientRect().width;return a.gridWidth=Math.min(y,a.gridHeight)-l.grid.padding.left-l.grid.padding.right,a.translateY=f,void(a.translateX=v+(a.svgWidth-a.gridWidth)/2)}switch(l.legend.position){case"bottom":a.gridHeight=a.svgHeight-this.lgRect.height-a.goldenPadding,a.gridWidth=a.svgWidth,a.translateY=f-10,a.translateX=v+(a.svgWidth-a.gridWidth)/2;break;case"top":a.gridHeight=a.svgHeight-this.lgRect.height-a.goldenPadding,a.gridWidth=a.svgWidth,a.translateY=this.lgRect.height+f+10,a.translateX=v+(a.svgWidth-a.gridWidth)/2;break;case"left":a.gridWidth=a.svgWidth-this.lgRect.width-u,a.gridHeight=l.chart.height!=="auto"?a.svgHeight:a.gridWidth,a.translateY=f,a.translateX=v+this.lgRect.width+u;break;case"right":a.gridWidth=a.svgWidth-this.lgRect.width-u-5,a.gridHeight=l.chart.height!=="auto"?a.svgHeight:a.gridWidth,a.translateY=f,a.translateX=v+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(r,a,l){var u=this.w,d=u.globals.hasXaxisGroups?2:1,f=l.height+r.height+a.height,v=u.globals.isMultiLineX?1.2:u.globals.LINE_HEIGHT_RATIO,y=u.globals.rotateXLabels?22:10,_=u.globals.rotateXLabels&&u.config.legend.position==="bottom"?10:0;this.xAxisHeight=f*v+d*y+_,this.xAxisWidth=r.width,this.xAxisHeight-a.height>u.config.xaxis.labels.maxHeight&&(this.xAxisHeight=u.config.xaxis.labels.maxHeight),u.config.xaxis.labels.minHeight&&this.xAxisHeight<u.config.xaxis.labels.minHeight&&(this.xAxisHeight=u.config.xaxis.labels.minHeight),u.config.xaxis.floating&&(this.xAxisHeight=0);var A=0,E=0;u.config.yaxis.forEach(function(T){A+=T.labels.minWidth,E+=T.labels.maxWidth}),this.yAxisWidth<A&&(this.yAxisWidth=A),this.yAxisWidth>E&&(this.yAxisWidth=E)}}]),G}(),at=function(){function G(r){o(this,G),this.w=r.w,this.lgCtx=r}return h(G,[{key:"getLegendStyles",value:function(){var r,a,l,u=document.createElement("style");u.setAttribute("type","text/css");var d=((r=this.lgCtx.ctx)===null||r===void 0||(a=r.opts)===null||a===void 0||(l=a.chart)===null||l===void 0?void 0:l.nonce)||this.w.config.chart.nonce;d&&u.setAttribute("nonce",d);var f=document.createTextNode(`
      .apexcharts-legend {
        display: flex;
        overflow: auto;
        padding: 0 10px;
      }
      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {
        flex-wrap: wrap
      }
      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        flex-direction: column;
        bottom: 0;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {
        justify-content: flex-start;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {
        justify-content: center;
      }
      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {
        justify-content: flex-end;
      }
      .apexcharts-legend-series {
        cursor: pointer;
        line-height: normal;
        display: flex;
      }
      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{
        align-items: center;
      }
      .apexcharts-legend-text {
        position: relative;
        font-size: 14px;
      }
      .apexcharts-legend-text *, .apexcharts-legend-marker * {
        pointer-events: none;
      }
      .apexcharts-legend-marker {
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        margin-right: 3px;
      }

      .apexcharts-legend-series.apexcharts-no-click {
        cursor: auto;
      }
      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {
        display: none !important;
      }
      .apexcharts-inactive-legend {
        opacity: 0.45;
      }`);return u.appendChild(f),u}},{key:"getLegendBBox",value:function(){var r=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),a=r.width;return{clwh:r.height,clww:a}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(r,a){var l=this,u=this.w;if(u.globals.axisCharts||u.config.chart.type==="radialBar"){u.globals.resized=!0;var d=null,f=null;u.globals.risingSeries=[],u.globals.axisCharts?(d=u.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),f=parseInt(d.getAttribute("data:realIndex"),10)):(d=u.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']")),f=parseInt(d.getAttribute("rel"),10)-1),a?[{cs:u.globals.collapsedSeries,csi:u.globals.collapsedSeriesIndices},{cs:u.globals.ancillaryCollapsedSeries,csi:u.globals.ancillaryCollapsedSeriesIndices}].forEach(function(A){l.riseCollapsedSeries(A.cs,A.csi,f)}):this.hideSeries({seriesEl:d,realIndex:f})}else{var v=u.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(r+1,"'] path")),y=u.config.chart.type;if(y==="pie"||y==="polarArea"||y==="donut"){var _=u.config.plotOptions.pie.donut.labels;new Z(this.lgCtx.ctx).pathMouseDown(v.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(v.members[0].node,_)}v.fire("click")}}},{key:"hideSeries",value:function(r){var a=r.seriesEl,l=r.realIndex,u=this.w,d=u.globals,f=R.clone(u.config.series);if(d.axisCharts){var v=u.config.yaxis[d.seriesYAxisReverseMap[l]];if(v&&v.show&&v.showAlways)d.ancillaryCollapsedSeriesIndices.indexOf(l)<0&&(d.ancillaryCollapsedSeries.push({index:l,data:f[l].data.slice(),type:a.parentNode.className.baseVal.split("-")[1]}),d.ancillaryCollapsedSeriesIndices.push(l));else if(d.collapsedSeriesIndices.indexOf(l)<0){d.collapsedSeries.push({index:l,data:f[l].data.slice(),type:a.parentNode.className.baseVal.split("-")[1]}),d.collapsedSeriesIndices.push(l);var y=d.risingSeries.indexOf(l);d.risingSeries.splice(y,1)}}else d.collapsedSeries.push({index:l,data:f[l]}),d.collapsedSeriesIndices.push(l);for(var _=a.childNodes,A=0;A<_.length;A++)_[A].classList.contains("apexcharts-series-markers-wrap")&&(_[A].classList.contains("apexcharts-hide")?_[A].classList.remove("apexcharts-hide"):_[A].classList.add("apexcharts-hide"));d.allSeriesCollapsed=d.collapsedSeries.length+d.ancillaryCollapsedSeries.length===u.config.series.length,f=this._getSeriesBasedOnCollapsedState(f),this.lgCtx.ctx.updateHelpers._updateSeries(f,u.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(r,a,l){var u=this.w,d=R.clone(u.config.series);if(r.length>0){for(var f=0;f<r.length;f++)r[f].index===l&&(u.globals.axisCharts?(d[l].data=r[f].data.slice(),r.splice(f,1),a.splice(f,1),u.globals.risingSeries.push(l)):(d[l]=r[f].data,r.splice(f,1),a.splice(f,1),u.globals.risingSeries.push(l)));d=this._getSeriesBasedOnCollapsedState(d),this.lgCtx.ctx.updateHelpers._updateSeries(d,u.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(r){var a=this.w,l=0;return a.globals.axisCharts?r.forEach(function(u,d){a.globals.collapsedSeriesIndices.indexOf(d)<0&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(d)<0||(r[d].data=[],l++)}):r.forEach(function(u,d){!a.globals.collapsedSeriesIndices.indexOf(d)<0&&(r[d]=0,l++)}),a.globals.allSeriesCollapsed=l===r.length,r}}]),G}(),pt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed=this.w.config.chart.type==="bar"&&this.w.config.plotOptions.bar.distributed&&this.w.config.series.length===1,this.legendHelpers=new at(this)}return h(G,[{key:"init",value:function(){var r=this.w,a=r.globals,l=r.config;if((l.legend.showForSingleSeries&&a.series.length===1||this.isBarsDistributed||a.series.length>1||!a.axisCharts)&&l.legend.show){for(;a.dom.elLegendWrap.firstChild;)a.dom.elLegendWrap.removeChild(a.dom.elLegendWrap.firstChild);this.drawLegends(),R.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),l.legend.position==="bottom"||l.legend.position==="top"?this.legendAlignHorizontal():l.legend.position!=="right"&&l.legend.position!=="left"||this.legendAlignVertical()}}},{key:"createLegendMarker",value:function(r){var a=r.i,l=r.fillcolor,u=this.w,d=document.createElement("span");d.classList.add("apexcharts-legend-marker");var f=u.config.legend.markers.shape||u.config.markers.shape,v=u.config.legend.markers.size,y=u.config.legend.markers.offsetX,_=u.config.legend.markers.offsetY,A=u.config.legend.markers.strokeWidth,E=u.config.legend.markers.strokeColor,T=u.config.legend.markers.radius,N=d.style;N.height=(Array.isArray(v)?2*parseFloat(v[a]):2*parseFloat(v))+"px",N.width=(Array.isArray(v)?2*parseFloat(v[a]):2*parseFloat(v))+"px",N.left=(Array.isArray(y)?parseFloat(y[a]):parseFloat(y))+"px",N.top=(Array.isArray(_)?parseFloat(_[a]):parseFloat(_))+"px",N.borderWidth=Array.isArray(A)?A[a]:A,N.borderColor=Array.isArray(E)?E[a]:E,N.borderRadius=Array.isArray(T)?parseFloat(T[a])+"px":parseFloat(T)+"px",u.config.legend.markers.customHTML&&(N.background="transparent",Array.isArray(u.config.legend.markers.customHTML)?u.config.legend.markers.customHTML[a]&&(d.innerHTML=u.config.legend.markers.customHTML[a]()):d.innerHTML=u.config.legend.markers.customHTML());var U=f;if(Array.isArray(f)&&(U=f[a]),U!=="circle"){var H=new Te(this.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:a,size:v,pRadius:Array.isArray(T)?T[a]:T,strokeWidth:U==="plus"||U==="cross"||U==="line"?Array.isArray(A)?A[a]:A:0}),X=SVG(d).size("100%","100%"),Y=new Z(this.ctx).drawMarker(0,0,i(i({},H),{},{pointFillColor:Array.isArray(u.config.legend.markers.fillColors)?l[a]:H.pointFillColor,shape:U}));SVG.select(".apexcharts-marker").members.forEach(function(q){q.node.style.transform="translate(50%, 50%)"}),X.add(Y)}else N.color=l[a],N.borderRadius="100%",u.config.legend.markers.customHTML||(N.background=l[a],N.setProperty("background",l[a],"important"),u.globals.seriesColors[a]!==void 0&&(N.background=u.globals.seriesColors[a],N.color=u.globals.seriesColors[a]));return d}},{key:"drawLegends",value:function(){var r=this,a=this.w,l=a.config.legend.fontFamily,u=a.globals.seriesNames,d=a.config.legend.markers.fillColors?a.config.legend.markers.fillColors.slice():a.globals.colors.slice();if(a.config.chart.type==="heatmap"){var f=a.config.plotOptions.heatmap.colorScale.ranges;u=f.map(function(V){return V.name?V.name:V.from+" - "+V.to}),d=f.map(function(V){return V.color})}else this.isBarsDistributed&&(u=a.globals.labels.slice());a.config.legend.customLegendItems.length&&(u=a.config.legend.customLegendItems);for(var v=a.globals.legendFormatter,y=a.config.legend.inverseOrder,_=y?u.length-1:0;y?_>=0:_<=u.length-1;y?_--:_++){var A,E=v(u[_],{seriesIndex:_,w:a}),T=!1,N=!1;if(a.globals.collapsedSeries.length>0)for(var U=0;U<a.globals.collapsedSeries.length;U++)a.globals.collapsedSeries[U].index===_&&(T=!0);if(a.globals.ancillaryCollapsedSeriesIndices.length>0)for(var H=0;H<a.globals.ancillaryCollapsedSeriesIndices.length;H++)a.globals.ancillaryCollapsedSeriesIndices[H]===_&&(N=!0);var X=this.createLegendMarker({i:_,fillcolor:d});Z.setAttrs(X,{rel:_+1,"data:collapsed":T||N}),(T||N)&&X.classList.add("apexcharts-inactive-legend");var Y=document.createElement("div"),q=document.createElement("span");q.classList.add("apexcharts-legend-text"),q.innerHTML=Array.isArray(E)?E.join(" "):E;var w=a.config.legend.labels.useSeriesColors?a.globals.colors[_]:Array.isArray(a.config.legend.labels.colors)?(A=a.config.legend.labels.colors)===null||A===void 0?void 0:A[_]:a.config.legend.labels.colors;w||(w=a.config.chart.foreColor),q.style.color=w,q.style.fontSize=parseFloat(a.config.legend.fontSize)+"px",q.style.fontWeight=a.config.legend.fontWeight,q.style.fontFamily=l||a.config.chart.fontFamily,Z.setAttrs(q,{rel:_+1,i:_,"data:default-text":encodeURIComponent(E),"data:collapsed":T||N}),Y.appendChild(X),Y.appendChild(q);var D=new J(this.ctx);a.config.legend.showForZeroSeries||D.getSeriesTotalByIndex(_)===0&&D.seriesHaveSameValues(_)&&!D.isSeriesNull(_)&&a.globals.collapsedSeriesIndices.indexOf(_)===-1&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(_)===-1&&Y.classList.add("apexcharts-hidden-zero-series"),a.config.legend.showForNullSeries||D.isSeriesNull(_)&&a.globals.collapsedSeriesIndices.indexOf(_)===-1&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(_)===-1&&Y.classList.add("apexcharts-hidden-null-series"),a.globals.dom.elLegendWrap.appendChild(Y),a.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(a.config.legend.horizontalAlign)),a.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+a.config.legend.position),Y.classList.add("apexcharts-legend-series"),Y.style.margin="".concat(a.config.legend.itemMargin.vertical,"px ").concat(a.config.legend.itemMargin.horizontal,"px"),a.globals.dom.elLegendWrap.style.width=a.config.legend.width?a.config.legend.width+"px":"",a.globals.dom.elLegendWrap.style.height=a.config.legend.height?a.config.legend.height+"px":"",Z.setAttrs(Y,{rel:_+1,seriesName:R.escapeString(u[_]),"data:collapsed":T||N}),(T||N)&&Y.classList.add("apexcharts-inactive-legend"),a.config.legend.onItemClick.toggleDataSeries||Y.classList.add("apexcharts-no-click")}a.globals.dom.elWrap.addEventListener("click",r.onLegendClick,!0),a.config.legend.onItemHover.highlightDataSeries&&a.config.legend.customLegendItems.length===0&&(a.globals.dom.elWrap.addEventListener("mousemove",r.onLegendHovered,!0),a.globals.dom.elWrap.addEventListener("mouseout",r.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(r,a){var l=this.w,u=l.globals.dom.elLegendWrap,d=u.getBoundingClientRect(),f=0,v=0;if(l.config.legend.position==="bottom")v+=l.globals.svgHeight-d.height/2;else if(l.config.legend.position==="top"){var y=new _t(this.ctx),_=y.dimHelpers.getTitleSubtitleCoords("title").height,A=y.dimHelpers.getTitleSubtitleCoords("subtitle").height;v=v+(_>0?_-10:0)+(A>0?A-10:0)}u.style.position="absolute",f=f+r+l.config.legend.offsetX,v=v+a+l.config.legend.offsetY,u.style.left=f+"px",u.style.top=v+"px",l.config.legend.position==="bottom"?(u.style.top="auto",u.style.bottom=5-l.config.legend.offsetY+"px"):l.config.legend.position==="right"&&(u.style.left="auto",u.style.right=25+l.config.legend.offsetX+"px"),["width","height"].forEach(function(E){u.style[E]&&(u.style[E]=parseInt(l.config.legend[E],10)+"px")})}},{key:"legendAlignHorizontal",value:function(){var r=this.w;r.globals.dom.elLegendWrap.style.right=0;var a=this.legendHelpers.getLegendBBox(),l=new _t(this.ctx),u=l.dimHelpers.getTitleSubtitleCoords("title"),d=l.dimHelpers.getTitleSubtitleCoords("subtitle"),f=0;r.config.legend.position==="bottom"?f=-a.clwh/1.8:r.config.legend.position==="top"&&(f=u.height+d.height+r.config.title.margin+r.config.subtitle.margin-10),this.setLegendWrapXY(20,f)}},{key:"legendAlignVertical",value:function(){var r=this.w,a=this.legendHelpers.getLegendBBox(),l=0;r.config.legend.position==="left"&&(l=20),r.config.legend.position==="right"&&(l=r.globals.svgWidth-a.clww-10),this.setLegendWrapXY(l,20)}},{key:"onLegendHovered",value:function(r){var a=this.w,l=r.target.classList.contains("apexcharts-legend-series")||r.target.classList.contains("apexcharts-legend-text")||r.target.classList.contains("apexcharts-legend-marker");if(a.config.chart.type==="heatmap"||this.isBarsDistributed){if(l){var u=parseInt(r.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,u,this.w]),new Ye(this.ctx).highlightRangeInSeries(r,r.target)}}else!r.target.classList.contains("apexcharts-inactive-legend")&&l&&new Ye(this.ctx).toggleSeriesOnHover(r,r.target)}},{key:"onLegendClick",value:function(r){var a=this.w;if(!a.config.legend.customLegendItems.length&&(r.target.classList.contains("apexcharts-legend-series")||r.target.classList.contains("apexcharts-legend-text")||r.target.classList.contains("apexcharts-legend-marker"))){var l=parseInt(r.target.getAttribute("rel"),10)-1,u=r.target.getAttribute("data:collapsed")==="true",d=this.w.config.chart.events.legendClick;typeof d=="function"&&d(this.ctx,l,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,l,this.w]);var f=this.w.config.legend.markers.onClick;typeof f=="function"&&r.target.classList.contains("apexcharts-legend-marker")&&(f(this.ctx,l,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,l,this.w])),a.config.chart.type!=="treemap"&&a.config.chart.type!=="heatmap"&&!this.isBarsDistributed&&a.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(l,u)}}}]),G}(),zt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w;var a=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=a.globals.minX,this.maxX=a.globals.maxX}return h(G,[{key:"createToolbar",value:function(){var r=this,a=this.w,l=function(){return document.createElement("div")},u=l();if(u.setAttribute("class","apexcharts-toolbar"),u.style.top=a.config.chart.toolbar.offsetY+"px",u.style.right=3-a.config.chart.toolbar.offsetX+"px",a.globals.dom.elWrap.appendChild(u),this.elZoom=l(),this.elZoomIn=l(),this.elZoomOut=l(),this.elPan=l(),this.elSelection=l(),this.elZoomReset=l(),this.elMenuIcon=l(),this.elMenu=l(),this.elCustomIcons=[],this.t=a.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var d=0;d<this.t.customIcons.length;d++)this.elCustomIcons.push(l());var f=[],v=function(E,T,N){var U=E.toLowerCase();r.t[U]&&a.config.chart.zoom.enabled&&f.push({el:T,icon:typeof r.t[U]=="string"?r.t[U]:N,title:r.localeValues[E],class:"apexcharts-".concat(U,"-icon")})};v("zoomIn",this.elZoomIn,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`),v("zoomOut",this.elZoomOut,`<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
</svg>
`);var y=function(E){r.t[E]&&a.config.chart[E].enabled&&f.push({el:E==="zoom"?r.elZoom:r.elSelection,icon:typeof r.t[E]=="string"?r.t[E]:E==="zoom"?`<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
    <path d="M0 0h24v24H0V0z" fill="none"/>
    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>
</svg>`:`<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M0 0h24v24H0z" fill="none"/>
    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>
</svg>`,title:r.localeValues[E==="zoom"?"selectionZoom":"selection"],class:a.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(E,"-icon")})};y("zoom"),y("selection"),this.t.pan&&a.config.chart.zoom.enabled&&f.push({el:this.elPan,icon:typeof this.t.pan=="string"?this.t.pan:`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">
    <defs>
        <path d="M0 0h24v24H0z" id="a"/>
    </defs>
    <clipPath id="b">
        <use overflow="visible" xlink:href="#a"/>
    </clipPath>
    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>
</svg>`,title:this.localeValues.pan,class:a.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),v("reset",this.elZoomReset,`<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
    <path d="M0 0h24v24H0z" fill="none"/>
</svg>`),this.t.download&&f.push({el:this.elMenuIcon,icon:typeof this.t.download=="string"?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var _=0;_<this.elCustomIcons.length;_++)f.push({el:this.elCustomIcons[_],icon:this.t.customIcons[_].icon,title:this.t.customIcons[_].title,index:this.t.customIcons[_].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[_].class});f.forEach(function(E,T){E.index&&R.moveIndexInArray(f,T,E.index)});for(var A=0;A<f.length;A++)Z.setAttrs(f[A].el,{class:f[A].class,title:f[A].title}),f[A].el.innerHTML=f[A].icon,u.appendChild(f[A].el);this._createHamburgerMenu(u),a.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):a.globals.panEnabled?this.elPan.classList.add(this.selectedClass):a.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(r){this.elMenuItems=[],r.appendChild(this.elMenu),Z.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var a=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],l=0;l<a.length;l++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[l].innerHTML=a[l].title,Z.setAttrs(this.elMenuItems[l],{class:"apexcharts-menu-item ".concat(a[l].name),title:a[l].title}),this.elMenu.appendChild(this.elMenuItems[l])}},{key:"addToolbarEventListeners",value:function(){var r=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach(function(l){l.classList.contains("exportSVG")?l.addEventListener("click",r.handleDownload.bind(r,"svg")):l.classList.contains("exportPNG")?l.addEventListener("click",r.handleDownload.bind(r,"png")):l.classList.contains("exportCSV")&&l.addEventListener("click",r.handleDownload.bind(r,"csv"))});for(var a=0;a<this.t.customIcons.length;a++)this.elCustomIcons[a].addEventListener("click",this.t.customIcons[a].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(r){this.ctx.getSyncedCharts().forEach(function(a){a.ctx.toolbar.toggleOtherControls();var l=r==="selection"?a.ctx.toolbar.elSelection:a.ctx.toolbar.elZoom,u=r==="selection"?"selectionEnabled":"zoomEnabled";a.w.globals[u]=!a.w.globals[u],l.classList.contains(a.ctx.toolbar.selectedClass)?l.classList.remove(a.ctx.toolbar.selectedClass):l.classList.add(a.ctx.toolbar.selectedClass)})}},{key:"getToolbarIconsReference",value:function(){var r=this.w;this.elZoom||(this.elZoom=r.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=r.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=r.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(r){this.toggleOtherControls(),r==="pan"?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var a=r==="pan"?this.elPan:this.elZoom,l=r==="pan"?this.elZoom:this.elPan;a&&a.classList.add(this.selectedClass),l&&l.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach(function(r){r.ctx.toolbar.toggleOtherControls(),r.w.globals.panEnabled=!r.w.globals.panEnabled,r.ctx.toolbar.elPan.classList.contains(r.ctx.toolbar.selectedClass)?r.ctx.toolbar.elPan.classList.remove(r.ctx.toolbar.selectedClass):r.ctx.toolbar.elPan.classList.add(r.ctx.toolbar.selectedClass)})}},{key:"toggleOtherControls",value:function(){var r=this,a=this.w;a.globals.panEnabled=!1,a.globals.zoomEnabled=!1,a.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach(function(l){l&&l.classList.remove(r.selectedClass)})}},{key:"handleZoomIn",value:function(){var r=this.w;r.globals.isRangeBar&&(this.minX=r.globals.minY,this.maxX=r.globals.maxY);var a=(this.minX+this.maxX)/2,l=(this.minX+a)/2,u=(this.maxX+a)/2,d=this._getNewMinXMaxX(l,u);r.globals.disableZoomIn||this.zoomUpdateOptions(d.minX,d.maxX)}},{key:"handleZoomOut",value:function(){var r=this.w;if(r.globals.isRangeBar&&(this.minX=r.globals.minY,this.maxX=r.globals.maxY),!(r.config.xaxis.type==="datetime"&&new Date(this.minX).getUTCFullYear()<1e3)){var a=(this.minX+this.maxX)/2,l=this.minX-(a-this.minX),u=this.maxX-(a-this.maxX),d=this._getNewMinXMaxX(l,u);r.globals.disableZoomOut||this.zoomUpdateOptions(d.minX,d.maxX)}}},{key:"_getNewMinXMaxX",value:function(r,a){var l=this.w.config.xaxis.convertedCatToNumeric;return{minX:l?Math.floor(r):r,maxX:l?Math.floor(a):a}}},{key:"zoomUpdateOptions",value:function(r,a){var l=this.w;if(r!==void 0||a!==void 0){if(!(l.config.xaxis.convertedCatToNumeric&&(r<1&&(r=1,a=l.globals.dataPoints),a-r<2))){var u={min:r,max:a},d=this.getBeforeZoomRange(u);d&&(u=d.xaxis);var f={xaxis:u},v=R.clone(l.globals.initialConfig.yaxis);l.config.chart.group||(f.yaxis=v),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(f,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(u,v)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(r,a){typeof this.ev.zoomed=="function"&&this.ev.zoomed(this.ctx,{xaxis:r,yaxis:a})}},{key:"getBeforeZoomRange",value:function(r,a){var l=null;return typeof this.ev.beforeZoom=="function"&&(l=this.ev.beforeZoom(this,{xaxis:r,yaxis:a})),l}},{key:"toggleMenu",value:function(){var r=this;window.setTimeout(function(){r.elMenu.classList.contains("apexcharts-menu-open")?r.elMenu.classList.remove("apexcharts-menu-open"):r.elMenu.classList.add("apexcharts-menu-open")},0)}},{key:"handleDownload",value:function(r){var a=this.w,l=new Nt(this.ctx);switch(r){case"svg":l.exportToSVG(this.ctx);break;case"png":l.exportToPng(this.ctx);break;case"csv":l.exportToCSV({series:a.config.series,columnDelimiter:a.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(r){this.ctx.getSyncedCharts().forEach(function(a){var l=a.w;if(l.globals.lastXAxis.min=l.globals.initialConfig.xaxis.min,l.globals.lastXAxis.max=l.globals.initialConfig.xaxis.max,a.updateHelpers.revertDefaultAxisMinMax(),typeof l.config.chart.events.beforeResetZoom=="function"){var u=l.config.chart.events.beforeResetZoom(a,l);u&&a.updateHelpers.revertDefaultAxisMinMax(u)}typeof l.config.chart.events.zoomed=="function"&&a.ctx.toolbar.zoomCallback({min:l.config.xaxis.min,max:l.config.xaxis.max}),l.globals.zoomed=!1;var d=a.ctx.series.emptyCollapsedSeries(R.clone(l.globals.initialSeries));a.updateHelpers._updateSeries(d,l.config.chart.animations.dynamicAnimation.enabled)})}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),G}(),Qe=function(G){x(a,zt);var r=P(a);function a(l){var u;return o(this,a),(u=r.call(this,l)).ctx=l,u.w=l.w,u.dragged=!1,u.graphics=new Z(u.ctx),u.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],u.clientX=0,u.clientY=0,u.startX=0,u.endX=0,u.dragX=0,u.startY=0,u.endY=0,u.dragY=0,u.moveDirection="none",u}return h(a,[{key:"init",value:function(l){var u=this,d=l.xyRatios,f=this.w,v=this;this.xyRatios=d,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=f.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),f.globals.dom.elGraphical.add(this.zoomRect),f.globals.dom.elGraphical.add(this.selectionRect),f.config.chart.selection.type==="x"?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:f.globals.gridWidth,maxY:f.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):f.config.chart.selection.type==="y"?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:f.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=f.globals.dom.baseEl.querySelector("".concat(f.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach(function(y){u.hoverArea.addEventListener(y,v.svgMouseEvents.bind(v,d),{capture:!1,passive:!0})})}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(l,u){var d=this.w,f=this,v=this.ctx.toolbar,y=d.globals.zoomEnabled?d.config.chart.zoom.type:d.config.chart.selection.type,_=d.config.chart.toolbar.autoSelected;if(u.shiftKey?(this.shiftWasPressed=!0,v.enableZoomPanFromToolbar(_==="pan"?"zoom":"pan")):this.shiftWasPressed&&(v.enableZoomPanFromToolbar(_),this.shiftWasPressed=!1),u.target){var A,E=u.target.classList;if(u.target.parentNode&&u.target.parentNode!==null&&(A=u.target.parentNode.classList),!(E.contains("apexcharts-selection-rect")||E.contains("apexcharts-legend-marker")||E.contains("apexcharts-legend-text")||A&&A.contains("apexcharts-toolbar"))){if(f.clientX=u.type==="touchmove"||u.type==="touchstart"?u.touches[0].clientX:u.type==="touchend"?u.changedTouches[0].clientX:u.clientX,f.clientY=u.type==="touchmove"||u.type==="touchstart"?u.touches[0].clientY:u.type==="touchend"?u.changedTouches[0].clientY:u.clientY,u.type==="mousedown"&&u.which===1){var T=f.gridRect.getBoundingClientRect();f.startX=f.clientX-T.left,f.startY=f.clientY-T.top,f.dragged=!1,f.w.globals.mousedown=!0}if((u.type==="mousemove"&&u.which===1||u.type==="touchmove")&&(f.dragged=!0,d.globals.panEnabled?(d.globals.selection=null,f.w.globals.mousedown&&f.panDragging({context:f,zoomtype:y,xyRatios:l})):(f.w.globals.mousedown&&d.globals.zoomEnabled||f.w.globals.mousedown&&d.globals.selectionEnabled)&&(f.selection=f.selectionDrawing({context:f,zoomtype:y}))),u.type==="mouseup"||u.type==="touchend"||u.type==="mouseleave"){var N=f.gridRect.getBoundingClientRect();f.w.globals.mousedown&&(f.endX=f.clientX-N.left,f.endY=f.clientY-N.top,f.dragX=Math.abs(f.endX-f.startX),f.dragY=Math.abs(f.endY-f.startY),(d.globals.zoomEnabled||d.globals.selectionEnabled)&&f.selectionDrawn({context:f,zoomtype:y}),d.globals.panEnabled&&d.config.xaxis.convertedCatToNumeric&&f.delayedPanScrolled()),d.globals.zoomEnabled&&f.hideSelectionRect(this.selectionRect),f.dragged=!1,f.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var l=this.w;if(this.selectionRect){var u=this.selectionRect.node.getBoundingClientRect();u.width>0&&u.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:l.globals.gridWidth,maxY:l.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var l=this.w,u=this.xyRatios;if(!l.globals.zoomEnabled){if(l.globals.selection!==void 0&&l.globals.selection!==null)this.drawSelectionRect(l.globals.selection);else if(l.config.chart.selection.xaxis.min!==void 0&&l.config.chart.selection.xaxis.max!==void 0){var d=(l.config.chart.selection.xaxis.min-l.globals.minX)/u.xRatio,f=l.globals.gridWidth-(l.globals.maxX-l.config.chart.selection.xaxis.max)/u.xRatio-d;l.globals.isRangeBar&&(d=(l.config.chart.selection.xaxis.min-l.globals.yAxisScale[0].niceMin)/u.invertedYRatio,f=(l.config.chart.selection.xaxis.max-l.config.chart.selection.xaxis.min)/u.invertedYRatio);var v={x:d,y:0,width:f,height:l.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(v),this.makeSelectionRectDraggable(),typeof l.config.chart.events.selection=="function"&&l.config.chart.events.selection(this.ctx,{xaxis:{min:l.config.chart.selection.xaxis.min,max:l.config.chart.selection.xaxis.max},yaxis:{}})}}}},{key:"drawSelectionRect",value:function(l){var u=l.x,d=l.y,f=l.width,v=l.height,y=l.translateX,_=y===void 0?0:y,A=l.translateY,E=A===void 0?0:A,T=this.w,N=this.zoomRect,U=this.selectionRect;if(this.dragged||T.globals.selection!==null){var H={transform:"translate("+_+", "+E+")"};T.globals.zoomEnabled&&this.dragged&&(f<0&&(f=1),N.attr({x:u,y:d,width:f,height:v,fill:T.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":T.config.chart.zoom.zoomedArea.fill.opacity,stroke:T.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":T.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":T.config.chart.zoom.zoomedArea.stroke.opacity}),Z.setAttrs(N.node,H)),T.globals.selectionEnabled&&(U.attr({x:u,y:d,width:f>0?f:0,height:v>0?v:0,fill:T.config.chart.selection.fill.color,"fill-opacity":T.config.chart.selection.fill.opacity,stroke:T.config.chart.selection.stroke.color,"stroke-width":T.config.chart.selection.stroke.width,"stroke-dasharray":T.config.chart.selection.stroke.dashArray,"stroke-opacity":T.config.chart.selection.stroke.opacity}),Z.setAttrs(U.node,H))}}},{key:"hideSelectionRect",value:function(l){l&&l.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(l){var u=l.context,d=l.zoomtype,f=this.w,v=u,y=this.gridRect.getBoundingClientRect(),_=v.startX-1,A=v.startY,E=!1,T=!1,N=v.clientX-y.left-_,U=v.clientY-y.top-A,H={};return Math.abs(N+_)>f.globals.gridWidth?N=f.globals.gridWidth-_:v.clientX-y.left<0&&(N=_),_>v.clientX-y.left&&(E=!0,N=Math.abs(N)),A>v.clientY-y.top&&(T=!0,U=Math.abs(U)),H=d==="x"?{x:E?_-N:_,y:0,width:N,height:f.globals.gridHeight}:d==="y"?{x:0,y:T?A-U:A,width:f.globals.gridWidth,height:U}:{x:E?_-N:_,y:T?A-U:A,width:N,height:U},v.drawSelectionRect(H),v.selectionDragging("resizing"),H}},{key:"selectionDragging",value:function(l,u){var d=this,f=this.w,v=this.xyRatios,y=this.selectionRect,_=0;l==="resizing"&&(_=30);var A=function(T){return parseFloat(y.node.getAttribute(T))},E={x:A("x"),y:A("y"),width:A("width"),height:A("height")};f.globals.selection=E,typeof f.config.chart.events.selection=="function"&&f.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout(function(){var T,N,U,H,X=d.gridRect.getBoundingClientRect(),Y=y.node.getBoundingClientRect();f.globals.isRangeBar?(T=f.globals.yAxisScale[0].niceMin+(Y.left-X.left)*v.invertedYRatio,N=f.globals.yAxisScale[0].niceMin+(Y.right-X.left)*v.invertedYRatio,U=0,H=1):(T=f.globals.xAxisScale.niceMin+(Y.left-X.left)*v.xRatio,N=f.globals.xAxisScale.niceMin+(Y.right-X.left)*v.xRatio,U=f.globals.yAxisScale[0].niceMin+(X.bottom-Y.bottom)*v.yRatio[0],H=f.globals.yAxisScale[0].niceMax-(Y.top-X.top)*v.yRatio[0]);var q={xaxis:{min:T,max:N},yaxis:{min:U,max:H}};f.config.chart.events.selection(d.ctx,q),f.config.chart.brush.enabled&&f.config.chart.events.brushScrolled!==void 0&&f.config.chart.events.brushScrolled(d.ctx,q)},_))}},{key:"selectionDrawn",value:function(l){var u=l.context,d=l.zoomtype,f=this.w,v=u,y=this.xyRatios,_=this.ctx.toolbar;if(v.startX>v.endX){var A=v.startX;v.startX=v.endX,v.endX=A}if(v.startY>v.endY){var E=v.startY;v.startY=v.endY,v.endY=E}var T=void 0,N=void 0;f.globals.isRangeBar?(T=f.globals.yAxisScale[0].niceMin+v.startX*y.invertedYRatio,N=f.globals.yAxisScale[0].niceMin+v.endX*y.invertedYRatio):(T=f.globals.xAxisScale.niceMin+v.startX*y.xRatio,N=f.globals.xAxisScale.niceMin+v.endX*y.xRatio);var U=[],H=[];if(f.config.yaxis.forEach(function($,Q){if(f.globals.seriesYAxisMap[Q].length>0){var ne=f.globals.seriesYAxisMap[Q][0];U.push(f.globals.yAxisScale[Q].niceMax-y.yRatio[ne]*v.startY),H.push(f.globals.yAxisScale[Q].niceMax-y.yRatio[ne]*v.endY)}}),v.dragged&&(v.dragX>10||v.dragY>10)&&T!==N){if(f.globals.zoomEnabled){var X=R.clone(f.globals.initialConfig.yaxis),Y=R.clone(f.globals.initialConfig.xaxis);if(f.globals.zoomed=!0,f.config.xaxis.convertedCatToNumeric&&(T=Math.floor(T),N=Math.floor(N),T<1&&(T=1,N=f.globals.dataPoints),N-T<2&&(N=T+1)),d!=="xy"&&d!=="x"||(Y={min:T,max:N}),d!=="xy"&&d!=="y"||X.forEach(function($,Q){X[Q].min=H[Q],X[Q].max=U[Q]}),_){var q=_.getBeforeZoomRange(Y,X);q&&(Y=q.xaxis?q.xaxis:Y,X=q.yaxis?q.yaxis:X)}var w={xaxis:Y};f.config.chart.group||(w.yaxis=X),v.ctx.updateHelpers._updateOptions(w,!1,v.w.config.chart.animations.dynamicAnimation.enabled),typeof f.config.chart.events.zoomed=="function"&&_.zoomCallback(Y,X)}else if(f.globals.selectionEnabled){var D,V=null;D={min:T,max:N},d!=="xy"&&d!=="y"||(V=R.clone(f.config.yaxis)).forEach(function($,Q){V[Q].min=H[Q],V[Q].max=U[Q]}),f.globals.selection=v.selection,typeof f.config.chart.events.selection=="function"&&f.config.chart.events.selection(v.ctx,{xaxis:D,yaxis:V})}}}},{key:"panDragging",value:function(l){var u=l.context,d=this.w,f=u;if(d.globals.lastClientPosition.x!==void 0){var v=d.globals.lastClientPosition.x-f.clientX,y=d.globals.lastClientPosition.y-f.clientY;Math.abs(v)>Math.abs(y)&&v>0?this.moveDirection="left":Math.abs(v)>Math.abs(y)&&v<0?this.moveDirection="right":Math.abs(y)>Math.abs(v)&&y>0?this.moveDirection="up":Math.abs(y)>Math.abs(v)&&y<0&&(this.moveDirection="down")}d.globals.lastClientPosition={x:f.clientX,y:f.clientY};var _=d.globals.isRangeBar?d.globals.minY:d.globals.minX,A=d.globals.isRangeBar?d.globals.maxY:d.globals.maxX;d.config.xaxis.convertedCatToNumeric||f.panScrolled(_,A)}},{key:"delayedPanScrolled",value:function(){var l=this.w,u=l.globals.minX,d=l.globals.maxX,f=(l.globals.maxX-l.globals.minX)/2;this.moveDirection==="left"?(u=l.globals.minX+f,d=l.globals.maxX+f):this.moveDirection==="right"&&(u=l.globals.minX-f,d=l.globals.maxX-f),u=Math.floor(u),d=Math.floor(d),this.updateScrolledChart({xaxis:{min:u,max:d}},u,d)}},{key:"panScrolled",value:function(l,u){var d=this.w,f=this.xyRatios,v=R.clone(d.globals.initialConfig.yaxis),y=f.xRatio,_=d.globals.minX,A=d.globals.maxX;d.globals.isRangeBar&&(y=f.invertedYRatio,_=d.globals.minY,A=d.globals.maxY),this.moveDirection==="left"?(l=_+d.globals.gridWidth/15*y,u=A+d.globals.gridWidth/15*y):this.moveDirection==="right"&&(l=_-d.globals.gridWidth/15*y,u=A-d.globals.gridWidth/15*y),d.globals.isRangeBar||(l<d.globals.initialMinX||u>d.globals.initialMaxX)&&(l=_,u=A);var E={xaxis:{min:l,max:u}};d.config.chart.group||(E.yaxis=v),this.updateScrolledChart(E,l,u)}},{key:"updateScrolledChart",value:function(l,u,d){var f=this.w;this.ctx.updateHelpers._updateOptions(l,!1,!1),typeof f.config.chart.events.scrolled=="function"&&f.config.chart.events.scrolled(this.ctx,{xaxis:{min:u,max:d}})}}]),a}(),ht=function(){function G(r){o(this,G),this.w=r.w,this.ttCtx=r,this.ctx=r.ctx}return h(G,[{key:"getNearestValues",value:function(r){var a=r.hoverArea,l=r.elGrid,u=r.clientX,d=r.clientY,f=this.w,v=l.getBoundingClientRect(),y=v.width,_=v.height,A=y/(f.globals.dataPoints-1),E=_/f.globals.dataPoints,T=this.hasBars();!f.globals.comboCharts&&!T||f.config.xaxis.convertedCatToNumeric||(A=y/f.globals.dataPoints);var N=u-v.left-f.globals.barPadForNumericAxis,U=d-v.top;N<0||U<0||N>y||U>_?(a.classList.remove("hovering-zoom"),a.classList.remove("hovering-pan")):f.globals.zoomEnabled?(a.classList.remove("hovering-pan"),a.classList.add("hovering-zoom")):f.globals.panEnabled&&(a.classList.remove("hovering-zoom"),a.classList.add("hovering-pan"));var H=Math.round(N/A),X=Math.floor(U/E);T&&!f.config.xaxis.convertedCatToNumeric&&(H=Math.ceil(N/A),H-=1);var Y=null,q=null,w=f.globals.seriesXvalues.map(function(ne){return ne.filter(function(fe){return R.isNumber(fe)})}),D=f.globals.seriesYvalues.map(function(ne){return ne.filter(function(fe){return R.isNumber(fe)})});if(f.globals.isXNumeric){var V=this.ttCtx.getElGrid().getBoundingClientRect(),$=N*(V.width/y),Q=U*(V.height/_);Y=(q=this.closestInMultiArray($,Q,w,D)).index,H=q.j,Y!==null&&(w=f.globals.seriesXvalues[Y],H=(q=this.closestInArray($,w)).index)}return f.globals.capturedSeriesIndex=Y===null?-1:Y,(!H||H<1)&&(H=0),f.globals.isBarHorizontal?f.globals.capturedDataPointIndex=X:f.globals.capturedDataPointIndex=H,{capturedSeries:Y,j:f.globals.isBarHorizontal?X:H,hoverX:N,hoverY:U}}},{key:"closestInMultiArray",value:function(r,a,l,u){var d=this.w,f=0,v=null,y=-1;d.globals.series.length>1?f=this.getFirstActiveXArray(l):v=0;var _=l[f][0],A=Math.abs(r-_);if(l.forEach(function(N){N.forEach(function(U,H){var X=Math.abs(r-U);X<=A&&(A=X,y=H)})}),y!==-1){var E=u[f][y],T=Math.abs(a-E);v=f,u.forEach(function(N,U){var H=Math.abs(a-N[y]);H<=T&&(T=H,v=U)})}return{index:v,j:y}}},{key:"getFirstActiveXArray",value:function(r){for(var a=this.w,l=0,u=r.map(function(f,v){return f.length>0?v:-1}),d=0;d<u.length;d++)if(u[d]!==-1&&a.globals.collapsedSeriesIndices.indexOf(d)===-1&&a.globals.ancillaryCollapsedSeriesIndices.indexOf(d)===-1){l=u[d];break}return l}},{key:"closestInArray",value:function(r,a){for(var l=a[0],u=null,d=Math.abs(r-l),f=0;f<a.length;f++){var v=Math.abs(r-a[f]);v<d&&(d=v,u=f)}return{index:u}}},{key:"isXoverlap",value:function(r){var a=[],l=this.w.globals.seriesX.filter(function(d){return d[0]!==void 0});if(l.length>0)for(var u=0;u<l.length-1;u++)l[u][r]!==void 0&&l[u+1][r]!==void 0&&l[u][r]!==l[u+1][r]&&a.push("unEqual");return a.length===0}},{key:"isInitialSeriesSameLen",value:function(){for(var r=!0,a=this.w.globals.initialSeries,l=0;l<a.length-1;l++)if(a[l].data.length!==a[l+1].data.length){r=!1;break}return r}},{key:"getBarsHeight",value:function(r){return z(r).reduce(function(a,l){return a+l.getBBox().height},0)}},{key:"getElMarkers",value:function(r){return typeof r=="number"?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(r,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var r=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(r=z(r)).sort(function(l,u){var d=Number(l.getAttribute("data:realIndex")),f=Number(u.getAttribute("data:realIndex"));return f<d?1:f>d?-1:0});var a=[];return r.forEach(function(l){a.push(l.querySelector(".apexcharts-marker"))}),a}},{key:"hasMarkers",value:function(r){return this.getElMarkers(r).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(r){var a=this.w,l=a.config.markers.hover.size;return l===void 0&&(l=a.globals.markers.size[r]+a.config.markers.hover.sizeOffset),l}},{key:"toggleAllTooltipSeriesGroups",value:function(r){var a=this.w,l=this.ttCtx;l.allTooltipSeriesGroups.length===0&&(l.allTooltipSeriesGroups=a.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var u=l.allTooltipSeriesGroups,d=0;d<u.length;d++)r==="enable"?(u[d].classList.add("apexcharts-active"),u[d].style.display=a.config.tooltip.items.display):(u[d].classList.remove("apexcharts-active"),u[d].style.display="none")}}]),G}(),Jt=function(){function G(r){o(this,G),this.w=r.w,this.ctx=r.ctx,this.ttCtx=r,this.tooltipUtil=new ht(r)}return h(G,[{key:"drawSeriesTexts",value:function(r){var a=r.shared,l=a===void 0||a,u=r.ttItems,d=r.i,f=d===void 0?0:d,v=r.j,y=v===void 0?null:v,_=r.y1,A=r.y2,E=r.e,T=this.w;T.config.tooltip.custom!==void 0?this.handleCustomTooltip({i:f,j:y,y1:_,y2:A,w:T}):this.toggleActiveInactiveSeries(l);var N=this.getValuesToPrint({i:f,j:y});this.printLabels({i:f,j:y,values:N,ttItems:u,shared:l,e:E});var U=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=U.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=U.getBoundingClientRect().height}},{key:"printLabels",value:function(r){var a,l=this,u=r.i,d=r.j,f=r.values,v=r.ttItems,y=r.shared,_=r.e,A=this.w,E=[],T=function(V){return A.globals.seriesGoals[V]&&A.globals.seriesGoals[V][d]&&Array.isArray(A.globals.seriesGoals[V][d])},N=f.xVal,U=f.zVal,H=f.xAxisTTVal,X="",Y=A.globals.colors[u];d!==null&&A.config.plotOptions.bar.distributed&&(Y=A.globals.colors[d]);for(var q=function(V,$){var Q=l.getFormatters(u);X=l.getSeriesName({fn:Q.yLbTitleFormatter,index:u,seriesIndex:u,j:d}),A.config.chart.type==="treemap"&&(X=Q.yLbTitleFormatter(String(A.config.series[u].data[d].x),{series:A.globals.series,seriesIndex:u,dataPointIndex:d,w:A}));var ne=A.config.tooltip.inverseOrder?$:V;if(A.globals.axisCharts){var fe=function(Oe){var _e,Ne,it,mt;return A.globals.isRangeData?Q.yLbFormatter((_e=A.globals.seriesRangeStart)===null||_e===void 0||(Ne=_e[Oe])===null||Ne===void 0?void 0:Ne[d],{series:A.globals.seriesRangeStart,seriesIndex:Oe,dataPointIndex:d,w:A})+" - "+Q.yLbFormatter((it=A.globals.seriesRangeEnd)===null||it===void 0||(mt=it[Oe])===null||mt===void 0?void 0:mt[d],{series:A.globals.seriesRangeEnd,seriesIndex:Oe,dataPointIndex:d,w:A}):Q.yLbFormatter(A.globals.series[Oe][d],{series:A.globals.series,seriesIndex:Oe,dataPointIndex:d,w:A})};if(y)Q=l.getFormatters(ne),X=l.getSeriesName({fn:Q.yLbTitleFormatter,index:ne,seriesIndex:u,j:d}),Y=A.globals.colors[ne],a=fe(ne),T(ne)&&(E=A.globals.seriesGoals[ne][d].map(function(Oe){return{attrs:Oe,val:Q.yLbFormatter(Oe.value,{seriesIndex:ne,dataPointIndex:d,w:A})}}));else{var de,Me=_==null||(de=_.target)===null||de===void 0?void 0:de.getAttribute("fill");Me&&(Y=Me.indexOf("url")!==-1?document.querySelector(Me.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):Me),a=fe(u),T(u)&&Array.isArray(A.globals.seriesGoals[u][d])&&(E=A.globals.seriesGoals[u][d].map(function(Oe){return{attrs:Oe,val:Q.yLbFormatter(Oe.value,{seriesIndex:u,dataPointIndex:d,w:A})}}))}}d===null&&(a=Q.yLbFormatter(A.globals.series[u],i(i({},A),{},{seriesIndex:u,dataPointIndex:u}))),l.DOMHandling({i:u,t:ne,j:d,ttItems:v,values:{val:a,goalVals:E,xVal:N,xAxisTTVal:H,zVal:U},seriesName:X,shared:y,pColor:Y})},w=0,D=A.globals.series.length-1;w<A.globals.series.length;w++,D--)q(w,D)}},{key:"getFormatters",value:function(r){var a,l=this.w,u=l.globals.yLabelFormatters[r];return l.globals.ttVal!==void 0?Array.isArray(l.globals.ttVal)?(u=l.globals.ttVal[r]&&l.globals.ttVal[r].formatter,a=l.globals.ttVal[r]&&l.globals.ttVal[r].title&&l.globals.ttVal[r].title.formatter):(u=l.globals.ttVal.formatter,typeof l.globals.ttVal.title.formatter=="function"&&(a=l.globals.ttVal.title.formatter)):a=l.config.tooltip.y.title.formatter,typeof u!="function"&&(u=l.globals.yLabelFormatters[0]?l.globals.yLabelFormatters[0]:function(d){return d}),typeof a!="function"&&(a=function(d){return d}),{yLbFormatter:u,yLbTitleFormatter:a}}},{key:"getSeriesName",value:function(r){var a=r.fn,l=r.index,u=r.seriesIndex,d=r.j,f=this.w;return a(String(f.globals.seriesNames[l]),{series:f.globals.series,seriesIndex:u,dataPointIndex:d,w:f})}},{key:"DOMHandling",value:function(r){r.i;var a=r.t,l=r.j,u=r.ttItems,d=r.values,f=r.seriesName,v=r.shared,y=r.pColor,_=this.w,A=this.ttCtx,E=d.val,T=d.goalVals,N=d.xVal,U=d.xAxisTTVal,H=d.zVal,X=null;X=u[a].children,_.config.tooltip.fillSeriesColor&&(u[a].style.backgroundColor=y,X[0].style.display="none"),A.showTooltipTitle&&(A.tooltipTitle===null&&(A.tooltipTitle=_.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),A.tooltipTitle.innerHTML=N),A.isXAxisTooltipEnabled&&(A.xaxisTooltipText.innerHTML=U!==""?U:N);var Y=u[a].querySelector(".apexcharts-tooltip-text-y-label");Y&&(Y.innerHTML=f||"");var q=u[a].querySelector(".apexcharts-tooltip-text-y-value");q&&(q.innerHTML=E!==void 0?E:""),X[0]&&X[0].classList.contains("apexcharts-tooltip-marker")&&(_.config.tooltip.marker.fillColors&&Array.isArray(_.config.tooltip.marker.fillColors)&&(y=_.config.tooltip.marker.fillColors[a]),X[0].style.backgroundColor=y),_.config.tooltip.marker.show||(X[0].style.display="none");var w=u[a].querySelector(".apexcharts-tooltip-text-goals-label"),D=u[a].querySelector(".apexcharts-tooltip-text-goals-value");if(T.length&&_.globals.seriesGoals[a]){var V=function(){var ne="<div >",fe="<div>";T.forEach(function(de,Me){ne+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(de.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(de.attrs.name,"</div>"),fe+="<div>".concat(de.val,"</div>")}),w.innerHTML=ne+"</div>",D.innerHTML=fe+"</div>"};v?_.globals.seriesGoals[a][l]&&Array.isArray(_.globals.seriesGoals[a][l])?V():(w.innerHTML="",D.innerHTML=""):V()}else w.innerHTML="",D.innerHTML="";if(H!==null&&(u[a].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=_.config.tooltip.z.title,u[a].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=H!==void 0?H:""),v&&X[0]){if(_.config.tooltip.hideEmptySeries){var $=u[a].querySelector(".apexcharts-tooltip-marker"),Q=u[a].querySelector(".apexcharts-tooltip-text");parseFloat(E)==0?($.style.display="none",Q.style.display="none"):($.style.display="block",Q.style.display="block")}E==null||_.globals.ancillaryCollapsedSeriesIndices.indexOf(a)>-1||_.globals.collapsedSeriesIndices.indexOf(a)>-1?X[0].parentNode.style.display="none":X[0].parentNode.style.display=_.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(r){var a=this.w;if(r)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var l=a.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");l&&(l.classList.add("apexcharts-active"),l.style.display=a.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(r){var a=r.i,l=r.j,u=this.w,d=this.ctx.series.filteredSeriesX(),f="",v="",y=null,_=null,A={series:u.globals.series,seriesIndex:a,dataPointIndex:l,w:u},E=u.globals.ttZFormatter;l===null?_=u.globals.series[a]:u.globals.isXNumeric&&u.config.chart.type!=="treemap"?(f=d[a][l],d[a].length===0&&(f=d[this.tooltipUtil.getFirstActiveXArray(d)][l])):f=u.globals.labels[l]!==void 0?u.globals.labels[l]:"";var T=f;return u.globals.isXNumeric&&u.config.xaxis.type==="datetime"?f=new K(this.ctx).xLabelFormat(u.globals.ttKeyFormatter,T,T,{i:void 0,dateFormatter:new ee(this.ctx).formatDate,w:this.w}):f=u.globals.isBarHorizontal?u.globals.yLabelFormatters[0](T,A):u.globals.xLabelFormatter(T,A),u.config.tooltip.x.formatter!==void 0&&(f=u.globals.ttKeyFormatter(T,A)),u.globals.seriesZ.length>0&&u.globals.seriesZ[a].length>0&&(y=E(u.globals.seriesZ[a][l],u)),v=typeof u.config.xaxis.tooltip.formatter=="function"?u.globals.xaxisTooltipFormatter(T,A):f,{val:Array.isArray(_)?_.join(" "):_,xVal:Array.isArray(f)?f.join(" "):f,xAxisTTVal:Array.isArray(v)?v.join(" "):v,zVal:y}}},{key:"handleCustomTooltip",value:function(r){var a=r.i,l=r.j,u=r.y1,d=r.y2,f=r.w,v=this.ttCtx.getElTooltip(),y=f.config.tooltip.custom;Array.isArray(y)&&y[a]&&(y=y[a]),v.innerHTML=y({ctx:this.ctx,series:f.globals.series,seriesIndex:a,dataPointIndex:l,y1:u,y2:d,w:f})}}]),G}(),Dt=function(){function G(r){o(this,G),this.ttCtx=r,this.ctx=r.ctx,this.w=r.w}return h(G,[{key:"moveXCrosshairs",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,l=this.ttCtx,u=this.w,d=l.getElXCrosshairs(),f=r-l.xcrosshairsWidth/2,v=u.globals.labels.slice().length;if(a!==null&&(f=u.globals.gridWidth/v*a),d===null||u.globals.isBarHorizontal||(d.setAttribute("x",f),d.setAttribute("x1",f),d.setAttribute("x2",f),d.setAttribute("y2",u.globals.gridHeight),d.classList.add("apexcharts-active")),f<0&&(f=0),f>u.globals.gridWidth&&(f=u.globals.gridWidth),l.isXAxisTooltipEnabled){var y=f;u.config.xaxis.crosshairs.width!=="tickWidth"&&u.config.xaxis.crosshairs.width!=="barWidth"||(y=f+l.xcrosshairsWidth/2),this.moveXAxisTooltip(y)}}},{key:"moveYCrosshairs",value:function(r){var a=this.ttCtx;a.ycrosshairs!==null&&Z.setAttrs(a.ycrosshairs,{y1:r,y2:r}),a.ycrosshairsHidden!==null&&Z.setAttrs(a.ycrosshairsHidden,{y1:r,y2:r})}},{key:"moveXAxisTooltip",value:function(r){var a=this.w,l=this.ttCtx;if(l.xaxisTooltip!==null&&l.xcrosshairsWidth!==0){l.xaxisTooltip.classList.add("apexcharts-active");var u=l.xaxisOffY+a.config.xaxis.tooltip.offsetY+a.globals.translateY+1+a.config.xaxis.offsetY;if(r-=l.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(r)){r+=a.globals.translateX;var d;d=new Z(this.ctx).getTextRects(l.xaxisTooltipText.innerHTML),l.xaxisTooltipText.style.minWidth=d.width+"px",l.xaxisTooltip.style.left=r+"px",l.xaxisTooltip.style.top=u+"px"}}}},{key:"moveYAxisTooltip",value:function(r){var a=this.w,l=this.ttCtx;l.yaxisTTEls===null&&(l.yaxisTTEls=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var u=parseInt(l.ycrosshairsHidden.getAttribute("y1"),10),d=a.globals.translateY+u,f=l.yaxisTTEls[r].getBoundingClientRect().height,v=a.globals.translateYAxisX[r]-2;a.config.yaxis[r].opposite&&(v-=26),d-=f/2,a.globals.ignoreYAxisIndexes.indexOf(r)===-1?(l.yaxisTTEls[r].classList.add("apexcharts-active"),l.yaxisTTEls[r].style.top=d+"px",l.yaxisTTEls[r].style.left=v+a.config.yaxis[r].tooltip.offsetX+"px"):l.yaxisTTEls[r].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=this.w,d=this.ttCtx,f=d.getElTooltip(),v=d.tooltipRect,y=l!==null?parseFloat(l):1,_=parseFloat(r)+y+5,A=parseFloat(a)+y/2;if(_>u.globals.gridWidth/2&&(_=_-v.ttWidth-y-10),_>u.globals.gridWidth-v.ttWidth-10&&(_=u.globals.gridWidth-v.ttWidth),_<-20&&(_=-20),u.config.tooltip.followCursor){var E=d.getElGrid().getBoundingClientRect();(_=d.e.clientX-E.left)>u.globals.gridWidth/2&&(_-=d.tooltipRect.ttWidth),(A=d.e.clientY+u.globals.translateY-E.top)>u.globals.gridHeight/2&&(A-=d.tooltipRect.ttHeight)}else u.globals.isBarHorizontal||v.ttHeight/2+A>u.globals.gridHeight&&(A=u.globals.gridHeight-v.ttHeight+u.globals.translateY);isNaN(_)||(_+=u.globals.translateX,f.style.left=_+"px",f.style.top=A+"px")}},{key:"moveMarkers",value:function(r,a){var l=this.w,u=this.ttCtx;if(l.globals.markers.size[r]>0)for(var d=l.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(r,"'] .apexcharts-marker")),f=0;f<d.length;f++)parseInt(d[f].getAttribute("rel"),10)===a&&(u.marker.resetPointsSize(),u.marker.enlargeCurrentPoint(a,d[f]));else u.marker.resetPointsSize(),this.moveDynamicPointOnHover(a,r)}},{key:"moveDynamicPointOnHover",value:function(r,a){var l,u,d,f,v=this.w,y=this.ttCtx,_=v.globals.pointsArray,A=y.tooltipUtil.getHoverMarkerSize(a),E=v.config.series[a].type;if(!E||E!=="column"&&E!=="candlestick"&&E!=="boxPlot"){d=(l=_[a][r])===null||l===void 0?void 0:l[0],f=((u=_[a][r])===null||u===void 0?void 0:u[1])||0;var T=v.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(a,"'] .apexcharts-series-markers circle"));T&&f<v.globals.gridHeight&&f>0&&(T.setAttribute("r",A),T.setAttribute("cx",d),T.setAttribute("cy",f)),this.moveXCrosshairs(d),y.fixedTooltip||this.moveTooltip(d,f,A)}}},{key:"moveDynamicPointsOnHover",value:function(r){var a,l=this.ttCtx,u=l.w,d=0,f=0,v=u.globals.pointsArray;a=new Ye(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var y=l.tooltipUtil.getHoverMarkerSize(a);v[a]&&(d=v[a][r][0],f=v[a][r][1]);var _=l.tooltipUtil.getAllMarkers();if(_!==null)for(var A=0;A<u.globals.series.length;A++){var E=v[A];if(u.globals.comboCharts&&E===void 0&&_.splice(A,0,null),E&&E.length){var T=v[A][r][1],N=void 0;if(_[A].setAttribute("cx",d),u.config.chart.type==="rangeArea"&&!u.globals.comboCharts){var U=r+u.globals.series[A].length;N=v[A][U][1],T-=Math.abs(T-N)/2}T!==null&&!isNaN(T)&&T<u.globals.gridHeight+y&&T+y>0?(_[A]&&_[A].setAttribute("r",y),_[A]&&_[A].setAttribute("cy",T)):_[A]&&_[A].setAttribute("r",0)}}this.moveXCrosshairs(d),l.fixedTooltip||this.moveTooltip(d,f||u.globals.gridHeight,y)}},{key:"moveStickyTooltipOverBars",value:function(r,a){var l=this.w,u=this.ttCtx,d=l.globals.columnSeries?l.globals.columnSeries.length:l.globals.series.length,f=d>=2&&d%2==0?Math.floor(d/2):Math.floor(d/2)+1;l.globals.isBarHorizontal&&(f=new Ye(this.ctx).getActiveConfigSeriesIndex("desc")+1);var v=l.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(f,"'] path[j='").concat(r,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(f,"'] path[j='").concat(r,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(f,"'] path[j='").concat(r,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(f,"'] path[j='").concat(r,"']"));v||typeof a!="number"||(v=l.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(a,"'] path[j='").concat(r,`'],
        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='`).concat(a,"'] path[j='").concat(r,`'],
        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='`).concat(a,"'] path[j='").concat(r,`'],
        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='`).concat(a,"'] path[j='").concat(r,"']")));var y=v?parseFloat(v.getAttribute("cx")):0,_=v?parseFloat(v.getAttribute("cy")):0,A=v?parseFloat(v.getAttribute("barWidth")):0,E=u.getElGrid().getBoundingClientRect(),T=v&&(v.classList.contains("apexcharts-candlestick-area")||v.classList.contains("apexcharts-boxPlot-area"));l.globals.isXNumeric?(v&&!T&&(y-=d%2!=0?A/2:0),v&&T&&l.globals.comboCharts&&(y-=A/2)):l.globals.isBarHorizontal||(y=u.xAxisTicksPositions[r-1]+u.dataPointsDividedWidth/2,isNaN(y)&&(y=u.xAxisTicksPositions[r]-u.dataPointsDividedWidth/2)),l.globals.isBarHorizontal?_-=u.tooltipRect.ttHeight:l.config.tooltip.followCursor?_=u.e.clientY-E.top-u.tooltipRect.ttHeight/2:_+u.tooltipRect.ttHeight+15>l.globals.gridHeight&&(_=l.globals.gridHeight),l.globals.isBarHorizontal||this.moveXCrosshairs(y),u.fixedTooltip||this.moveTooltip(y,_||l.globals.gridHeight)}}]),G}(),xt=function(){function G(r){o(this,G),this.w=r.w,this.ttCtx=r,this.ctx=r.ctx,this.tooltipPosition=new Dt(r)}return h(G,[{key:"drawDynamicPoints",value:function(){var r=this.w,a=new Z(this.ctx),l=new Te(this.ctx),u=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series");u=z(u),r.config.chart.stacked&&u.sort(function(E,T){return parseFloat(E.getAttribute("data:realIndex"))-parseFloat(T.getAttribute("data:realIndex"))});for(var d=0;d<u.length;d++){var f=u[d].querySelector(".apexcharts-series-markers-wrap");if(f!==null){var v=void 0,y="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));r.config.chart.type!=="line"&&r.config.chart.type!=="area"||r.globals.comboCharts||r.config.tooltip.intersect||(y+=" no-pointer-events");var _=l.getMarkerConfig({cssClass:y,seriesIndex:Number(f.getAttribute("data:realIndex"))});(v=a.drawMarker(0,0,_)).node.setAttribute("default-marker-size",0);var A=document.createElementNS(r.globals.SVGNS,"g");A.classList.add("apexcharts-series-markers"),A.appendChild(v.node),f.appendChild(A)}}}},{key:"enlargeCurrentPoint",value:function(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,d=this.w;d.config.chart.type!=="bubble"&&this.newPointSize(r,a);var f=a.getAttribute("cx"),v=a.getAttribute("cy");if(l!==null&&u!==null&&(f=l,v=u),this.tooltipPosition.moveXCrosshairs(f),!this.fixedTooltip){if(d.config.chart.type==="radar"){var y=this.ttCtx.getElGrid().getBoundingClientRect();f=this.ttCtx.e.clientX-y.left}this.tooltipPosition.moveTooltip(f,v,d.config.markers.hover.size)}}},{key:"enlargePoints",value:function(r){for(var a=this.w,l=this,u=this.ttCtx,d=r,f=a.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),v=a.config.markers.hover.size,y=0;y<f.length;y++){var _=f[y].getAttribute("rel"),A=f[y].getAttribute("index");if(v===void 0&&(v=a.globals.markers.size[A]+a.config.markers.hover.sizeOffset),d===parseInt(_,10)){l.newPointSize(d,f[y]);var E=f[y].getAttribute("cx"),T=f[y].getAttribute("cy");l.tooltipPosition.moveXCrosshairs(E),u.fixedTooltip||l.tooltipPosition.moveTooltip(E,T,v)}else l.oldPointSize(f[y])}}},{key:"newPointSize",value:function(r,a){var l=this.w,u=l.config.markers.hover.size,d=r===0?a.parentNode.firstChild:a.parentNode.lastChild;if(d.getAttribute("default-marker-size")!=="0"){var f=parseInt(d.getAttribute("index"),10);u===void 0&&(u=l.globals.markers.size[f]+l.config.markers.hover.sizeOffset),u<0&&(u=0),d.setAttribute("r",u)}}},{key:"oldPointSize",value:function(r){var a=parseFloat(r.getAttribute("default-marker-size"));r.setAttribute("r",a)}},{key:"resetPointsSize",value:function(){for(var r=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=0;a<r.length;a++){var l=parseFloat(r[a].getAttribute("default-marker-size"));R.isNumber(l)&&l>=0?r[a].setAttribute("r",l):r[a].setAttribute("r",0)}}}]),G}(),Ut=function(){function G(r){o(this,G),this.w=r.w;var a=this.w;this.ttCtx=r,this.isVerticalGroupedRangeBar=!a.globals.isBarHorizontal&&a.config.chart.type==="rangeBar"&&a.config.plotOptions.bar.rangeBarGroupRows}return h(G,[{key:"getAttr",value:function(r,a){return parseFloat(r.target.getAttribute(a))}},{key:"handleHeatTreeTooltip",value:function(r){var a=r.e,l=r.opt,u=r.x,d=r.y,f=r.type,v=this.ttCtx,y=this.w;if(a.target.classList.contains("apexcharts-".concat(f,"-rect"))){var _=this.getAttr(a,"i"),A=this.getAttr(a,"j"),E=this.getAttr(a,"cx"),T=this.getAttr(a,"cy"),N=this.getAttr(a,"width"),U=this.getAttr(a,"height");if(v.tooltipLabels.drawSeriesTexts({ttItems:l.ttItems,i:_,j:A,shared:!1,e:a}),y.globals.capturedSeriesIndex=_,y.globals.capturedDataPointIndex=A,u=E+v.tooltipRect.ttWidth/2+N,d=T+v.tooltipRect.ttHeight/2-U/2,v.tooltipPosition.moveXCrosshairs(E+N/2),u>y.globals.gridWidth/2&&(u=E-v.tooltipRect.ttWidth/2+N),v.w.config.tooltip.followCursor){var H=y.globals.dom.elWrap.getBoundingClientRect();u=y.globals.clientX-H.left-(u>y.globals.gridWidth/2?v.tooltipRect.ttWidth:0),d=y.globals.clientY-H.top-(d>y.globals.gridHeight/2?v.tooltipRect.ttHeight:0)}}return{x:u,y:d}}},{key:"handleMarkerTooltip",value:function(r){var a,l,u=r.e,d=r.opt,f=r.x,v=r.y,y=this.w,_=this.ttCtx;if(u.target.classList.contains("apexcharts-marker")){var A=parseInt(d.paths.getAttribute("cx"),10),E=parseInt(d.paths.getAttribute("cy"),10),T=parseFloat(d.paths.getAttribute("val"));if(l=parseInt(d.paths.getAttribute("rel"),10),a=parseInt(d.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,_.intersect){var N=R.findAncestor(d.paths,"apexcharts-series");N&&(a=parseInt(N.getAttribute("data:realIndex"),10))}if(_.tooltipLabels.drawSeriesTexts({ttItems:d.ttItems,i:a,j:l,shared:!_.showOnIntersect&&y.config.tooltip.shared,e:u}),u.type==="mouseup"&&_.markerClick(u,a,l),y.globals.capturedSeriesIndex=a,y.globals.capturedDataPointIndex=l,f=A,v=E+y.globals.translateY-1.4*_.tooltipRect.ttHeight,_.w.config.tooltip.followCursor){var U=_.getElGrid().getBoundingClientRect();v=_.e.clientY+y.globals.translateY-U.top}T<0&&(v=E),_.marker.enlargeCurrentPoint(l,d.paths,f,v)}return{x:f,y:v}}},{key:"handleBarTooltip",value:function(r){var a,l,u=r.e,d=r.opt,f=this.w,v=this.ttCtx,y=v.getElTooltip(),_=0,A=0,E=0,T=this.getBarTooltipXY({e:u,opt:d});a=T.i;var N=T.barHeight,U=T.j;f.globals.capturedSeriesIndex=a,f.globals.capturedDataPointIndex=U,f.globals.isBarHorizontal&&v.tooltipUtil.hasBars()||!f.config.tooltip.shared?(A=T.x,E=T.y,l=Array.isArray(f.config.stroke.width)?f.config.stroke.width[a]:f.config.stroke.width,_=A):f.globals.comboCharts||f.config.tooltip.shared||(_/=2),isNaN(E)&&(E=f.globals.svgHeight-v.tooltipRect.ttHeight);var H=parseInt(d.paths.parentNode.getAttribute("data:realIndex"),10),X=f.globals.isMultipleYAxis?f.config.yaxis[H]&&f.config.yaxis[H].reversed:f.config.yaxis[0].reversed;if(A+v.tooltipRect.ttWidth>f.globals.gridWidth&&!X?A-=v.tooltipRect.ttWidth:A<0&&(A=0),v.w.config.tooltip.followCursor){var Y=v.getElGrid().getBoundingClientRect();E=v.e.clientY-Y.top}v.tooltip===null&&(v.tooltip=f.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),f.config.tooltip.shared||(f.globals.comboBarCount>0?v.tooltipPosition.moveXCrosshairs(_+l/2):v.tooltipPosition.moveXCrosshairs(_)),!v.fixedTooltip&&(!f.config.tooltip.shared||f.globals.isBarHorizontal&&v.tooltipUtil.hasBars())&&(X&&(A-=v.tooltipRect.ttWidth)<0&&(A=0),!X||f.globals.isBarHorizontal&&v.tooltipUtil.hasBars()||(E=E+N-2*(f.globals.series[a][U]<0?N:0)),E=E+f.globals.translateY-v.tooltipRect.ttHeight/2,y.style.left=A+f.globals.translateX+"px",y.style.top=E+"px")}},{key:"getBarTooltipXY",value:function(r){var a=this,l=r.e,u=r.opt,d=this.w,f=null,v=this.ttCtx,y=0,_=0,A=0,E=0,T=0,N=l.target.classList;if(N.contains("apexcharts-bar-area")||N.contains("apexcharts-candlestick-area")||N.contains("apexcharts-boxPlot-area")||N.contains("apexcharts-rangebar-area")){var U=l.target,H=U.getBoundingClientRect(),X=u.elGrid.getBoundingClientRect(),Y=H.height;T=H.height;var q=H.width,w=parseInt(U.getAttribute("cx"),10),D=parseInt(U.getAttribute("cy"),10);E=parseFloat(U.getAttribute("barWidth"));var V=l.type==="touchmove"?l.touches[0].clientX:l.clientX;f=parseInt(U.getAttribute("j"),10),y=parseInt(U.parentNode.getAttribute("rel"),10)-1;var $=U.getAttribute("data-range-y1"),Q=U.getAttribute("data-range-y2");d.globals.comboCharts&&(y=parseInt(U.parentNode.getAttribute("data:realIndex"),10));var ne=function(de){return d.globals.isXNumeric?w-q/2:a.isVerticalGroupedRangeBar?w+q/2:w-v.dataPointsDividedWidth+q/2},fe=function(){return D-v.dataPointsDividedHeight+Y/2-v.tooltipRect.ttHeight/2};v.tooltipLabels.drawSeriesTexts({ttItems:u.ttItems,i:y,j:f,y1:$?parseInt($,10):null,y2:Q?parseInt(Q,10):null,shared:!v.showOnIntersect&&d.config.tooltip.shared,e:l}),d.config.tooltip.followCursor?d.globals.isBarHorizontal?(_=V-X.left+15,A=fe()):(_=ne(),A=l.clientY-X.top-v.tooltipRect.ttHeight/2-15):d.globals.isBarHorizontal?((_=w)<v.xyRatios.baseLineInvertedY&&(_=w-v.tooltipRect.ttWidth),A=fe()):(_=ne(),A=D)}return{x:_,y:A,barHeight:T,barWidth:E,i:y,j:f}}}]),G}(),Gt=function(){function G(r){o(this,G),this.w=r.w,this.ttCtx=r}return h(G,[{key:"drawXaxisTooltip",value:function(){var r=this.w,a=this.ttCtx,l=r.config.xaxis.position==="bottom";a.xaxisOffY=l?r.globals.gridHeight+1:-r.globals.xAxisHeight-r.config.xaxis.axisTicks.height+3;var u=l?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",d=r.globals.dom.elWrap;a.isXAxisTooltipEnabled&&r.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")===null&&(a.xaxisTooltip=document.createElement("div"),a.xaxisTooltip.setAttribute("class",u+" apexcharts-theme-"+r.config.tooltip.theme),d.appendChild(a.xaxisTooltip),a.xaxisTooltipText=document.createElement("div"),a.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),a.xaxisTooltipText.style.fontFamily=r.config.xaxis.tooltip.style.fontFamily||r.config.chart.fontFamily,a.xaxisTooltipText.style.fontSize=r.config.xaxis.tooltip.style.fontSize,a.xaxisTooltip.appendChild(a.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var r=this.w,a=this.ttCtx,l=0;l<r.config.yaxis.length;l++){var u=r.config.yaxis[l].opposite||r.config.yaxis[l].crosshairs.opposite;a.yaxisOffX=u?r.globals.gridWidth+1:1;var d="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(l,u?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),f=r.globals.dom.elWrap;r.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(l))===null&&(a.yaxisTooltip=document.createElement("div"),a.yaxisTooltip.setAttribute("class",d+" apexcharts-theme-"+r.config.tooltip.theme),f.appendChild(a.yaxisTooltip),l===0&&(a.yaxisTooltipText=[]),a.yaxisTooltipText[l]=document.createElement("div"),a.yaxisTooltipText[l].classList.add("apexcharts-yaxistooltip-text"),a.yaxisTooltip.appendChild(a.yaxisTooltipText[l]))}}},{key:"setXCrosshairWidth",value:function(){var r=this.w,a=this.ttCtx,l=a.getElXCrosshairs();if(a.xcrosshairsWidth=parseInt(r.config.xaxis.crosshairs.width,10),r.globals.comboCharts){var u=r.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(u!==null&&r.config.xaxis.crosshairs.width==="barWidth"){var d=parseFloat(u.getAttribute("barWidth"));a.xcrosshairsWidth=d}else if(r.config.xaxis.crosshairs.width==="tickWidth"){var f=r.globals.labels.length;a.xcrosshairsWidth=r.globals.gridWidth/f}}else if(r.config.xaxis.crosshairs.width==="tickWidth"){var v=r.globals.labels.length;a.xcrosshairsWidth=r.globals.gridWidth/v}else if(r.config.xaxis.crosshairs.width==="barWidth"){var y=r.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(y!==null){var _=parseFloat(y.getAttribute("barWidth"));a.xcrosshairsWidth=_}else a.xcrosshairsWidth=1}r.globals.isBarHorizontal&&(a.xcrosshairsWidth=0),l!==null&&a.xcrosshairsWidth>0&&l.setAttribute("width",a.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var r=this.w,a=this.ttCtx;a.ycrosshairs=r.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),a.ycrosshairsHidden=r.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(r,a,l){var u=this.ttCtx,d=this.w,f=d.globals,v=f.seriesYAxisMap[r];if(u.yaxisTooltips[r]&&v.length>0){var y=f.yLabelFormatters[r],_=u.getElGrid().getBoundingClientRect(),A=v[0],E=0;l.yRatio.length>1&&(E=A);var T=(a-_.top)*l.yRatio[E],N=f.maxYArr[A]-f.minYArr[A],U=f.minYArr[A]+(N-T);d.config.yaxis[r].reversed&&(U=f.maxYArr[A]-(N-T)),u.tooltipPosition.moveYCrosshairs(a-_.top),u.yaxisTooltipText[r].innerHTML=y(U),u.tooltipPosition.moveYAxisTooltip(r)}}}]),G}(),pn=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w;var a=this.w;this.tConfig=a.config.tooltip,this.tooltipUtil=new ht(this),this.tooltipLabels=new Jt(this),this.tooltipPosition=new Dt(this),this.marker=new xt(this),this.intersect=new Ut(this),this.axesTooltip=new Gt(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!a.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return h(G,[{key:"getElTooltip",value:function(r){return r||(r=this),r.w.globals.dom.baseEl?r.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(r){var a=this.w;this.xyRatios=r,this.isXAxisTooltipEnabled=a.config.xaxis.tooltip.enabled&&a.globals.axisCharts,this.yaxisTooltips=a.config.yaxis.map(function(f,v){return!!(f.show&&f.tooltip.enabled&&a.globals.axisCharts)}),this.allTooltipSeriesGroups=[],a.globals.axisCharts||(this.showTooltipTitle=!1);var l=document.createElement("div");if(l.classList.add("apexcharts-tooltip"),a.config.tooltip.cssClass&&l.classList.add(a.config.tooltip.cssClass),l.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),a.globals.dom.elWrap.appendChild(l),a.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var u=new Ct(this.ctx);this.xAxisTicksPositions=u.getXAxisTicksPositions()}if(!a.globals.comboCharts&&!this.tConfig.intersect&&a.config.chart.type!=="rangeBar"||this.tConfig.shared||(this.showOnIntersect=!0),a.config.markers.size!==0&&a.globals.markers.largestSize!==0||this.marker.drawDynamicPoints(this),a.globals.collapsedSeries.length!==a.globals.series.length){this.dataPointsDividedHeight=a.globals.gridHeight/a.globals.dataPoints,this.dataPointsDividedWidth=a.globals.gridWidth/a.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||a.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,l.appendChild(this.tooltipTitle));var d=a.globals.series.length;(a.globals.xyCharts||a.globals.comboCharts)&&this.tConfig.shared&&(d=this.showOnIntersect?1:a.globals.series.length),this.legendLabels=a.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(d),this.addSVGEvents()}}},{key:"createTTElements",value:function(r){for(var a=this,l=this.w,u=[],d=this.getElTooltip(),f=function(y){var _=document.createElement("div");_.classList.add("apexcharts-tooltip-series-group"),_.style.order=l.config.tooltip.inverseOrder?r-y:y+1,a.tConfig.shared&&a.tConfig.enabledOnSeries&&Array.isArray(a.tConfig.enabledOnSeries)&&a.tConfig.enabledOnSeries.indexOf(y)<0&&_.classList.add("apexcharts-tooltip-series-group-hidden");var A=document.createElement("span");A.classList.add("apexcharts-tooltip-marker"),A.style.backgroundColor=l.globals.colors[y],_.appendChild(A);var E=document.createElement("div");E.classList.add("apexcharts-tooltip-text"),E.style.fontFamily=a.tConfig.style.fontFamily||l.config.chart.fontFamily,E.style.fontSize=a.tConfig.style.fontSize,["y","goals","z"].forEach(function(T){var N=document.createElement("div");N.classList.add("apexcharts-tooltip-".concat(T,"-group"));var U=document.createElement("span");U.classList.add("apexcharts-tooltip-text-".concat(T,"-label")),N.appendChild(U);var H=document.createElement("span");H.classList.add("apexcharts-tooltip-text-".concat(T,"-value")),N.appendChild(H),E.appendChild(N)}),_.appendChild(E),d.appendChild(_),u.push(_)},v=0;v<r;v++)f(v);return u}},{key:"addSVGEvents",value:function(){var r=this.w,a=r.config.chart.type,l=this.getElTooltip(),u=!(a!=="bar"&&a!=="candlestick"&&a!=="boxPlot"&&a!=="rangeBar"),d=a==="area"||a==="line"||a==="scatter"||a==="bubble"||a==="radar",f=r.globals.dom.Paper.node,v=this.getElGrid();v&&(this.seriesBound=v.getBoundingClientRect());var y,_=[],A=[],E={hoverArea:f,elGrid:v,tooltipEl:l,tooltipY:_,tooltipX:A,ttItems:this.ttItems};if(r.globals.axisCharts&&(d?y=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):u?y=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):a!=="heatmap"&&a!=="treemap"||(y=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),y&&y.length))for(var T=0;T<y.length;T++)_.push(y[T].getAttribute("cy")),A.push(y[T].getAttribute("cx"));if(r.globals.xyCharts&&!this.showOnIntersect||r.globals.comboCharts&&!this.showOnIntersect||u&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([f],E);else if(u&&!r.globals.comboCharts||d&&this.showOnIntersect)this.addDatapointEventsListeners(E);else if(!r.globals.axisCharts||a==="heatmap"||a==="treemap"){var N=r.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(N,E)}if(this.showOnIntersect){var U=r.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");U.length>0&&this.addPathsEventListeners(U,E),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(E)}}},{key:"drawFixedTooltipRect",value:function(){var r=this.w,a=this.getElTooltip(),l=a.getBoundingClientRect(),u=l.width+10,d=l.height+10,f=this.tConfig.fixed.offsetX,v=this.tConfig.fixed.offsetY,y=this.tConfig.fixed.position.toLowerCase();return y.indexOf("right")>-1&&(f=f+r.globals.svgWidth-u+10),y.indexOf("bottom")>-1&&(v=v+r.globals.svgHeight-d-10),a.style.left=f+"px",a.style.top=v+"px",{x:f,y:v,ttWidth:u,ttHeight:d}}},{key:"addDatapointEventsListeners",value:function(r){var a=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(a,r)}},{key:"addPathsEventListeners",value:function(r,a){for(var l=this,u=function(f){var v={paths:r[f],tooltipEl:a.tooltipEl,tooltipY:a.tooltipY,tooltipX:a.tooltipX,elGrid:a.elGrid,hoverArea:a.hoverArea,ttItems:a.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map(function(y){return r[f].addEventListener(y,l.onSeriesHover.bind(l,v),{capture:!1,passive:!0})})},d=0;d<r.length;d++)u(d)}},{key:"onSeriesHover",value:function(r,a){var l=this,u=Date.now()-this.lastHoverTime;u>=100?this.seriesHover(r,a):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout(function(){l.seriesHover(r,a)},100-u))}},{key:"seriesHover",value:function(r,a){var l=this;this.lastHoverTime=Date.now();var u=[],d=this.w;d.config.chart.group&&(u=this.ctx.getGroupedCharts()),d.globals.axisCharts&&(d.globals.minX===-1/0&&d.globals.maxX===1/0||d.globals.dataPoints===0)||(u.length?u.forEach(function(f){var v=l.getElTooltip(f),y={paths:r.paths,tooltipEl:v,tooltipY:r.tooltipY,tooltipX:r.tooltipX,elGrid:r.elGrid,hoverArea:r.hoverArea,ttItems:f.w.globals.tooltip.ttItems};f.w.globals.minX===l.w.globals.minX&&f.w.globals.maxX===l.w.globals.maxX&&f.w.globals.tooltip.seriesHoverByContext({chartCtx:f,ttCtx:f.w.globals.tooltip,opt:y,e:a})}):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:r,e:a}))}},{key:"seriesHoverByContext",value:function(r){var a=r.chartCtx,l=r.ttCtx,u=r.opt,d=r.e,f=a.w,v=this.getElTooltip();v&&(l.tooltipRect={x:0,y:0,ttWidth:v.getBoundingClientRect().width,ttHeight:v.getBoundingClientRect().height},l.e=d,l.tooltipUtil.hasBars()&&!f.globals.comboCharts&&!l.isBarShared&&this.tConfig.onDatasetHover.highlightDataSeries&&new Ye(a).toggleSeriesOnHover(d,d.target.parentNode),l.fixedTooltip&&l.drawFixedTooltipRect(),f.globals.axisCharts?l.axisChartsTooltips({e:d,opt:u,tooltipRect:l.tooltipRect}):l.nonAxisChartsTooltips({e:d,opt:u,tooltipRect:l.tooltipRect}))}},{key:"axisChartsTooltips",value:function(r){var a,l,u=r.e,d=r.opt,f=this.w,v=d.elGrid.getBoundingClientRect(),y=u.type==="touchmove"?u.touches[0].clientX:u.clientX,_=u.type==="touchmove"?u.touches[0].clientY:u.clientY;if(this.clientY=_,this.clientX=y,f.globals.capturedSeriesIndex=-1,f.globals.capturedDataPointIndex=-1,_<v.top||_>v.top+v.height)this.handleMouseOut(d);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!f.config.tooltip.shared){var A=parseInt(d.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(A)<0)return void this.handleMouseOut(d)}var E=this.getElTooltip(),T=this.getElXCrosshairs(),N=f.globals.xyCharts||f.config.chart.type==="bar"&&!f.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||f.globals.comboCharts&&this.tooltipUtil.hasBars();if(u.type==="mousemove"||u.type==="touchmove"||u.type==="mouseup"){if(f.globals.collapsedSeries.length+f.globals.ancillaryCollapsedSeries.length===f.globals.series.length)return;T!==null&&T.classList.add("apexcharts-active");var U=this.yaxisTooltips.filter(function(Y){return Y===!0});if(this.ycrosshairs!==null&&U.length&&this.ycrosshairs.classList.add("apexcharts-active"),N&&!this.showOnIntersect)this.handleStickyTooltip(u,y,_,d);else if(f.config.chart.type==="heatmap"||f.config.chart.type==="treemap"){var H=this.intersect.handleHeatTreeTooltip({e:u,opt:d,x:a,y:l,type:f.config.chart.type});a=H.x,l=H.y,E.style.left=a+"px",E.style.top=l+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:u,opt:d}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:u,opt:d,x:a,y:l});if(this.yaxisTooltips.length)for(var X=0;X<f.config.yaxis.length;X++)this.axesTooltip.drawYaxisTooltipText(X,_,this.xyRatios);d.tooltipEl.classList.add("apexcharts-active")}else u.type!=="mouseout"&&u.type!=="touchend"||this.handleMouseOut(d)}}},{key:"nonAxisChartsTooltips",value:function(r){var a=r.e,l=r.opt,u=r.tooltipRect,d=this.w,f=l.paths.getAttribute("rel"),v=this.getElTooltip(),y=d.globals.dom.elWrap.getBoundingClientRect();if(a.type==="mousemove"||a.type==="touchmove"){v.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:l.ttItems,i:parseInt(f,10)-1,shared:!1});var _=d.globals.clientX-y.left-u.ttWidth/2,A=d.globals.clientY-y.top-u.ttHeight-10;if(v.style.left=_+"px",v.style.top=A+"px",d.config.legend.tooltipHoverFormatter){var E=f-1,T=(0,d.config.legend.tooltipHoverFormatter)(this.legendLabels[E].getAttribute("data:default-text"),{seriesIndex:E,dataPointIndex:E,w:d});this.legendLabels[E].innerHTML=T}}else a.type!=="mouseout"&&a.type!=="touchend"||(v.classList.remove("apexcharts-active"),d.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(N){var U=N.getAttribute("data:default-text");N.innerHTML=decodeURIComponent(U)}))}},{key:"handleStickyTooltip",value:function(r,a,l,u){var d=this.w,f=this.tooltipUtil.getNearestValues({context:this,hoverArea:u.hoverArea,elGrid:u.elGrid,clientX:a,clientY:l}),v=f.j,y=f.capturedSeries;d.globals.collapsedSeriesIndices.includes(y)&&(y=null);var _=u.elGrid.getBoundingClientRect();if(f.hoverX<0||f.hoverX>_.width)this.handleMouseOut(u);else if(y!==null)this.handleStickyCapturedSeries(r,y,u,v);else if(this.tooltipUtil.isXoverlap(v)||d.globals.isBarHorizontal){var A=d.globals.series.findIndex(function(E,T){return!d.globals.collapsedSeriesIndices.includes(T)});this.create(r,this,A,v,u.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(r,a,l,u){var d=this.w;if(!this.tConfig.shared&&d.globals.series[a][u]===null)return void this.handleMouseOut(l);if(d.globals.series[a][u]!==void 0)this.tConfig.shared&&this.tooltipUtil.isXoverlap(u)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(r,this,a,u,l.ttItems):this.create(r,this,a,u,l.ttItems,!1);else if(this.tooltipUtil.isXoverlap(u)){var f=d.globals.series.findIndex(function(v,y){return!d.globals.collapsedSeriesIndices.includes(y)});this.create(r,this,f,u,l.ttItems)}}},{key:"deactivateHoverFilter",value:function(){for(var r=this.w,a=new Z(this.ctx),l=r.globals.dom.Paper.select(".apexcharts-bar-area"),u=0;u<l.length;u++)a.pathMouseLeave(l[u])}},{key:"handleMouseOut",value:function(r){var a=this.w,l=this.getElXCrosshairs();if(r.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),a.config.chart.type!=="bubble"&&this.marker.resetPointsSize(),l!==null&&l.classList.remove("apexcharts-active"),this.ycrosshairs!==null&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){this.yaxisTTEls===null&&(this.yaxisTTEls=a.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var u=0;u<this.yaxisTTEls.length;u++)this.yaxisTTEls[u].classList.remove("apexcharts-active")}a.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach(function(d){var f=d.getAttribute("data:default-text");d.innerHTML=decodeURIComponent(f)})}},{key:"markerClick",value:function(r,a,l){var u=this.w;typeof u.config.chart.events.markerClick=="function"&&u.config.chart.events.markerClick(r,this.ctx,{seriesIndex:a,dataPointIndex:l,w:u}),this.ctx.events.fireEvent("markerClick",[r,this.ctx,{seriesIndex:a,dataPointIndex:l,w:u}])}},{key:"create",value:function(r,a,l,u,d){var f,v,y,_,A,E,T,N,U,H,X,Y,q,w,D,V,$=arguments.length>5&&arguments[5]!==void 0?arguments[5]:null,Q=this.w,ne=a;r.type==="mouseup"&&this.markerClick(r,l,u),$===null&&($=this.tConfig.shared);var fe=this.tooltipUtil.hasMarkers(l),de=this.tooltipUtil.getElBars();if(Q.config.legend.tooltipHoverFormatter){var Me=Q.config.legend.tooltipHoverFormatter,Oe=Array.from(this.legendLabels);Oe.forEach(function(vn){var Pt=vn.getAttribute("data:default-text");vn.innerHTML=decodeURIComponent(Pt)});for(var _e=0;_e<Oe.length;_e++){var Ne=Oe[_e],it=parseInt(Ne.getAttribute("i"),10),mt=decodeURIComponent(Ne.getAttribute("data:default-text")),St=Me(mt,{seriesIndex:$?it:l,dataPointIndex:u,w:Q});if($)Ne.innerHTML=Q.globals.collapsedSeriesIndices.indexOf(it)<0?St:mt;else if(Ne.innerHTML=it===l?St:mt,l===it)break}}var Mt=i(i({ttItems:d,i:l,j:u},((f=Q.globals.seriesRange)===null||f===void 0||(v=f[l])===null||v===void 0||(y=v[u])===null||y===void 0||(_=y.y[0])===null||_===void 0?void 0:_.y1)!==void 0&&{y1:(A=Q.globals.seriesRange)===null||A===void 0||(E=A[l])===null||E===void 0||(T=E[u])===null||T===void 0||(N=T.y[0])===null||N===void 0?void 0:N.y1}),((U=Q.globals.seriesRange)===null||U===void 0||(H=U[l])===null||H===void 0||(X=H[u])===null||X===void 0||(Y=X.y[0])===null||Y===void 0?void 0:Y.y2)!==void 0&&{y2:(q=Q.globals.seriesRange)===null||q===void 0||(w=q[l])===null||w===void 0||(D=w[u])===null||D===void 0||(V=D.y[0])===null||V===void 0?void 0:V.y2});if($){if(ne.tooltipLabels.drawSeriesTexts(i(i({},Mt),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),fe)Q.globals.markers.largestSize>0?ne.marker.enlargePoints(u):ne.tooltipPosition.moveDynamicPointsOnHover(u);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(de),this.barSeriesHeight>0)){var Ft=new Z(this.ctx),Rt=Q.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(u,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(u,l);for(var jt=0;jt<Rt.length;jt++)Ft.pathMouseEnter(Rt[jt])}}else ne.tooltipLabels.drawSeriesTexts(i({shared:!1},Mt)),this.tooltipUtil.hasBars()&&ne.tooltipPosition.moveStickyTooltipOverBars(u,l),fe&&ne.tooltipPosition.moveMarkers(l,u)}}]),G}(),me=function(){function G(r){o(this,G),this.w=r.w,this.barCtx=r,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return h(G,[{key:"handleBarDataLabels",value:function(r){var a,l,u=r.x,d=r.y,f=r.y1,v=r.y2,y=r.i,_=r.j,A=r.realIndex,E=r.columnGroupIndex,T=r.series,N=r.barHeight,U=r.barWidth,H=r.barXPosition,X=r.barYPosition,Y=r.visibleSeries,q=r.renderedPath,w=this.w,D=new Z(this.barCtx.ctx),V=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[A]:this.barCtx.strokeWidth;w.globals.isXNumeric&&!w.globals.isBarHorizontal?(a=u+parseFloat(U*(Y+1)),l=d+parseFloat(N*(Y+1))-V):(a=u+parseFloat(U*Y),l=d+parseFloat(N*Y));var $,Q=null,ne=u,fe=d,de={},Me=w.config.dataLabels,Oe=this.barCtx.barOptions.dataLabels,_e=this.barCtx.barOptions.dataLabels.total;X!==void 0&&this.barCtx.isRangeBar&&(l=X,fe=X),H!==void 0&&this.barCtx.isVerticalGroupedRangeBar&&(a=H,ne=H);var Ne=Me.offsetX,it=Me.offsetY,mt={width:0,height:0};if(w.config.dataLabels.enabled){var St=this.barCtx.series[y][_];mt=D.getTextRects(w.globals.yLabelFormatters[0](St),parseFloat(Me.style.fontSize))}var Mt={x:u,y:d,i:y,j:_,realIndex:A,columnGroupIndex:E,renderedPath:q,bcx:a,bcy:l,barHeight:N,barWidth:U,textRects:mt,strokeWidth:V,dataLabelsX:ne,dataLabelsY:fe,dataLabelsConfig:Me,barDataLabelsConfig:Oe,barTotalDataLabelsConfig:_e,offX:Ne,offY:it};return de=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(Mt):this.calculateColumnsDataLabelsPosition(Mt),q.attr({cy:de.bcy,cx:de.bcx,j:_,val:T[y][_],barHeight:N,barWidth:U}),$=this.drawCalculatedDataLabels({x:de.dataLabelsX,y:de.dataLabelsY,val:this.barCtx.isRangeBar?[f,v]:T[y][_],i:A,j:_,barWidth:U,barHeight:N,textRects:mt,dataLabelsConfig:Me}),w.config.chart.stacked&&_e.enabled&&(Q=this.drawTotalDataLabels({x:de.totalDataLabelsX,y:de.totalDataLabelsY,barWidth:U,barHeight:N,realIndex:A,textAnchor:de.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:A,j:_}),dataLabelsConfig:Me,barTotalDataLabelsConfig:_e})),{dataLabels:$,totalDataLabels:Q}}},{key:"getStackedTotalDataLabel",value:function(r){var a=r.realIndex,l=r.j,u=this.w,d=this.barCtx.stackedSeriesTotals[l];return this.totalFormatter&&(d=this.totalFormatter(d,i(i({},u),{},{seriesIndex:a,dataPointIndex:l,w:u}))),d}},{key:"calculateColumnsDataLabelsPosition",value:function(r){var a,l,u=this.w,d=r.i,f=r.j,v=r.realIndex,y=r.columnGroupIndex,_=r.y,A=r.bcx,E=r.barWidth,T=r.barHeight,N=r.textRects,U=r.dataLabelsX,H=r.dataLabelsY,X=r.dataLabelsConfig,Y=r.barDataLabelsConfig,q=r.barTotalDataLabelsConfig,w=r.strokeWidth,D=r.offX,V=r.offY,$=A;T=Math.abs(T);var Q=u.config.plotOptions.bar.dataLabels.orientation==="vertical",ne=this.barCtx.barHelpers.getZeroValueEncounters({i:d,j:f}).zeroEncounters;A=A-w/2+y*E;var fe=u.globals.gridWidth/u.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?U+=E/2:(U=u.globals.isXNumeric?A-E/2+D:A-fe+E/2+D,ne>0&&u.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(U-=E*ne)),Q&&(U=U+N.height/2-w/2-2);var de=this.barCtx.series[d][f]<0,Me=_;switch(this.barCtx.isReversed&&(Me=_+(de?T:-T),_-=T),Y.position){case"center":H=Q?de?Me-T/2+V:Me+T/2-V:de?Me-T/2+N.height/2+V:Me+T/2+N.height/2-V;break;case"bottom":H=Q?de?Me-T+V:Me+T-V:de?Me-T+N.height+w+V:Me+T-N.height/2+w-V;break;case"top":H=Q?de?Me+V:Me-V:de?Me-N.height/2-V:Me+N.height+V}if(this.barCtx.lastActiveBarSerieIndex===v&&q.enabled){var Oe=new Z(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:v,j:f}),X.fontSize);a=de?Me-Oe.height/2-V-q.offsetY+18:Me+Oe.height+V+q.offsetY-18;var _e=u.globals.gridWidth/u.globals.dataPoints;l=$+E*(u.globals.barGroups.length-.5)-(u.globals.isXNumeric?E:_e)+q.offsetX}return u.config.chart.stacked||(H<0?H=0+w:H+N.height/3>u.globals.gridHeight&&(H=u.globals.gridHeight-w)),{bcx:A,bcy:_,dataLabelsX:U,dataLabelsY:H,totalDataLabelsX:l,totalDataLabelsY:a,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(r){var a=this.w,l=r.x,u=r.i,d=r.j,f=r.realIndex,v=r.columnGroupIndex,y=r.bcy,_=r.barHeight,A=r.barWidth,E=r.textRects,T=r.dataLabelsX,N=r.strokeWidth,U=r.dataLabelsConfig,H=r.barDataLabelsConfig,X=r.barTotalDataLabelsConfig,Y=r.offX,q=r.offY,w=a.globals.gridHeight/a.globals.dataPoints;A=Math.abs(A);var D,V,$=(y+=v*_)-(this.barCtx.isRangeBar?0:w)+_/2+E.height/2+q-3,Q="start",ne=this.barCtx.series[u][d]<0,fe=l;switch(this.barCtx.isReversed&&(fe=l+(ne?-A:A),l=a.globals.gridWidth-A,Q=ne?"start":"end"),H.position){case"center":T=ne?fe+A/2-Y:Math.max(E.width/2,fe-A/2)+Y;break;case"bottom":T=ne?fe+A-N-Math.round(E.width/2)-Y:fe-A+N+Math.round(E.width/2)+Y;break;case"top":T=ne?fe-N+Math.round(E.width/2)-Y:fe-N-Math.round(E.width/2)+Y}if(this.barCtx.lastActiveBarSerieIndex===f&&X.enabled){var de=new Z(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:f,j:d}),U.fontSize);ne?(D=fe-N-Y-X.offsetX,Q="end"):D=fe+Y+X.offsetX+(this.barCtx.isReversed?-(A+N):N),V=$-E.height/2+de.height/2+X.offsetY+N}return a.config.chart.stacked||(T<0?T=T+E.width+N:T+E.width/2>a.globals.gridWidth&&(T=a.globals.gridWidth-E.width-N)),{bcx:l,bcy:y,dataLabelsX:T,dataLabelsY:$,totalDataLabelsX:D,totalDataLabelsY:V,totalDataLabelsAnchor:Q}}},{key:"drawCalculatedDataLabels",value:function(r){var a=r.x,l=r.y,u=r.val,d=r.i,f=r.j,v=r.textRects,y=r.barHeight,_=r.barWidth,A=r.dataLabelsConfig,E=this.w,T="rotate(0)";E.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(T="rotate(-90, ".concat(a,", ").concat(l,")"));var N=new Je(this.barCtx.ctx),U=new Z(this.barCtx.ctx),H=A.formatter,X=null,Y=E.globals.collapsedSeriesIndices.indexOf(d)>-1;if(A.enabled&&!Y){X=U.group({class:"apexcharts-data-labels",transform:T});var q="";u!==void 0&&(q=H(u,i(i({},E),{},{seriesIndex:d,dataPointIndex:f,w:E}))),!u&&E.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(q="");var w=E.globals.series[d][f]<0,D=E.config.plotOptions.bar.dataLabels.position;E.config.plotOptions.bar.dataLabels.orientation==="vertical"&&(D==="top"&&(A.textAnchor=w?"end":"start"),D==="center"&&(A.textAnchor="middle"),D==="bottom"&&(A.textAnchor=w?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&_<U.getTextRects(q,parseFloat(A.style.fontSize)).width&&(q=""),E.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?v.width/1.6>Math.abs(_)&&(q=""):v.height/1.6>Math.abs(y)&&(q=""));var V=i({},A);this.barCtx.isHorizontal&&u<0&&(A.textAnchor==="start"?V.textAnchor="end":A.textAnchor==="end"&&(V.textAnchor="start")),N.plotDataLabelsText({x:a,y:l,text:q,i:d,j:f,parent:X,dataLabelsConfig:V,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return X}},{key:"drawTotalDataLabels",value:function(r){var a,l=r.x,u=r.y,d=r.val,f=r.barWidth,v=r.barHeight,y=r.realIndex,_=r.textAnchor,A=r.barTotalDataLabelsConfig,E=this.w,T=new Z(this.barCtx.ctx);return A.enabled&&l!==void 0&&u!==void 0&&this.barCtx.lastActiveBarSerieIndex===y&&(a=T.drawText({x:l-(!E.globals.isBarHorizontal&&E.globals.barGroups.length?f*(E.globals.barGroups.length-1)/2:0),y:u-(E.globals.isBarHorizontal&&E.globals.barGroups.length?v*(E.globals.barGroups.length-1)/2:0),foreColor:A.style.color,text:d,textAnchor:_,fontFamily:A.style.fontFamily,fontSize:A.style.fontSize,fontWeight:A.style.fontWeight})),a}}]),G}(),et=function(){function G(r){o(this,G),this.w=r.w,this.barCtx=r}return h(G,[{key:"initVariables",value:function(r){var a=this.w;this.barCtx.series=r,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var l=0;l<r.length;l++)if(r[l].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=r[l].length),a.globals.isXNumeric)for(var u=0;u<r[l].length;u++)a.globals.seriesX[l][u]>a.globals.minX&&a.globals.seriesX[l][u]<a.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=a.globals.dataPoints;this.barCtx.seriesLen===0&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],a.globals.comboCharts||this.checkZeroSeries({series:r})}},{key:"initialPositions",value:function(){var r,a,l,u,d,f,v,y,_=this.w,A=_.globals.dataPoints;this.barCtx.isRangeBar&&(A=_.globals.labels.length);var E=this.barCtx.seriesLen;if(_.config.plotOptions.bar.rangeBarGroupRows&&(E=1),this.barCtx.isHorizontal)d=(l=_.globals.gridHeight/A)/E,_.globals.isXNumeric&&(d=(l=_.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),d=d*parseInt(this.barCtx.barOptions.barHeight,10)/100,String(this.barCtx.barOptions.barHeight).indexOf("%")===-1&&(d=parseInt(this.barCtx.barOptions.barHeight,10)),y=this.barCtx.baseLineInvertedY+_.globals.padHorizontal+(this.barCtx.isReversed?_.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(y=_.globals.gridWidth/2),a=(l-d*this.barCtx.seriesLen)/2;else{if(u=_.globals.gridWidth/this.barCtx.visibleItems,_.config.xaxis.convertedCatToNumeric&&(u=_.globals.gridWidth/_.globals.dataPoints),f=u/E*parseInt(this.barCtx.barOptions.columnWidth,10)/100,_.globals.isXNumeric){var T=this.barCtx.xRatio;_.globals.minXDiff&&_.globals.minXDiff!==.5&&_.globals.minXDiff/T>0&&(u=_.globals.minXDiff/T),(f=u/E*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(f=1)}String(this.barCtx.barOptions.columnWidth).indexOf("%")===-1&&(f=parseInt(this.barCtx.barOptions.columnWidth,10)),v=_.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?_.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),r=_.globals.padHorizontal+(u-f*this.barCtx.seriesLen)/2}return _.globals.barHeight=d,_.globals.barWidth=f,{x:r,y:a,yDivision:l,xDivision:u,barHeight:d,barWidth:f,zeroH:v,zeroW:y}}},{key:"initializeStackedPrevVars",value:function(r){r.w.globals.seriesGroups.forEach(function(a){r[a]||(r[a]={}),r[a].prevY=[],r[a].prevX=[],r[a].prevYF=[],r[a].prevXF=[],r[a].prevYVal=[],r[a].prevXVal=[]})}},{key:"initializeStackedXYVars",value:function(r){r.w.globals.seriesGroups.forEach(function(a){r[a]||(r[a]={}),r[a].xArrj=[],r[a].xArrjF=[],r[a].xArrjVal=[],r[a].yArrj=[],r[a].yArrjF=[],r[a].yArrjVal=[]})}},{key:"getPathFillColor",value:function(r,a,l,u){var d,f,v,y,_=this.w,A=new rt(this.barCtx.ctx),E=null,T=this.barCtx.barOptions.distributed?l:a;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map(function(N){r[a][l]>=N.from&&r[a][l]<=N.to&&(E=N.color)}),_.config.series[a].data[l]&&_.config.series[a].data[l].fillColor&&(E=_.config.series[a].data[l].fillColor),A.fillPath({seriesNumber:this.barCtx.barOptions.distributed?T:u,dataPointIndex:l,color:E,value:r[a][l],fillConfig:(d=_.config.series[a].data[l])===null||d===void 0?void 0:d.fill,fillType:(f=_.config.series[a].data[l])!==null&&f!==void 0&&(v=f.fill)!==null&&v!==void 0&&v.type?(y=_.config.series[a].data[l])===null||y===void 0?void 0:y.fill.type:Array.isArray(_.config.fill.type)?_.config.fill.type[a]:_.config.fill.type})}},{key:"getStrokeWidth",value:function(r,a,l){var u=0,d=this.w;return this.barCtx.series[r][a]===void 0||this.barCtx.series[r][a]===null?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,d.config.stroke.show&&(this.barCtx.isNullValue||(u=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[l]:this.barCtx.strokeWidth)),u}},{key:"shouldApplyRadius",value:function(r){var a=this.w,l=!1;return a.config.plotOptions.bar.borderRadius>0&&(a.config.chart.stacked&&a.config.plotOptions.bar.borderRadiusWhenStacked==="last"?this.barCtx.lastActiveBarSerieIndex===r&&(l=!0):l=!0),l}},{key:"barBackground",value:function(r){var a=r.j,l=r.i,u=r.x1,d=r.x2,f=r.y1,v=r.y2,y=r.elSeries,_=this.w,A=new Z(this.barCtx.ctx),E=new Ye(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&E===l){a>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(a%=this.barCtx.barOptions.colors.backgroundBarColors.length);var T=this.barCtx.barOptions.colors.backgroundBarColors[a],N=A.drawRect(u!==void 0?u:0,f!==void 0?f:0,d!==void 0?d:_.globals.gridWidth,v!==void 0?v:_.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,T,this.barCtx.barOptions.colors.backgroundBarOpacity);y.add(N),N.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(r){var a,l=r.barWidth,u=r.barXPosition,d=r.y1,f=r.y2,v=r.strokeWidth,y=r.seriesGroup,_=r.realIndex,A=r.i,E=r.j,T=r.w,N=new Z(this.barCtx.ctx);(v=Array.isArray(v)?v[_]:v)||(v=0);var U=l,H=u;(a=T.config.series[_].data[E])!==null&&a!==void 0&&a.columnWidthOffset&&(H=u-T.config.series[_].data[E].columnWidthOffset/2,U=l+T.config.series[_].data[E].columnWidthOffset);var X=v/2,Y=H+X,q=H+U-X;d+=.001-X,f+=.001+X;var w=N.move(Y,d),D=N.move(Y,d),V=N.line(q,d);if(T.globals.previousPaths.length>0&&(D=this.barCtx.getPreviousPath(_,E,!1)),w=w+N.line(Y,f)+N.line(q,f)+N.line(q,d)+(T.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),D=D+N.line(Y,d)+V+V+V+V+V+N.line(Y,d)+(T.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(_)&&(w=N.roundPathCorners(w,T.config.plotOptions.bar.borderRadius)),T.config.chart.stacked){var $=this.barCtx;($=this.barCtx[y]).yArrj.push(f-X),$.yArrjF.push(Math.abs(d-f+v)),$.yArrjVal.push(this.barCtx.series[A][E])}return{pathTo:w,pathFrom:D}}},{key:"getBarpaths",value:function(r){var a,l=r.barYPosition,u=r.barHeight,d=r.x1,f=r.x2,v=r.strokeWidth,y=r.seriesGroup,_=r.realIndex,A=r.i,E=r.j,T=r.w,N=new Z(this.barCtx.ctx);(v=Array.isArray(v)?v[_]:v)||(v=0);var U=l,H=u;(a=T.config.series[_].data[E])!==null&&a!==void 0&&a.barHeightOffset&&(U=l-T.config.series[_].data[E].barHeightOffset/2,H=u+T.config.series[_].data[E].barHeightOffset);var X=v/2,Y=U+X,q=U+H-X;d+=.001-X,f+=.001+X;var w=N.move(d,Y),D=N.move(d,Y);T.globals.previousPaths.length>0&&(D=this.barCtx.getPreviousPath(_,E,!1));var V=N.line(d,q);if(w=w+N.line(f,Y)+N.line(f,q)+V+(T.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),D=D+N.line(d,Y)+V+V+V+V+V+N.line(d,Y)+(T.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z"),this.shouldApplyRadius(_)&&(w=N.roundPathCorners(w,T.config.plotOptions.bar.borderRadius)),T.config.chart.stacked){var $=this.barCtx;($=this.barCtx[y]).xArrj.push(f+X),$.xArrjF.push(Math.abs(d-f)),$.xArrjVal.push(this.barCtx.series[A][E])}return{pathTo:w,pathFrom:D}}},{key:"checkZeroSeries",value:function(r){for(var a=r.series,l=this.w,u=0;u<a.length;u++){for(var d=0,f=0;f<a[l.globals.maxValsInArrayIndex].length;f++)d+=a[u][f];d===0&&this.barCtx.zeroSerieses.push(u)}}},{key:"getXForValue",value:function(r,a){var l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2]?a:null;return r!=null&&(l=a+r/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?r/this.barCtx.invertedYRatio:0)),l}},{key:"getYForValue",value:function(r,a,l){var u=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3]?a:null;return r!=null&&(u=a-r/this.barCtx.yRatio[l]+2*(this.barCtx.isReversed?r/this.barCtx.yRatio[l]:0)),u}},{key:"getGoalValues",value:function(r,a,l,u,d,f){var v=this,y=this.w,_=[],A=function(N,U){var H;_.push((m(H={},r,r==="x"?v.getXForValue(N,a,!1):v.getYForValue(N,l,f,!1)),m(H,"attrs",U),H))};if(y.globals.seriesGoals[u]&&y.globals.seriesGoals[u][d]&&Array.isArray(y.globals.seriesGoals[u][d])&&y.globals.seriesGoals[u][d].forEach(function(N){A(N.value,N)}),this.barCtx.barOptions.isDumbbell&&y.globals.seriesRange.length){var E=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:y.globals.colors,T={strokeHeight:r==="x"?0:y.globals.markers.size[u],strokeWidth:r==="x"?y.globals.markers.size[u]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(E[u])?E[u][0]:E[u]};A(y.globals.seriesRangeStart[u][d],T),A(y.globals.seriesRangeEnd[u][d],i(i({},T),{},{strokeColor:Array.isArray(E[u])?E[u][1]:E[u]}))}return _}},{key:"drawGoalLine",value:function(r){var a=r.barXPosition,l=r.barYPosition,u=r.goalX,d=r.goalY,f=r.barWidth,v=r.barHeight,y=new Z(this.barCtx.ctx),_=y.group({className:"apexcharts-bar-goals-groups"});_.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:_.node}),_.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var A=null;return this.barCtx.isHorizontal?Array.isArray(u)&&u.forEach(function(E){if(E.x>=-1&&E.x<=y.w.globals.gridWidth+1){var T=E.attrs.strokeHeight!==void 0?E.attrs.strokeHeight:v/2,N=l+T+v/2;A=y.drawLine(E.x,N-2*T,E.x,N,E.attrs.strokeColor?E.attrs.strokeColor:void 0,E.attrs.strokeDashArray,E.attrs.strokeWidth?E.attrs.strokeWidth:2,E.attrs.strokeLineCap),_.add(A)}}):Array.isArray(d)&&d.forEach(function(E){if(E.y>=-1&&E.y<=y.w.globals.gridHeight+1){var T=E.attrs.strokeWidth!==void 0?E.attrs.strokeWidth:f/2,N=a+T+f/2;A=y.drawLine(N-2*T,E.y,N,E.y,E.attrs.strokeColor?E.attrs.strokeColor:void 0,E.attrs.strokeDashArray,E.attrs.strokeHeight?E.attrs.strokeHeight:2,E.attrs.strokeLineCap),_.add(A)}}),_}},{key:"drawBarShadow",value:function(r){var a=r.prevPaths,l=r.currPaths,u=r.color,d=this.w,f=a.x,v=a.x1,y=a.barYPosition,_=l.x,A=l.x1,E=l.barYPosition,T=y+l.barHeight,N=new Z(this.barCtx.ctx),U=new R,H=N.move(v,T)+N.line(f,T)+N.line(_,E)+N.line(A,E)+N.line(v,T)+(d.config.plotOptions.bar.borderRadiusApplication==="around"?" Z":" z");return N.drawPath({d:H,fill:U.shadeColor(.5,R.rgb2hex(u)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(r){var a,l=r.i,u=r.j,d=this.w,f=0,v=0;return(d.config.plotOptions.bar.horizontal?d.globals.series.map(function(y,_){return _}):((a=d.globals.columnSeries)===null||a===void 0?void 0:a.i.map(function(y){return y}))||[]).forEach(function(y){var _=d.globals.seriesPercent[y][u];_&&f++,y<l&&_===0&&v++}),{nonZeroColumns:f,zeroEncounters:v}}},{key:"getGroupIndex",value:function(r){var a=this.w,l=a.globals.seriesGroups.findIndex(function(f){return f.indexOf(a.globals.seriesNames[r])>-1}),u=this.barCtx.columnGroupIndices,d=u.indexOf(l);return d<0&&(u.push(l),d=u.length-1),{groupIndex:l,columnGroupIndex:d}}}]),G}(),Ue=function(){function G(r,a){o(this,G),this.ctx=r,this.w=r.w;var l=this.w;this.barOptions=l.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=l.config.stroke.width,this.isNullValue=!1,this.isRangeBar=l.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!l.globals.isBarHorizontal&&l.globals.seriesRange.length&&l.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=a,this.xyRatios!==null&&(this.xRatio=a.xRatio,this.yRatio=a.yRatio,this.invertedXRatio=a.invertedXRatio,this.invertedYRatio=a.invertedYRatio,this.baseLineY=a.baseLineY,this.baseLineInvertedY=a.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var u=new Ye(this.ctx);this.lastActiveBarSerieIndex=u.getActiveConfigSeriesIndex("desc",["bar","column"]),this.columnGroupIndices=[];var d=u.getBarSeriesIndices(),f=new J(this.ctx);this.stackedSeriesTotals=f.getStackedSeriesTotals(this.w.config.series.map(function(v,y){return d.indexOf(y)===-1?y:-1}).filter(function(v){return v!==-1})),this.barHelpers=new et(this)}return h(G,[{key:"draw",value:function(r,a){var l=this.w,u=new Z(this.ctx),d=new J(this.ctx,l);r=d.getLogSeries(r),this.series=r,this.yRatio=d.getLogYRatios(this.yRatio),this.barHelpers.initVariables(r);var f=u.group({class:"apexcharts-bar-series apexcharts-plot-series"});l.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var v=0,y=0;v<r.length;v++,y++){var _,A,E,T,N=void 0,U=void 0,H=[],X=[],Y=l.globals.comboCharts?a[v]:v,q=this.barHelpers.getGroupIndex(Y).columnGroupIndex,w=u.group({class:"apexcharts-series",rel:v+1,seriesName:R.escapeString(l.globals.seriesNames[Y]),"data:realIndex":Y});this.ctx.series.addCollapsedClassToSeries(w,Y),r[v].length>0&&(this.visibleI=this.visibleI+1);var D=0,V=0;this.yRatio.length>1&&(this.yaxisIndex=l.globals.seriesYAxisReverseMap[Y],this.translationsIndex=Y);var $=this.translationsIndex;this.isReversed=l.config.yaxis[this.yaxisIndex]&&l.config.yaxis[this.yaxisIndex].reversed;var Q=this.barHelpers.initialPositions();U=Q.y,D=Q.barHeight,A=Q.yDivision,T=Q.zeroW,N=Q.x,V=Q.barWidth,_=Q.xDivision,E=Q.zeroH,this.horizontal||X.push(N+V/2);var ne=u.group({class:"apexcharts-datalabels","data:realIndex":Y});l.globals.delayedElements.push({el:ne.node}),ne.node.classList.add("apexcharts-element-hidden");var fe=u.group({class:"apexcharts-bar-goals-markers"}),de=u.group({class:"apexcharts-bar-shadows"});l.globals.delayedElements.push({el:de.node}),de.node.classList.add("apexcharts-element-hidden");for(var Me=0;Me<r[v].length;Me++){var Oe=this.barHelpers.getStrokeWidth(v,Me,Y),_e=null,Ne={indexes:{i:v,j:Me,realIndex:Y,translationsIndex:$,bc:y},x:N,y:U,strokeWidth:Oe,elSeries:w};this.isHorizontal?(_e=this.drawBarPaths(i(i({},Ne),{},{barHeight:D,zeroW:T,yDivision:A})),V=this.series[v][Me]/this.invertedYRatio):(_e=this.drawColumnPaths(i(i({},Ne),{},{xDivision:_,barWidth:V,zeroH:E})),D=this.series[v][Me]/this.yRatio[$]);var it=this.barHelpers.getPathFillColor(r,v,Me,Y);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&Me>0){var mt=this.barHelpers.drawBarShadow({color:typeof it=="string"&&(it==null?void 0:it.indexOf("url"))===-1?it:R.hexToRgba(l.globals.colors[v]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:_e});mt&&de.add(mt)}this.pathArr.push(_e);var St=this.barHelpers.drawGoalLine({barXPosition:_e.barXPosition,barYPosition:_e.barYPosition,goalX:_e.goalX,goalY:_e.goalY,barHeight:D,barWidth:V});St&&fe.add(St),U=_e.y,N=_e.x,Me>0&&X.push(N+V/2),H.push(U),this.renderSeries({realIndex:Y,pathFill:it,j:Me,i:v,columnGroupIndex:q,pathFrom:_e.pathFrom,pathTo:_e.pathTo,strokeWidth:Oe,elSeries:w,x:N,y:U,series:r,barHeight:_e.barHeight?_e.barHeight:D,barWidth:_e.barWidth?_e.barWidth:V,elDataLabelsWrap:ne,elGoalsMarkers:fe,elBarShadows:de,visibleSeries:this.visibleI,type:"bar"})}l.globals.seriesXvalues[Y]=X,l.globals.seriesYvalues[Y]=H,f.add(w)}return f}},{key:"renderSeries",value:function(r){var a=r.realIndex,l=r.pathFill,u=r.lineFill,d=r.j,f=r.i,v=r.columnGroupIndex,y=r.pathFrom,_=r.pathTo,A=r.strokeWidth,E=r.elSeries,T=r.x,N=r.y,U=r.y1,H=r.y2,X=r.series,Y=r.barHeight,q=r.barWidth,w=r.barXPosition,D=r.barYPosition,V=r.elDataLabelsWrap,$=r.elGoalsMarkers,Q=r.elBarShadows,ne=r.visibleSeries,fe=r.type,de=this.w,Me=new Z(this.ctx);if(!u){var Oe=typeof de.globals.stroke.colors[a]=="function"?function(St){var Mt,Ft=de.config.stroke.colors;return Array.isArray(Ft)&&Ft.length>0&&((Mt=Ft[St])||(Mt=""),typeof Mt=="function")?Mt({value:de.globals.series[St][d],dataPointIndex:d,w:de}):Mt}(a):de.globals.stroke.colors[a];u=this.barOptions.distributed?de.globals.stroke.colors[d]:Oe}de.config.series[f].data[d]&&de.config.series[f].data[d].strokeColor&&(u=de.config.series[f].data[d].strokeColor),this.isNullValue&&(l="none");var _e=d/de.config.chart.animations.animateGradually.delay*(de.config.chart.animations.speed/de.globals.dataPoints)/2.4,Ne=Me.renderPaths({i:f,j:d,realIndex:a,pathFrom:y,pathTo:_,stroke:u,strokeWidth:A,strokeLineCap:de.config.stroke.lineCap,fill:l,animationDelay:_e,initialSpeed:de.config.chart.animations.speed,dataChangeSpeed:de.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(fe,"-area")});Ne.attr("clip-path","url(#gridRectMask".concat(de.globals.cuid,")"));var it=de.config.forecastDataPoints;it.count>0&&d>=de.globals.dataPoints-it.count&&(Ne.node.setAttribute("stroke-dasharray",it.dashArray),Ne.node.setAttribute("stroke-width",it.strokeWidth),Ne.node.setAttribute("fill-opacity",it.fillOpacity)),U!==void 0&&H!==void 0&&(Ne.attr("data-range-y1",U),Ne.attr("data-range-y2",H)),new W(this.ctx).setSelectionFilter(Ne,a,d),E.add(Ne);var mt=new me(this).handleBarDataLabels({x:T,y:N,y1:U,y2:H,i:f,j:d,series:X,realIndex:a,columnGroupIndex:v,barHeight:Y,barWidth:q,barXPosition:w,barYPosition:D,renderedPath:Ne,visibleSeries:ne});return mt.dataLabels!==null&&V.add(mt.dataLabels),mt.totalDataLabels&&V.add(mt.totalDataLabels),E.add(V),$&&E.add($),Q&&E.add(Q),E}},{key:"drawBarPaths",value:function(r){var a,l=r.indexes,u=r.barHeight,d=r.strokeWidth,f=r.zeroW,v=r.x,y=r.y,_=r.yDivision,A=r.elSeries,E=this.w,T=l.i,N=l.j;if(E.globals.isXNumeric)a=(y=(E.globals.seriesX[T][N]-E.globals.minX)/this.invertedXRatio-u)+u*this.visibleI;else if(E.config.plotOptions.bar.hideZeroBarsWhenGrouped){var U=0,H=0;E.globals.seriesPercent.forEach(function(Y,q){Y[N]&&U++,q<T&&Y[N]===0&&H++}),U>0&&(u=this.seriesLen*u/U),a=y+u*this.visibleI,a-=u*H}else a=y+u*this.visibleI;this.isFunnel&&(f-=(this.barHelpers.getXForValue(this.series[T][N],f)-f)/2),v=this.barHelpers.getXForValue(this.series[T][N],f);var X=this.barHelpers.getBarpaths({barYPosition:a,barHeight:u,x1:f,x2:v,strokeWidth:d,series:this.series,realIndex:l.realIndex,i:T,j:N,w:E});return E.globals.isXNumeric||(y+=_),this.barHelpers.barBackground({j:N,i:T,y1:a-u*this.visibleI,y2:u*this.seriesLen,elSeries:A}),{pathTo:X.pathTo,pathFrom:X.pathFrom,x1:f,x:v,y,goalX:this.barHelpers.getGoalValues("x",f,null,T,N),barYPosition:a,barHeight:u}}},{key:"drawColumnPaths",value:function(r){var a,l=r.indexes,u=r.x,d=r.y,f=r.xDivision,v=r.barWidth,y=r.zeroH,_=r.strokeWidth,A=r.elSeries,E=this.w,T=l.realIndex,N=l.translationsIndex,U=l.i,H=l.j,X=l.bc;if(E.globals.isXNumeric){var Y=this.getBarXForNumericXAxis({x:u,j:H,realIndex:T,barWidth:v});u=Y.x,a=Y.barXPosition}else if(E.config.plotOptions.bar.hideZeroBarsWhenGrouped){var q=this.barHelpers.getZeroValueEncounters({i:U,j:H}),w=q.nonZeroColumns,D=q.zeroEncounters;w>0&&(v=this.seriesLen*v/w),a=u+v*this.visibleI,a-=v*D}else a=u+v*this.visibleI;d=this.barHelpers.getYForValue(this.series[U][H],y,N);var V=this.barHelpers.getColumnPaths({barXPosition:a,barWidth:v,y1:y,y2:d,strokeWidth:_,series:this.series,realIndex:T,i:U,j:H,w:E});return E.globals.isXNumeric||(u+=f),this.barHelpers.barBackground({bc:X,j:H,i:U,x1:a-_/2-v*this.visibleI,x2:v*this.seriesLen+_/2,elSeries:A}),{pathTo:V.pathTo,pathFrom:V.pathFrom,x:u,y:d,goalY:this.barHelpers.getGoalValues("y",null,y,U,H,N),barXPosition:a,barWidth:v}}},{key:"getBarXForNumericXAxis",value:function(r){var a=r.x,l=r.barWidth,u=r.realIndex,d=r.j,f=this.w,v=u;return f.globals.seriesX[u].length||(v=f.globals.maxValsInArrayIndex),f.globals.seriesX[v][d]&&(a=(f.globals.seriesX[v][d]-f.globals.minX)/this.xRatio-l*this.seriesLen/2),{barXPosition:a+l*this.visibleI,x:a}}},{key:"getPreviousPath",value:function(r,a){for(var l,u=this.w,d=0;d<u.globals.previousPaths.length;d++){var f=u.globals.previousPaths[d];f.paths&&f.paths.length>0&&parseInt(f.realIndex,10)===parseInt(r,10)&&u.globals.previousPaths[d].paths[a]!==void 0&&(l=u.globals.previousPaths[d].paths[a].d)}return l}}]),G}(),He=function(G){x(a,Ue);var r=P(a);function a(){return o(this,a),r.apply(this,arguments)}return h(a,[{key:"draw",value:function(l,u){var d=this,f=this.w;this.graphics=new Z(this.ctx),this.bar=new Ue(this.ctx,this.xyRatios);var v=new J(this.ctx,f);l=v.getLogSeries(l),this.yRatio=v.getLogYRatios(this.yRatio),this.barHelpers.initVariables(l),f.config.chart.stackType==="100%"&&(l=f.globals.comboCharts?u.map(function(U){return f.globals.seriesPercent[U]}):f.globals.seriesPercent.slice()),this.series=l,this.barHelpers.initializeStackedPrevVars(this);for(var y=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),_=0,A=0,E=function(U,H){var X=void 0,Y=void 0,q=void 0,w=void 0,D=f.globals.comboCharts?u[U]:U,V=d.barHelpers.getGroupIndex(D),$=V.groupIndex,Q=V.columnGroupIndex;d.groupCtx=d[f.globals.seriesGroups[$]];var ne=[],fe=[],de=0;d.yRatio.length>1&&(d.yaxisIndex=f.globals.seriesYAxisReverseMap[D][0],de=D),d.isReversed=f.config.yaxis[d.yaxisIndex]&&f.config.yaxis[d.yaxisIndex].reversed;var Me=d.graphics.group({class:"apexcharts-series",seriesName:R.escapeString(f.globals.seriesNames[D]),rel:U+1,"data:realIndex":D});d.ctx.series.addCollapsedClassToSeries(Me,D);var Oe=d.graphics.group({class:"apexcharts-datalabels","data:realIndex":D}),_e=d.graphics.group({class:"apexcharts-bar-goals-markers"}),Ne=0,it=0,mt=d.initialPositions(_,A,X,Y,q,w,de);A=mt.y,Ne=mt.barHeight,Y=mt.yDivision,w=mt.zeroW,_=mt.x,it=mt.barWidth,X=mt.xDivision,q=mt.zeroH,f.globals.barHeight=Ne,f.globals.barWidth=it,d.barHelpers.initializeStackedXYVars(d),d.groupCtx.prevY.length===1&&d.groupCtx.prevY[0].every(function(Pt){return isNaN(Pt)})&&(d.groupCtx.prevY[0]=d.groupCtx.prevY[0].map(function(){return q}),d.groupCtx.prevYF[0]=d.groupCtx.prevYF[0].map(function(){return 0}));for(var St=0;St<f.globals.dataPoints;St++){var Mt=d.barHelpers.getStrokeWidth(U,St,D),Ft={indexes:{i:U,j:St,realIndex:D,translationsIndex:de,bc:H},strokeWidth:Mt,x:_,y:A,elSeries:Me,columnGroupIndex:Q,seriesGroup:f.globals.seriesGroups[$]},Rt=null;d.isHorizontal?(Rt=d.drawStackedBarPaths(i(i({},Ft),{},{zeroW:w,barHeight:Ne,yDivision:Y})),it=d.series[U][St]/d.invertedYRatio):(Rt=d.drawStackedColumnPaths(i(i({},Ft),{},{xDivision:X,barWidth:it,zeroH:q})),Ne=d.series[U][St]/d.yRatio[de]);var jt=d.barHelpers.drawGoalLine({barXPosition:Rt.barXPosition,barYPosition:Rt.barYPosition,goalX:Rt.goalX,goalY:Rt.goalY,barHeight:Ne,barWidth:it});jt&&_e.add(jt),A=Rt.y,_=Rt.x,ne.push(_),fe.push(A);var vn=d.barHelpers.getPathFillColor(l,U,St,D);Me=d.renderSeries({realIndex:D,pathFill:vn,j:St,i:U,columnGroupIndex:Q,pathFrom:Rt.pathFrom,pathTo:Rt.pathTo,strokeWidth:Mt,elSeries:Me,x:_,y:A,series:l,barHeight:Ne,barWidth:it,elDataLabelsWrap:Oe,elGoalsMarkers:_e,type:"bar",visibleSeries:0})}f.globals.seriesXvalues[D]=ne,f.globals.seriesYvalues[D]=fe,d.groupCtx.prevY.push(d.groupCtx.yArrj),d.groupCtx.prevYF.push(d.groupCtx.yArrjF),d.groupCtx.prevYVal.push(d.groupCtx.yArrjVal),d.groupCtx.prevX.push(d.groupCtx.xArrj),d.groupCtx.prevXF.push(d.groupCtx.xArrjF),d.groupCtx.prevXVal.push(d.groupCtx.xArrjVal),y.add(Me)},T=0,N=0;T<l.length;T++,N++)E(T,N);return y}},{key:"initialPositions",value:function(l,u,d,f,v,y,_){var A,E,T=this.w;if(this.isHorizontal){f=T.globals.gridHeight/T.globals.dataPoints;var N=T.config.plotOptions.bar.barHeight;A=String(N).indexOf("%")===-1?parseInt(N,10):f*parseInt(N,10)/100,y=T.globals.padHorizontal+(this.isReversed?T.globals.gridWidth-this.baseLineInvertedY:this.baseLineInvertedY),u=(f-A)/2}else{E=d=T.globals.gridWidth/T.globals.dataPoints;var U=T.config.plotOptions.bar.columnWidth;T.globals.isXNumeric&&T.globals.dataPoints>1?E=(d=T.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:String(U).indexOf("%")===-1?E=parseInt(U,10):E*=parseInt(U,10)/100,v=T.globals.gridHeight-this.baseLineY[_]-(this.isReversed?T.globals.gridHeight:0),l=T.globals.padHorizontal+(d-E)/2}var H=T.globals.barGroups.length||1;return{x:l,y:u,yDivision:f,xDivision:d,barHeight:A/H,barWidth:E/H,zeroH:v,zeroW:y}}},{key:"drawStackedBarPaths",value:function(l){for(var u,d=l.indexes,f=l.barHeight,v=l.strokeWidth,y=l.zeroW,_=l.x,A=l.y,E=l.columnGroupIndex,T=l.seriesGroup,N=l.yDivision,U=l.elSeries,H=this.w,X=A+E*f,Y=d.i,q=d.j,w=d.realIndex,D=d.translationsIndex,V=0,$=0;$<this.groupCtx.prevXF.length;$++)V+=this.groupCtx.prevXF[$][q];var Q;if((Q=T.indexOf(H.config.series[w].name))>0){var ne=y;this.groupCtx.prevXVal[Q-1][q]<0?ne=this.series[Y][q]>=0?this.groupCtx.prevX[Q-1][q]+V-2*(this.isReversed?V:0):this.groupCtx.prevX[Q-1][q]:this.groupCtx.prevXVal[Q-1][q]>=0&&(ne=this.series[Y][q]>=0?this.groupCtx.prevX[Q-1][q]:this.groupCtx.prevX[Q-1][q]-V+2*(this.isReversed?V:0)),u=ne}else u=y;_=this.series[Y][q]===null?u:u+this.series[Y][q]/this.invertedYRatio-2*(this.isReversed?this.series[Y][q]/this.invertedYRatio:0);var fe=this.barHelpers.getBarpaths({barYPosition:X,barHeight:f,x1:u,x2:_,strokeWidth:v,series:this.series,realIndex:d.realIndex,seriesGroup:T,i:Y,j:q,w:H});return this.barHelpers.barBackground({j:q,i:Y,y1:X,y2:f,elSeries:U}),A+=N,{pathTo:fe.pathTo,pathFrom:fe.pathFrom,goalX:this.barHelpers.getGoalValues("x",y,null,Y,q,D),barXPosition:u,barYPosition:X,x:_,y:A}}},{key:"drawStackedColumnPaths",value:function(l){var u=l.indexes,d=l.x,f=l.y,v=l.xDivision,y=l.barWidth,_=l.zeroH,A=l.columnGroupIndex,E=l.seriesGroup,T=l.elSeries,N=this.w,U=u.i,H=u.j,X=u.bc,Y=u.realIndex,q=u.translationsIndex;if(N.globals.isXNumeric){var w=N.globals.seriesX[Y][H];w||(w=0),d=(w-N.globals.minX)/this.xRatio-y/2*N.globals.barGroups.length}for(var D,V=d+A*y,$=0,Q=0;Q<this.groupCtx.prevYF.length;Q++)$+=isNaN(this.groupCtx.prevYF[Q][H])?0:this.groupCtx.prevYF[Q][H];var ne=U;if(E&&(ne=E.indexOf(N.globals.seriesNames[Y])),ne>0&&!N.globals.isXNumeric||ne>0&&N.globals.isXNumeric&&N.globals.seriesX[Y-1][H]===N.globals.seriesX[Y][H]){var fe,de,Me,Oe=Math.min(this.yRatio.length+1,Y+1);if(this.groupCtx.prevY[ne-1]!==void 0&&this.groupCtx.prevY[ne-1].length)for(var _e=1;_e<Oe;_e++){var Ne;if(!isNaN((Ne=this.groupCtx.prevY[ne-_e])===null||Ne===void 0?void 0:Ne[H])){Me=this.groupCtx.prevY[ne-_e][H];break}}for(var it=1;it<Oe;it++){var mt,St;if(((mt=this.groupCtx.prevYVal[ne-it])===null||mt===void 0?void 0:mt[H])<0){de=this.series[U][H]>=0?Me-$+2*(this.isReversed?$:0):Me;break}if(((St=this.groupCtx.prevYVal[ne-it])===null||St===void 0?void 0:St[H])>=0){de=this.series[U][H]>=0?Me:Me+$-2*(this.isReversed?$:0);break}}de===void 0&&(de=N.globals.gridHeight),D=(fe=this.groupCtx.prevYF[0])!==null&&fe!==void 0&&fe.every(function(Ft){return Ft===0})&&this.groupCtx.prevYF.slice(1,ne).every(function(Ft){return Ft.every(function(Rt){return isNaN(Rt)})})?_:de}else D=_;f=this.series[U][H]?D-this.series[U][H]/this.yRatio[q]+2*(this.isReversed?this.series[U][H]/this.yRatio[q]:0):D;var Mt=this.barHelpers.getColumnPaths({barXPosition:V,barWidth:y,y1:D,y2:f,yRatio:this.yRatio[q],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:E,realIndex:u.realIndex,i:U,j:H,w:N});return this.barHelpers.barBackground({bc:X,j:H,i:U,x1:V,x2:y,elSeries:T}),{pathTo:Mt.pathTo,pathFrom:Mt.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,_,U,H),barXPosition:V,x:N.globals.isXNumeric?d:d+v,y:f}}}]),a}(),nt=function(G){x(a,Ue);var r=P(a);function a(){return o(this,a),r.apply(this,arguments)}return h(a,[{key:"draw",value:function(l,u,d){var f=this,v=this.w,y=new Z(this.ctx),_=v.globals.comboCharts?u:v.config.chart.type,A=new rt(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=v.config.plotOptions.bar.horizontal;var E=new J(this.ctx,v);l=E.getLogSeries(l),this.series=l,this.yRatio=E.getLogYRatios(this.yRatio),this.barHelpers.initVariables(l);for(var T=y.group({class:"apexcharts-".concat(_,"-series apexcharts-plot-series")}),N=function(H){f.isBoxPlot=v.config.chart.type==="boxPlot"||v.config.series[H].type==="boxPlot";var X,Y,q,w,D=void 0,V=void 0,$=[],Q=[],ne=v.globals.comboCharts?d[H]:H,fe=f.barHelpers.getGroupIndex(ne).columnGroupIndex,de=y.group({class:"apexcharts-series",seriesName:R.escapeString(v.globals.seriesNames[ne]),rel:H+1,"data:realIndex":ne});f.ctx.series.addCollapsedClassToSeries(de,ne),l[H].length>0&&(f.visibleI=f.visibleI+1);var Me,Oe,_e=0;f.yRatio.length>1&&(f.yaxisIndex=v.globals.seriesYAxisReverseMap[ne][0],_e=ne);var Ne=f.barHelpers.initialPositions();V=Ne.y,Me=Ne.barHeight,Y=Ne.yDivision,w=Ne.zeroW,D=Ne.x,Oe=Ne.barWidth,X=Ne.xDivision,q=Ne.zeroH,Q.push(D+Oe/2);for(var it=y.group({class:"apexcharts-datalabels","data:realIndex":ne}),mt=function(Mt){var Ft=f.barHelpers.getStrokeWidth(H,Mt,ne),Rt=null,jt={indexes:{i:H,j:Mt,realIndex:ne,translationsIndex:_e},x:D,y:V,strokeWidth:Ft,elSeries:de};Rt=f.isHorizontal?f.drawHorizontalBoxPaths(i(i({},jt),{},{yDivision:Y,barHeight:Me,zeroW:w})):f.drawVerticalBoxPaths(i(i({},jt),{},{xDivision:X,barWidth:Oe,zeroH:q})),V=Rt.y,D=Rt.x,Mt>0&&Q.push(D+Oe/2),$.push(V),Rt.pathTo.forEach(function(vn,Pt){var gn=!f.isBoxPlot&&f.candlestickOptions.wick.useFillColor?Rt.color[Pt]:v.globals.stroke.colors[H],hi=A.fillPath({seriesNumber:ne,dataPointIndex:Mt,color:Rt.color[Pt],value:l[H][Mt]});f.renderSeries({realIndex:ne,pathFill:hi,lineFill:gn,j:Mt,i:H,pathFrom:Rt.pathFrom,pathTo:vn,strokeWidth:Ft,elSeries:de,x:D,y:V,series:l,columnGroupIndex:fe,barHeight:Me,barWidth:Oe,elDataLabelsWrap:it,visibleSeries:f.visibleI,type:v.config.chart.type})})},St=0;St<v.globals.dataPoints;St++)mt(St);v.globals.seriesXvalues[ne]=Q,v.globals.seriesYvalues[ne]=$,T.add(de)},U=0;U<l.length;U++)N(U);return T}},{key:"drawVerticalBoxPaths",value:function(l){var u=l.indexes,d=l.x;l.y;var f=l.xDivision,v=l.barWidth,y=l.zeroH,_=l.strokeWidth,A=this.w,E=new Z(this.ctx),T=u.i,N=u.j,U=!0,H=A.config.plotOptions.candlestick.colors.upward,X=A.config.plotOptions.candlestick.colors.downward,Y="";this.isBoxPlot&&(Y=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var q=this.yRatio[u.translationsIndex],w=u.realIndex,D=this.getOHLCValue(w,N),V=y,$=y;D.o>D.c&&(U=!1);var Q=Math.min(D.o,D.c),ne=Math.max(D.o,D.c),fe=D.m;A.globals.isXNumeric&&(d=(A.globals.seriesX[w][N]-A.globals.minX)/this.xRatio-v/2);var de=d+v*this.visibleI;this.series[T][N]===void 0||this.series[T][N]===null?(Q=y,ne=y):(Q=y-Q/q,ne=y-ne/q,V=y-D.h/q,$=y-D.l/q,fe=y-D.m/q);var Me=E.move(de,y),Oe=E.move(de+v/2,Q);return A.globals.previousPaths.length>0&&(Oe=this.getPreviousPath(w,N,!0)),Me=this.isBoxPlot?[E.move(de,Q)+E.line(de+v/2,Q)+E.line(de+v/2,V)+E.line(de+v/4,V)+E.line(de+v-v/4,V)+E.line(de+v/2,V)+E.line(de+v/2,Q)+E.line(de+v,Q)+E.line(de+v,fe)+E.line(de,fe)+E.line(de,Q+_/2),E.move(de,fe)+E.line(de+v,fe)+E.line(de+v,ne)+E.line(de+v/2,ne)+E.line(de+v/2,$)+E.line(de+v-v/4,$)+E.line(de+v/4,$)+E.line(de+v/2,$)+E.line(de+v/2,ne)+E.line(de,ne)+E.line(de,fe)+"z"]:[E.move(de,ne)+E.line(de+v/2,ne)+E.line(de+v/2,V)+E.line(de+v/2,ne)+E.line(de+v,ne)+E.line(de+v,Q)+E.line(de+v/2,Q)+E.line(de+v/2,$)+E.line(de+v/2,Q)+E.line(de,Q)+E.line(de,ne-_/2)],Oe+=E.move(de,Q),A.globals.isXNumeric||(d+=f),{pathTo:Me,pathFrom:Oe,x:d,y:ne,barXPosition:de,color:this.isBoxPlot?Y:U?[H]:[X]}}},{key:"drawHorizontalBoxPaths",value:function(l){var u=l.indexes;l.x;var d=l.y,f=l.yDivision,v=l.barHeight,y=l.zeroW,_=l.strokeWidth,A=this.w,E=new Z(this.ctx),T=u.i,N=u.j,U=this.boxOptions.colors.lower;this.isBoxPlot&&(U=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var H=this.invertedYRatio,X=u.realIndex,Y=this.getOHLCValue(X,N),q=y,w=y,D=Math.min(Y.o,Y.c),V=Math.max(Y.o,Y.c),$=Y.m;A.globals.isXNumeric&&(d=(A.globals.seriesX[X][N]-A.globals.minX)/this.invertedXRatio-v/2);var Q=d+v*this.visibleI;this.series[T][N]===void 0||this.series[T][N]===null?(D=y,V=y):(D=y+D/H,V=y+V/H,q=y+Y.h/H,w=y+Y.l/H,$=y+Y.m/H);var ne=E.move(y,Q),fe=E.move(D,Q+v/2);return A.globals.previousPaths.length>0&&(fe=this.getPreviousPath(X,N,!0)),ne=[E.move(D,Q)+E.line(D,Q+v/2)+E.line(q,Q+v/2)+E.line(q,Q+v/2-v/4)+E.line(q,Q+v/2+v/4)+E.line(q,Q+v/2)+E.line(D,Q+v/2)+E.line(D,Q+v)+E.line($,Q+v)+E.line($,Q)+E.line(D+_/2,Q),E.move($,Q)+E.line($,Q+v)+E.line(V,Q+v)+E.line(V,Q+v/2)+E.line(w,Q+v/2)+E.line(w,Q+v-v/4)+E.line(w,Q+v/4)+E.line(w,Q+v/2)+E.line(V,Q+v/2)+E.line(V,Q)+E.line($,Q)+"z"],fe+=E.move(D,Q),A.globals.isXNumeric||(d+=f),{pathTo:ne,pathFrom:fe,x:V,y:d,barYPosition:Q,color:U}}},{key:"getOHLCValue",value:function(l,u){var d=this.w;return{o:this.isBoxPlot?d.globals.seriesCandleH[l][u]:d.globals.seriesCandleO[l][u],h:this.isBoxPlot?d.globals.seriesCandleO[l][u]:d.globals.seriesCandleH[l][u],m:d.globals.seriesCandleM[l][u],l:this.isBoxPlot?d.globals.seriesCandleC[l][u]:d.globals.seriesCandleL[l][u],c:this.isBoxPlot?d.globals.seriesCandleL[l][u]:d.globals.seriesCandleC[l][u]}}}]),a}(),Lt=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"checkColorRange",value:function(){var r=this.w,a=!1,l=r.config.plotOptions[r.config.chart.type];return l.colorScale.ranges.length>0&&l.colorScale.ranges.map(function(u,d){u.from<=0&&(a=!0)}),a}},{key:"getShadeColor",value:function(r,a,l,u){var d=this.w,f=1,v=d.config.plotOptions[r].shadeIntensity,y=this.determineColor(r,a,l);d.globals.hasNegs||u?f=d.config.plotOptions[r].reverseNegativeShade?y.percent<0?y.percent/100*(1.25*v):(1-y.percent/100)*(1.25*v):y.percent<=0?1-(1+y.percent/100)*v:(1-y.percent/100)*v:(f=1-y.percent/100,r==="treemap"&&(f=(1-y.percent/100)*(1.25*v)));var _=y.color,A=new R;return d.config.plotOptions[r].enableShades&&(_=this.w.config.theme.mode==="dark"?R.hexToRgba(A.shadeColor(-1*f,y.color),d.config.fill.opacity):R.hexToRgba(A.shadeColor(f,y.color),d.config.fill.opacity)),{color:_,colorProps:y}}},{key:"determineColor",value:function(r,a,l){var u=this.w,d=u.globals.series[a][l],f=u.config.plotOptions[r],v=f.colorScale.inverse?l:a;f.distributed&&u.config.chart.type==="treemap"&&(v=l);var y=u.globals.colors[v],_=null,A=Math.min.apply(Math,z(u.globals.series[a])),E=Math.max.apply(Math,z(u.globals.series[a]));f.distributed||r!=="heatmap"||(A=u.globals.minY,E=u.globals.maxY),f.colorScale.min!==void 0&&(A=f.colorScale.min<u.globals.minY?f.colorScale.min:u.globals.minY,E=f.colorScale.max>u.globals.maxY?f.colorScale.max:u.globals.maxY);var T=Math.abs(E)+Math.abs(A),N=100*d/(T===0?T-1e-6:T);return f.colorScale.ranges.length>0&&f.colorScale.ranges.map(function(U,H){if(d>=U.from&&d<=U.to){y=U.color,_=U.foreColor?U.foreColor:null,A=U.from,E=U.to;var X=Math.abs(E)+Math.abs(A);N=100*d/(X===0?X-1e-6:X)}}),{color:y,foreColor:_,percent:N}}},{key:"calculateDataLabels",value:function(r){var a=r.text,l=r.x,u=r.y,d=r.i,f=r.j,v=r.colorProps,y=r.fontSize,_=this.w.config.dataLabels,A=new Z(this.ctx),E=new Je(this.ctx),T=null;if(_.enabled){T=A.group({class:"apexcharts-data-labels"});var N=_.offsetX,U=_.offsetY,H=l+N,X=u+parseFloat(_.style.fontSize)/3+U;E.plotDataLabelsText({x:H,y:X,text:a,i:d,j:f,color:v.foreColor,parent:T,fontSize:y,dataLabelsConfig:_})}return T}},{key:"addListeners",value:function(r){var a=new Z(this.ctx);r.node.addEventListener("mouseenter",a.pathMouseEnter.bind(this,r)),r.node.addEventListener("mouseleave",a.pathMouseLeave.bind(this,r)),r.node.addEventListener("mousedown",a.pathMouseDown.bind(this,r))}}]),G}(),$t=function(){function G(r,a){o(this,G),this.ctx=r,this.w=r.w,this.xRatio=a.xRatio,this.yRatio=a.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new Lt(r),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return h(G,[{key:"draw",value:function(r){var a=this.w,l=new Z(this.ctx),u=l.group({class:"apexcharts-heatmap"});u.attr("clip-path","url(#gridRectMask".concat(a.globals.cuid,")"));var d=a.globals.gridWidth/a.globals.dataPoints,f=a.globals.gridHeight/a.globals.series.length,v=0,y=!1;this.negRange=this.helpers.checkColorRange();var _=r.slice();a.config.yaxis[0].reversed&&(y=!0,_.reverse());for(var A=y?0:_.length-1;y?A<_.length:A>=0;y?A++:A--){var E=l.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:R.escapeString(a.globals.seriesNames[A]),rel:A+1,"data:realIndex":A});if(this.ctx.series.addCollapsedClassToSeries(E,A),a.config.chart.dropShadow.enabled){var T=a.config.chart.dropShadow;new W(this.ctx).dropShadow(E,T,A)}for(var N=0,U=a.config.plotOptions.heatmap.shadeIntensity,H=0;H<_[A].length;H++){var X=this.helpers.getShadeColor(a.config.chart.type,A,H,this.negRange),Y=X.color,q=X.colorProps;a.config.fill.type==="image"&&(Y=new rt(this.ctx).fillPath({seriesNumber:A,dataPointIndex:H,opacity:a.globals.hasNegs?q.percent<0?1-(1+q.percent/100):U+q.percent/100:q.percent/100,patternID:R.randomId(),width:a.config.fill.image.width?a.config.fill.image.width:d,height:a.config.fill.image.height?a.config.fill.image.height:f}));var w=this.rectRadius,D=l.drawRect(N,v,d,f,w);if(D.attr({cx:N,cy:v}),D.node.classList.add("apexcharts-heatmap-rect"),E.add(D),D.attr({fill:Y,i:A,index:A,j:H,val:r[A][H],"stroke-width":this.strokeWidth,stroke:a.config.plotOptions.heatmap.useFillColorAsStroke?Y:a.globals.stroke.colors[0],color:Y}),this.helpers.addListeners(D),a.config.chart.animations.enabled&&!a.globals.dataChanged){var V=1;a.globals.resized||(V=a.config.chart.animations.speed),this.animateHeatMap(D,N,v,d,f,V)}if(a.globals.dataChanged){var $=1;if(this.dynamicAnim.enabled&&a.globals.shouldAnimate){$=this.dynamicAnim.speed;var Q=a.globals.previousPaths[A]&&a.globals.previousPaths[A][H]&&a.globals.previousPaths[A][H].color;Q||(Q="rgba(255, 255, 255, 0)"),this.animateHeatColor(D,R.isColorHex(Q)?Q:R.rgb2hex(Q),R.isColorHex(Y)?Y:R.rgb2hex(Y),$)}}var ne=(0,a.config.dataLabels.formatter)(a.globals.series[A][H],{value:a.globals.series[A][H],seriesIndex:A,dataPointIndex:H,w:a}),fe=this.helpers.calculateDataLabels({text:ne,x:N+d/2,y:v+f/2,i:A,j:H,colorProps:q,series:_});fe!==null&&E.add(fe),N+=d}v+=f,u.add(E)}var de=a.globals.yAxisScale[0].result.slice();return a.config.yaxis[0].reversed?de.unshift(""):de.push(""),a.globals.yAxisScale[0].result=de,u}},{key:"animateHeatMap",value:function(r,a,l,u,d,f){var v=new O(this.ctx);v.animateRect(r,{x:a+u/2,y:l+d/2,width:0,height:0},{x:a,y:l,width:u,height:d},f,function(){v.animationCompleted(r)})}},{key:"animateHeatColor",value:function(r,a,l,u){r.attr({fill:a}).animate(u).attr({fill:l})}}]),G}(),bn=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"drawYAxisTexts",value:function(r,a,l,u){var d=this.w,f=d.config.yaxis[0],v=d.globals.yLabelFormatters[0];return new Z(this.ctx).drawText({x:r+f.labels.offsetX,y:a+f.labels.offsetY,text:v(u,l),textAnchor:"middle",fontSize:f.labels.style.fontSize,fontFamily:f.labels.style.fontFamily,foreColor:Array.isArray(f.labels.style.colors)?f.labels.style.colors[l]:f.labels.style.colors})}}]),G}(),Nn=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w;var a=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=a.globals.stroke.colors!==void 0?a.globals.stroke.colors:a.globals.colors,this.defaultSize=Math.min(a.globals.gridWidth,a.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=a.globals.gridWidth/2,a.config.chart.type==="radialBar"?this.fullAngle=360:this.fullAngle=Math.abs(a.config.plotOptions.pie.endAngle-a.config.plotOptions.pie.startAngle),this.initialAngle=a.config.plotOptions.pie.startAngle%this.fullAngle,a.globals.radialSize=this.defaultSize/2.05-a.config.stroke.width-(a.config.chart.sparkline.enabled?0:a.config.chart.dropShadow.blur),this.donutSize=a.globals.radialSize*parseInt(a.config.plotOptions.pie.donut.size,10)/100;var l=a.config.plotOptions.pie.customScale,u=a.globals.gridWidth/2,d=a.globals.gridHeight/2;this.translateX=u-u*l,this.translateY=d-d*l,this.dataLabelsGroup=new Z(this.ctx).group({class:"apexcharts-datalabels-group",transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(l,")")}),this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return h(G,[{key:"draw",value:function(r){var a=this,l=this.w,u=new Z(this.ctx),d=u.group({class:"apexcharts-pie"});if(l.globals.noData)return d;for(var f=0,v=0;v<r.length;v++)f+=R.negToZero(r[v]);var y=[],_=u.group();f===0&&(f=1e-5),r.forEach(function(w){a.maxY=Math.max(a.maxY,w)}),l.config.yaxis[0].max&&(this.maxY=l.config.yaxis[0].max),l.config.grid.position==="back"&&this.chartType==="polarArea"&&this.drawPolarElements(d);for(var A=0;A<r.length;A++){var E=this.fullAngle*R.negToZero(r[A])/f;y.push(E),this.chartType==="polarArea"?(y[A]=this.fullAngle/r.length,this.sliceSizes.push(l.globals.radialSize*r[A]/this.maxY)):this.sliceSizes.push(l.globals.radialSize)}if(l.globals.dataChanged){for(var T,N=0,U=0;U<l.globals.previousPaths.length;U++)N+=R.negToZero(l.globals.previousPaths[U]);for(var H=0;H<l.globals.previousPaths.length;H++)T=this.fullAngle*R.negToZero(l.globals.previousPaths[H])/N,this.prevSectorAngleArr.push(T)}if(this.donutSize<0&&(this.donutSize=0),this.chartType==="donut"){var X=u.drawCircle(this.donutSize);X.attr({cx:this.centerX,cy:this.centerY,fill:l.config.plotOptions.pie.donut.background?l.config.plotOptions.pie.donut.background:"transparent"}),_.add(X)}var Y=this.drawArcs(y,r);if(this.sliceLabels.forEach(function(w){Y.add(w)}),_.attr({transform:"translate(".concat(this.translateX,", ").concat(this.translateY,") scale(").concat(l.config.plotOptions.pie.customScale,")")}),_.add(Y),d.add(_),this.donutDataLabels.show){var q=this.renderInnerDataLabels(this.dataLabelsGroup,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});d.add(q)}return l.config.grid.position==="front"&&this.chartType==="polarArea"&&this.drawPolarElements(d),d}},{key:"drawArcs",value:function(r,a){var l=this.w,u=new W(this.ctx),d=new Z(this.ctx),f=new rt(this.ctx),v=d.group({class:"apexcharts-slices"}),y=this.initialAngle,_=this.initialAngle,A=this.initialAngle,E=this.initialAngle;this.strokeWidth=l.config.stroke.show?l.config.stroke.width:0;for(var T=0;T<r.length;T++){var N=d.group({class:"apexcharts-series apexcharts-pie-series",seriesName:R.escapeString(l.globals.seriesNames[T]),rel:T+1,"data:realIndex":T});v.add(N),_=E,A=(y=A)+r[T],E=_+this.prevSectorAngleArr[T];var U=A<y?this.fullAngle+A-y:A-y,H=f.fillPath({seriesNumber:T,size:this.sliceSizes[T],value:a[T]}),X=this.getChangedPath(_,E),Y=d.drawPath({d:X,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[T]:this.lineColorArr,strokeWidth:0,fill:H,fillOpacity:l.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(T)});if(Y.attr({index:0,j:T}),u.setSelectionFilter(Y,0,T),l.config.chart.dropShadow.enabled){var q=l.config.chart.dropShadow;u.dropShadow(Y,q,T)}this.addListeners(Y,this.donutDataLabels),Z.setAttrs(Y.node,{"data:angle":U,"data:startAngle":y,"data:strokeWidth":this.strokeWidth,"data:value":a[T]});var w={x:0,y:0};this.chartType==="pie"||this.chartType==="polarArea"?w=R.polarToCartesian(this.centerX,this.centerY,l.globals.radialSize/1.25+l.config.plotOptions.pie.dataLabels.offset,(y+U/2)%this.fullAngle):this.chartType==="donut"&&(w=R.polarToCartesian(this.centerX,this.centerY,(l.globals.radialSize+this.donutSize)/2+l.config.plotOptions.pie.dataLabels.offset,(y+U/2)%this.fullAngle)),N.add(Y);var D=0;if(!this.initialAnim||l.globals.resized||l.globals.dataChanged?this.animBeginArr.push(0):((D=U/this.fullAngle*l.config.chart.animations.speed)===0&&(D=1),this.animDur=D+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&l.globals.dataChanged?this.animatePaths(Y,{size:this.sliceSizes[T],endAngle:A,startAngle:y,prevStartAngle:_,prevEndAngle:E,animateStartingPos:!0,i:T,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:l.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(Y,{size:this.sliceSizes[T],endAngle:A,startAngle:y,i:T,totalItems:r.length-1,animBeginArr:this.animBeginArr,dur:D}),l.config.plotOptions.pie.expandOnClick&&this.chartType!=="polarArea"&&Y.node.addEventListener("mouseup",this.pieClicked.bind(this,T)),l.globals.selectedDataPoints[0]!==void 0&&l.globals.selectedDataPoints[0].indexOf(T)>-1&&this.pieClicked(T),l.config.dataLabels.enabled){var V=w.x,$=w.y,Q=100*U/this.fullAngle+"%";if(U!==0&&l.config.plotOptions.pie.dataLabels.minAngleToShowLabel<r[T]){var ne=l.config.dataLabels.formatter;ne!==void 0&&(Q=ne(l.globals.seriesPercent[T][0],{seriesIndex:T,w:l}));var fe=l.globals.dataLabels.style.colors[T],de=d.group({class:"apexcharts-datalabels"}),Me=d.drawText({x:V,y:$,text:Q,textAnchor:"middle",fontSize:l.config.dataLabels.style.fontSize,fontFamily:l.config.dataLabels.style.fontFamily,fontWeight:l.config.dataLabels.style.fontWeight,foreColor:fe});if(de.add(Me),l.config.dataLabels.dropShadow.enabled){var Oe=l.config.dataLabels.dropShadow;u.dropShadow(Me,Oe)}Me.node.classList.add("apexcharts-pie-label"),l.config.chart.animations.animate&&l.globals.resized===!1&&(Me.node.classList.add("apexcharts-pie-label-delay"),Me.node.style.animationDelay=l.config.chart.animations.speed/940+"s"),this.sliceLabels.push(de)}}}return v}},{key:"addListeners",value:function(r,a){var l=new Z(this.ctx);r.node.addEventListener("mouseenter",l.pathMouseEnter.bind(this,r)),r.node.addEventListener("mouseleave",l.pathMouseLeave.bind(this,r)),r.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,r.node,a)),r.node.addEventListener("mousedown",l.pathMouseDown.bind(this,r)),this.donutDataLabels.total.showAlways||(r.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,r.node,a)),r.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,r.node,a)))}},{key:"animatePaths",value:function(r,a){var l=this.w,u=a.endAngle<a.startAngle?this.fullAngle+a.endAngle-a.startAngle:a.endAngle-a.startAngle,d=u,f=a.startAngle,v=a.startAngle;a.prevStartAngle!==void 0&&a.prevEndAngle!==void 0&&(f=a.prevEndAngle,d=a.prevEndAngle<a.prevStartAngle?this.fullAngle+a.prevEndAngle-a.prevStartAngle:a.prevEndAngle-a.prevStartAngle),a.i===l.config.series.length-1&&(u+v>this.fullAngle?a.endAngle=a.endAngle-(u+v):u+v<this.fullAngle&&(a.endAngle=a.endAngle+(this.fullAngle-(u+v)))),u===this.fullAngle&&(u=this.fullAngle-.01),this.animateArc(r,f,v,u,d,a)}},{key:"animateArc",value:function(r,a,l,u,d,f){var v,y=this,_=this.w,A=new O(this.ctx),E=f.size;(isNaN(a)||isNaN(d))&&(a=l,d=u,f.dur=0);var T=u,N=l,U=a<l?this.fullAngle+a-l:a-l;_.globals.dataChanged&&f.shouldSetPrevPaths&&f.prevEndAngle&&(v=y.getPiePath({me:y,startAngle:f.prevStartAngle,angle:f.prevEndAngle<f.prevStartAngle?this.fullAngle+f.prevEndAngle-f.prevStartAngle:f.prevEndAngle-f.prevStartAngle,size:E}),r.attr({d:v})),f.dur!==0?r.animate(f.dur,_.globals.easing,f.animBeginArr[f.i]).afterAll(function(){y.chartType!=="pie"&&y.chartType!=="donut"&&y.chartType!=="polarArea"||this.animate(_.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":y.strokeWidth}),f.i===_.config.series.length-1&&A.animationCompleted(r)}).during(function(H){T=U+(u-U)*H,f.animateStartingPos&&(T=d+(u-d)*H,N=a-d+(l-(a-d))*H),v=y.getPiePath({me:y,startAngle:N,angle:T,size:E}),r.node.setAttribute("data:pathOrig",v),r.attr({d:v})}):(v=y.getPiePath({me:y,startAngle:N,angle:u,size:E}),f.isTrack||(_.globals.animationEnded=!0),r.node.setAttribute("data:pathOrig",v),r.attr({d:v,"stroke-width":y.strokeWidth}))}},{key:"pieClicked",value:function(r){var a,l=this.w,u=this,d=u.sliceSizes[r]+(l.config.plotOptions.pie.expandOnClick?4:0),f=l.globals.dom.Paper.select(".apexcharts-".concat(u.chartType.toLowerCase(),"-slice-").concat(r)).members[0];if(f.attr("data:pieClicked")!=="true"){var v=l.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(v,function(E){E.setAttribute("data:pieClicked","false");var T=E.getAttribute("data:pathOrig");T&&E.setAttribute("d",T)}),l.globals.capturedDataPointIndex=r,f.attr("data:pieClicked","true");var y=parseInt(f.attr("data:startAngle"),10),_=parseInt(f.attr("data:angle"),10);a=u.getPiePath({me:u,startAngle:y,angle:_,size:d}),_!==360&&f.plot(a)}else{f.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(f.node,this.donutDataLabels);var A=f.attr("data:pathOrig");f.attr({d:A})}}},{key:"getChangedPath",value:function(r,a){var l="";return this.dynamicAnim&&this.w.globals.dataChanged&&(l=this.getPiePath({me:this,startAngle:r,angle:a-r,size:this.size})),l}},{key:"getPiePath",value:function(r){var a,l=r.me,u=r.startAngle,d=r.angle,f=r.size,v=new Z(this.ctx),y=u,_=Math.PI*(y-90)/180,A=d+u;Math.ceil(A)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(A=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(A)>this.fullAngle&&(A-=this.fullAngle);var E=Math.PI*(A-90)/180,T=l.centerX+f*Math.cos(_),N=l.centerY+f*Math.sin(_),U=l.centerX+f*Math.cos(E),H=l.centerY+f*Math.sin(E),X=R.polarToCartesian(l.centerX,l.centerY,l.donutSize,A),Y=R.polarToCartesian(l.centerX,l.centerY,l.donutSize,y),q=d>180?1:0,w=["M",T,N,"A",f,f,0,q,1,U,H];return a=l.chartType==="donut"?[].concat(w,["L",X.x,X.y,"A",l.donutSize,l.donutSize,0,q,0,Y.x,Y.y,"L",T,N,"z"]).join(" "):l.chartType==="pie"||l.chartType==="polarArea"?[].concat(w,["L",l.centerX,l.centerY,"L",T,N]).join(" "):[].concat(w).join(" "),v.roundPathCorners(a,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(r){var a=this.w,l=new oe(this.ctx),u=new Z(this.ctx),d=new bn(this.ctx),f=u.group(),v=u.group(),y=l.niceScale(0,Math.ceil(this.maxY),0),_=y.result.reverse(),A=y.result.length;this.maxY=y.niceMax;for(var E=a.globals.radialSize,T=E/(A-1),N=0;N<A-1;N++){var U=u.drawCircle(E);if(U.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":a.config.plotOptions.polarArea.rings.strokeWidth,stroke:a.config.plotOptions.polarArea.rings.strokeColor}),a.config.yaxis[0].show){var H=d.drawYAxisTexts(this.centerX,this.centerY-E+parseInt(a.config.yaxis[0].labels.style.fontSize,10)/2,N,_[N]);v.add(H)}f.add(U),E-=T}this.drawSpokes(r),r.add(f),r.add(v)}},{key:"renderInnerDataLabels",value:function(r,a,l){var u=this.w,d=new Z(this.ctx),f=a.total.show;r.node.innerHTML="",r.node.style.opacity=l.opacity;var v,y,_=l.centerX,A=l.centerY;v=a.name.color===void 0?u.globals.colors[0]:a.name.color;var E=a.name.fontSize,T=a.name.fontFamily,N=a.name.fontWeight;y=a.value.color===void 0?u.config.chart.foreColor:a.value.color;var U=a.value.formatter,H="",X="";if(f?(v=a.total.color,E=a.total.fontSize,T=a.total.fontFamily,N=a.total.fontWeight,X=a.total.label,H=a.total.formatter(u)):u.globals.series.length===1&&(H=U(u.globals.series[0],u),X=u.globals.seriesNames[0]),X&&(X=a.name.formatter(X,a.total.show,u)),a.name.show){var Y=d.drawText({x:_,y:A+parseFloat(a.name.offsetY),text:X,textAnchor:"middle",foreColor:v,fontSize:E,fontWeight:N,fontFamily:T});Y.node.classList.add("apexcharts-datalabel-label"),r.add(Y)}if(a.value.show){var q=a.name.show?parseFloat(a.value.offsetY)+16:a.value.offsetY,w=d.drawText({x:_,y:A+q,text:H,textAnchor:"middle",foreColor:y,fontWeight:a.value.fontWeight,fontSize:a.value.fontSize,fontFamily:a.value.fontFamily});w.node.classList.add("apexcharts-datalabel-value"),r.add(w)}return r}},{key:"printInnerLabels",value:function(r,a,l,u){var d,f=this.w;u?d=r.name.color===void 0?f.globals.colors[parseInt(u.parentNode.getAttribute("rel"),10)-1]:r.name.color:f.globals.series.length>1&&r.total.show&&(d=r.total.color);var v=f.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),y=f.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");l=(0,r.value.formatter)(l,f),u||typeof r.total.formatter!="function"||(l=r.total.formatter(f));var _=a===r.total.label;a=r.name.formatter(a,_,f),v!==null&&(v.textContent=a),y!==null&&(y.textContent=l),v!==null&&(v.style.fill=d)}},{key:"printDataLabelsInner",value:function(r,a){var l=this.w,u=r.getAttribute("data:value"),d=l.globals.seriesNames[parseInt(r.parentNode.getAttribute("rel"),10)-1];l.globals.series.length>1&&this.printInnerLabels(a,d,u,r);var f=l.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");f!==null&&(f.style.opacity=1)}},{key:"drawSpokes",value:function(r){var a=this,l=this.w,u=new Z(this.ctx),d=l.config.plotOptions.polarArea.spokes;if(d.strokeWidth!==0){for(var f=[],v=360/l.globals.series.length,y=0;y<l.globals.series.length;y++)f.push(R.polarToCartesian(this.centerX,this.centerY,l.globals.radialSize,l.config.plotOptions.pie.startAngle+v*y));f.forEach(function(_,A){var E=u.drawLine(_.x,_.y,a.centerX,a.centerY,Array.isArray(d.connectorColors)?d.connectorColors[A]:d.connectorColors);r.add(E)})}}},{key:"revertDataLabelsInner",value:function(){var r=this.w;if(this.donutDataLabels.show){var a=r.globals.dom.Paper.select(".apexcharts-datalabels-group").members[0],l=this.renderInnerDataLabels(a,this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show});r.globals.dom.Paper.select(".apexcharts-radialbar, .apexcharts-pie").members[0].add(l)}}}]),G}(),rn=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var a=this.w;this.graphics=new Z(this.ctx),this.lineColorArr=a.globals.stroke.colors!==void 0?a.globals.stroke.colors:a.globals.colors,this.defaultSize=a.globals.svgHeight<a.globals.svgWidth?a.globals.gridHeight+1.5*a.globals.goldenPadding:a.globals.gridWidth,this.isLog=a.config.yaxis[0].logarithmic,this.logBase=a.config.yaxis[0].logBase,this.coreUtils=new J(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,a.globals.maxY,0):a.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):a.globals.minY,this.polygons=a.config.plotOptions.radar.polygons,this.strokeWidth=a.config.stroke.show?a.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-a.config.chart.dropShadow.blur,a.config.xaxis.labels.show&&(this.size=this.size-a.globals.xAxisLabelsWidth/1.75),a.config.plotOptions.radar.size!==void 0&&(this.size=a.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return h(G,[{key:"draw",value:function(r){var a=this,l=this.w,u=new rt(this.ctx),d=[],f=new Je(this.ctx);r.length&&(this.dataPointsLen=r[l.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var v=l.globals.gridWidth/2,y=l.globals.gridHeight/2,_=v+l.config.plotOptions.radar.offsetX,A=y+l.config.plotOptions.radar.offsetY,E=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(_||0,", ").concat(A||0,")")}),T=[],N=null,U=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),r.forEach(function(X,Y){var q=X.length===l.globals.dataPoints,w=a.graphics.group().attr({class:"apexcharts-series","data:longestSeries":q,seriesName:R.escapeString(l.globals.seriesNames[Y]),rel:Y+1,"data:realIndex":Y});a.dataRadiusOfPercent[Y]=[],a.dataRadius[Y]=[],a.angleArr[Y]=[],X.forEach(function(_e,Ne){var it=Math.abs(a.maxValue-a.minValue);_e-=a.minValue,a.isLog&&(_e=a.coreUtils.getLogVal(a.logBase,_e,0)),a.dataRadiusOfPercent[Y][Ne]=_e/it,a.dataRadius[Y][Ne]=a.dataRadiusOfPercent[Y][Ne]*a.size,a.angleArr[Y][Ne]=Ne*a.disAngle}),T=a.getDataPointsPos(a.dataRadius[Y],a.angleArr[Y]);var D=a.createPaths(T,{x:0,y:0});N=a.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),U=a.graphics.group({class:"apexcharts-datalabels","data:realIndex":Y}),l.globals.delayedElements.push({el:N.node,index:Y});var V={i:Y,realIndex:Y,animationDelay:Y,initialSpeed:l.config.chart.animations.speed,dataChangeSpeed:l.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:l.globals.stroke.colors[Y],strokeLineCap:l.config.stroke.lineCap},$=null;l.globals.previousPaths.length>0&&($=a.getPreviousPath(Y));for(var Q=0;Q<D.linePathsTo.length;Q++){var ne=a.graphics.renderPaths(i(i({},V),{},{pathFrom:$===null?D.linePathsFrom[Q]:$,pathTo:D.linePathsTo[Q],strokeWidth:Array.isArray(a.strokeWidth)?a.strokeWidth[Y]:a.strokeWidth,fill:"none",drawShadow:!1}));w.add(ne);var fe=u.fillPath({seriesNumber:Y}),de=a.graphics.renderPaths(i(i({},V),{},{pathFrom:$===null?D.areaPathsFrom[Q]:$,pathTo:D.areaPathsTo[Q],strokeWidth:0,fill:fe,drawShadow:!1}));if(l.config.chart.dropShadow.enabled){var Me=new W(a.ctx),Oe=l.config.chart.dropShadow;Me.dropShadow(de,Object.assign({},Oe,{noUserSpaceOnUse:!0}),Y)}w.add(de)}X.forEach(function(_e,Ne){var it=new Te(a.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:Y,dataPointIndex:Ne}),mt=a.graphics.drawMarker(T[Ne].x,T[Ne].y,it);mt.attr("rel",Ne),mt.attr("j",Ne),mt.attr("index",Y),mt.node.setAttribute("default-marker-size",it.pSize);var St=a.graphics.group({class:"apexcharts-series-markers"});St&&St.add(mt),N.add(St),w.add(N);var Mt=l.config.dataLabels;if(Mt.enabled){var Ft=Mt.formatter(l.globals.series[Y][Ne],{seriesIndex:Y,dataPointIndex:Ne,w:l});f.plotDataLabelsText({x:T[Ne].x,y:T[Ne].y,text:Ft,textAnchor:"middle",i:Y,j:Y,parent:U,offsetCorrection:!1,dataLabelsConfig:i({},Mt)})}w.add(U)}),d.push(w)}),this.drawPolygons({parent:E}),l.config.xaxis.labels.show){var H=this.drawXAxisTexts();E.add(H)}return d.forEach(function(X){E.add(X)}),E.add(this.yaxisLabels),E}},{key:"drawPolygons",value:function(r){for(var a=this,l=this.w,u=r.parent,d=new bn(this.ctx),f=l.globals.yAxisScale[0].result.reverse(),v=f.length,y=[],_=this.size/(v-1),A=0;A<v;A++)y[A]=_*A;y.reverse();var E=[],T=[];y.forEach(function(N,U){var H=R.getPolygonPos(N,a.dataPointsLen),X="";H.forEach(function(Y,q){if(U===0){var w=a.graphics.drawLine(Y.x,Y.y,0,0,Array.isArray(a.polygons.connectorColors)?a.polygons.connectorColors[q]:a.polygons.connectorColors);T.push(w)}q===0&&a.yaxisLabelsTextsPos.push({x:Y.x,y:Y.y}),X+=Y.x+","+Y.y+" "}),E.push(X)}),E.forEach(function(N,U){var H=a.polygons.strokeColors,X=a.polygons.strokeWidth,Y=a.graphics.drawPolygon(N,Array.isArray(H)?H[U]:H,Array.isArray(X)?X[U]:X,l.globals.radarPolygons.fill.colors[U]);u.add(Y)}),T.forEach(function(N){u.add(N)}),l.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach(function(N,U){var H=d.drawYAxisTexts(N.x,N.y,U,f[U]);a.yaxisLabels.add(H)})}},{key:"drawXAxisTexts",value:function(){var r=this,a=this.w,l=a.config.xaxis.labels,u=this.graphics.group({class:"apexcharts-xaxis"}),d=R.getPolygonPos(this.size,this.dataPointsLen);return a.globals.labels.forEach(function(f,v){var y=a.config.xaxis.labels.formatter,_=new Je(r.ctx);if(d[v]){var A=r.getTextPos(d[v],r.size),E=y(f,{seriesIndex:-1,dataPointIndex:v,w:a});_.plotDataLabelsText({x:A.newX,y:A.newY,text:E,textAnchor:A.textAnchor,i:v,j:v,parent:u,className:"apexcharts-xaxis-label",color:Array.isArray(l.style.colors)&&l.style.colors[v]?l.style.colors[v]:"#a8a8a8",dataLabelsConfig:i({textAnchor:A.textAnchor,dropShadow:{enabled:!1}},l),offsetCorrection:!1}).on("click",function(T){if(typeof a.config.chart.events.xAxisLabelClick=="function"){var N=Object.assign({},a,{labelIndex:v});a.config.chart.events.xAxisLabelClick(T,r.ctx,N)}})}}),u}},{key:"createPaths",value:function(r,a){var l=this,u=[],d=[],f=[],v=[];if(r.length){d=[this.graphics.move(a.x,a.y)],v=[this.graphics.move(a.x,a.y)];var y=this.graphics.move(r[0].x,r[0].y),_=this.graphics.move(r[0].x,r[0].y);r.forEach(function(A,E){y+=l.graphics.line(A.x,A.y),_+=l.graphics.line(A.x,A.y),E===r.length-1&&(y+="Z",_+="Z")}),u.push(y),f.push(_)}return{linePathsFrom:d,linePathsTo:u,areaPathsFrom:v,areaPathsTo:f}}},{key:"getTextPos",value:function(r,a){var l="middle",u=r.x,d=r.y;return Math.abs(r.x)>=10?r.x>0?(l="start",u+=10):r.x<0&&(l="end",u-=10):l="middle",Math.abs(r.y)>=a-10&&(r.y<0?d-=10:r.y>0&&(d+=10)),{textAnchor:l,newX:u,newY:d}}},{key:"getPreviousPath",value:function(r){for(var a=this.w,l=null,u=0;u<a.globals.previousPaths.length;u++){var d=a.globals.previousPaths[u];d.paths.length>0&&parseInt(d.realIndex,10)===parseInt(r,10)&&a.globals.previousPaths[u].paths[0]!==void 0&&(l=a.globals.previousPaths[u].paths[0].d)}return l}},{key:"getDataPointsPos",value:function(r,a){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.dataPointsLen;r=r||[],a=a||[];for(var u=[],d=0;d<l;d++){var f={};f.x=r[d]*Math.sin(a[d]),f.y=-r[d]*Math.cos(a[d]),u.push(f)}return u}}]),G}(),Yi=function(G){x(a,Nn);var r=P(a);function a(l){var u;o(this,a),(u=r.call(this,l)).ctx=l,u.w=l.w,u.animBeginArr=[0],u.animDur=0;var d=u.w;return u.startAngle=d.config.plotOptions.radialBar.startAngle,u.endAngle=d.config.plotOptions.radialBar.endAngle,u.totalAngle=Math.abs(d.config.plotOptions.radialBar.endAngle-d.config.plotOptions.radialBar.startAngle),u.trackStartAngle=d.config.plotOptions.radialBar.track.startAngle,u.trackEndAngle=d.config.plotOptions.radialBar.track.endAngle,u.barLabels=u.w.config.plotOptions.radialBar.barLabels,u.donutDataLabels=u.w.config.plotOptions.radialBar.dataLabels,u.radialDataLabels=u.donutDataLabels,u.trackStartAngle||(u.trackStartAngle=u.startAngle),u.trackEndAngle||(u.trackEndAngle=u.endAngle),u.endAngle===360&&(u.endAngle=359.99),u.margin=parseInt(d.config.plotOptions.radialBar.track.margin,10),u.onBarLabelClick=u.onBarLabelClick.bind(M(u)),u}return h(a,[{key:"draw",value:function(l){var u=this.w,d=new Z(this.ctx),f=d.group({class:"apexcharts-radialbar"});if(u.globals.noData)return f;var v=d.group(),y=this.defaultSize/2,_=u.globals.gridWidth/2,A=this.defaultSize/2.05;u.config.chart.sparkline.enabled||(A=A-u.config.stroke.width-u.config.chart.dropShadow.blur);var E=u.globals.fill.colors;if(u.config.plotOptions.radialBar.track.show){var T=this.drawTracks({size:A,centerX:_,centerY:y,colorArr:E,series:l});v.add(T)}var N=this.drawArcs({size:A,centerX:_,centerY:y,colorArr:E,series:l}),U=360;u.config.plotOptions.radialBar.startAngle<0&&(U=this.totalAngle);var H=(360-U)/360;if(u.globals.radialSize=A-A*H,this.radialDataLabels.value.show){var X=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);u.globals.radialSize+=X*H}return v.add(N.g),u.config.plotOptions.radialBar.hollow.position==="front"&&(N.g.add(N.elHollow),N.dataLabels&&N.g.add(N.dataLabels)),f.add(v),f}},{key:"drawTracks",value:function(l){var u=this.w,d=new Z(this.ctx),f=d.group({class:"apexcharts-tracks"}),v=new W(this.ctx),y=new rt(this.ctx),_=this.getStrokeWidth(l);l.size=l.size-_/2;for(var A=0;A<l.series.length;A++){var E=d.group({class:"apexcharts-radialbar-track apexcharts-track"});f.add(E),E.attr({rel:A+1}),l.size=l.size-_-this.margin;var T=u.config.plotOptions.radialBar.track,N=y.fillPath({seriesNumber:0,size:l.size,fillColors:Array.isArray(T.background)?T.background[A]:T.background,solid:!0}),U=this.trackStartAngle,H=this.trackEndAngle;Math.abs(H)+Math.abs(U)>=360&&(H=360-Math.abs(this.startAngle)-.1);var X=d.drawPath({d:"",stroke:N,strokeWidth:_*parseInt(T.strokeWidth,10)/100,fill:"none",strokeOpacity:T.opacity,classes:"apexcharts-radialbar-area"});if(T.dropShadow.enabled){var Y=T.dropShadow;v.dropShadow(X,Y)}E.add(X),X.attr("id","apexcharts-radialbarTrack-"+A),this.animatePaths(X,{centerX:l.centerX,centerY:l.centerY,endAngle:H,startAngle:U,size:l.size,i:A,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:u.globals.easing})}return f}},{key:"drawArcs",value:function(l){var u=this.w,d=new Z(this.ctx),f=new rt(this.ctx),v=new W(this.ctx),y=d.group(),_=this.getStrokeWidth(l);l.size=l.size-_/2;var A=u.config.plotOptions.radialBar.hollow.background,E=l.size-_*l.series.length-this.margin*l.series.length-_*parseInt(u.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,T=E-u.config.plotOptions.radialBar.hollow.margin;u.config.plotOptions.radialBar.hollow.image!==void 0&&(A=this.drawHollowImage(l,y,E,A));var N=this.drawHollow({size:T,centerX:l.centerX,centerY:l.centerY,fill:A||"transparent"});if(u.config.plotOptions.radialBar.hollow.dropShadow.enabled){var U=u.config.plotOptions.radialBar.hollow.dropShadow;v.dropShadow(N,U)}var H=1;!this.radialDataLabels.total.show&&u.globals.series.length>1&&(H=0);var X=null;if(this.radialDataLabels.show){var Y=u.globals.dom.Paper.select(".apexcharts-datalabels-group").members[0];X=this.renderInnerDataLabels(Y,this.radialDataLabels,{hollowSize:E,centerX:l.centerX,centerY:l.centerY,opacity:H})}u.config.plotOptions.radialBar.hollow.position==="back"&&(y.add(N),X&&y.add(X));var q=!1;u.config.plotOptions.radialBar.inverseOrder&&(q=!0);for(var w=q?l.series.length-1:0;q?w>=0:w<l.series.length;q?w--:w++){var D=d.group({class:"apexcharts-series apexcharts-radial-series",seriesName:R.escapeString(u.globals.seriesNames[w])});y.add(D),D.attr({rel:w+1,"data:realIndex":w}),this.ctx.series.addCollapsedClassToSeries(D,w),l.size=l.size-_-this.margin;var V=f.fillPath({seriesNumber:w,size:l.size,value:l.series[w]}),$=this.startAngle,Q=void 0,ne=R.negToZero(l.series[w]>100?100:l.series[w])/100,fe=Math.round(this.totalAngle*ne)+this.startAngle,de=void 0;u.globals.dataChanged&&(Q=this.startAngle,de=Math.round(this.totalAngle*R.negToZero(u.globals.previousPaths[w])/100)+Q),Math.abs(fe)+Math.abs($)>=360&&(fe-=.01),Math.abs(de)+Math.abs(Q)>=360&&(de-=.01);var Me=fe-$,Oe=Array.isArray(u.config.stroke.dashArray)?u.config.stroke.dashArray[w]:u.config.stroke.dashArray,_e=d.drawPath({d:"",stroke:V,strokeWidth:_,fill:"none",fillOpacity:u.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+w,strokeDashArray:Oe});if(Z.setAttrs(_e.node,{"data:angle":Me,"data:value":l.series[w]}),u.config.chart.dropShadow.enabled){var Ne=u.config.chart.dropShadow;v.dropShadow(_e,Ne,w)}if(v.setSelectionFilter(_e,0,w),this.addListeners(_e,this.radialDataLabels),D.add(_e),_e.attr({index:0,j:w}),this.barLabels.enabled){var it=R.polarToCartesian(l.centerX,l.centerY,l.size,$),mt=this.barLabels.formatter(u.globals.seriesNames[w],{seriesIndex:w,w:u}),St=["apexcharts-radialbar-label"];this.barLabels.onClick||St.push("apexcharts-no-click");var Mt=this.barLabels.useSeriesColors?u.globals.colors[w]:u.config.chart.foreColor;Mt||(Mt=u.config.chart.foreColor);var Ft=it.x-this.barLabels.margin,Rt=it.y,jt=d.drawText({x:Ft,y:Rt,text:mt,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:Mt,cssClass:St.join(" ")});jt.on("click",this.onBarLabelClick),jt.attr({rel:w+1}),$!==0&&jt.attr({"transform-origin":"".concat(Ft," ").concat(Rt),transform:"rotate(".concat($," 0 0)")}),D.add(jt)}var vn=0;!this.initialAnim||u.globals.resized||u.globals.dataChanged||(vn=u.config.chart.animations.speed),u.globals.dataChanged&&(vn=u.config.chart.animations.dynamicAnimation.speed),this.animDur=vn/(1.2*l.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(_e,{centerX:l.centerX,centerY:l.centerY,endAngle:fe,startAngle:$,prevEndAngle:de,prevStartAngle:Q,size:l.size,i:w,totalItems:2,animBeginArr:this.animBeginArr,dur:vn,shouldSetPrevPaths:!0,easing:u.globals.easing})}return{g:y,elHollow:N,dataLabels:X}}},{key:"drawHollow",value:function(l){var u=new Z(this.ctx).drawCircle(2*l.size);return u.attr({class:"apexcharts-radialbar-hollow",cx:l.centerX,cy:l.centerY,r:l.size,fill:l.fill}),u}},{key:"drawHollowImage",value:function(l,u,d,f){var v=this.w,y=new rt(this.ctx),_=R.randomId(),A=v.config.plotOptions.radialBar.hollow.image;if(v.config.plotOptions.radialBar.hollow.imageClipped)y.clippedImgArea({width:d,height:d,image:A,patternID:"pattern".concat(v.globals.cuid).concat(_)}),f="url(#pattern".concat(v.globals.cuid).concat(_,")");else{var E=v.config.plotOptions.radialBar.hollow.imageWidth,T=v.config.plotOptions.radialBar.hollow.imageHeight;if(E===void 0&&T===void 0){var N=v.globals.dom.Paper.image(A).loaded(function(H){this.move(l.centerX-H.width/2+v.config.plotOptions.radialBar.hollow.imageOffsetX,l.centerY-H.height/2+v.config.plotOptions.radialBar.hollow.imageOffsetY)});u.add(N)}else{var U=v.globals.dom.Paper.image(A).loaded(function(H){this.move(l.centerX-E/2+v.config.plotOptions.radialBar.hollow.imageOffsetX,l.centerY-T/2+v.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(E,T)});u.add(U)}}return f}},{key:"getStrokeWidth",value:function(l){var u=this.w;return l.size*(100-parseInt(u.config.plotOptions.radialBar.hollow.size,10))/100/(l.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(l){var u=parseInt(l.target.getAttribute("rel"),10)-1,d=this.barLabels.onClick,f=this.w;d&&d(f.globals.seriesNames[u],{w:f,seriesIndex:u})}}]),a}(),Ii=function(G){x(a,Ue);var r=P(a);function a(){return o(this,a),r.apply(this,arguments)}return h(a,[{key:"draw",value:function(l,u){var d=this.w,f=new Z(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=l,this.seriesRangeStart=d.globals.seriesRangeStart,this.seriesRangeEnd=d.globals.seriesRangeEnd,this.barHelpers.initVariables(l);for(var v=f.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),y=0;y<l.length;y++){var _,A,E,T,N=void 0,U=void 0,H=d.globals.comboCharts?u[y]:y,X=this.barHelpers.getGroupIndex(H).columnGroupIndex,Y=f.group({class:"apexcharts-series",seriesName:R.escapeString(d.globals.seriesNames[H]),rel:y+1,"data:realIndex":H});this.ctx.series.addCollapsedClassToSeries(Y,H),l[y].length>0&&(this.visibleI=this.visibleI+1);var q=0,w=0,D=0;this.yRatio.length>1&&(this.yaxisIndex=d.globals.seriesYAxisReverseMap[H][0],D=H);var V=this.barHelpers.initialPositions();U=V.y,T=V.zeroW,N=V.x,w=V.barWidth,q=V.barHeight,_=V.xDivision,A=V.yDivision,E=V.zeroH;for(var $=f.group({class:"apexcharts-datalabels","data:realIndex":H}),Q=f.group({class:"apexcharts-rangebar-goals-markers"}),ne=0;ne<d.globals.dataPoints;ne++){var fe=this.barHelpers.getStrokeWidth(y,ne,H),de=this.seriesRangeStart[y][ne],Me=this.seriesRangeEnd[y][ne],Oe=null,_e=null,Ne=null,it={x:N,y:U,strokeWidth:fe,elSeries:Y},mt=this.seriesLen;if(d.config.plotOptions.bar.rangeBarGroupRows&&(mt=1),d.config.series[y].data[ne]===void 0)break;if(this.isHorizontal){Ne=U+q*this.visibleI;var St=(A-q*mt)/2;if(d.config.series[y].data[ne].x){var Mt=this.detectOverlappingBars({i:y,j:ne,barYPosition:Ne,srty:St,barHeight:q,yDivision:A,initPositions:V});q=Mt.barHeight,Ne=Mt.barYPosition}w=(Oe=this.drawRangeBarPaths(i({indexes:{i:y,j:ne,realIndex:H},barHeight:q,barYPosition:Ne,zeroW:T,yDivision:A,y1:de,y2:Me},it))).barWidth}else{d.globals.isXNumeric&&(N=(d.globals.seriesX[y][ne]-d.globals.minX)/this.xRatio-w/2),_e=N+w*this.visibleI;var Ft=(_-w*mt)/2;if(d.config.series[y].data[ne].x){var Rt=this.detectOverlappingBars({i:y,j:ne,barXPosition:_e,srtx:Ft,barWidth:w,xDivision:_,initPositions:V});w=Rt.barWidth,_e=Rt.barXPosition}q=(Oe=this.drawRangeColumnPaths(i({indexes:{i:y,j:ne,realIndex:H,translationsIndex:D},barWidth:w,barXPosition:_e,zeroH:E,xDivision:_},it))).barHeight}var jt=this.barHelpers.drawGoalLine({barXPosition:Oe.barXPosition,barYPosition:Ne,goalX:Oe.goalX,goalY:Oe.goalY,barHeight:q,barWidth:w});jt&&Q.add(jt),U=Oe.y,N=Oe.x;var vn=this.barHelpers.getPathFillColor(l,y,ne,H),Pt=d.globals.stroke.colors[H];this.renderSeries({realIndex:H,pathFill:vn,lineFill:Pt,j:ne,i:y,x:N,y:U,y1:de,y2:Me,pathFrom:Oe.pathFrom,pathTo:Oe.pathTo,strokeWidth:fe,elSeries:Y,series:l,barHeight:q,barWidth:w,barXPosition:_e,barYPosition:Ne,columnGroupIndex:X,elDataLabelsWrap:$,elGoalsMarkers:Q,visibleSeries:this.visibleI,type:"rangebar"})}v.add(Y)}return v}},{key:"detectOverlappingBars",value:function(l){var u=l.i,d=l.j,f=l.barYPosition,v=l.barXPosition,y=l.srty,_=l.srtx,A=l.barHeight,E=l.barWidth,T=l.yDivision,N=l.xDivision,U=l.initPositions,H=this.w,X=[],Y=H.config.series[u].data[d].rangeName,q=H.config.series[u].data[d].x,w=Array.isArray(q)?q.join(" "):q,D=H.globals.labels.map(function($){return Array.isArray($)?$.join(" "):$}).indexOf(w),V=H.globals.seriesRange[u].findIndex(function($){return $.x===w&&$.overlaps.length>0});return this.isHorizontal?(f=H.config.plotOptions.bar.rangeBarGroupRows?y+T*D:y+A*this.visibleI+T*D,V>-1&&!H.config.plotOptions.bar.rangeBarOverlap&&(X=H.globals.seriesRange[u][V].overlaps).indexOf(Y)>-1&&(f=(A=U.barHeight/X.length)*this.visibleI+T*(100-parseInt(this.barOptions.barHeight,10))/100/2+A*(this.visibleI+X.indexOf(Y))+T*D)):(D>-1&&!H.globals.timescaleLabels.length&&(v=H.config.plotOptions.bar.rangeBarGroupRows?_+N*D:_+E*this.visibleI+N*D),V>-1&&!H.config.plotOptions.bar.rangeBarOverlap&&(X=H.globals.seriesRange[u][V].overlaps).indexOf(Y)>-1&&(v=(E=U.barWidth/X.length)*this.visibleI+N*(100-parseInt(this.barOptions.barWidth,10))/100/2+E*(this.visibleI+X.indexOf(Y))+N*D)),{barYPosition:f,barXPosition:v,barHeight:A,barWidth:E}}},{key:"drawRangeColumnPaths",value:function(l){var u=l.indexes,d=l.x,f=l.xDivision,v=l.barWidth,y=l.barXPosition,_=l.zeroH,A=this.w,E=u.i,T=u.j,N=u.realIndex,U=u.translationsIndex,H=this.yRatio[U],X=this.getRangeValue(N,T),Y=Math.min(X.start,X.end),q=Math.max(X.start,X.end);this.series[E][T]===void 0||this.series[E][T]===null?Y=_:(Y=_-Y/H,q=_-q/H);var w=Math.abs(q-Y),D=this.barHelpers.getColumnPaths({barXPosition:y,barWidth:v,y1:Y,y2:q,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:N,i:N,j:T,w:A});if(A.globals.isXNumeric){var V=this.getBarXForNumericXAxis({x:d,j:T,realIndex:N,barWidth:v});d=V.x,y=V.barXPosition}else d+=f;return{pathTo:D.pathTo,pathFrom:D.pathFrom,barHeight:w,x:d,y:X.start<0&&X.end<0?Y:q,goalY:this.barHelpers.getGoalValues("y",null,_,E,T,U),barXPosition:y}}},{key:"preventBarOverflow",value:function(l){var u=this.w;return l<0&&(l=0),l>u.globals.gridWidth&&(l=u.globals.gridWidth),l}},{key:"drawRangeBarPaths",value:function(l){var u=l.indexes,d=l.y,f=l.y1,v=l.y2,y=l.yDivision,_=l.barHeight,A=l.barYPosition,E=l.zeroW,T=this.w,N=u.realIndex,U=u.j,H=this.preventBarOverflow(E+f/this.invertedYRatio),X=this.preventBarOverflow(E+v/this.invertedYRatio),Y=this.getRangeValue(N,U),q=Math.abs(X-H),w=this.barHelpers.getBarpaths({barYPosition:A,barHeight:_,x1:H,x2:X,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:N,realIndex:N,j:U,w:T});return T.globals.isXNumeric||(d+=y),{pathTo:w.pathTo,pathFrom:w.pathFrom,barWidth:q,x:Y.start<0&&Y.end<0?H:X,goalX:this.barHelpers.getGoalValues("x",E,null,N,U),y:d}}},{key:"getRangeValue",value:function(l,u){var d=this.w;return{start:d.globals.seriesRangeStart[l][u],end:d.globals.seriesRangeEnd[l][u]}}}]),a}(),ll=function(){function G(r){o(this,G),this.w=r.w,this.lineCtx=r}return h(G,[{key:"sameValueSeriesFix",value:function(r,a){var l=this.w;if((l.config.fill.type==="gradient"||l.config.fill.type[r]==="gradient")&&new J(this.lineCtx.ctx,l).seriesHaveSameValues(r)){var u=a[r].slice();u[u.length-1]=u[u.length-1]+1e-6,a[r]=u}return a}},{key:"calculatePoints",value:function(r){var a=r.series,l=r.realIndex,u=r.x,d=r.y,f=r.i,v=r.j,y=r.prevY,_=this.w,A=[],E=[];if(v===0){var T=this.lineCtx.categoryAxisCorrection+_.config.markers.offsetX;_.globals.isXNumeric&&(T=(_.globals.seriesX[l][0]-_.globals.minX)/this.lineCtx.xRatio+_.config.markers.offsetX),A.push(T),E.push(R.isNumber(a[f][0])?y+_.config.markers.offsetY:null),A.push(u+_.config.markers.offsetX),E.push(R.isNumber(a[f][v+1])?d+_.config.markers.offsetY:null)}else A.push(u+_.config.markers.offsetX),E.push(R.isNumber(a[f][v+1])?d+_.config.markers.offsetY:null);return{x:A,y:E}}},{key:"checkPreviousPaths",value:function(r){for(var a=r.pathFromLine,l=r.pathFromArea,u=r.realIndex,d=this.w,f=0;f<d.globals.previousPaths.length;f++){var v=d.globals.previousPaths[f];(v.type==="line"||v.type==="area")&&v.paths.length>0&&parseInt(v.realIndex,10)===parseInt(u,10)&&(v.type==="line"?(this.lineCtx.appendPathFrom=!1,a=d.globals.previousPaths[f].paths[0].d):v.type==="area"&&(this.lineCtx.appendPathFrom=!1,l=d.globals.previousPaths[f].paths[0].d,d.config.stroke.show&&d.globals.previousPaths[f].paths[1]&&(a=d.globals.previousPaths[f].paths[1].d)))}return{pathFromLine:a,pathFromArea:l}}},{key:"determineFirstPrevY",value:function(r){var a,l,u,d=r.i,f=r.realIndex,v=r.series,y=r.prevY,_=r.lineYPosition,A=r.translationsIndex,E=this.w,T=E.config.chart.stacked&&!E.globals.comboCharts||E.config.chart.stacked&&E.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((a=this.w.config.series[f])===null||a===void 0?void 0:a.type)==="bar"||((l=this.w.config.series[f])===null||l===void 0?void 0:l.type)==="column");if(((u=v[d])===null||u===void 0?void 0:u[0])!==void 0)y=(_=T&&d>0?this.lineCtx.prevSeriesY[d-1][0]:this.lineCtx.zeroY)-v[d][0]/this.lineCtx.yRatio[A]+2*(this.lineCtx.isReversed?v[d][0]/this.lineCtx.yRatio[A]:0);else if(T&&d>0&&v[d][0]===void 0){for(var N=d-1;N>=0;N--)if(v[N][0]!==null&&v[N][0]!==void 0){y=_=this.lineCtx.prevSeriesY[N][0];break}}return{prevY:y,lineYPosition:_}}}]),G}(),Br=function(G){for(var r,a,l,u,d=function(A){for(var E=[],T=A[0],N=A[1],U=E[0]=ls(T,N),H=1,X=A.length-1;H<X;H++)T=N,N=A[H+1],E[H]=.5*(U+(U=ls(T,N)));return E[H]=U,E}(G),f=G.length-1,v=[],y=0;y<f;y++)l=ls(G[y],G[y+1]),Math.abs(l)<1e-6?d[y]=d[y+1]=0:(u=(r=d[y]/l)*r+(a=d[y+1]/l)*a)>9&&(u=3*l/Math.sqrt(u),d[y]=u*r,d[y+1]=u*a);for(var _=0;_<=f;_++)u=(G[Math.min(f,_+1)][0]-G[Math.max(0,_-1)][0])/(6*(1+d[_]*d[_])),v.push([u||0,d[_]*u||0]);return v},to=function(G){var r=Br(G),a=G[1],l=G[0],u=[],d=r[1],f=r[0];u.push(l,[l[0]+f[0],l[1]+f[1],a[0]-d[0],a[1]-d[1],a[0],a[1]]);for(var v=2,y=r.length;v<y;v++){var _=G[v],A=r[v];u.push([_[0]-A[0],_[1]-A[1],_[0],_[1]])}return u},no=function(G,r,a){var l=G.slice(r,a);if(r){if(a-r>1&&l[1].length<6){var u=l[0].length;l[1]=[2*l[0][u-2]-l[0][u-4],2*l[0][u-1]-l[0][u-3]].concat(l[1])}l[0]=l[0].slice(-2)}return l};function ls(G,r){return(r[1]-G[1])/(r[0]-G[0])}var cs=function(){function G(r,a,l){o(this,G),this.ctx=r,this.w=r.w,this.xyRatios=a,this.pointsChart=!(this.w.config.chart.type!=="bubble"&&this.w.config.chart.type!=="scatter")||l,this.scatter=new Ve(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new ll(this),this.markers=new Te(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return h(G,[{key:"draw",value:function(r,a,l,u){var d,f=this.w,v=new Z(this.ctx),y=f.globals.comboCharts?a:f.config.chart.type,_=v.group({class:"apexcharts-".concat(y,"-series apexcharts-plot-series")}),A=new J(this.ctx,f);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,r=A.getLogSeries(r),this.yRatio=A.getLogYRatios(this.yRatio),this.prevSeriesY=[];for(var E=[],T=0;T<r.length;T++){r=this.lineHelpers.sameValueSeriesFix(T,r);var N=f.globals.comboCharts?l[T]:T,U=this.yRatio.length>1?N:0;this._initSerieVariables(r,T,N);var H=[],X=[],Y=[],q=f.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,N),f.globals.isXNumeric&&f.globals.seriesX.length>0&&(q=(f.globals.seriesX[N][0]-f.globals.minX)/this.xRatio),Y.push(q);var w,D=q,V=void 0,$=D,Q=this.zeroY,ne=this.zeroY;Q=this.lineHelpers.determineFirstPrevY({i:T,realIndex:N,series:r,prevY:Q,lineYPosition:0,translationsIndex:U}).prevY,f.config.stroke.curve==="monotoneCubic"&&r[T][0]===null?H.push(null):H.push(Q),w=Q,y==="rangeArea"&&(V=ne=this.lineHelpers.determineFirstPrevY({i:T,realIndex:N,series:u,prevY:ne,lineYPosition:0,translationsIndex:U}).prevY,X.push(H[0]!==null?ne:null));var fe=this._calculatePathsFrom({type:y,series:r,i:T,realIndex:N,translationsIndex:U,prevX:$,prevY:Q,prevY2:ne}),de=[H[0]],Me=[X[0]],Oe={type:y,series:r,realIndex:N,translationsIndex:U,i:T,x:q,y:1,pX:D,pY:w,pathsFrom:fe,linePaths:[],areaPaths:[],seriesIndex:l,lineYPosition:0,xArrj:Y,yArrj:H,y2Arrj:X,seriesRangeEnd:u},_e=this._iterateOverDataPoints(i(i({},Oe),{},{iterations:y==="rangeArea"?r[T].length-1:void 0,isRangeStart:!0}));if(y==="rangeArea"){for(var Ne=this._calculatePathsFrom({series:u,i:T,realIndex:N,prevX:$,prevY:ne}),it=this._iterateOverDataPoints(i(i({},Oe),{},{series:u,xArrj:[q],yArrj:de,y2Arrj:Me,pY:V,areaPaths:_e.areaPaths,pathsFrom:Ne,iterations:u[T].length-1,isRangeStart:!1})),mt=_e.linePaths.length/2,St=0;St<mt;St++)_e.linePaths[St]=it.linePaths[St+mt]+_e.linePaths[St];_e.linePaths.splice(mt),_e.pathFromLine=it.pathFromLine+_e.pathFromLine}else _e.pathFromArea+="z";this._handlePaths({type:y,realIndex:N,i:T,paths:_e}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),E.push(this.elSeries)}if(((d=f.config.series[0])===null||d===void 0?void 0:d.zIndex)!==void 0&&E.sort(function(Rt,jt){return Number(Rt.node.getAttribute("zIndex"))-Number(jt.node.getAttribute("zIndex"))}),f.config.chart.stacked)for(var Mt=E.length-1;Mt>=0;Mt--)_.add(E[Mt]);else for(var Ft=0;Ft<E.length;Ft++)_.add(E[Ft]);return _}},{key:"_initSerieVariables",value:function(r,a,l){var u=this.w,d=new Z(this.ctx);this.xDivision=u.globals.gridWidth/(u.globals.dataPoints-(u.config.xaxis.tickPlacement==="on"?1:0)),this.strokeWidth=Array.isArray(u.config.stroke.width)?u.config.stroke.width[l]:u.config.stroke.width;var f=0;this.yRatio.length>1&&(this.yaxisIndex=u.globals.seriesYAxisReverseMap[l],f=l),this.isReversed=u.config.yaxis[this.yaxisIndex]&&u.config.yaxis[this.yaxisIndex].reversed,this.zeroY=u.globals.gridHeight-this.baseLineY[f]-(this.isReversed?u.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[f]:0),this.areaBottomY=this.zeroY,(this.zeroY>u.globals.gridHeight||u.config.plotOptions.area.fillTo==="end")&&(this.areaBottomY=u.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=d.group({class:"apexcharts-series",zIndex:u.config.series[l].zIndex!==void 0?u.config.series[l].zIndex:l,seriesName:R.escapeString(u.globals.seriesNames[l])}),this.elPointsMain=d.group({class:"apexcharts-series-markers-wrap","data:realIndex":l}),this.elDataLabelsWrap=d.group({class:"apexcharts-datalabels","data:realIndex":l});var v=r[a].length===u.globals.dataPoints;this.elSeries.attr({"data:longestSeries":v,rel:a+1,"data:realIndex":l}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(r){var a,l,u,d,f=r.type,v=r.series,y=r.i,_=r.realIndex,A=r.translationsIndex,E=r.prevX,T=r.prevY,N=r.prevY2,U=this.w,H=new Z(this.ctx);if(v[y][0]===null){for(var X=0;X<v[y].length;X++)if(v[y][X]!==null){E=this.xDivision*X,T=this.zeroY-v[y][X]/this.yRatio[A],a=H.move(E,T),l=H.move(E,this.areaBottomY);break}}else a=H.move(E,T),f==="rangeArea"&&(a=H.move(E,N)+H.line(E,T)),l=H.move(E,this.areaBottomY)+H.line(E,T);if(u=H.move(0,this.zeroY)+H.line(0,this.zeroY),d=H.move(0,this.zeroY)+H.line(0,this.zeroY),U.globals.previousPaths.length>0){var Y=this.lineHelpers.checkPreviousPaths({pathFromLine:u,pathFromArea:d,realIndex:_});u=Y.pathFromLine,d=Y.pathFromArea}return{prevX:E,prevY:T,linePath:a,areaPath:l,pathFromLine:u,pathFromArea:d}}},{key:"_handlePaths",value:function(r){var a=r.type,l=r.realIndex,u=r.i,d=r.paths,f=this.w,v=new Z(this.ctx),y=new rt(this.ctx);this.prevSeriesY.push(d.yArrj),f.globals.seriesXvalues[l]=d.xArrj,f.globals.seriesYvalues[l]=d.yArrj;var _=f.config.forecastDataPoints;if(_.count>0&&a!=="rangeArea"){var A=f.globals.seriesXvalues[l][f.globals.seriesXvalues[l].length-_.count-1],E=v.drawRect(A,0,f.globals.gridWidth,f.globals.gridHeight,0);f.globals.dom.elForecastMask.appendChild(E.node);var T=v.drawRect(0,0,A,f.globals.gridHeight,0);f.globals.dom.elNonForecastMask.appendChild(T.node)}this.pointsChart||f.globals.delayedElements.push({el:this.elPointsMain.node,index:l});var N={i:u,realIndex:l,animationDelay:u,initialSpeed:f.config.chart.animations.speed,dataChangeSpeed:f.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(a)};if(a==="area")for(var U=y.fillPath({seriesNumber:l}),H=0;H<d.areaPaths.length;H++){var X=v.renderPaths(i(i({},N),{},{pathFrom:d.pathFromArea,pathTo:d.areaPaths[H],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:U}));this.elSeries.add(X)}if(f.config.stroke.show&&!this.pointsChart){var Y=null;if(a==="line")Y=y.fillPath({seriesNumber:l,i:u});else if(f.config.stroke.fill.type==="solid")Y=f.globals.stroke.colors[l];else{var q=f.config.fill;f.config.fill=f.config.stroke.fill,Y=y.fillPath({seriesNumber:l,i:u}),f.config.fill=q}for(var w=0;w<d.linePaths.length;w++){var D=Y;a==="rangeArea"&&(D=y.fillPath({seriesNumber:l}));var V=i(i({},N),{},{pathFrom:d.pathFromLine,pathTo:d.linePaths[w],stroke:Y,strokeWidth:this.strokeWidth,strokeLineCap:f.config.stroke.lineCap,fill:a==="rangeArea"?D:"none"}),$=v.renderPaths(V);if(this.elSeries.add($),$.attr("fill-rule","evenodd"),_.count>0&&a!=="rangeArea"){var Q=v.renderPaths(V);Q.node.setAttribute("stroke-dasharray",_.dashArray),_.strokeWidth&&Q.node.setAttribute("stroke-width",_.strokeWidth),this.elSeries.add(Q),Q.attr("clip-path","url(#forecastMask".concat(f.globals.cuid,")")),$.attr("clip-path","url(#nonForecastMask".concat(f.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(r){var a,l,u=this,d=r.type,f=r.series,v=r.iterations,y=r.realIndex,_=r.translationsIndex,A=r.i,E=r.x,T=r.y,N=r.pX,U=r.pY,H=r.pathsFrom,X=r.linePaths,Y=r.areaPaths,q=r.seriesIndex,w=r.lineYPosition,D=r.xArrj,V=r.yArrj,$=r.y2Arrj,Q=r.isRangeStart,ne=r.seriesRangeEnd,fe=this.w,de=new Z(this.ctx),Me=this.yRatio,Oe=H.prevY,_e=H.linePath,Ne=H.areaPath,it=H.pathFromLine,mt=H.pathFromArea,St=R.isNumber(fe.globals.minYArr[y])?fe.globals.minYArr[y]:fe.globals.minY;v||(v=fe.globals.dataPoints>1?fe.globals.dataPoints-1:fe.globals.dataPoints);var Mt=function(sn,Xn){return Xn-sn/Me[_]+2*(u.isReversed?sn/Me[_]:0)},Ft=T,Rt=fe.config.chart.stacked&&!fe.globals.comboCharts||fe.config.chart.stacked&&fe.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||((a=this.w.config.series[y])===null||a===void 0?void 0:a.type)==="bar"||((l=this.w.config.series[y])===null||l===void 0?void 0:l.type)==="column"),jt=fe.config.stroke.curve;Array.isArray(jt)&&(jt=Array.isArray(q)?jt[q[A]]:jt[A]);for(var vn,Pt=0,gn=0;gn<v;gn++){var hi=f[A][gn+1]===void 0||f[A][gn+1]===null;if(fe.globals.isXNumeric){var on=fe.globals.seriesX[y][gn+1];fe.globals.seriesX[y][gn+1]===void 0&&(on=fe.globals.seriesX[y][v-1]),E=(on-fe.globals.minX)/this.xRatio}else E+=this.xDivision;Rt?A>0&&fe.globals.collapsedSeries.length<fe.config.series.length-1?w=this.prevSeriesY[function(sn){for(var Xn=sn;Xn>0;Xn--){if(!(fe.globals.collapsedSeriesIndices.indexOf((q==null?void 0:q[Xn])||Xn)>-1))return Xn;Xn--}return 0}(A-1)][gn+1]:w=this.zeroY:w=this.zeroY,hi?T=Mt(St,w):(T=Mt(f[A][gn+1],w),d==="rangeArea"&&(Ft=Mt(ne[A][gn+1],w))),D.push(E),!hi||fe.config.stroke.curve!=="smooth"&&fe.config.stroke.curve!=="monotoneCubic"?(V.push(T),$.push(Ft)):(V.push(null),$.push(null));var ln=this.lineHelpers.calculatePoints({series:f,x:E,y:T,realIndex:y,i:A,j:gn,prevY:Oe}),dn=this._createPaths({type:d,series:f,i:A,realIndex:y,j:gn,x:E,y:T,y2:Ft,xArrj:D,yArrj:V,y2Arrj:$,pX:N,pY:U,pathState:Pt,segmentStartX:vn,linePath:_e,areaPath:Ne,linePaths:X,areaPaths:Y,curve:jt,isRangeStart:Q});Y=dn.areaPaths,X=dn.linePaths,N=dn.pX,U=dn.pY,Pt=dn.pathState,vn=dn.segmentStartX,Ne=dn.areaPath,_e=dn.linePath,!this.appendPathFrom||jt==="monotoneCubic"&&d==="rangeArea"||(it+=de.line(E,this.zeroY),mt+=de.line(E,this.zeroY)),this.handleNullDataPoints(f,ln,A,gn,y),this._handleMarkersAndLabels({type:d,pointsPos:ln,i:A,j:gn,realIndex:y,isRangeStart:Q})}return{yArrj:V,xArrj:D,pathFromArea:mt,areaPaths:Y,pathFromLine:it,linePaths:X,linePath:_e,areaPath:Ne}}},{key:"_handleMarkersAndLabels",value:function(r){var a=r.type,l=r.pointsPos,u=r.isRangeStart,d=r.i,f=r.j,v=r.realIndex,y=this.w,_=new Je(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,f,{realIndex:v,pointsPos:l,zRatio:this.zRatio,elParent:this.elPointsMain});else{y.globals.series[d].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var A=this.markers.plotChartMarkers(l,v,f+1);A!==null&&this.elPointsMain.add(A)}var E=_.drawDataLabel({type:a,isRangeStart:u,pos:l,i:v,j:f+1});E!==null&&this.elDataLabelsWrap.add(E)}},{key:"_createPaths",value:function(r){var a=r.type,l=r.series,u=r.i;r.realIndex;var d=r.j,f=r.x,v=r.y,y=r.xArrj,_=r.yArrj,A=r.y2,E=r.y2Arrj,T=r.pX,N=r.pY,U=r.pathState,H=r.segmentStartX,X=r.linePath,Y=r.areaPath,q=r.linePaths,w=r.areaPaths,D=r.curve,V=r.isRangeStart;this.w;var $,Q=new Z(this.ctx),ne=this.areaBottomY,fe=a==="rangeArea",de=a==="rangeArea"&&V;switch(D){case"monotoneCubic":var Me=V?_:E;switch(U){case 0:if(Me[d+1]===null)break;U=1;case 1:if(!(fe?y.length===l[u].length:d===l[u].length-2))break;case 2:var Oe=V?y:y.slice().reverse(),_e=V?Me:Me.slice().reverse(),Ne=($=_e,Oe.map(function(on,ln){return[on,$[ln]]}).filter(function(on){return on[1]!==null})),it=Ne.length>1?to(Ne):Ne,mt=[];fe&&(de?w=Ne:mt=w.reverse());var St=0,Mt=0;if(function(on,ln){for(var dn=function(Ps){var di=[],ji=0;return Ps.forEach(function(wr){wr!==null?ji++:ji>0&&(di.push(ji),ji=0)}),ji>0&&di.push(ji),di}(on),sn=[],Xn=0,br=0;Xn<dn.length;br+=dn[Xn++])sn[Xn]=no(ln,br,br+dn[Xn]);return sn}(_e,it).forEach(function(on){St++;var ln=function(Xn){for(var br="",Ps=0;Ps<Xn.length;Ps++){var di=Xn[Ps],ji=di.length;ji>4?(br+="C".concat(di[0],", ").concat(di[1]),br+=", ".concat(di[2],", ").concat(di[3]),br+=", ".concat(di[4],", ").concat(di[5])):ji>2&&(br+="S".concat(di[0],", ").concat(di[1]),br+=", ".concat(di[2],", ").concat(di[3]))}return br}(on),dn=Mt,sn=(Mt+=on.length)-1;de?X=Q.move(Ne[dn][0],Ne[dn][1])+ln:fe?X=Q.move(mt[dn][0],mt[dn][1])+Q.line(Ne[dn][0],Ne[dn][1])+ln+Q.line(mt[sn][0],mt[sn][1]):(X=Q.move(Ne[dn][0],Ne[dn][1])+ln,Y=X+Q.line(Ne[sn][0],ne)+Q.line(Ne[dn][0],ne)+"z",w.push(Y)),q.push(X)}),fe&&St>1&&!de){var Ft=q.slice(St).reverse();q.splice(St),Ft.forEach(function(on){return q.push(on)})}U=0}break;case"smooth":var Rt=.35*(f-T);if(l[u][d]===null)U=0;else switch(U){case 0:if(H=T,X=de?Q.move(T,E[d])+Q.line(T,N):Q.move(T,N),Y=Q.move(T,N),U=1,d<l[u].length-2){var jt=Q.curve(T+Rt,N,f-Rt,v,f,v);X+=jt,Y+=jt;break}case 1:if(l[u][d+1]===null)X+=de?Q.line(T,A):Q.move(T,N),Y+=Q.line(T,ne)+Q.line(H,ne)+"z",q.push(X),w.push(Y),U=-1;else{var vn=Q.curve(T+Rt,N,f-Rt,v,f,v);X+=vn,Y+=vn,d>=l[u].length-2&&(de&&(X+=Q.curve(f,v,f,v,f,A)+Q.move(f,A)),Y+=Q.curve(f,v,f,v,f,ne)+Q.line(H,ne)+"z",q.push(X),w.push(Y),U=-1)}}T=f,N=v;break;default:var Pt=function(on,ln,dn){var sn=[];switch(on){case"stepline":sn=Q.line(ln,null,"H")+Q.line(null,dn,"V");break;case"linestep":sn=Q.line(null,dn,"V")+Q.line(ln,null,"H");break;case"straight":sn=Q.line(ln,dn)}return sn};if(l[u][d]===null)U=0;else switch(U){case 0:if(H=T,X=de?Q.move(T,E[d])+Q.line(T,N):Q.move(T,N),Y=Q.move(T,N),U=1,d<l[u].length-2){var gn=Pt(D,f,v);X+=gn,Y+=gn;break}case 1:if(l[u][d+1]===null)X+=de?Q.line(T,A):Q.move(T,N),Y+=Q.line(T,ne)+Q.line(H,ne)+"z",q.push(X),w.push(Y),U=-1;else{var hi=Pt(D,f,v);X+=hi,Y+=hi,d>=l[u].length-2&&(de&&(X+=Q.line(f,A)),Y+=Q.line(f,ne)+Q.line(H,ne)+"z",q.push(X),w.push(Y),U=-1)}}T=f,N=v}return{linePaths:q,areaPaths:w,pX:T,pY:N,pathState:U,segmentStartX:H,linePath:X,areaPath:Y}}},{key:"handleNullDataPoints",value:function(r,a,l,u,d){var f=this.w;if(r[l][u]===null&&f.config.markers.showNullDataPoints||r[l].length===1){var v=this.strokeWidth-f.config.markers.strokeWidth/2;v>0||(v=0);var y=this.markers.plotChartMarkers(a,d,u+1,v,!0);y!==null&&this.elPointsMain.add(y)}}}]),G}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function G(v,y,_,A){this.xoffset=v,this.yoffset=y,this.height=A,this.width=_,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(E){var T,N=[],U=this.xoffset,H=this.yoffset,X=d(E)/this.height,Y=d(E)/this.width;if(this.width>=this.height)for(T=0;T<E.length;T++)N.push([U,H,U+X,H+E[T]/X]),H+=E[T]/X;else for(T=0;T<E.length;T++)N.push([U,H,U+E[T]/Y,H+Y]),U+=E[T]/Y;return N},this.cutArea=function(E){var T;if(this.width>=this.height){var N=E/this.height,U=this.width-N;T=new G(this.xoffset+N,this.yoffset,U,this.height)}else{var H=E/this.width,X=this.height-H;T=new G(this.xoffset,this.yoffset+H,this.width,X)}return T}}function r(v,y,_,A,E){A=A===void 0?0:A,E=E===void 0?0:E;var T=a(function(N,U){var H,X=[],Y=U/d(N);for(H=0;H<N.length;H++)X[H]=N[H]*Y;return X}(v,y*_),[],new G(A,E,y,_),[]);return function(N){var U,H,X=[];for(U=0;U<N.length;U++)for(H=0;H<N[U].length;H++)X.push(N[U][H]);return X}(T)}function a(v,y,_,A){var E,T,N;if(v.length!==0)return E=_.shortestEdge(),function(U,H,X){var Y;if(U.length===0)return!0;(Y=U.slice()).push(H);var q=l(U,X),w=l(Y,X);return q>=w}(y,T=v[0],E)?(y.push(T),a(v.slice(1),y,_,A)):(N=_.cutArea(d(y),A),A.push(_.getCoordinates(y)),a(v,[],N,A)),A;A.push(_.getCoordinates(y))}function l(v,y){var _=Math.min.apply(Math,v),A=Math.max.apply(Math,v),E=d(v);return Math.max(Math.pow(y,2)*A/Math.pow(E,2),Math.pow(E,2)/(Math.pow(y,2)*_))}function u(v){return v&&v.constructor===Array}function d(v){var y,_=0;for(y=0;y<v.length;y++)_+=v[y];return _}function f(v){var y,_=0;if(u(v[0]))for(y=0;y<v.length;y++)_+=f(v[y]);else _=d(v);return _}return function v(y,_,A,E,T){E=E===void 0?0:E,T=T===void 0?0:T;var N,U,H=[],X=[];if(u(y[0])){for(U=0;U<y.length;U++)H[U]=f(y[U]);for(N=r(H,_,A,E,T),U=0;U<y.length;U++)X.push(v(y[U],N[U][2]-N[U][0],N[U][3]-N[U][1],N[U][0],N[U][1]))}else X=r(y,_,A,E,T);return X}}();var xi,Hr,cl=function(){function G(r,a){o(this,G),this.ctx=r,this.w=r.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new Lt(r),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return h(G,[{key:"draw",value:function(r){var a=this,l=this.w,u=new Z(this.ctx),d=new rt(this.ctx),f=u.group({class:"apexcharts-treemap"});if(l.globals.noData)return f;var v=[];return r.forEach(function(y){var _=y.map(function(A){return Math.abs(A)});v.push(_)}),this.negRange=this.helpers.checkColorRange(),l.config.series.forEach(function(y,_){y.data.forEach(function(A){Array.isArray(a.labels[_])||(a.labels[_]=[]),a.labels[_].push(A.x)})}),window.TreemapSquared.generate(v,l.globals.gridWidth,l.globals.gridHeight).forEach(function(y,_){var A=u.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:R.escapeString(l.globals.seriesNames[_]),rel:_+1,"data:realIndex":_});if(l.config.chart.dropShadow.enabled){var E=l.config.chart.dropShadow;new W(a.ctx).dropShadow(f,E,_)}var T=u.group({class:"apexcharts-data-labels"});y.forEach(function(N,U){var H=N[0],X=N[1],Y=N[2],q=N[3],w=u.drawRect(H,X,Y-H,q-X,l.config.plotOptions.treemap.borderRadius,"#fff",1,a.strokeWidth,l.config.plotOptions.treemap.useFillColorAsStroke?V:l.globals.stroke.colors[_]);w.attr({cx:H,cy:X,index:_,i:_,j:U,width:Y-H,height:q-X});var D=a.helpers.getShadeColor(l.config.chart.type,_,U,a.negRange),V=D.color;l.config.series[_].data[U]!==void 0&&l.config.series[_].data[U].fillColor&&(V=l.config.series[_].data[U].fillColor);var $=d.fillPath({color:V,seriesNumber:_,dataPointIndex:U});w.node.classList.add("apexcharts-treemap-rect"),w.attr({fill:$}),a.helpers.addListeners(w);var Q={x:H+(Y-H)/2,y:X+(q-X)/2,width:0,height:0},ne={x:H,y:X,width:Y-H,height:q-X};if(l.config.chart.animations.enabled&&!l.globals.dataChanged){var fe=1;l.globals.resized||(fe=l.config.chart.animations.speed),a.animateTreemap(w,Q,ne,fe)}if(l.globals.dataChanged){var de=1;a.dynamicAnim.enabled&&l.globals.shouldAnimate&&(de=a.dynamicAnim.speed,l.globals.previousPaths[_]&&l.globals.previousPaths[_][U]&&l.globals.previousPaths[_][U].rect&&(Q=l.globals.previousPaths[_][U].rect),a.animateTreemap(w,Q,ne,de))}var Me=a.getFontSize(N),Oe=l.config.dataLabels.formatter(a.labels[_][U],{value:l.globals.series[_][U],seriesIndex:_,dataPointIndex:U,w:l});l.config.plotOptions.treemap.dataLabels.format==="truncate"&&(Me=parseInt(l.config.dataLabels.style.fontSize,10),Oe=a.truncateLabels(Oe,Me,H,X,Y,q));var _e=a.helpers.calculateDataLabels({text:Oe,x:(H+Y)/2,y:(X+q)/2+a.strokeWidth/2+Me/3,i:_,j:U,colorProps:D,fontSize:Me,series:r});l.config.dataLabels.enabled&&_e&&a.rotateToFitLabel(_e,Me,Oe,H,X,Y,q),A.add(w),_e!==null&&A.add(_e)}),A.add(T),f.add(A)}),f}},{key:"getFontSize",value:function(r){var a=this.w,l,u,d,f,v=function y(_){var A,E=0;if(Array.isArray(_[0]))for(A=0;A<_.length;A++)E+=y(_[A]);else for(A=0;A<_.length;A++)E+=_[A].length;return E}(this.labels)/function y(_){var A,E=0;if(Array.isArray(_[0]))for(A=0;A<_.length;A++)E+=y(_[A]);else for(A=0;A<_.length;A++)E+=1;return E}(this.labels);return l=r[2]-r[0],u=r[3]-r[1],d=l*u,f=Math.pow(d,.5),Math.min(f/v,parseInt(a.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(r,a,l,u,d,f,v){var y=new Z(this.ctx),_=y.getTextRects(l,a);if(_.width+this.w.config.stroke.width+5>f-u&&_.width<=v-d){var A=y.rotateAroundCenter(r.node);r.node.setAttribute("transform","rotate(-90 ".concat(A.x," ").concat(A.y,") translate(").concat(_.height/3,")"))}}},{key:"truncateLabels",value:function(r,a,l,u,d,f){var v=new Z(this.ctx),y=v.getTextRects(r,a).width+this.w.config.stroke.width+5>d-l&&f-u>d-l?f-u:d-l,_=v.getTextBasedOnMaxWidth({text:r,maxWidth:y,fontSize:a});return r.length!==_.length&&y/a<5?"":_}},{key:"animateTreemap",value:function(r,a,l,u){var d=new O(this.ctx);d.animateRect(r,{x:a.x,y:a.y,width:a.width,height:a.height},{x:l.x,y:l.y,width:l.width,height:l.height},u,function(){d.animationCompleted(r)})}}]),G}(),io=86400,jc=10/io,qc=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return h(G,[{key:"calculateTimeScaleTicks",value:function(r,a){var l=this,u=this.w;if(u.globals.allSeriesCollapsed)return u.globals.labels=[],u.globals.timescaleLabels=[],[];var d=new ee(this.ctx),f=(a-r)/864e5;this.determineInterval(f),u.globals.disableZoomIn=!1,u.globals.disableZoomOut=!1,f<jc?u.globals.disableZoomIn=!0:f>5e4&&(u.globals.disableZoomOut=!0);var v=d.getTimeUnitsfromTimestamp(r,a,this.utc),y=u.globals.gridWidth/f,_=y/24,A=_/60,E=A/60,T=Math.floor(24*f),N=Math.floor(1440*f),U=Math.floor(f*io),H=Math.floor(f),X=Math.floor(f/30),Y=Math.floor(f/365),q={minMillisecond:v.minMillisecond,minSecond:v.minSecond,minMinute:v.minMinute,minHour:v.minHour,minDate:v.minDate,minMonth:v.minMonth,minYear:v.minYear},w={firstVal:q,currentMillisecond:q.minMillisecond,currentSecond:q.minSecond,currentMinute:q.minMinute,currentHour:q.minHour,currentMonthDate:q.minDate,currentDate:q.minDate,currentMonth:q.minMonth,currentYear:q.minYear,daysWidthOnXAxis:y,hoursWidthOnXAxis:_,minutesWidthOnXAxis:A,secondsWidthOnXAxis:E,numberOfSeconds:U,numberOfMinutes:N,numberOfHours:T,numberOfDays:H,numberOfMonths:X,numberOfYears:Y};switch(this.tickInterval){case"years":this.generateYearScale(w);break;case"months":case"half_year":this.generateMonthScale(w);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(w);break;case"hours":this.generateHourScale(w);break;case"minutes_fives":case"minutes":this.generateMinuteScale(w);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(w)}var D=this.timeScaleArray.map(function(V){var $={position:V.position,unit:V.unit,year:V.year,day:V.day?V.day:1,hour:V.hour?V.hour:0,month:V.month+1};return V.unit==="month"?i(i({},$),{},{day:1,value:V.value+1}):V.unit==="day"||V.unit==="hour"?i(i({},$),{},{value:V.value}):V.unit==="minute"?i(i({},$),{},{value:V.value,minute:V.value}):V.unit==="second"?i(i({},$),{},{value:V.value,minute:V.minute,second:V.second}):V});return D.filter(function(V){var $=1,Q=Math.ceil(u.globals.gridWidth/120),ne=V.value;u.config.xaxis.tickAmount!==void 0&&(Q=u.config.xaxis.tickAmount),D.length>Q&&($=Math.floor(D.length/Q));var fe=!1,de=!1;switch(l.tickInterval){case"years":V.unit==="year"&&(fe=!0);break;case"half_year":$=7,V.unit==="year"&&(fe=!0);break;case"months":$=1,V.unit==="year"&&(fe=!0);break;case"months_fortnight":$=15,V.unit!=="year"&&V.unit!=="month"||(fe=!0),ne===30&&(de=!0);break;case"months_days":$=10,V.unit==="month"&&(fe=!0),ne===30&&(de=!0);break;case"week_days":$=8,V.unit==="month"&&(fe=!0);break;case"days":$=1,V.unit==="month"&&(fe=!0);break;case"hours":V.unit==="day"&&(fe=!0);break;case"minutes_fives":case"seconds_fives":ne%5!=0&&(de=!0);break;case"seconds_tens":ne%10!=0&&(de=!0)}if(l.tickInterval==="hours"||l.tickInterval==="minutes_fives"||l.tickInterval==="seconds_tens"||l.tickInterval==="seconds_fives"){if(!de)return!0}else if((ne%$==0||fe)&&!de)return!0})}},{key:"recalcDimensionsBasedOnFormat",value:function(r,a){var l=this.w,u=this.formatDates(r),d=this.removeOverlappingTS(u);l.globals.timescaleLabels=d.slice(),new _t(this.ctx).plotCoords()}},{key:"determineInterval",value:function(r){var a=24*r,l=60*a;switch(!0){case r/365>5:this.tickInterval="years";break;case r>800:this.tickInterval="half_year";break;case r>180:this.tickInterval="months";break;case r>90:this.tickInterval="months_fortnight";break;case r>60:this.tickInterval="months_days";break;case r>30:this.tickInterval="week_days";break;case r>2:this.tickInterval="days";break;case a>2.4:this.tickInterval="hours";break;case l>15:this.tickInterval="minutes_fives";break;case l>5:this.tickInterval="minutes";break;case l>1:this.tickInterval="seconds_tens";break;case 60*l>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(r){var a=r.firstVal,l=r.currentMonth,u=r.currentYear,d=r.daysWidthOnXAxis,f=r.numberOfYears,v=a.minYear,y=0,_=new ee(this.ctx),A="year";if(a.minDate>1||a.minMonth>0){var E=_.determineRemainingDaysOfYear(a.minYear,a.minMonth,a.minDate);y=(_.determineDaysOfYear(a.minYear)-E+1)*d,v=a.minYear+1,this.timeScaleArray.push({position:y,value:v,unit:A,year:v,month:R.monthMod(l+1)})}else a.minDate===1&&a.minMonth===0&&this.timeScaleArray.push({position:y,value:v,unit:A,year:u,month:R.monthMod(l+1)});for(var T=v,N=y,U=0;U<f;U++)T++,N=_.determineDaysOfYear(T-1)*d+N,this.timeScaleArray.push({position:N,value:T,unit:A,year:T,month:1})}},{key:"generateMonthScale",value:function(r){var a=r.firstVal,l=r.currentMonthDate,u=r.currentMonth,d=r.currentYear,f=r.daysWidthOnXAxis,v=r.numberOfMonths,y=u,_=0,A=new ee(this.ctx),E="month",T=0;if(a.minDate>1){_=(A.determineDaysOfMonths(u+1,a.minYear)-l+1)*f,y=R.monthMod(u+1);var N=d+T,U=R.monthMod(y),H=y;y===0&&(E="year",H=N,U=1,N+=T+=1),this.timeScaleArray.push({position:_,value:H,unit:E,year:N,month:U})}else this.timeScaleArray.push({position:_,value:y,unit:E,year:d,month:R.monthMod(u)});for(var X=y+1,Y=_,q=0,w=1;q<v;q++,w++){(X=R.monthMod(X))===0?(E="year",T+=1):E="month";var D=this._getYear(d,X,T);Y=A.determineDaysOfMonths(X,D)*f+Y;var V=X===0?D:X;this.timeScaleArray.push({position:Y,value:V,unit:E,year:D,month:X===0?1:X}),X++}}},{key:"generateDayScale",value:function(r){var a=r.firstVal,l=r.currentMonth,u=r.currentYear,d=r.hoursWidthOnXAxis,f=r.numberOfDays,v=new ee(this.ctx),y="day",_=a.minDate+1,A=_,E=function(w,D,V){return w>v.determineDaysOfMonths(D+1,V)&&(A=1,y="month",N=D+=1),D},T=(24-a.minHour)*d,N=_,U=E(A,l,u);a.minHour===0&&a.minDate===1?(T=0,N=R.monthMod(a.minMonth),y="month",A=a.minDate):a.minDate!==1&&a.minHour===0&&a.minMinute===0&&(T=0,_=a.minDate,N=_,U=E(A=_,l,u)),this.timeScaleArray.push({position:T,value:N,unit:y,year:this._getYear(u,U,0),month:R.monthMod(U),day:A});for(var H=T,X=0;X<f;X++){y="day",U=E(A+=1,U,this._getYear(u,U,0));var Y=this._getYear(u,U,0);H=24*d+H;var q=A===1?R.monthMod(U):A;this.timeScaleArray.push({position:H,value:q,unit:y,year:Y,month:R.monthMod(U),day:q})}}},{key:"generateHourScale",value:function(r){var a=r.firstVal,l=r.currentDate,u=r.currentMonth,d=r.currentYear,f=r.minutesWidthOnXAxis,v=r.numberOfHours,y=new ee(this.ctx),_="hour",A=function($,Q){return $>y.determineDaysOfMonths(Q+1,d)&&(X=1,Q+=1),{month:Q,date:X}},E=function($,Q){return $>y.determineDaysOfMonths(Q+1,d)?Q+=1:Q},T=60-(a.minMinute+a.minSecond/60),N=T*f,U=a.minHour+1,H=U;T===60&&(N=0,H=U=a.minHour);var X=l;H>=24&&(H=0,X+=1,_="day");var Y=A(X,u).month;Y=E(X,Y),this.timeScaleArray.push({position:N,value:U,unit:_,day:X,hour:H,year:d,month:R.monthMod(Y)}),H++;for(var q=N,w=0;w<v;w++){_="hour",H>=24&&(H=0,_="day",Y=A(X+=1,Y).month,Y=E(X,Y));var D=this._getYear(d,Y,0);q=60*f+q;var V=H===0?X:H;this.timeScaleArray.push({position:q,value:V,unit:_,hour:H,day:X,year:D,month:R.monthMod(Y)}),H++}}},{key:"generateMinuteScale",value:function(r){for(var a=r.currentMillisecond,l=r.currentSecond,u=r.currentMinute,d=r.currentHour,f=r.currentDate,v=r.currentMonth,y=r.currentYear,_=r.minutesWidthOnXAxis,A=r.secondsWidthOnXAxis,E=r.numberOfMinutes,T=u+1,N=f,U=v,H=y,X=d,Y=(60-l-a/1e3)*A,q=0;q<E;q++)T>=60&&(T=0,(X+=1)===24&&(X=0)),this.timeScaleArray.push({position:Y,value:T,unit:"minute",hour:X,minute:T,day:N,year:this._getYear(H,U,0),month:R.monthMod(U)}),Y+=_,T++}},{key:"generateSecondScale",value:function(r){for(var a=r.currentMillisecond,l=r.currentSecond,u=r.currentMinute,d=r.currentHour,f=r.currentDate,v=r.currentMonth,y=r.currentYear,_=r.secondsWidthOnXAxis,A=r.numberOfSeconds,E=l+1,T=u,N=f,U=v,H=y,X=d,Y=(1e3-a)/1e3*_,q=0;q<A;q++)E>=60&&(E=0,++T>=60&&(T=0,++X===24&&(X=0))),this.timeScaleArray.push({position:Y,value:E,unit:"second",hour:X,minute:T,second:E,day:N,year:this._getYear(H,U,0),month:R.monthMod(U)}),Y+=_,E++}},{key:"createRawDateString",value:function(r,a){var l=r.year;return r.month===0&&(r.month=1),l+="-"+("0"+r.month.toString()).slice(-2),r.unit==="day"?l+=r.unit==="day"?"-"+("0"+a).slice(-2):"-01":l+="-"+("0"+(r.day?r.day:"1")).slice(-2),r.unit==="hour"?l+=r.unit==="hour"?"T"+("0"+a).slice(-2):"T00":l+="T"+("0"+(r.hour?r.hour:"0")).slice(-2),r.unit==="minute"?l+=":"+("0"+a).slice(-2):l+=":"+(r.minute?("0"+r.minute).slice(-2):"00"),r.unit==="second"?l+=":"+("0"+a).slice(-2):l+=":00",this.utc&&(l+=".000Z"),l}},{key:"formatDates",value:function(r){var a=this,l=this.w;return r.map(function(u){var d=u.value.toString(),f=new ee(a.ctx),v=a.createRawDateString(u,d),y=f.getDate(f.parseDate(v));if(a.utc||(y=f.getDate(f.parseDateWithTimezone(v))),l.config.xaxis.labels.format===void 0){var _="dd MMM",A=l.config.xaxis.labels.datetimeFormatter;u.unit==="year"&&(_=A.year),u.unit==="month"&&(_=A.month),u.unit==="day"&&(_=A.day),u.unit==="hour"&&(_=A.hour),u.unit==="minute"&&(_=A.minute),u.unit==="second"&&(_=A.second),d=f.formatDate(y,_)}else d=f.formatDate(y,l.config.xaxis.labels.format);return{dateString:v,position:u.position,value:d,unit:u.unit,year:u.year,month:u.month}})}},{key:"removeOverlappingTS",value:function(r){var a,l=this,u=new Z(this.ctx),d=!1;r.length>0&&r[0].value&&r.every(function(y){return y.value.length===r[0].value.length})&&(d=!0,a=u.getTextRects(r[0].value).width);var f=0,v=r.map(function(y,_){if(_>0&&l.w.config.xaxis.labels.hideOverlappingLabels){var A=d?a:u.getTextRects(r[f].value).width,E=r[f].position;return y.position>E+A+10?(f=_,y):null}return y});return v=v.filter(function(y){return y!==null})}},{key:"_getYear",value:function(r,a,l){return r+Math.floor(a/12)+l}}]),G}(),Zc=function(){function G(r,a){o(this,G),this.ctx=a,this.w=a.w,this.el=r}return h(G,[{key:"setupElements",value:function(){var r=this.w.globals,a=this.w.config,l=a.chart.type;r.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(l)>-1,r.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(l)>-1,r.isBarHorizontal=(a.chart.type==="bar"||a.chart.type==="rangeBar"||a.chart.type==="boxPlot")&&a.plotOptions.bar.horizontal,r.chartClass=".apexcharts"+r.chartID,r.dom.baseEl=this.el,r.dom.elWrap=document.createElement("div"),Z.setAttrs(r.dom.elWrap,{id:r.chartClass.substring(1),class:"apexcharts-canvas "+r.chartClass.substring(1)}),this.el.appendChild(r.dom.elWrap),r.dom.Paper=new window.SVG.Doc(r.dom.elWrap),r.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(a.chart.offsetX,", ").concat(a.chart.offsetY,")")}),r.dom.Paper.node.style.background=a.theme.mode!=="dark"||a.chart.background?a.theme.mode!=="light"||a.chart.background?a.chart.background:"#fff":"#424242",this.setSVGDimensions(),r.dom.elLegendForeign=document.createElementNS(r.SVGNS,"foreignObject"),Z.setAttrs(r.dom.elLegendForeign,{x:0,y:0,width:r.svgWidth,height:r.svgHeight}),r.dom.elLegendWrap=document.createElement("div"),r.dom.elLegendWrap.classList.add("apexcharts-legend"),r.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),r.dom.elLegendForeign.appendChild(r.dom.elLegendWrap),r.dom.Paper.node.appendChild(r.dom.elLegendForeign),r.dom.elGraphical=r.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),r.dom.elDefs=r.dom.Paper.defs(),r.dom.Paper.add(r.dom.elGraphical),r.dom.elGraphical.add(r.dom.elDefs)}},{key:"plotChartType",value:function(r,a){var l=this.w,u=l.config,d=l.globals,f={series:[],i:[]},v={series:[],i:[]},y={series:[],i:[]},_={series:[],i:[]},A={series:[],i:[]},E={series:[],i:[]},T={series:[],i:[]},N={series:[],i:[]},U={series:[],seriesRangeEnd:[],i:[]},H=u.chart.type!==void 0?u.chart.type:"line",X=null,Y=0;d.series.forEach(function(_e,Ne){var it=r[Ne].type||H;switch(it){case"column":case"bar":A.series.push(_e),A.i.push(Ne),l.globals.columnSeries=A;break;case"area":v.series.push(_e),v.i.push(Ne);break;case"line":f.series.push(_e),f.i.push(Ne);break;case"scatter":y.series.push(_e),y.i.push(Ne);break;case"bubble":_.series.push(_e),_.i.push(Ne);break;case"candlestick":E.series.push(_e),E.i.push(Ne);break;case"boxPlot":T.series.push(_e),T.i.push(Ne);break;case"rangeBar":N.series.push(_e),N.i.push(Ne);break;case"rangeArea":U.series.push(d.seriesRangeStart[Ne]),U.seriesRangeEnd.push(d.seriesRangeEnd[Ne]),U.i.push(Ne);break;case"heatmap":case"treemap":case"pie":case"donut":case"polarArea":case"radialBar":case"radar":X=it;break;default:console.warn("You have specified an unrecognized series type (",it,").")}H!==it&&it!=="scatter"&&Y++}),Y>0&&(X!==null&&console.warn("Chart or series type ",X," can not appear with other chart or series types."),A.series.length>0&&u.plotOptions.bar.horizontal&&(Y-=A.length,A={series:[],i:[]},l.globals.columnSeries={series:[],i:[]},console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"))),d.comboCharts||(d.comboCharts=Y>0);var q=new cs(this.ctx,a),w=new nt(this.ctx,a);this.ctx.pie=new Nn(this.ctx);var D=new Yi(this.ctx);this.ctx.rangeBar=new Ii(this.ctx,a);var V=new rn(this.ctx),$=[];if(d.comboCharts){var Q,ne,fe=new J(this.ctx);if(v.series.length>0&&(Q=$).push.apply(Q,z(fe.drawSeriesByGroup(v,d.areaGroups,"area",q))),A.series.length>0)if(l.config.chart.stacked){var de=new He(this.ctx,a);$.push(de.draw(A.series,A.i))}else this.ctx.bar=new Ue(this.ctx,a),$.push(this.ctx.bar.draw(A.series,A.i));if(U.series.length>0&&$.push(q.draw(U.series,"rangeArea",U.i,U.seriesRangeEnd)),f.series.length>0&&(ne=$).push.apply(ne,z(fe.drawSeriesByGroup(f,d.lineGroups,"line",q))),E.series.length>0&&$.push(w.draw(E.series,"candlestick",E.i)),T.series.length>0&&$.push(w.draw(T.series,"boxPlot",T.i)),N.series.length>0&&$.push(this.ctx.rangeBar.draw(N.series,N.i)),y.series.length>0){var Me=new cs(this.ctx,a,!0);$.push(Me.draw(y.series,"scatter",y.i))}if(_.series.length>0){var Oe=new cs(this.ctx,a,!0);$.push(Oe.draw(_.series,"bubble",_.i))}}else switch(u.chart.type){case"line":$=q.draw(d.series,"line");break;case"area":$=q.draw(d.series,"area");break;case"bar":u.chart.stacked?$=new He(this.ctx,a).draw(d.series):(this.ctx.bar=new Ue(this.ctx,a),$=this.ctx.bar.draw(d.series));break;case"candlestick":$=new nt(this.ctx,a).draw(d.series,"candlestick");break;case"boxPlot":$=new nt(this.ctx,a).draw(d.series,u.chart.type);break;case"rangeBar":$=this.ctx.rangeBar.draw(d.series);break;case"rangeArea":$=q.draw(d.seriesRangeStart,"rangeArea",void 0,d.seriesRangeEnd);break;case"heatmap":$=new $t(this.ctx,a).draw(d.series);break;case"treemap":$=new cl(this.ctx,a).draw(d.series);break;case"pie":case"donut":case"polarArea":$=this.ctx.pie.draw(d.series);break;case"radialBar":$=D.draw(d.series);break;case"radar":$=V.draw(d.series);break;default:$=q.draw(d.series)}return $}},{key:"setSVGDimensions",value:function(){var r=this.w.globals,a=this.w.config;r.svgWidth=a.chart.width,r.svgHeight=a.chart.height;var l=R.getDimensions(this.el),u=a.chart.width.toString().split(/[0-9]+/g).pop();u==="%"?R.isNumber(l[0])&&(l[0].width===0&&(l=R.getDimensions(this.el.parentNode)),r.svgWidth=l[0]*parseInt(a.chart.width,10)/100):u!=="px"&&u!==""||(r.svgWidth=parseInt(a.chart.width,10));var d=a.chart.height.toString().split(/[0-9]+/g).pop();if(r.svgHeight!=="auto"&&r.svgHeight!=="")if(d==="%"){var f=R.getDimensions(this.el.parentNode);r.svgHeight=f[1]*parseInt(a.chart.height,10)/100}else r.svgHeight=parseInt(a.chart.height,10);else r.axisCharts?r.svgHeight=r.svgWidth/1.61:r.svgHeight=r.svgWidth/1.2;if(r.svgWidth<0&&(r.svgWidth=0),r.svgHeight<0&&(r.svgHeight=0),Z.setAttrs(r.dom.Paper.node,{width:r.svgWidth,height:r.svgHeight}),d!=="%"){var v=a.chart.sparkline.enabled?0:r.axisCharts?a.chart.parentHeightOffset:0;r.dom.Paper.node.parentNode.parentNode.style.minHeight=r.svgHeight+v+"px"}r.dom.elWrap.style.width=r.svgWidth+"px",r.dom.elWrap.style.height=r.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var r=this.w.globals,a=r.translateY,l={transform:"translate("+r.translateX+", "+a+")"};Z.setAttrs(r.dom.elGraphical.node,l)}},{key:"resizeNonAxisCharts",value:function(){var r=this.w,a=r.globals,l=0,u=r.config.chart.sparkline.enabled?1:15;u+=r.config.grid.padding.bottom,r.config.legend.position!=="top"&&r.config.legend.position!=="bottom"||!r.config.legend.show||r.config.legend.floating||(l=new pt(this.ctx).legendHelpers.getLegendBBox().clwh+10);var d=r.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),f=2.05*r.globals.radialSize;if(d&&!r.config.chart.sparkline.enabled&&r.config.plotOptions.radialBar.startAngle!==0){var v=R.getBoundingClientRect(d);f=v.bottom;var y=v.bottom-v.top;f=Math.max(2.05*r.globals.radialSize,y)}var _=f+a.translateY+l+u;a.dom.elLegendForeign&&a.dom.elLegendForeign.setAttribute("height",_),r.config.chart.height&&String(r.config.chart.height).indexOf("%")>0||(a.dom.elWrap.style.height=_+"px",Z.setAttrs(a.dom.Paper.node,{height:_}),a.dom.Paper.node.parentNode.parentNode.style.minHeight=_+"px")}},{key:"coreCalculations",value:function(){new je(this.ctx).init()}},{key:"resetGlobals",value:function(){var r=this,a=function(){return r.w.config.series.map(function(d){return[]})},l=new Ie,u=this.w.globals;l.initGlobalVars(u),u.seriesXvalues=a(),u.seriesYvalues=a()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var r=null,a=this.w;if(a.globals.axisCharts){if(a.config.xaxis.crosshairs.position==="back"&&new st(this.ctx).drawXCrosshairs(),a.config.yaxis[0].crosshairs.position==="back"&&new st(this.ctx).drawYCrosshairs(),a.config.xaxis.type==="datetime"&&a.config.xaxis.labels.formatter===void 0){this.ctx.timeScale=new qc(this.ctx);var l=[];isFinite(a.globals.minX)&&isFinite(a.globals.maxX)&&!a.globals.isBarHorizontal?l=this.ctx.timeScale.calculateTimeScaleTicks(a.globals.minX,a.globals.maxX):a.globals.isBarHorizontal&&(l=this.ctx.timeScale.calculateTimeScaleTicks(a.globals.minY,a.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(l)}r=new J(this.ctx).getCalculatedRatios()}return r}},{key:"updateSourceChart",value:function(r){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:r.w.globals.minX,max:r.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var r=this,a=this.w;if(a.config.chart.brush.enabled&&typeof a.config.chart.events.selection!="function"){var l=Array.isArray(a.config.chart.brush.targets)?a.config.chart.brush.targets:[a.config.chart.brush.target];l.forEach(function(u){var d=ApexCharts.getChartByID(u);d.w.globals.brushSource=r.ctx,typeof d.w.config.chart.events.zoomed!="function"&&(d.w.config.chart.events.zoomed=function(){r.updateSourceChart(d)}),typeof d.w.config.chart.events.scrolled!="function"&&(d.w.config.chart.events.scrolled=function(){r.updateSourceChart(d)})}),a.config.chart.events.selection=function(u,d){l.forEach(function(f){ApexCharts.getChartByID(f).ctx.updateHelpers._updateOptions({xaxis:{min:d.xaxis.min,max:d.xaxis.max}},!1,!1,!1,!1)})}}}}]),G}(),ae=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"_updateOptions",value:function(r){var a=this,l=arguments.length>1&&arguments[1]!==void 0&&arguments[1],u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],d=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],f=arguments.length>4&&arguments[4]!==void 0&&arguments[4];return new Promise(function(v){var y=[a.ctx];d&&(y=a.ctx.getSyncedCharts()),a.ctx.w.globals.isExecCalled&&(y=[a.ctx],a.ctx.w.globals.isExecCalled=!1),y.forEach(function(_,A){var E=_.w;if(E.globals.shouldAnimate=u,l||(E.globals.resized=!0,E.globals.dataChanged=!0,u&&_.series.getPreviousPaths()),r&&s(r)==="object"&&(_.config=new be(r),r=J.extendArrayProps(_.config,r,E),_.w.globals.chartID!==a.ctx.w.globals.chartID&&delete r.series,E.config=R.extend(E.config,r),f&&(E.globals.lastXAxis=r.xaxis?R.clone(r.xaxis):[],E.globals.lastYAxis=r.yaxis?R.clone(r.yaxis):[],E.globals.initialConfig=R.extend({},E.config),E.globals.initialSeries=R.clone(E.config.series),r.series))){for(var T=0;T<E.globals.collapsedSeriesIndices.length;T++){var N=E.config.series[E.globals.collapsedSeriesIndices[T]];E.globals.collapsedSeries[T].data=E.globals.axisCharts?N.data.slice():N}for(var U=0;U<E.globals.ancillaryCollapsedSeriesIndices.length;U++){var H=E.config.series[E.globals.ancillaryCollapsedSeriesIndices[U]];E.globals.ancillaryCollapsedSeries[U].data=E.globals.axisCharts?H.data.slice():H}_.series.emptyCollapsedSeries(E.config.series)}return _.update(r).then(function(){A===y.length-1&&v(_)})})})}},{key:"_updateSeries",value:function(r,a){var l=this,u=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return new Promise(function(d){var f,v=l.w;return v.globals.shouldAnimate=a,v.globals.dataChanged=!0,a&&l.ctx.series.getPreviousPaths(),v.globals.axisCharts?((f=r.map(function(y,_){return l._extendSeries(y,_)})).length===0&&(f=[{data:[]}]),v.config.series=f):v.config.series=r.slice(),u&&(v.globals.initialConfig.series=R.clone(v.config.series),v.globals.initialSeries=R.clone(v.config.series)),l.ctx.update().then(function(){d(l.ctx)})})}},{key:"_extendSeries",value:function(r,a){var l=this.w,u=l.config.series[a];return i(i({},l.config.series[a]),{},{name:r.name?r.name:u==null?void 0:u.name,color:r.color?r.color:u==null?void 0:u.color,type:r.type?r.type:u==null?void 0:u.type,group:r.group?r.group:u==null?void 0:u.group,data:r.data?r.data:u==null?void 0:u.data,zIndex:r.zIndex!==void 0?r.zIndex:a})}},{key:"toggleDataPointSelection",value:function(r,a){var l=this.w,u=null,d=".apexcharts-series[data\\:realIndex='".concat(r,"']");return l.globals.axisCharts?u=l.globals.dom.Paper.select("".concat(d," path[j='").concat(a,"'], ").concat(d," circle[j='").concat(a,"'], ").concat(d," rect[j='").concat(a,"']")).members[0]:a===void 0&&(u=l.globals.dom.Paper.select("".concat(d," path[j='").concat(r,"']")).members[0],l.config.chart.type!=="pie"&&l.config.chart.type!=="polarArea"&&l.config.chart.type!=="donut"||this.ctx.pie.pieClicked(r)),u?(new Z(this.ctx).pathMouseDown(u,null),u.node?u.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(r){var a=this.w;if(["min","max"].forEach(function(u){r.xaxis[u]!==void 0&&(a.config.xaxis[u]=r.xaxis[u],a.globals.lastXAxis[u]=r.xaxis[u])}),r.xaxis.categories&&r.xaxis.categories.length&&(a.config.xaxis.categories=r.xaxis.categories),a.config.xaxis.convertedCatToNumeric){var l=new we(r);r=l.convertCatToNumericXaxis(r,this.ctx)}return r}},{key:"forceYAxisUpdate",value:function(r){return r.chart&&r.chart.stacked&&r.chart.stackType==="100%"&&(Array.isArray(r.yaxis)?r.yaxis.forEach(function(a,l){r.yaxis[l].min=0,r.yaxis[l].max=100}):(r.yaxis.min=0,r.yaxis.max=100)),r}},{key:"revertDefaultAxisMinMax",value:function(r){var a=this,l=this.w,u=l.globals.lastXAxis,d=l.globals.lastYAxis;r&&r.xaxis&&(u=r.xaxis),r&&r.yaxis&&(d=r.yaxis),l.config.xaxis.min=u.min,l.config.xaxis.max=u.max;var f=function(v){d[v]!==void 0&&(l.config.yaxis[v].min=d[v].min,l.config.yaxis[v].max=d[v].max)};l.config.yaxis.map(function(v,y){l.globals.zoomed||d[y]!==void 0?f(y):a.ctx.opts.yaxis[y]!==void 0&&(v.min=a.ctx.opts.yaxis[y].min,v.max=a.ctx.opts.yaxis[y].max)})}}]),G}();xi=typeof window<"u"?window:void 0,Hr=function(G,r){var a=(this!==void 0?this:G).SVG=function(w){if(a.supported)return w=new a.Doc(w),a.parser.draw||a.prepare(),w};if(a.ns="http://www.w3.org/2000/svg",a.xmlns="http://www.w3.org/2000/xmlns/",a.xlink="http://www.w3.org/1999/xlink",a.svgjs="http://svgjs.dev",a.supported=!0,!a.supported)return!1;a.did=1e3,a.eid=function(w){return"Svgjs"+A(w)+a.did++},a.create=function(w){var D=r.createElementNS(this.ns,w);return D.setAttribute("id",this.eid(w)),D},a.extend=function(){var w,D;D=(w=[].slice.call(arguments)).pop();for(var V=w.length-1;V>=0;V--)if(w[V])for(var $ in D)w[V].prototype[$]=D[$];a.Set&&a.Set.inherit&&a.Set.inherit()},a.invent=function(w){var D=typeof w.create=="function"?w.create:function(){this.constructor.call(this,a.create(w.create))};return w.inherit&&(D.prototype=new w.inherit),w.extend&&a.extend(D,w.extend),w.construct&&a.extend(w.parent||a.Container,w.construct),D},a.adopt=function(w){return w?w.instance?w.instance:((D=w.nodeName=="svg"?w.parentNode instanceof G.SVGElement?new a.Nested:new a.Doc:w.nodeName=="linearGradient"?new a.Gradient("linear"):w.nodeName=="radialGradient"?new a.Gradient("radial"):a[A(w.nodeName)]?new a[A(w.nodeName)]:new a.Element(w)).type=w.nodeName,D.node=w,w.instance=D,D instanceof a.Doc&&D.namespace().defs(),D.setData(JSON.parse(w.getAttribute("svgjs:data"))||{}),D):null;var D},a.prepare=function(){var w=r.getElementsByTagName("body")[0],D=(w?new a.Doc(w):a.adopt(r.documentElement).nested()).size(2,0);a.parser={body:w||r.documentElement,draw:D.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:D.polyline().node,path:D.path().node,native:a.create("svg")}},a.parser={native:a.create("svg")},r.addEventListener("DOMContentLoaded",function(){a.parser.draw||a.prepare()},!1),a.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},a.utils={map:function(w,D){for(var V=w.length,$=[],Q=0;Q<V;Q++)$.push(D(w[Q]));return $},filter:function(w,D){for(var V=w.length,$=[],Q=0;Q<V;Q++)D(w[Q])&&$.push(w[Q]);return $},filterSVGElements:function(w){return this.filter(w,function(D){return D instanceof G.SVGElement})}},a.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},a.Color=function(w){var D,V;this.r=0,this.g=0,this.b=0,w&&(typeof w=="string"?a.regex.isRgb.test(w)?(D=a.regex.rgb.exec(w.replace(a.regex.whitespace,"")),this.r=parseInt(D[1]),this.g=parseInt(D[2]),this.b=parseInt(D[3])):a.regex.isHex.test(w)&&(D=a.regex.hex.exec((V=w).length==4?["#",V.substring(1,2),V.substring(1,2),V.substring(2,3),V.substring(2,3),V.substring(3,4),V.substring(3,4)].join(""):V),this.r=parseInt(D[1],16),this.g=parseInt(D[2],16),this.b=parseInt(D[3],16)):s(w)==="object"&&(this.r=w.r,this.g=w.g,this.b=w.b))},a.extend(a.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+E(this.r)+E(this.g)+E(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(w){return this.destination=new a.Color(w),this},at:function(w){return this.destination?(w=w<0?0:w>1?1:w,new a.Color({r:~~(this.r+(this.destination.r-this.r)*w),g:~~(this.g+(this.destination.g-this.g)*w),b:~~(this.b+(this.destination.b-this.b)*w)})):this}}),a.Color.test=function(w){return w+="",a.regex.isHex.test(w)||a.regex.isRgb.test(w)},a.Color.isRgb=function(w){return w&&typeof w.r=="number"&&typeof w.g=="number"&&typeof w.b=="number"},a.Color.isColor=function(w){return a.Color.isRgb(w)||a.Color.test(w)},a.Array=function(w,D){(w=(w||[]).valueOf()).length==0&&D&&(w=D.valueOf()),this.value=this.parse(w)},a.extend(a.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(w){return w=w.valueOf(),Array.isArray(w)?w:this.split(w)}}),a.PointArray=function(w,D){a.Array.call(this,w,D||[[0,0]])},a.PointArray.prototype=new a.Array,a.PointArray.prototype.constructor=a.PointArray;for(var l={M:function(w,D,V){return D.x=V.x=w[0],D.y=V.y=w[1],["M",D.x,D.y]},L:function(w,D){return D.x=w[0],D.y=w[1],["L",w[0],w[1]]},H:function(w,D){return D.x=w[0],["H",w[0]]},V:function(w,D){return D.y=w[0],["V",w[0]]},C:function(w,D){return D.x=w[4],D.y=w[5],["C",w[0],w[1],w[2],w[3],w[4],w[5]]},Q:function(w,D){return D.x=w[2],D.y=w[3],["Q",w[0],w[1],w[2],w[3]]},S:function(w,D){return D.x=w[2],D.y=w[3],["S",w[0],w[1],w[2],w[3]]},Z:function(w,D,V){return D.x=V.x,D.y=V.y,["Z"]}},u="mlhvqtcsaz".split(""),d=0,f=u.length;d<f;++d)l[u[d]]=function(w){return function(D,V,$){if(w=="H")D[0]=D[0]+V.x;else if(w=="V")D[0]=D[0]+V.y;else if(w=="A")D[5]=D[5]+V.x,D[6]=D[6]+V.y;else for(var Q=0,ne=D.length;Q<ne;++Q)D[Q]=D[Q]+(Q%2?V.y:V.x);if(l&&typeof l[w]=="function")return l[w](D,V,$)}}(u[d].toUpperCase());a.PathArray=function(w,D){a.Array.call(this,w,D||[["M",0,0]])},a.PathArray.prototype=new a.Array,a.PathArray.prototype.constructor=a.PathArray,a.extend(a.PathArray,{toString:function(){return function(w){for(var D=0,V=w.length,$="";D<V;D++)$+=w[D][0],w[D][1]!=null&&($+=w[D][1],w[D][2]!=null&&($+=" ",$+=w[D][2],w[D][3]!=null&&($+=" ",$+=w[D][3],$+=" ",$+=w[D][4],w[D][5]!=null&&($+=" ",$+=w[D][5],$+=" ",$+=w[D][6],w[D][7]!=null&&($+=" ",$+=w[D][7])))));return $+" "}(this.value)},move:function(w,D){var V=this.bbox();return V.x,V.y,this},at:function(w){if(!this.destination)return this;for(var D=this.value,V=this.destination.value,$=[],Q=new a.PathArray,ne=0,fe=D.length;ne<fe;ne++){$[ne]=[D[ne][0]];for(var de=1,Me=D[ne].length;de<Me;de++)$[ne][de]=D[ne][de]+(V[ne][de]-D[ne][de])*w;$[ne][0]==="A"&&($[ne][4]=+($[ne][4]!=0),$[ne][5]=+($[ne][5]!=0))}return Q.value=$,Q},parse:function(w){if(w instanceof a.PathArray)return w.valueOf();var D,V={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};w=typeof w=="string"?w.replace(a.regex.numbersWithDots,y).replace(a.regex.pathLetters," $& ").replace(a.regex.hyphen,"$1 -").trim().split(a.regex.delimiter):w.reduce(function(Me,Oe){return[].concat.call(Me,Oe)},[]);var $=[],Q=new a.Point,ne=new a.Point,fe=0,de=w.length;do a.regex.isPathLetter.test(w[fe])?(D=w[fe],++fe):D=="M"?D="L":D=="m"&&(D="l"),$.push(l[D].call(null,w.slice(fe,fe+=V[D.toUpperCase()]).map(parseFloat),Q,ne));while(de>fe);return $},bbox:function(){return a.parser.draw||a.prepare(),a.parser.path.setAttribute("d",this.toString()),a.parser.path.getBBox()}}),a.Number=a.invent({create:function(w,D){this.value=0,this.unit=D||"",typeof w=="number"?this.value=isNaN(w)?0:isFinite(w)?w:w<0?-34e37:34e37:typeof w=="string"?(D=w.match(a.regex.numberAndUnit))&&(this.value=parseFloat(D[1]),D[5]=="%"?this.value/=100:D[5]=="s"&&(this.value*=1e3),this.unit=D[5]):w instanceof a.Number&&(this.value=w.valueOf(),this.unit=w.unit)},extend:{toString:function(){return(this.unit=="%"?~~(1e8*this.value)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(w){return w=new a.Number(w),new a.Number(this+w,this.unit||w.unit)},minus:function(w){return w=new a.Number(w),new a.Number(this-w,this.unit||w.unit)},times:function(w){return w=new a.Number(w),new a.Number(this*w,this.unit||w.unit)},divide:function(w){return w=new a.Number(w),new a.Number(this/w,this.unit||w.unit)},to:function(w){var D=new a.Number(this);return typeof w=="string"&&(D.unit=w),D},morph:function(w){return this.destination=new a.Number(w),w.relative&&(this.destination.value+=this.value),this},at:function(w){return this.destination?new a.Number(this.destination).minus(this).times(w).plus(this):this}}}),a.Element=a.invent({create:function(w){this._stroke=a.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=w)&&(this.type=w.nodeName,this.node.instance=this,this._stroke=w.getAttribute("stroke")||this._stroke)},extend:{x:function(w){return this.attr("x",w)},y:function(w){return this.attr("y",w)},cx:function(w){return w==null?this.x()+this.width()/2:this.x(w-this.width()/2)},cy:function(w){return w==null?this.y()+this.height()/2:this.y(w-this.height()/2)},move:function(w,D){return this.x(w).y(D)},center:function(w,D){return this.cx(w).cy(D)},width:function(w){return this.attr("width",w)},height:function(w){return this.attr("height",w)},size:function(w,D){var V=T(this,w,D);return this.width(new a.Number(V.width)).height(new a.Number(V.height))},clone:function(w){this.writeDataToDom();var D=H(this.node.cloneNode(!0));return w?w.add(D):this.after(D),D},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(w){return this.after(w).remove(),w},addTo:function(w){return w.put(this)},putIn:function(w){return w.add(this)},id:function(w){return this.attr("id",w)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var w=this.attr("class");return w==null?[]:w.trim().split(a.regex.delimiter)},hasClass:function(w){return this.classes().indexOf(w)!=-1},addClass:function(w){if(!this.hasClass(w)){var D=this.classes();D.push(w),this.attr("class",D.join(" "))}return this},removeClass:function(w){return this.hasClass(w)&&this.attr("class",this.classes().filter(function(D){return D!=w}).join(" ")),this},toggleClass:function(w){return this.hasClass(w)?this.removeClass(w):this.addClass(w)},reference:function(w){return a.get(this.attr(w))},parent:function(w){var D=this;if(!D.node.parentNode)return null;if(D=a.adopt(D.node.parentNode),!w)return D;for(;D&&D.node instanceof G.SVGElement;){if(typeof w=="string"?D.matches(w):D instanceof w)return D;if(!D.node.parentNode||D.node.parentNode.nodeName=="#document")return null;D=a.adopt(D.node.parentNode)}},doc:function(){return this instanceof a.Doc?this:this.parent(a.Doc)},parents:function(w){var D=[],V=this;do{if(!(V=V.parent(w))||!V.node)break;D.push(V)}while(V.parent);return D},matches:function(w){return function(D,V){return(D.matches||D.matchesSelector||D.msMatchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector).call(D,V)}(this.node,w)},native:function(){return this.node},svg:function(w){var D=r.createElementNS("http://www.w3.org/2000/svg","svg");if(!(w&&this instanceof a.Parent))return D.appendChild(w=r.createElementNS("http://www.w3.org/2000/svg","svg")),this.writeDataToDom(),w.appendChild(this.node.cloneNode(!0)),D.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");D.innerHTML="<svg>"+w.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var V=0,$=D.firstChild.childNodes.length;V<$;V++)this.node.appendChild(D.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each(function(){this.writeDataToDom()}),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(w){return this.dom=w,this},is:function(w){return function(D,V){return D instanceof V}(this,w)}}}),a.easing={"-":function(w){return w},"<>":function(w){return-Math.cos(w*Math.PI)/2+.5},">":function(w){return Math.sin(w*Math.PI/2)},"<":function(w){return 1-Math.cos(w*Math.PI/2)}},a.morph=function(w){return function(D,V){return new a.MorphObj(D,V).at(w)}},a.Situation=a.invent({create:function(w){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new a.Number(w.duration).valueOf(),this.delay=new a.Number(w.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=w.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),a.FX=a.invent({create:function(w){this._target=w,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(w,D,V){s(w)==="object"&&(D=w.ease,V=w.delay,w=w.duration);var $=new a.Situation({duration:w||1e3,delay:V||0,ease:a.easing[D||"-"]||D});return this.queue($),this},target:function(w){return w&&w instanceof a.Element?(this._target=w,this):this._target},timeToAbsPos:function(w){return(w-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(w){return this.situation.duration/this._speed*w+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=G.requestAnimationFrame((function(){this.step()}).bind(this))},stopAnimFrame:function(){G.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(w){return(typeof w=="function"||w instanceof a.Situation)&&this.situations.push(w),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof a.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var w,D=this.situation;if(D.init)return this;for(var V in D.animations){w=this.target()[V](),Array.isArray(w)||(w=[w]),Array.isArray(D.animations[V])||(D.animations[V]=[D.animations[V]]);for(var $=w.length;$--;)D.animations[V][$]instanceof a.Number&&(w[$]=new a.Number(w[$])),D.animations[V][$]=w[$].morph(D.animations[V][$])}for(var V in D.attrs)D.attrs[V]=new a.MorphObj(this.target().attr(V),D.attrs[V]);for(var V in D.styles)D.styles[V]=new a.MorphObj(this.target().style(V),D.styles[V]);return D.initialTransformation=this.target().matrixify(),D.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(w,D){var V=this.active;return this.active=!1,D&&this.clearQueue(),w&&this.situation&&(!V&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(w){var D=this.last();return this.target().on("finished.fx",function V($){$.detail.situation==D&&(w.call(this,D),this.off("finished.fx",V))}),this._callStart()},during:function(w){var D=this.last(),V=function($){$.detail.situation==D&&w.call(this,$.detail.pos,a.morph($.detail.pos),$.detail.eased,D)};return this.target().off("during.fx",V).on("during.fx",V),this.after(function(){this.off("during.fx",V)}),this._callStart()},afterAll:function(w){var D=function V($){w.call(this),this.off("allfinished.fx",V)};return this.target().off("allfinished.fx",D).on("allfinished.fx",D),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(w,D,V){return this.last()[V||"animations"][w]=D,this._callStart()},step:function(w){var D,V,$;w||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1?(D=Math.max(this.absPos,0),V=Math.floor(D),this.situation.loops===!0||V<this.situation.loops?(this.pos=D-V,$=this.situation.loop,this.situation.loop=V):(this.absPos=this.situation.loops,this.pos=1,$=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=!!((this.situation.loop-$)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Q=this.situation.ease(this.pos);for(var ne in this.situation.once)ne>this.lastPos&&ne<=Q&&(this.situation.once[ne].call(this.target(),this.pos,Q),delete this.situation.once[ne]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Q,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Q,this):this},eachAt:function(){var w,D=this,V=this.target(),$=this.situation;for(var Q in $.animations)w=[].concat($.animations[Q]).map(function(de){return typeof de!="string"&&de.at?de.at($.ease(D.pos),D.pos):de}),V[Q].apply(V,w);for(var Q in $.attrs)w=[Q].concat($.attrs[Q]).map(function(Me){return typeof Me!="string"&&Me.at?Me.at($.ease(D.pos),D.pos):Me}),V.attr.apply(V,w);for(var Q in $.styles)w=[Q].concat($.styles[Q]).map(function(Me){return typeof Me!="string"&&Me.at?Me.at($.ease(D.pos),D.pos):Me}),V.style.apply(V,w);if($.transforms.length){w=$.initialTransformation,Q=0;for(var ne=$.transforms.length;Q<ne;Q++){var fe=$.transforms[Q];fe instanceof a.Matrix?w=fe.relative?w.multiply(new a.Matrix().morph(fe).at($.ease(this.pos))):w.morph(fe).at($.ease(this.pos)):(fe.relative||fe.undo(w.extract()),w=w.multiply(fe.at($.ease(this.pos))))}V.matrix(w)}return this},once:function(w,D,V){var $=this.last();return V||(w=$.ease(w)),$.once[w]=D,this},_callStart:function(){return setTimeout((function(){this.start()}).bind(this),0),this}},parent:a.Element,construct:{animate:function(w,D,V){return(this.fx||(this.fx=new a.FX(this))).animate(w,D,V)},delay:function(w){return(this.fx||(this.fx=new a.FX(this))).delay(w)},stop:function(w,D){return this.fx&&this.fx.stop(w,D),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),a.MorphObj=a.invent({create:function(w,D){return a.Color.isColor(D)?new a.Color(w).morph(D):a.regex.delimiter.test(w)?a.regex.pathLetters.test(w)?new a.PathArray(w).morph(D):new a.Array(w).morph(D):a.regex.numberAndUnit.test(D)?new a.Number(w).morph(D):(this.value=w,void(this.destination=D))},extend:{at:function(w,D){return D<1?this.value:this.destination},valueOf:function(){return this.value}}}),a.extend(a.FX,{attr:function(w,D,V){if(s(w)==="object")for(var $ in w)this.attr($,w[$]);else this.add(w,D,"attrs");return this},plot:function(w,D,V,$){return arguments.length==4?this.plot([w,D,V,$]):this.add("plot",new(this.target()).morphArray(w))}}),a.Box=a.invent({create:function(w,D,V,$){if(!(s(w)!=="object"||w instanceof a.Element))return a.Box.call(this,w.left!=null?w.left:w.x,w.top!=null?w.top:w.y,w.width,w.height);var Q;arguments.length==4&&(this.x=w,this.y=D,this.width=V,this.height=$),(Q=this).x==null&&(Q.x=0,Q.y=0,Q.width=0,Q.height=0),Q.w=Q.width,Q.h=Q.height,Q.x2=Q.x+Q.width,Q.y2=Q.y+Q.height,Q.cx=Q.x+Q.width/2,Q.cy=Q.y+Q.height/2}}),a.BBox=a.invent({create:function(w){if(a.Box.apply(this,[].slice.call(arguments)),w instanceof a.Element){var D;try{if(!r.documentElement.contains){for(var V=w.node;V.parentNode;)V=V.parentNode;if(V!=r)throw new Error("Element not in the dom")}D=w.node.getBBox()}catch{if(w instanceof a.Shape){a.parser.draw||a.prepare();var $=w.clone(a.parser.draw.instance).show();$&&$.node&&typeof $.node.getBBox=="function"&&(D=$.node.getBBox()),$&&typeof $.remove=="function"&&$.remove()}else D={x:w.node.clientLeft,y:w.node.clientTop,width:w.node.clientWidth,height:w.node.clientHeight}}a.Box.call(this,D)}},inherit:a.Box,parent:a.Element,construct:{bbox:function(){return new a.BBox(this)}}}),a.BBox.prototype.constructor=a.BBox,a.Matrix=a.invent({create:function(w){var D=U([1,0,0,1,0,0]);w=w===null?D:w instanceof a.Element?w.matrixify():typeof w=="string"?U(w.split(a.regex.delimiter).map(parseFloat)):arguments.length==6?U([].slice.call(arguments)):Array.isArray(w)?U(w):w&&s(w)==="object"?w:D;for(var V=Y.length-1;V>=0;--V)this[Y[V]]=w[Y[V]]!=null?w[Y[V]]:D[Y[V]]},extend:{extract:function(){var w=N(this,0,1);N(this,1,0);var D=180/Math.PI*Math.atan2(w.y,w.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(D*Math.PI/180)+this.f*Math.sin(D*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(D*Math.PI/180)+this.e*Math.sin(-D*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:D,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new a.Matrix(this)}},clone:function(){return new a.Matrix(this)},morph:function(w){return this.destination=new a.Matrix(w),this},multiply:function(w){return new a.Matrix(this.native().multiply(function(D){return D instanceof a.Matrix||(D=new a.Matrix(D)),D}(w).native()))},inverse:function(){return new a.Matrix(this.native().inverse())},translate:function(w,D){return new a.Matrix(this.native().translate(w||0,D||0))},native:function(){for(var w=a.parser.native.createSVGMatrix(),D=Y.length-1;D>=0;D--)w[Y[D]]=this[Y[D]];return w},toString:function(){return"matrix("+X(this.a)+","+X(this.b)+","+X(this.c)+","+X(this.d)+","+X(this.e)+","+X(this.f)+")"}},parent:a.Element,construct:{ctm:function(){return new a.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof a.Nested){var w=this.rect(1,1),D=w.node.getScreenCTM();return w.remove(),new a.Matrix(D)}return new a.Matrix(this.node.getScreenCTM())}}}),a.Point=a.invent({create:function(w,D){var V;V=Array.isArray(w)?{x:w[0],y:w[1]}:s(w)==="object"?{x:w.x,y:w.y}:w!=null?{x:w,y:D??w}:{x:0,y:0},this.x=V.x,this.y=V.y},extend:{clone:function(){return new a.Point(this)},morph:function(w,D){return this.destination=new a.Point(w,D),this}}}),a.extend(a.Element,{point:function(w,D){return new a.Point(w,D).transform(this.screenCTM().inverse())}}),a.extend(a.Element,{attr:function(w,D,V){if(w==null){for(w={},V=(D=this.node.attributes).length-1;V>=0;V--)w[D[V].nodeName]=a.regex.isNumber.test(D[V].nodeValue)?parseFloat(D[V].nodeValue):D[V].nodeValue;return w}if(s(w)==="object")for(var $ in w)this.attr($,w[$]);else if(D===null)this.node.removeAttribute(w);else{if(D==null)return(D=this.node.getAttribute(w))==null?a.defaults.attrs[w]:a.regex.isNumber.test(D)?parseFloat(D):D;w=="stroke-width"?this.attr("stroke",parseFloat(D)>0?this._stroke:null):w=="stroke"&&(this._stroke=D),w!="fill"&&w!="stroke"||(a.regex.isImage.test(D)&&(D=this.doc().defs().image(D,0,0)),D instanceof a.Image&&(D=this.doc().defs().pattern(0,0,function(){this.add(D)}))),typeof D=="number"?D=new a.Number(D):a.Color.isColor(D)?D=new a.Color(D):Array.isArray(D)&&(D=new a.Array(D)),w=="leading"?this.leading&&this.leading(D):typeof V=="string"?this.node.setAttributeNS(V,w,D.toString()):this.node.setAttribute(w,D.toString()),!this.rebuild||w!="font-size"&&w!="x"||this.rebuild(w,D)}return this}}),a.extend(a.Element,{transform:function(w,D){var V;return s(w)!=="object"?(V=new a.Matrix(this).extract(),typeof w=="string"?V[w]:V):(V=new a.Matrix(this),D=!!D||!!w.relative,w.a!=null&&(V=D?V.multiply(new a.Matrix(w)):new a.Matrix(w)),this.attr("transform",V))}}),a.extend(a.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(a.regex.transforms).slice(0,-1).map(function(w){var D=w.trim().split("(");return[D[0],D[1].split(a.regex.delimiter).map(function(V){return parseFloat(V)})]}).reduce(function(w,D){return D[0]=="matrix"?w.multiply(U(D[1])):w[D[0]].apply(w,D[1])},new a.Matrix)},toParent:function(w){if(this==w)return this;var D=this.screenCTM(),V=w.screenCTM().inverse();return this.addTo(w).untransform().transform(V.multiply(D)),this},toDoc:function(){return this.toParent(this.doc())}}),a.Transformation=a.invent({create:function(w,D){if(arguments.length>1&&typeof D!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(w))for(var V=0,$=this.arguments.length;V<$;++V)this[this.arguments[V]]=w[V];else if(w&&s(w)==="object")for(V=0,$=this.arguments.length;V<$;++V)this[this.arguments[V]]=w[this.arguments[V]];this.inversed=!1,D===!0&&(this.inversed=!0)}}),a.Translate=a.invent({parent:a.Matrix,inherit:a.Transformation,create:function(w,D){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),a.extend(a.Element,{style:function(w,D){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(s(w)==="object")for(var V in w)this.style(V,w[V]);else{if(!a.regex.isCss.test(w))return this.node.style[_(w)];for(w=w.split(/\s*;\s*/).filter(function($){return!!$}).map(function($){return $.split(/\s*:\s*/)});D=w.pop();)this.style(D[0],D[1])}else this.node.style[_(w)]=D===null||a.regex.isBlank.test(D)?"":D;return this}}),a.Parent=a.invent({create:function(w){this.constructor.call(this,w)},inherit:a.Element,extend:{children:function(){return a.utils.map(a.utils.filterSVGElements(this.node.childNodes),function(w){return a.adopt(w)})},add:function(w,D){return D==null?this.node.appendChild(w.node):w.node!=this.node.childNodes[D]&&this.node.insertBefore(w.node,this.node.childNodes[D]),this},put:function(w,D){return this.add(w,D),w},has:function(w){return this.index(w)>=0},index:function(w){return[].slice.call(this.node.childNodes).indexOf(w.node)},get:function(w){return a.adopt(this.node.childNodes[w])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(w,D){for(var V=this.children(),$=0,Q=V.length;$<Q;$++)V[$]instanceof a.Element&&w.apply(V[$],[$,V]),D&&V[$]instanceof a.Container&&V[$].each(w,D);return this},removeElement:function(w){return this.node.removeChild(w.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),a.extend(a.Parent,{ungroup:function(w,D){return D===0||this instanceof a.Defs||this.node==a.parser.draw||(w=w||(this instanceof a.Doc?this:this.parent(a.Parent)),D=D||1/0,this.each(function(){return this instanceof a.Defs?this:this instanceof a.Parent?this.ungroup(w,D-1):this.toParent(w)}),this.node.firstChild||this.remove()),this},flatten:function(w,D){return this.ungroup(w,D)}}),a.Container=a.invent({create:function(w){this.constructor.call(this,w)},inherit:a.Parent}),a.ViewBox=a.invent({parent:a.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(w){a.Element.prototype[w]=function(D){return a.on(this.node,w,D),this}}),a.listeners=[],a.handlerMap=[],a.listenerId=0,a.on=function(w,D,V,$,Q){var ne=V.bind($||w.instance||w),fe=(a.handlerMap.indexOf(w)+1||a.handlerMap.push(w))-1,de=D.split(".")[0],Me=D.split(".")[1]||"*";a.listeners[fe]=a.listeners[fe]||{},a.listeners[fe][de]=a.listeners[fe][de]||{},a.listeners[fe][de][Me]=a.listeners[fe][de][Me]||{},V._svgjsListenerId||(V._svgjsListenerId=++a.listenerId),a.listeners[fe][de][Me][V._svgjsListenerId]=ne,w.addEventListener(de,ne,Q||{passive:!1})},a.off=function(w,D,V){var $=a.handlerMap.indexOf(w),Q=D&&D.split(".")[0],ne=D&&D.split(".")[1],fe="";if($!=-1)if(V){if(typeof V=="function"&&(V=V._svgjsListenerId),!V)return;a.listeners[$][Q]&&a.listeners[$][Q][ne||"*"]&&(w.removeEventListener(Q,a.listeners[$][Q][ne||"*"][V],!1),delete a.listeners[$][Q][ne||"*"][V])}else if(ne&&Q){if(a.listeners[$][Q]&&a.listeners[$][Q][ne]){for(var de in a.listeners[$][Q][ne])a.off(w,[Q,ne].join("."),de);delete a.listeners[$][Q][ne]}}else if(ne)for(var Me in a.listeners[$])for(var fe in a.listeners[$][Me])ne===fe&&a.off(w,[Me,ne].join("."));else if(Q){if(a.listeners[$][Q]){for(var fe in a.listeners[$][Q])a.off(w,[Q,fe].join("."));delete a.listeners[$][Q]}}else{for(var Me in a.listeners[$])a.off(w,Me);delete a.listeners[$],delete a.handlerMap[$]}},a.extend(a.Element,{on:function(w,D,V,$){return a.on(this.node,w,D,V,$),this},off:function(w,D){return a.off(this.node,w,D),this},fire:function(w,D){return w instanceof G.Event?this.node.dispatchEvent(w):this.node.dispatchEvent(w=new a.CustomEvent(w,{detail:D,cancelable:!0})),this._event=w,this},event:function(){return this._event}}),a.Defs=a.invent({create:"defs",inherit:a.Container}),a.G=a.invent({create:"g",inherit:a.Container,extend:{x:function(w){return w==null?this.transform("x"):this.transform({x:w-this.x()},!0)}},construct:{group:function(){return this.put(new a.G)}}}),a.Doc=a.invent({create:function(w){w&&((w=typeof w=="string"?r.getElementById(w):w).nodeName=="svg"?this.constructor.call(this,w):(this.constructor.call(this,a.create("svg")),w.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:a.Container,extend:{namespace:function(){return this.attr({xmlns:a.ns,version:"1.1"}).attr("xmlns:xlink",a.xlink,a.xmlns).attr("xmlns:svgjs",a.svgjs,a.xmlns)},defs:function(){var w;return this._defs||((w=this.node.getElementsByTagName("defs")[0])?this._defs=a.adopt(w):this._defs=new a.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&this.node.parentNode.nodeName!="#document"?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,a.parser.draw&&!a.parser.draw.parentNode&&this.node.appendChild(a.parser.draw),this},clone:function(w){this.writeDataToDom();var D=this.node,V=H(D.cloneNode(!0));return w?(w.node||w).appendChild(V.node):D.parentNode.insertBefore(V.node,D.nextSibling),V}}}),a.extend(a.Element,{}),a.Gradient=a.invent({create:function(w){this.constructor.call(this,a.create(w+"Gradient")),this.type=w},inherit:a.Container,extend:{at:function(w,D,V){return this.put(new a.Stop).update(w,D,V)},update:function(w){return this.clear(),typeof w=="function"&&w.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(w,D,V){return w=="transform"&&(w="gradientTransform"),a.Container.prototype.attr.call(this,w,D,V)}},construct:{gradient:function(w,D){return this.defs().gradient(w,D)}}}),a.extend(a.Gradient,a.FX,{from:function(w,D){return(this._target||this).type=="radial"?this.attr({fx:new a.Number(w),fy:new a.Number(D)}):this.attr({x1:new a.Number(w),y1:new a.Number(D)})},to:function(w,D){return(this._target||this).type=="radial"?this.attr({cx:new a.Number(w),cy:new a.Number(D)}):this.attr({x2:new a.Number(w),y2:new a.Number(D)})}}),a.extend(a.Defs,{gradient:function(w,D){return this.put(new a.Gradient(w)).update(D)}}),a.Stop=a.invent({create:"stop",inherit:a.Element,extend:{update:function(w){return(typeof w=="number"||w instanceof a.Number)&&(w={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),w.opacity!=null&&this.attr("stop-opacity",w.opacity),w.color!=null&&this.attr("stop-color",w.color),w.offset!=null&&this.attr("offset",new a.Number(w.offset)),this}}}),a.Pattern=a.invent({create:"pattern",inherit:a.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(w){return this.clear(),typeof w=="function"&&w.call(this,this),this},toString:function(){return this.fill()},attr:function(w,D,V){return w=="transform"&&(w="patternTransform"),a.Container.prototype.attr.call(this,w,D,V)}},construct:{pattern:function(w,D,V){return this.defs().pattern(w,D,V)}}}),a.extend(a.Defs,{pattern:function(w,D,V){return this.put(new a.Pattern).update(V).attr({x:0,y:0,width:w,height:D,patternUnits:"userSpaceOnUse"})}}),a.Shape=a.invent({create:function(w){this.constructor.call(this,w)},inherit:a.Element}),a.Symbol=a.invent({create:"symbol",inherit:a.Container,construct:{symbol:function(){return this.put(new a.Symbol)}}}),a.Use=a.invent({create:"use",inherit:a.Shape,extend:{element:function(w,D){return this.attr("href",(D||"")+"#"+w,a.xlink)}},construct:{use:function(w,D){return this.put(new a.Use).element(w,D)}}}),a.Rect=a.invent({create:"rect",inherit:a.Shape,construct:{rect:function(w,D){return this.put(new a.Rect).size(w,D)}}}),a.Circle=a.invent({create:"circle",inherit:a.Shape,construct:{circle:function(w){return this.put(new a.Circle).rx(new a.Number(w).divide(2)).move(0,0)}}}),a.extend(a.Circle,a.FX,{rx:function(w){return this.attr("r",w)},ry:function(w){return this.rx(w)}}),a.Ellipse=a.invent({create:"ellipse",inherit:a.Shape,construct:{ellipse:function(w,D){return this.put(new a.Ellipse).size(w,D).move(0,0)}}}),a.extend(a.Ellipse,a.Rect,a.FX,{rx:function(w){return this.attr("rx",w)},ry:function(w){return this.attr("ry",w)}}),a.extend(a.Circle,a.Ellipse,{x:function(w){return w==null?this.cx()-this.rx():this.cx(w+this.rx())},y:function(w){return w==null?this.cy()-this.ry():this.cy(w+this.ry())},cx:function(w){return w==null?this.attr("cx"):this.attr("cx",w)},cy:function(w){return w==null?this.attr("cy"):this.attr("cy",w)},width:function(w){return w==null?2*this.rx():this.rx(new a.Number(w).divide(2))},height:function(w){return w==null?2*this.ry():this.ry(new a.Number(w).divide(2))},size:function(w,D){var V=T(this,w,D);return this.rx(new a.Number(V.width).divide(2)).ry(new a.Number(V.height).divide(2))}}),a.Line=a.invent({create:"line",inherit:a.Shape,extend:{array:function(){return new a.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(w,D,V,$){return w==null?this.array():(w=D!==void 0?{x1:w,y1:D,x2:V,y2:$}:new a.PointArray(w).toLine(),this.attr(w))},move:function(w,D){return this.attr(this.array().move(w,D).toLine())},size:function(w,D){var V=T(this,w,D);return this.attr(this.array().size(V.width,V.height).toLine())}},construct:{line:function(w,D,V,$){return a.Line.prototype.plot.apply(this.put(new a.Line),w!=null?[w,D,V,$]:[0,0,0,0])}}}),a.Polyline=a.invent({create:"polyline",inherit:a.Shape,construct:{polyline:function(w){return this.put(new a.Polyline).plot(w||new a.PointArray)}}}),a.Polygon=a.invent({create:"polygon",inherit:a.Shape,construct:{polygon:function(w){return this.put(new a.Polygon).plot(w||new a.PointArray)}}}),a.extend(a.Polyline,a.Polygon,{array:function(){return this._array||(this._array=new a.PointArray(this.attr("points")))},plot:function(w){return w==null?this.array():this.clear().attr("points",typeof w=="string"?w:this._array=new a.PointArray(w))},clear:function(){return delete this._array,this},move:function(w,D){return this.attr("points",this.array().move(w,D))},size:function(w,D){var V=T(this,w,D);return this.attr("points",this.array().size(V.width,V.height))}}),a.extend(a.Line,a.Polyline,a.Polygon,{morphArray:a.PointArray,x:function(w){return w==null?this.bbox().x:this.move(w,this.bbox().y)},y:function(w){return w==null?this.bbox().y:this.move(this.bbox().x,w)},width:function(w){var D=this.bbox();return w==null?D.width:this.size(w,D.height)},height:function(w){var D=this.bbox();return w==null?D.height:this.size(D.width,w)}}),a.Path=a.invent({create:"path",inherit:a.Shape,extend:{morphArray:a.PathArray,array:function(){return this._array||(this._array=new a.PathArray(this.attr("d")))},plot:function(w){return w==null?this.array():this.clear().attr("d",typeof w=="string"?w:this._array=new a.PathArray(w))},clear:function(){return delete this._array,this}},construct:{path:function(w){return this.put(new a.Path).plot(w||new a.PathArray)}}}),a.Image=a.invent({create:"image",inherit:a.Shape,extend:{load:function(w){if(!w)return this;var D=this,V=new G.Image;return a.on(V,"load",function(){a.off(V);var $=D.parent(a.Pattern);$!==null&&(D.width()==0&&D.height()==0&&D.size(V.width,V.height),$&&$.width()==0&&$.height()==0&&$.size(D.width(),D.height()),typeof D._loaded=="function"&&D._loaded.call(D,{width:V.width,height:V.height,ratio:V.width/V.height,url:w}))}),a.on(V,"error",function($){a.off(V),typeof D._error=="function"&&D._error.call(D,$)}),this.attr("href",V.src=this.src=w,a.xlink)},loaded:function(w){return this._loaded=w,this},error:function(w){return this._error=w,this}},construct:{image:function(w,D,V){return this.put(new a.Image).load(w).size(D||0,V||D||0)}}}),a.Text=a.invent({create:function(){this.constructor.call(this,a.create("text")),this.dom.leading=new a.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",a.defaults.attrs["font-family"])},inherit:a.Shape,extend:{x:function(w){return w==null?this.attr("x"):this.attr("x",w)},text:function(w){if(w===void 0){w="";for(var D=this.node.childNodes,V=0,$=D.length;V<$;++V)V!=0&&D[V].nodeType!=3&&a.adopt(D[V]).dom.newLined==1&&(w+=`
`),w+=D[V].textContent;return w}if(this.clear().build(!0),typeof w=="function")w.call(this,this);else{V=0;for(var Q=(w=w.split(`
`)).length;V<Q;V++)this.tspan(w[V]).newLine()}return this.build(!1).rebuild()},size:function(w){return this.attr("font-size",w).rebuild()},leading:function(w){return w==null?this.dom.leading:(this.dom.leading=new a.Number(w),this.rebuild())},lines:function(){var w=(this.textPath&&this.textPath()||this).node,D=a.utils.map(a.utils.filterSVGElements(w.childNodes),function(V){return a.adopt(V)});return new a.Set(D)},rebuild:function(w){if(typeof w=="boolean"&&(this._rebuild=w),this._rebuild){var D=this,V=0,$=this.dom.leading*new a.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(D.textPath()||this.attr("x",D.attr("x")),this.text()==`
`?V+=$:(this.attr("dy",$+V),V=0))}),this.fire("rebuild")}return this},build:function(w){return this._build=!!w,this},setData:function(w){return this.dom=w,this.dom.leading=new a.Number(w.leading||1.3),this}},construct:{text:function(w){return this.put(new a.Text).text(w)},plain:function(w){return this.put(new a.Text).plain(w)}}}),a.Tspan=a.invent({create:"tspan",inherit:a.Shape,extend:{text:function(w){return w==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof w=="function"?w.call(this,this):this.plain(w),this)},dx:function(w){return this.attr("dx",w)},dy:function(w){return this.attr("dy",w)},newLine:function(){var w=this.parent(a.Text);return this.dom.newLined=!0,this.dy(w.dom.leading*w.attr("font-size")).attr("x",w.x())}}}),a.extend(a.Text,a.Tspan,{plain:function(w){return this._build===!1&&this.clear(),this.node.appendChild(r.createTextNode(w)),this},tspan:function(w){var D=(this.textPath&&this.textPath()||this).node,V=new a.Tspan;return this._build===!1&&this.clear(),D.appendChild(V.node),V.text(w)},clear:function(){for(var w=(this.textPath&&this.textPath()||this).node;w.hasChildNodes();)w.removeChild(w.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),a.TextPath=a.invent({create:"textPath",inherit:a.Parent,parent:a.Text,construct:{morphArray:a.PathArray,array:function(){var w=this.track();return w?w.array():null},plot:function(w){var D=this.track(),V=null;return D&&(V=D.plot(w)),w==null?V:this},track:function(){var w=this.textPath();if(w)return w.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return a.adopt(this.node.firstChild)}}}),a.Nested=a.invent({create:function(){this.constructor.call(this,a.create("svg")),this.style("overflow","visible")},inherit:a.Container,construct:{nested:function(){return this.put(new a.Nested)}}});var v={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(w,D){return D=="color"?w:w+"-"+D}};function y(w,D,V,$){return V+$.replace(a.regex.dots," .")}function _(w){return w.toLowerCase().replace(/-(.)/g,function(D,V){return V.toUpperCase()})}function A(w){return w.charAt(0).toUpperCase()+w.slice(1)}function E(w){var D=w.toString(16);return D.length==1?"0"+D:D}function T(w,D,V){if(D==null||V==null){var $=w.bbox();D==null?D=$.width/$.height*V:V==null&&(V=$.height/$.width*D)}return{width:D,height:V}}function N(w,D,V){return{x:D*w.a+V*w.c+0,y:D*w.b+V*w.d+0}}function U(w){return{a:w[0],b:w[1],c:w[2],d:w[3],e:w[4],f:w[5]}}function H(w){for(var D=w.childNodes.length-1;D>=0;D--)w.childNodes[D]instanceof G.SVGElement&&H(w.childNodes[D]);return a.adopt(w).id(a.eid(w.nodeName))}function X(w){return Math.abs(w)>1e-37?w:0}["fill","stroke"].forEach(function(w){var D={};D[w]=function(V){if(V===void 0)return this;if(typeof V=="string"||a.Color.isRgb(V)||V&&typeof V.fill=="function")this.attr(w,V);else for(var $=v[w].length-1;$>=0;$--)V[v[w][$]]!=null&&this.attr(v.prefix(w,v[w][$]),V[v[w][$]]);return this},a.extend(a.Element,a.FX,D)}),a.extend(a.Element,a.FX,{translate:function(w,D){return this.transform({x:w,y:D})},matrix:function(w){return this.attr("transform",new a.Matrix(arguments.length==6?[].slice.call(arguments):w))},opacity:function(w){return this.attr("opacity",w)},dx:function(w){return this.x(new a.Number(w).plus(this instanceof a.FX?0:this.x()),!0)},dy:function(w){return this.y(new a.Number(w).plus(this instanceof a.FX?0:this.y()),!0)}}),a.extend(a.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(w){return this.node.getPointAtLength(w)}}),a.Set=a.invent({create:function(w){Array.isArray(w)?this.members=w:this.clear()},extend:{add:function(){for(var w=[].slice.call(arguments),D=0,V=w.length;D<V;D++)this.members.push(w[D]);return this},remove:function(w){var D=this.index(w);return D>-1&&this.members.splice(D,1),this},each:function(w){for(var D=0,V=this.members.length;D<V;D++)w.apply(this.members[D],[D,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(w){return this.index(w)>=0},index:function(w){return this.members.indexOf(w)},get:function(w){return this.members[w]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(w){return new a.Set(w)}}}),a.FX.Set=a.invent({create:function(w){this.set=w}}),a.Set.inherit=function(){var w=[];for(var D in a.Shape.prototype)typeof a.Shape.prototype[D]=="function"&&typeof a.Set.prototype[D]!="function"&&w.push(D);for(var D in w.forEach(function($){a.Set.prototype[$]=function(){for(var Q=0,ne=this.members.length;Q<ne;Q++)this.members[Q]&&typeof this.members[Q][$]=="function"&&this.members[Q][$].apply(this.members[Q],arguments);return $=="animate"?this.fx||(this.fx=new a.FX.Set(this)):this}}),w=[],a.FX.prototype)typeof a.FX.prototype[D]=="function"&&typeof a.FX.Set.prototype[D]!="function"&&w.push(D);w.forEach(function(V){a.FX.Set.prototype[V]=function(){for(var $=0,Q=this.set.members.length;$<Q;$++)this.set.members[$].fx[V].apply(this.set.members[$].fx,arguments);return this}})},a.extend(a.Element,{}),a.extend(a.Element,{remember:function(w,D){if(s(arguments[0])==="object")for(var V in w)this.remember(V,w[V]);else{if(arguments.length==1)return this.memory()[w];this.memory()[w]=D}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var w=arguments.length-1;w>=0;w--)delete this.memory()[arguments[w]];return this},memory:function(){return this._memory||(this._memory={})}}),a.get=function(w){var D=r.getElementById(function(V){var $=(V||"").toString().match(a.regex.reference);if($)return $[1]}(w)||w);return a.adopt(D)},a.select=function(w,D){return new a.Set(a.utils.map((D||r).querySelectorAll(w),function(V){return a.adopt(V)}))},a.extend(a.Parent,{select:function(w){return a.select(w,this.node)}});var Y="abcdef".split("");if(typeof G.CustomEvent!="function"){var q=function(w,D){D=D||{bubbles:!1,cancelable:!1,detail:void 0};var V=r.createEvent("CustomEvent");return V.initCustomEvent(w,D.bubbles,D.cancelable,D.detail),V};q.prototype=G.Event.prototype,a.CustomEvent=q}else a.CustomEvent=G.CustomEvent;return a},s(e)==="object"?n.exports=xi.document?Hr(xi,xi.document):function(G){return Hr(G,G.document)}:xi.SVG=Hr(xi,xi.document),(function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(f,v){return this.add(f,v),!f.attr("in")&&this.autoSetIn&&f.attr("in",this.source),f.attr("result")||f.attr("result",f),f},blend:function(f,v,y){return this.put(new SVG.BlendEffect(f,v,y))},colorMatrix:function(f,v){return this.put(new SVG.ColorMatrixEffect(f,v))},convolveMatrix:function(f){return this.put(new SVG.ConvolveMatrixEffect(f))},componentTransfer:function(f){return this.put(new SVG.ComponentTransferEffect(f))},composite:function(f,v,y){return this.put(new SVG.CompositeEffect(f,v,y))},flood:function(f,v){return this.put(new SVG.FloodEffect(f,v))},offset:function(f,v){return this.put(new SVG.OffsetEffect(f,v))},image:function(f){return this.put(new SVG.ImageEffect(f))},merge:function(){var f=[void 0];for(var v in arguments)f.push(arguments[v]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,f)))},gaussianBlur:function(f,v){return this.put(new SVG.GaussianBlurEffect(f,v))},morphology:function(f,v){return this.put(new SVG.MorphologyEffect(f,v))},diffuseLighting:function(f,v,y){return this.put(new SVG.DiffuseLightingEffect(f,v,y))},displacementMap:function(f,v,y,_,A){return this.put(new SVG.DisplacementMapEffect(f,v,y,_,A))},specularLighting:function(f,v,y,_){return this.put(new SVG.SpecularLightingEffect(f,v,y,_))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(f,v,y,_,A){return this.put(new SVG.TurbulenceEffect(f,v,y,_,A))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(f){var v=this.put(new SVG.Filter);return typeof f=="function"&&f.call(v,v),v}}),SVG.extend(SVG.Container,{filter:function(f){return this.defs().filter(f)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(f){return this.filterer=f instanceof SVG.Element?f:this.doc().filter(f),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(f){return this.filterer&&f===!0&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(f){return f==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",f)},result:function(f){return f==null?this.attr("result"):this.attr("result",f)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(f){return f==null?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",f)},result:function(f){return f==null?this.attr("result"):this.attr("result",f)},toString:function(){return this.result()}}});var G={blend:function(f,v){return this.parent()&&this.parent().blend(this,f,v)},colorMatrix:function(f,v){return this.parent()&&this.parent().colorMatrix(f,v).in(this)},convolveMatrix:function(f){return this.parent()&&this.parent().convolveMatrix(f).in(this)},componentTransfer:function(f){return this.parent()&&this.parent().componentTransfer(f).in(this)},composite:function(f,v){return this.parent()&&this.parent().composite(this,f,v)},flood:function(f,v){return this.parent()&&this.parent().flood(f,v)},offset:function(f,v){return this.parent()&&this.parent().offset(f,v).in(this)},image:function(f){return this.parent()&&this.parent().image(f)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(f,v){return this.parent()&&this.parent().gaussianBlur(f,v).in(this)},morphology:function(f,v){return this.parent()&&this.parent().morphology(f,v).in(this)},diffuseLighting:function(f,v,y){return this.parent()&&this.parent().diffuseLighting(f,v,y).in(this)},displacementMap:function(f,v,y,_){return this.parent()&&this.parent().displacementMap(this,f,v,y,_)},specularLighting:function(f,v,y,_){return this.parent()&&this.parent().specularLighting(f,v,y,_).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(f,v,y,_,A){return this.parent()&&this.parent().turbulence(f,v,y,_,A).in(this)}};SVG.extend(SVG.Effect,G),SVG.extend(SVG.ParentEffect,G),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(f){this.attr("in",f)}}});var r={blend:function(f,v,y){this.attr({in:f,in2:v,mode:y||"normal"})},colorMatrix:function(f,v){f=="matrix"&&(v=u(v)),this.attr({type:f,values:v===void 0?null:v})},convolveMatrix:function(f){f=u(f),this.attr({order:Math.sqrt(f.split(" ").length),kernelMatrix:f})},composite:function(f,v,y){this.attr({in:f,in2:v,operator:y})},flood:function(f,v){this.attr("flood-color",f),v!=null&&this.attr("flood-opacity",v)},offset:function(f,v){this.attr({dx:f,dy:v})},image:function(f){this.attr("href",f,SVG.xlink)},displacementMap:function(f,v,y,_,A){this.attr({in:f,in2:v,scale:y,xChannelSelector:_,yChannelSelector:A})},gaussianBlur:function(f,v){f!=null||v!=null?this.attr("stdDeviation",function(y){if(!Array.isArray(y))return y;for(var _=0,A=y.length,E=[];_<A;_++)E.push(y[_]);return E.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(f,v){this.attr({operator:f,radius:v})},tile:function(){},turbulence:function(f,v,y,_,A){this.attr({numOctaves:v,seed:y,stitchTiles:_,baseFrequency:f,type:A})}},a={merge:function(){var f;if(arguments[0]instanceof SVG.Set){var v=this;arguments[0].each(function(_){this instanceof SVG.MergeNode?v.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&v.put(new SVG.MergeNode(this))})}else{f=Array.isArray(arguments[0])?arguments[0]:arguments;for(var y=0;y<f.length;y++)f[y]instanceof SVG.MergeNode?this.put(f[y]):this.put(new SVG.MergeNode(f[y]))}},componentTransfer:function(f){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach((function(y){this[y]=new SVG["Func"+y.toUpperCase()]("identity"),this.rgb.add(this[y]),this.node.appendChild(this[y].node)}).bind(this)),f)for(var v in f.rgb&&(["r","g","b"].forEach((function(y){this[y].attr(f.rgb)}).bind(this)),delete f.rgb),f)this[v].attr(f[v])},diffuseLighting:function(f,v,y){this.attr({surfaceScale:f,diffuseConstant:v,kernelUnitLength:y})},specularLighting:function(f,v,y,_){this.attr({surfaceScale:f,diffuseConstant:v,specularExponent:y,kernelUnitLength:_})}},l={distantLight:function(f,v){this.attr({azimuth:f,elevation:v})},pointLight:function(f,v,y){this.attr({x:f,y:v,z:y})},spotLight:function(f,v,y,_,A,E){this.attr({x:f,y:v,z:y,pointsAtX:_,pointsAtY:A,pointsAtZ:E})},mergeNode:function(f){this.attr("in",f)}};function u(f){return Array.isArray(f)&&(f=new SVG.Array(f)),f.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function d(){var f=function(){};for(var v in typeof arguments[arguments.length-1]=="function"&&(f=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var y in arguments[v])f(arguments[v][y],y,arguments[v])}["r","g","b","a"].forEach(function(f){l["Func"+f.toUpperCase()]=function(v){switch(this.attr("type",v),v){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}}),d(r,function(f,v){var y=v.charAt(0).toUpperCase()+v.slice(1);SVG[y+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+y)),f.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})}),d(a,function(f,v){var y=v.charAt(0).toUpperCase()+v.slice(1);SVG[y+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+y)),f.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})}),d(l,function(f,v){var y=v.charAt(0).toUpperCase()+v.slice(1);SVG[y]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+y)),f.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})}),SVG.extend(SVG.MergeEffect,{in:function(f){return f instanceof SVG.MergeNode?this.add(f,0):this.add(new SVG.MergeNode(f),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(f){return f==null?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",f)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}).call(void 0),function(){function G(d,f,v,y,_,A,E){for(var T=d.slice(f,v||E),N=y.slice(_,A||E),U=0,H={pos:[0,0],start:[0,0]},X={pos:[0,0],start:[0,0]};T[U]=r.call(H,T[U]),N[U]=r.call(X,N[U]),T[U][0]!=N[U][0]||T[U][0]=="M"||T[U][0]=="A"&&(T[U][4]!=N[U][4]||T[U][5]!=N[U][5])?(Array.prototype.splice.apply(T,[U,1].concat(l.call(H,T[U]))),Array.prototype.splice.apply(N,[U,1].concat(l.call(X,N[U])))):(T[U]=a.call(H,T[U]),N[U]=a.call(X,N[U])),!(++U==T.length&&U==N.length);)U==T.length&&T.push(["C",H.pos[0],H.pos[1],H.pos[0],H.pos[1],H.pos[0],H.pos[1]]),U==N.length&&N.push(["C",X.pos[0],X.pos[1],X.pos[0],X.pos[1],X.pos[0],X.pos[1]]);return{start:T,dest:N}}function r(d){switch(d[0]){case"z":case"Z":d[0]="L",d[1]=this.start[0],d[2]=this.start[1];break;case"H":d[0]="L",d[2]=this.pos[1];break;case"V":d[0]="L",d[2]=d[1],d[1]=this.pos[0];break;case"T":d[0]="Q",d[3]=d[1],d[4]=d[2],d[1]=this.reflection[1],d[2]=this.reflection[0];break;case"S":d[0]="C",d[6]=d[4],d[5]=d[3],d[4]=d[2],d[3]=d[1],d[2]=this.reflection[1],d[1]=this.reflection[0]}return d}function a(d){var f=d.length;return this.pos=[d[f-2],d[f-1]],"SCQT".indexOf(d[0])!=-1&&(this.reflection=[2*this.pos[0]-d[f-4],2*this.pos[1]-d[f-3]]),d}function l(d){var f=[d];switch(d[0]){case"M":return this.pos=this.start=[d[1],d[2]],f;case"L":d[5]=d[3]=d[1],d[6]=d[4]=d[2],d[1]=this.pos[0],d[2]=this.pos[1];break;case"Q":d[6]=d[4],d[5]=d[3],d[4]=1*d[4]/3+2*d[2]/3,d[3]=1*d[3]/3+2*d[1]/3,d[2]=1*this.pos[1]/3+2*d[2]/3,d[1]=1*this.pos[0]/3+2*d[1]/3;break;case"A":f=function(v,y){var _,A,E,T,N,U,H,X,Y,q,w,D,V,$,Q,ne,fe,de,Me,Oe,_e,Ne,it,mt,St,Mt,Ft=Math.abs(y[1]),Rt=Math.abs(y[2]),jt=y[3]%360,vn=y[4],Pt=y[5],gn=y[6],hi=y[7],on=new SVG.Point(v),ln=new SVG.Point(gn,hi),dn=[];if(Ft===0||Rt===0||on.x===ln.x&&on.y===ln.y)return[["C",on.x,on.y,ln.x,ln.y,ln.x,ln.y]];for(_=new SVG.Point((on.x-ln.x)/2,(on.y-ln.y)/2).transform(new SVG.Matrix().rotate(jt)),(A=_.x*_.x/(Ft*Ft)+_.y*_.y/(Rt*Rt))>1&&(Ft*=A=Math.sqrt(A),Rt*=A),E=new SVG.Matrix().rotate(jt).scale(1/Ft,1/Rt).rotate(-jt),on=on.transform(E),ln=ln.transform(E),T=[ln.x-on.x,ln.y-on.y],U=T[0]*T[0]+T[1]*T[1],N=Math.sqrt(U),T[0]/=N,T[1]/=N,H=U<4?Math.sqrt(1-U/4):0,vn===Pt&&(H*=-1),X=new SVG.Point((ln.x+on.x)/2+H*-T[1],(ln.y+on.y)/2+H*T[0]),Y=new SVG.Point(on.x-X.x,on.y-X.y),q=new SVG.Point(ln.x-X.x,ln.y-X.y),w=Math.acos(Y.x/Math.sqrt(Y.x*Y.x+Y.y*Y.y)),Y.y<0&&(w*=-1),D=Math.acos(q.x/Math.sqrt(q.x*q.x+q.y*q.y)),q.y<0&&(D*=-1),Pt&&w>D&&(D+=2*Math.PI),!Pt&&w<D&&(D-=2*Math.PI),$=Math.ceil(2*Math.abs(w-D)/Math.PI),ne=[],fe=w,V=(D-w)/$,Q=4*Math.tan(V/4)/3,_e=0;_e<=$;_e++)Me=Math.cos(fe),de=Math.sin(fe),Oe=new SVG.Point(X.x+Me,X.y+de),ne[_e]=[new SVG.Point(Oe.x+Q*de,Oe.y-Q*Me),Oe,new SVG.Point(Oe.x-Q*de,Oe.y+Q*Me)],fe+=V;for(ne[0][0]=ne[0][1].clone(),ne[ne.length-1][2]=ne[ne.length-1][1].clone(),E=new SVG.Matrix().rotate(jt).scale(Ft,Rt).rotate(-jt),_e=0,Ne=ne.length;_e<Ne;_e++)ne[_e][0]=ne[_e][0].transform(E),ne[_e][1]=ne[_e][1].transform(E),ne[_e][2]=ne[_e][2].transform(E);for(_e=1,Ne=ne.length;_e<Ne;_e++)it=(Oe=ne[_e-1][2]).x,mt=Oe.y,St=(Oe=ne[_e][0]).x,Mt=Oe.y,gn=(Oe=ne[_e][1]).x,hi=Oe.y,dn.push(["C",it,mt,St,Mt,gn,hi]);return dn}(this.pos,d),d=f[0]}return d[0]="C",this.pos=[d[5],d[6]],this.reflection=[2*d[5]-d[3],2*d[6]-d[4]],f}function u(d,f){if(f===!1)return!1;for(var v=f,y=d.length;v<y;++v)if(d[v][0]=="M")return v;return!1}SVG.extend(SVG.PathArray,{morph:function(d){for(var f=this.value,v=this.parse(d),y=0,_=0,A=!1,E=!1;y!==!1||_!==!1;){var T;A=u(f,y!==!1&&y+1),E=u(v,_!==!1&&_+1),y===!1&&(y=(T=new SVG.PathArray(N.start).bbox()).height==0||T.width==0?f.push(f[0])-1:f.push(["M",T.x+T.width/2,T.y+T.height/2])-1),_===!1&&(_=(T=new SVG.PathArray(N.dest).bbox()).height==0||T.width==0?v.push(v[0])-1:v.push(["M",T.x+T.width/2,T.y+T.height/2])-1);var N=G(f,y,A,v,_,E);f=f.slice(0,y).concat(N.start,A===!1?[]:f.slice(A)),v=v.slice(0,_).concat(N.dest,E===!1?[]:v.slice(E)),y=A!==!1&&y+N.start.length,_=E!==!1&&_+N.dest.length}return this.value=f,this.destination=new SVG.PathArray,this.destination.value=v,this}})}(),(function(){function G(r){r.remember("_draggable",this),this.el=r}G.prototype.init=function(r,a){var l=this;this.constraint=r,this.value=a,this.el.on("mousedown.drag",function(u){l.start(u)}),this.el.on("touchstart.drag",function(u){l.start(u)})},G.prototype.transformPoint=function(r,a){var l=(r=r||window.event).changedTouches&&r.changedTouches[0]||r;return this.p.x=l.clientX-(a||0),this.p.y=l.clientY,this.p.matrixTransform(this.m)},G.prototype.getBBox=function(){var r=this.el.bbox();return this.el instanceof SVG.Nested&&(r=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(r.x=this.el.x(),r.y=this.el.y()),r},G.prototype.start=function(r){if(r.type!="click"&&r.type!="mousedown"&&r.type!="mousemove"||(r.which||r.buttons)==1){var a=this;if(this.el.fire("beforedrag",{event:r,handler:this}),!this.el.event().defaultPrevented){r.preventDefault(),r.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var l,u=this.getBBox();if(this.el instanceof SVG.Text)switch(l=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":l/=2;break;case"start":l=0}this.startPoints={point:this.transformPoint(r,l),box:u,transform:this.el.transform()},SVG.on(window,"mousemove.drag",function(d){a.drag(d)}),SVG.on(window,"touchmove.drag",function(d){a.drag(d)}),SVG.on(window,"mouseup.drag",function(d){a.end(d)}),SVG.on(window,"touchend.drag",function(d){a.end(d)}),this.el.fire("dragstart",{event:r,p:this.startPoints.point,m:this.m,handler:this})}}},G.prototype.drag=function(r){var a=this.getBBox(),l=this.transformPoint(r),u=this.startPoints.box.x+l.x-this.startPoints.point.x,d=this.startPoints.box.y+l.y-this.startPoints.point.y,f=this.constraint,v=l.x-this.startPoints.point.x,y=l.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:r,p:l,m:this.m,handler:this}),this.el.event().defaultPrevented)return l;if(typeof f=="function"){var _=f.call(this.el,u,d,this.m);typeof _=="boolean"&&(_={x:_,y:_}),_.x===!0?this.el.x(u):_.x!==!1&&this.el.x(_.x),_.y===!0?this.el.y(d):_.y!==!1&&this.el.y(_.y)}else typeof f=="object"&&(f.minX!=null&&u<f.minX?v=(u=f.minX)-this.startPoints.box.x:f.maxX!=null&&u>f.maxX-a.width&&(v=(u=f.maxX-a.width)-this.startPoints.box.x),f.minY!=null&&d<f.minY?y=(d=f.minY)-this.startPoints.box.y:f.maxY!=null&&d>f.maxY-a.height&&(y=(d=f.maxY-a.height)-this.startPoints.box.y),f.snapToGrid!=null&&(u-=u%f.snapToGrid,d-=d%f.snapToGrid,v-=v%f.snapToGrid,y-=y%f.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:v,y},!0):this.el.move(u,d));return l},G.prototype.end=function(r){var a=this.drag(r);this.el.fire("dragend",{event:r,p:a,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(r,a){typeof r!="function"&&typeof r!="object"||(a=r,r=!0);var l=this.remember("_draggable")||new G(this);return(r=r===void 0||r)?l.init(a||{},r):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}).call(void 0),function(){function G(r){this.el=r,r.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(a,l,u){var d=typeof a!="string"?a:l[a];return u?d/2:d},this.pointCoords=function(a,l){var u=this.pointsList[a];return{x:this.pointCoord(u[0],l,a==="t"||a==="b"),y:this.pointCoord(u[1],l,a==="r"||a==="l")}}}G.prototype.init=function(r,a){var l=this.el.bbox();this.options={};var u=this.el.selectize.defaults.points;for(var d in this.el.selectize.defaults)this.options[d]=this.el.selectize.defaults[d],a[d]!==void 0&&(this.options[d]=a[d]);var f=["points","pointsExclude"];for(var d in f){var v=this.options[f[d]];typeof v=="string"?v=v.length>0?v.split(/\s*,\s*/i):[]:typeof v=="boolean"&&f[d]==="points"&&(v=v?u:[]),this.options[f[d]]=v}this.options.points=[u,this.options.points].reduce(function(y,_){return y.filter(function(A){return _.indexOf(A)>-1})}),this.options.points=[this.options.points,this.options.pointsExclude].reduce(function(y,_){return y.filter(function(A){return _.indexOf(A)<0})}),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(l.x,l.y)),this.options.deepSelect&&["line","polyline","polygon"].indexOf(this.el.type)!==-1?this.selectPoints(r):this.selectRect(r),this.observe(),this.cleanup()},G.prototype.selectPoints=function(r){return this.pointSelection.isSelected=r,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},G.prototype.getPointArray=function(){var r=this.el.bbox();return this.el.array().valueOf().map(function(a){return[a[0]-r.x,a[1]-r.y]})},G.prototype.drawPoints=function(){for(var r=this,a=this.getPointArray(),l=0,u=a.length;l<u;++l){var d=function(v){return function(y){(y=y||window.event).preventDefault?y.preventDefault():y.returnValue=!1,y.stopPropagation();var _=y.pageX||y.touches[0].pageX,A=y.pageY||y.touches[0].pageY;r.el.fire("point",{x:_,y:A,i:v,event:y})}}(l),f=this.drawPoint(a[l][0],a[l][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",d).on("mousedown",d);this.pointSelection.set.add(f)}},G.prototype.drawPoint=function(r,a){var l=this.options.pointType;switch(l){case"circle":return this.drawCircle(r,a);case"rect":return this.drawRect(r,a);default:if(typeof l=="function")return l.call(this,r,a);throw new Error("Unknown "+l+" point type!")}},G.prototype.drawCircle=function(r,a){return this.nested.circle(this.options.pointSize).center(r,a)},G.prototype.drawRect=function(r,a){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(r,a)},G.prototype.updatePointSelection=function(){var r=this.getPointArray();this.pointSelection.set.each(function(a){this.cx()===r[a][0]&&this.cy()===r[a][1]||this.center(r[a][0],r[a][1])})},G.prototype.updateRectSelection=function(){var r=this,a=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:a.width,height:a.height}),this.options.points.length&&this.options.points.map(function(u,d){var f=r.pointCoords(u,a);r.rectSelection.set.get(d+1).center(f.x,f.y)}),this.options.rotationPoint){var l=this.rectSelection.set.length();this.rectSelection.set.get(l-1).center(a.width/2,20)}},G.prototype.selectRect=function(r){var a=this,l=this.el.bbox();function u(v){return function(y){(y=y||window.event).preventDefault?y.preventDefault():y.returnValue=!1,y.stopPropagation();var _=y.pageX||y.touches[0].pageX,A=y.pageY||y.touches[0].pageY;a.el.fire(v,{x:_,y:A,event:y})}}if(this.rectSelection.isSelected=r,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(l.width,l.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map(function(v,y){var _=a.pointCoords(v,l),A=a.drawPoint(_.x,_.y).attr("class",a.options.classPoints+"_"+v).on("mousedown",u(v)).on("touchstart",u(v));a.rectSelection.set.add(A)}),this.rectSelection.set.each(function(){this.addClass(a.options.classPoints)})),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var d=function(v){(v=v||window.event).preventDefault?v.preventDefault():v.returnValue=!1,v.stopPropagation();var y=v.pageX||v.touches[0].pageX,_=v.pageY||v.touches[0].pageY;a.el.fire("rot",{x:y,y:_,event:v})},f=this.drawPoint(l.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",d).on("mousedown",d);this.rectSelection.set.add(f)}},G.prototype.handler=function(){var r=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(r.x,r.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},G.prototype.observe=function(){var r=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver(function(){r.handler()}),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch{}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",function(){r.handler()})},G.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each(function(){this.remove()}),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each(function(){this.remove()}),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(r,a){return typeof r=="object"&&(a=r,r=!0),(this.remember("_selectHandler")||new G(this)).init(r===void 0||r,a||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function G(r){r.remember("_resizeHandler",this),this.el=r,this.parameters={},this.lastUpdateCall=null,this.p=r.doc().node.createSVGPoint()}G.prototype.transformPoint=function(r,a,l){return this.p.x=r-(this.offset.x-window.pageXOffset),this.p.y=a-(this.offset.y-window.pageYOffset),this.p.matrixTransform(l||this.m)},G.prototype._extractPosition=function(r){return{x:r.clientX!=null?r.clientX:r.touches[0].clientX,y:r.clientY!=null?r.clientY:r.touches[0].clientY}},G.prototype.init=function(r){var a=this;if(this.stop(),r!=="stop"){for(var l in this.options={},this.el.resize.defaults)this.options[l]=this.el.resize.defaults[l],r[l]!==void 0&&(this.options[l]=r[l]);this.el.on("lt.resize",function(u){a.resize(u||window.event)}),this.el.on("rt.resize",function(u){a.resize(u||window.event)}),this.el.on("rb.resize",function(u){a.resize(u||window.event)}),this.el.on("lb.resize",function(u){a.resize(u||window.event)}),this.el.on("t.resize",function(u){a.resize(u||window.event)}),this.el.on("r.resize",function(u){a.resize(u||window.event)}),this.el.on("b.resize",function(u){a.resize(u||window.event)}),this.el.on("l.resize",function(u){a.resize(u||window.event)}),this.el.on("rot.resize",function(u){a.resize(u||window.event)}),this.el.on("point.resize",function(u){a.resize(u||window.event)}),this.update()}},G.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},G.prototype.resize=function(r){var a=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var l=this._extractPosition(r.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(l.x,l.y),x:r.detail.x,y:r.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},this.el.type==="text"&&(this.parameters.fontSize=this.el.attr()["font-size"]),r.detail.i!==void 0){var u=this.el.array().valueOf();this.parameters.i=r.detail.i,this.parameters.pointCoords=[u[r.detail.i][0],u[r.detail.i][1]]}switch(r.type){case"lt":this.calc=function(d,f){var v=this.snapToGrid(d,f);if(this.parameters.box.width-v[0]>0&&this.parameters.box.height-v[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+v[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-v[0]);v=this.checkAspectRatio(v),this.el.move(this.parameters.box.x+v[0],this.parameters.box.y+v[1]).size(this.parameters.box.width-v[0],this.parameters.box.height-v[1])}};break;case"rt":this.calc=function(d,f){var v=this.snapToGrid(d,f,2);if(this.parameters.box.width+v[0]>0&&this.parameters.box.height-v[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-v[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+v[0]);v=this.checkAspectRatio(v,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+v[1]).size(this.parameters.box.width+v[0],this.parameters.box.height-v[1])}};break;case"rb":this.calc=function(d,f){var v=this.snapToGrid(d,f,0);if(this.parameters.box.width+v[0]>0&&this.parameters.box.height+v[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x-v[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+v[0]);v=this.checkAspectRatio(v),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+v[0],this.parameters.box.height+v[1])}};break;case"lb":this.calc=function(d,f){var v=this.snapToGrid(d,f,1);if(this.parameters.box.width-v[0]>0&&this.parameters.box.height+v[1]>0){if(this.parameters.type==="text")return this.el.move(this.parameters.box.x+v[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-v[0]);v=this.checkAspectRatio(v,!0),this.el.move(this.parameters.box.x+v[0],this.parameters.box.y).size(this.parameters.box.width-v[0],this.parameters.box.height+v[1])}};break;case"t":this.calc=function(d,f){var v=this.snapToGrid(d,f,2);if(this.parameters.box.height-v[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y+v[1]).height(this.parameters.box.height-v[1])}};break;case"r":this.calc=function(d,f){var v=this.snapToGrid(d,f,0);if(this.parameters.box.width+v[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+v[0])}};break;case"b":this.calc=function(d,f){var v=this.snapToGrid(d,f,0);if(this.parameters.box.height+v[1]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+v[1])}};break;case"l":this.calc=function(d,f){var v=this.snapToGrid(d,f,1);if(this.parameters.box.width-v[0]>0){if(this.parameters.type==="text")return;this.el.move(this.parameters.box.x+v[0],this.parameters.box.y).width(this.parameters.box.width-v[0])}};break;case"rot":this.calc=function(d,f){var v=d+this.parameters.p.x,y=f+this.parameters.p.y,_=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),A=Math.atan2(y-this.parameters.box.y-this.parameters.box.height/2,v-this.parameters.box.x-this.parameters.box.width/2),E=this.parameters.rotation+180*(A-_)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(E-E%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(d,f){var v=this.snapToGrid(d,f,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),y=this.el.array().valueOf();y[this.parameters.i][0]=this.parameters.pointCoords[0]+v[0],y[this.parameters.i][1]=this.parameters.pointCoords[1]+v[1],this.el.plot(y)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:r}),SVG.on(window,"touchmove.resize",function(d){a.update(d||window.event)}),SVG.on(window,"touchend.resize",function(){a.done()}),SVG.on(window,"mousemove.resize",function(d){a.update(d||window.event)}),SVG.on(window,"mouseup.resize",function(){a.done()})},G.prototype.update=function(r){if(r){var a=this._extractPosition(r),l=this.transformPoint(a.x,a.y),u=l.x-this.parameters.p.x,d=l.y-this.parameters.p.y;this.lastUpdateCall=[u,d],this.calc(u,d),this.el.fire("resizing",{dx:u,dy:d,event:r})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},G.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},G.prototype.snapToGrid=function(r,a,l,u){var d;return u!==void 0?d=[(l+r)%this.options.snapToGrid,(u+a)%this.options.snapToGrid]:(l=l??3,d=[(this.parameters.box.x+r+(1&l?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+a+(2&l?0:this.parameters.box.height))%this.options.snapToGrid]),r<0&&(d[0]-=this.options.snapToGrid),a<0&&(d[1]-=this.options.snapToGrid),r-=Math.abs(d[0])<this.options.snapToGrid/2?d[0]:d[0]-(r<0?-this.options.snapToGrid:this.options.snapToGrid),a-=Math.abs(d[1])<this.options.snapToGrid/2?d[1]:d[1]-(a<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(r,a,l,u)},G.prototype.constraintToBox=function(r,a,l,u){var d,f,v=this.options.constraint||{};return u!==void 0?(d=l,f=u):(d=this.parameters.box.x+(1&l?0:this.parameters.box.width),f=this.parameters.box.y+(2&l?0:this.parameters.box.height)),v.minX!==void 0&&d+r<v.minX&&(r=v.minX-d),v.maxX!==void 0&&d+r>v.maxX&&(r=v.maxX-d),v.minY!==void 0&&f+a<v.minY&&(a=v.minY-f),v.maxY!==void 0&&f+a>v.maxY&&(a=v.maxY-f),[r,a]},G.prototype.checkAspectRatio=function(r,a){if(!this.options.saveAspectRatio)return r;var l=r.slice(),u=this.parameters.box.width/this.parameters.box.height,d=this.parameters.box.width+r[0],f=this.parameters.box.height-r[1],v=d/f;return v<u?(l[1]=d/u-this.parameters.box.height,a&&(l[1]=-l[1])):v>u&&(l[0]=this.parameters.box.width-f*u,a&&(l[0]=-l[0])),l},SVG.extend(SVG.Element,{resize:function(r){return(this.remember("_resizeHandler")||new G(this)).init(r||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),window.Apex===void 0&&(window.Apex={});var ve=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new O(this.ctx),this.ctx.axes=new Tt(this.ctx),this.ctx.core=new Zc(this.ctx.el,this.ctx),this.ctx.config=new be({}),this.ctx.data=new kt(this.ctx),this.ctx.grid=new Ot(this.ctx),this.ctx.graphics=new Z(this.ctx),this.ctx.coreUtils=new J(this.ctx),this.ctx.crosshairs=new st(this.ctx),this.ctx.events=new lt(this.ctx),this.ctx.exports=new Nt(this.ctx),this.ctx.localization=new Be(this.ctx),this.ctx.options=new Le,this.ctx.responsive=new vt(this.ctx),this.ctx.series=new Ye(this.ctx),this.ctx.theme=new he(this.ctx),this.ctx.formatters=new K(this.ctx),this.ctx.titleSubtitle=new ie(this.ctx),this.ctx.legend=new pt(this.ctx),this.ctx.toolbar=new zt(this.ctx),this.ctx.tooltip=new pn(this.ctx),this.ctx.dimensions=new _t(this.ctx),this.ctx.updateHelpers=new ae(this.ctx),this.ctx.zoomPanSelection=new Qe(this.ctx),this.ctx.w.globals.tooltip=new pn(this.ctx)}}]),G}(),Ee=function(){function G(r){o(this,G),this.ctx=r,this.w=r.w}return h(G,[{key:"clear",value:function(r){var a=r.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:a})}},{key:"killSVG",value:function(r){r.each(function(a,l){this.removeClass("*"),this.off(),this.stop()},!0),r.ungroup(),r.clear()}},{key:"clearDomElements",value:function(r){var a=this,l=r.isUpdating,u=this.w.globals.dom.Paper.node;u.parentNode&&u.parentNode.parentNode&&!l&&(u.parentNode.parentNode.style.minHeight="unset");var d=this.w.globals.dom.baseEl;d&&this.ctx.eventList.forEach(function(v){d.removeEventListener(v,a.ctx.events.documentEvent)});var f=this.w.globals.dom;if(this.ctx.el!==null)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(f.Paper),f.Paper.remove(),f.elWrap=null,f.elGraphical=null,f.elLegendWrap=null,f.elLegendForeign=null,f.baseEl=null,f.elGridRect=null,f.elGridRectMask=null,f.elGridRectMarkerMask=null,f.elForecastMask=null,f.elNonForecastMask=null,f.elDefs=null}}]),G}(),ke=new WeakMap,Se=function(){function G(r,a){o(this,G),this.opts=a,this.ctx=this,this.w=new Ke(a).init(),this.el=r,this.w.globals.cuid=R.randomId(),this.w.globals.chartID=this.w.config.chart.id?R.escapeString(this.w.config.chart.id):this.w.globals.cuid,new ve(this).initModules(),this.create=R.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return h(G,[{key:"render",value:function(){var r=this;return new Promise(function(a,l){if(r.el!==null){Apex._chartInstances===void 0&&(Apex._chartInstances=[]),r.w.config.chart.id&&Apex._chartInstances.push({id:r.w.globals.chartID,group:r.w.config.chart.group,chart:r}),r.setLocale(r.w.config.chart.defaultLocale);var u=r.w.config.chart.events.beforeMount;typeof u=="function"&&u(r,r.w),r.events.fireEvent("beforeMount",[r,r.w]),window.addEventListener("resize",r.windowResizeHandler),function(T,N){var U=!1;if(T.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var H=T.getBoundingClientRect();T.style.display!=="none"&&H.width!==0||(U=!0)}var X=new ResizeObserver(function(Y){U&&N.call(T,Y),U=!0});T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(T.children).forEach(function(Y){return X.observe(Y)}):X.observe(T),ke.set(N,X)}(r.el.parentNode,r.parentResizeHandler);var d=r.el.getRootNode&&r.el.getRootNode(),f=R.is("ShadowRoot",d),v=r.el.ownerDocument,y=f?d.getElementById("apexcharts-css"):v.getElementById("apexcharts-css");if(!y){var _;(y=document.createElement("style")).id="apexcharts-css",y.textContent=`@keyframes opaque {
  0% {
    opacity: 0
  }

  to {
    opacity: 1
  }
}

@keyframes resizeanim {

  0%,
  to {
    opacity: 0
  }
}

.apexcharts-canvas {
  position: relative;
  user-select: none
}

.apexcharts-canvas ::-webkit-scrollbar {
  -webkit-appearance: none;
  width: 6px
}

.apexcharts-canvas ::-webkit-scrollbar-thumb {
  border-radius: 4px;
  background-color: rgba(0, 0, 0, .5);
  box-shadow: 0 0 1px rgba(255, 255, 255, .5);
  -webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5)
}

.apexcharts-inner {
  position: relative
}

.apexcharts-text tspan {
  font-family: inherit
}

rect.legend-mouseover-inactive,
.legend-mouseover-inactive rect,
.legend-mouseover-inactive path,
.legend-mouseover-inactive circle,
.legend-mouseover-inactive line,
.legend-mouseover-inactive text.apexcharts-yaxis-title-text,
.legend-mouseover-inactive text.apexcharts-yaxis-label {
  transition: .15s ease all;
  opacity: .2
}

.apexcharts-legend-text {
  padding-left: 15px;
  margin-left: -15px;
}

.apexcharts-series-collapsed {
  opacity: 0
}

.apexcharts-tooltip {
  border-radius: 5px;
  box-shadow: 2px 2px 6px -4px #999;
  cursor: default;
  font-size: 14px;
  left: 62px;
  opacity: 0;
  pointer-events: none;
  position: absolute;
  top: 20px;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  white-space: nowrap;
  z-index: 12;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-tooltip.apexcharts-theme-light {
  border: 1px solid #e3e3e3;
  background: rgba(255, 255, 255, .96)
}

.apexcharts-tooltip.apexcharts-theme-dark {
  color: #fff;
  background: rgba(30, 30, 30, .8)
}

.apexcharts-tooltip * {
  font-family: inherit
}

.apexcharts-tooltip-title {
  padding: 6px;
  font-size: 15px;
  margin-bottom: 4px
}

.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {
  background: #eceff1;
  border-bottom: 1px solid #ddd
}

.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {
  background: rgba(0, 0, 0, .7);
  border-bottom: 1px solid #333
}

.apexcharts-tooltip-text-goals-value,
.apexcharts-tooltip-text-y-value,
.apexcharts-tooltip-text-z-value {
  display: inline-block;
  margin-left: 5px;
  font-weight: 600
}

.apexcharts-tooltip-text-goals-label:empty,
.apexcharts-tooltip-text-goals-value:empty,
.apexcharts-tooltip-text-y-label:empty,
.apexcharts-tooltip-text-y-value:empty,
.apexcharts-tooltip-text-z-value:empty,
.apexcharts-tooltip-title:empty {
  display: none
}

.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  padding: 6px 0 5px
}

.apexcharts-tooltip-goals-group,
.apexcharts-tooltip-text-goals-label,
.apexcharts-tooltip-text-goals-value {
  display: flex
}

.apexcharts-tooltip-text-goals-label:not(:empty),
.apexcharts-tooltip-text-goals-value:not(:empty) {
  margin-top: -6px
}

.apexcharts-tooltip-marker {
  width: 12px;
  height: 12px;
  position: relative;
  top: 0;
  margin-right: 10px;
  border-radius: 50%
}

.apexcharts-tooltip-series-group {
  padding: 0 10px;
  display: none;
  text-align: left;
  justify-content: left;
  align-items: center
}

.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {
  opacity: 1
}

.apexcharts-tooltip-series-group.apexcharts-active,
.apexcharts-tooltip-series-group:last-child {
  padding-bottom: 4px
}

.apexcharts-tooltip-series-group-hidden {
  opacity: 0;
  height: 0;
  line-height: 0;
  padding: 0 !important
}

.apexcharts-tooltip-y-group {
  padding: 6px 0 5px
}

.apexcharts-custom-tooltip,
.apexcharts-tooltip-box {
  padding: 4px 8px
}

.apexcharts-tooltip-boxPlot {
  display: flex;
  flex-direction: column-reverse
}

.apexcharts-tooltip-box>div {
  margin: 4px 0
}

.apexcharts-tooltip-box span.value {
  font-weight: 700
}

.apexcharts-tooltip-rangebar {
  padding: 5px 8px
}

.apexcharts-tooltip-rangebar .category {
  font-weight: 600;
  color: #777
}

.apexcharts-tooltip-rangebar .series-name {
  font-weight: 700;
  display: block;
  margin-bottom: 5px
}

.apexcharts-xaxistooltip,
.apexcharts-yaxistooltip {
  opacity: 0;
  pointer-events: none;
  color: #373d3f;
  font-size: 13px;
  text-align: center;
  border-radius: 2px;
  position: absolute;
  z-index: 10;
  background: #eceff1;
  border: 1px solid #90a4ae
}

.apexcharts-xaxistooltip {
  padding: 9px 10px;
  transition: .15s ease all
}

.apexcharts-xaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-xaxistooltip:after,
.apexcharts-xaxistooltip:before {
  left: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-xaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-left: -6px
}

.apexcharts-xaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-left: -7px
}

.apexcharts-xaxistooltip-bottom:after,
.apexcharts-xaxistooltip-bottom:before {
  bottom: 100%
}

.apexcharts-xaxistooltip-top:after,
.apexcharts-xaxistooltip-top:before {
  top: 100%
}

.apexcharts-xaxistooltip-bottom:after {
  border-bottom-color: #eceff1
}

.apexcharts-xaxistooltip-bottom:before {
  border-bottom-color: #90a4ae
}

.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {
  border-bottom-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip-top:after {
  border-top-color: #eceff1
}

.apexcharts-xaxistooltip-top:before {
  border-top-color: #90a4ae
}

.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,
.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {
  border-top-color: rgba(0, 0, 0, .5)
}

.apexcharts-xaxistooltip.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-yaxistooltip {
  padding: 4px 10px
}

.apexcharts-yaxistooltip.apexcharts-theme-dark {
  background: rgba(0, 0, 0, .7);
  border: 1px solid rgba(0, 0, 0, .5);
  color: #fff
}

.apexcharts-yaxistooltip:after,
.apexcharts-yaxistooltip:before {
  top: 50%;
  border: solid transparent;
  content: " ";
  height: 0;
  width: 0;
  position: absolute;
  pointer-events: none
}

.apexcharts-yaxistooltip:after {
  border-color: transparent;
  border-width: 6px;
  margin-top: -6px
}

.apexcharts-yaxistooltip:before {
  border-color: transparent;
  border-width: 7px;
  margin-top: -7px
}

.apexcharts-yaxistooltip-left:after,
.apexcharts-yaxistooltip-left:before {
  left: 100%
}

.apexcharts-yaxistooltip-right:after,
.apexcharts-yaxistooltip-right:before {
  right: 100%
}

.apexcharts-yaxistooltip-left:after {
  border-left-color: #eceff1
}

.apexcharts-yaxistooltip-left:before {
  border-left-color: #90a4ae
}

.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {
  border-left-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip-right:after {
  border-right-color: #eceff1
}

.apexcharts-yaxistooltip-right:before {
  border-right-color: #90a4ae
}

.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,
.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {
  border-right-color: rgba(0, 0, 0, .5)
}

.apexcharts-yaxistooltip.apexcharts-active {
  opacity: 1
}

.apexcharts-yaxistooltip-hidden {
  display: none
}

.apexcharts-xcrosshairs,
.apexcharts-ycrosshairs {
  pointer-events: none;
  opacity: 0;
  transition: .15s ease all
}

.apexcharts-xcrosshairs.apexcharts-active,
.apexcharts-ycrosshairs.apexcharts-active {
  opacity: 1;
  transition: .15s ease all
}

.apexcharts-ycrosshairs-hidden {
  opacity: 0
}

.apexcharts-selection-rect {
  cursor: move
}

.svg_select_boundingRect,
.svg_select_points_rot {
  pointer-events: none;
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_boundingRect,
.apexcharts-selection-rect+g .svg_select_points_rot {
  opacity: 0;
  visibility: hidden
}

.apexcharts-selection-rect+g .svg_select_points_l,
.apexcharts-selection-rect+g .svg_select_points_r {
  cursor: ew-resize;
  opacity: 1;
  visibility: visible
}

.svg_select_points {
  fill: #efefef;
  stroke: #333;
  rx: 2
}

.apexcharts-svg.apexcharts-zoomable.hovering-zoom {
  cursor: crosshair
}

.apexcharts-svg.apexcharts-zoomable.hovering-pan {
  cursor: move
}

.apexcharts-menu-icon,
.apexcharts-pan-icon,
.apexcharts-reset-icon,
.apexcharts-selection-icon,
.apexcharts-toolbar-custom-icon,
.apexcharts-zoom-icon,
.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  cursor: pointer;
  width: 20px;
  height: 20px;
  line-height: 24px;
  color: #6e8192;
  text-align: center
}

.apexcharts-menu-icon svg,
.apexcharts-reset-icon svg,
.apexcharts-zoom-icon svg,
.apexcharts-zoomin-icon svg,
.apexcharts-zoomout-icon svg {
  fill: #6e8192
}

.apexcharts-selection-icon svg {
  fill: #444;
  transform: scale(.76)
}

.apexcharts-theme-dark .apexcharts-menu-icon svg,
.apexcharts-theme-dark .apexcharts-pan-icon svg,
.apexcharts-theme-dark .apexcharts-reset-icon svg,
.apexcharts-theme-dark .apexcharts-selection-icon svg,
.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,
.apexcharts-theme-dark .apexcharts-zoom-icon svg,
.apexcharts-theme-dark .apexcharts-zoomin-icon svg,
.apexcharts-theme-dark .apexcharts-zoomout-icon svg {
  fill: #f3f4f5
}

.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,
.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {
  fill: #008ffb
}

.apexcharts-theme-light .apexcharts-menu-icon:hover svg,
.apexcharts-theme-light .apexcharts-reset-icon:hover svg,
.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,
.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,
.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {
  fill: #333
}

.apexcharts-menu-icon,
.apexcharts-selection-icon {
  position: relative
}

.apexcharts-reset-icon {
  margin-left: 5px
}

.apexcharts-menu-icon,
.apexcharts-reset-icon,
.apexcharts-zoom-icon {
  transform: scale(.85)
}

.apexcharts-zoomin-icon,
.apexcharts-zoomout-icon {
  transform: scale(.7)
}

.apexcharts-zoomout-icon {
  margin-right: 3px
}

.apexcharts-pan-icon {
  transform: scale(.62);
  position: relative;
  left: 1px;
  top: 0
}

.apexcharts-pan-icon svg {
  fill: #fff;
  stroke: #6e8192;
  stroke-width: 2
}

.apexcharts-pan-icon.apexcharts-selected svg {
  stroke: #008ffb
}

.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {
  stroke: #333
}

.apexcharts-toolbar {
  position: absolute;
  z-index: 11;
  max-width: 176px;
  text-align: right;
  border-radius: 3px;
  padding: 0 6px 2px;
  display: flex;
  justify-content: space-between;
  align-items: center
}

.apexcharts-menu {
  background: #fff;
  position: absolute;
  top: 100%;
  border: 1px solid #ddd;
  border-radius: 3px;
  padding: 3px;
  right: 10px;
  opacity: 0;
  min-width: 110px;
  transition: .15s ease all;
  pointer-events: none
}

.apexcharts-menu.apexcharts-menu-open {
  opacity: 1;
  pointer-events: all;
  transition: .15s ease all
}

.apexcharts-menu-item {
  padding: 6px 7px;
  font-size: 12px;
  cursor: pointer
}

.apexcharts-theme-light .apexcharts-menu-item:hover {
  background: #eee
}

.apexcharts-theme-dark .apexcharts-menu {
  background: rgba(0, 0, 0, .7);
  color: #fff
}

@media screen and (min-width:768px) {
  .apexcharts-canvas:hover .apexcharts-toolbar {
    opacity: 1
  }
}

.apexcharts-canvas .apexcharts-element-hidden,
.apexcharts-datalabel.apexcharts-element-hidden,
.apexcharts-hide .apexcharts-series-points {
  opacity: 0;
}

.apexcharts-hidden-element-shown {
  opacity: 1;
  transition: 0.25s ease all;
}

.apexcharts-datalabel,
.apexcharts-datalabel-label,
.apexcharts-datalabel-value,
.apexcharts-datalabels,
.apexcharts-pie-label {
  cursor: default;
  pointer-events: none
}

.apexcharts-pie-label-delay {
  opacity: 0;
  animation-name: opaque;
  animation-duration: .3s;
  animation-fill-mode: forwards;
  animation-timing-function: ease
}

.apexcharts-radialbar-label {
  cursor: pointer;
}

.apexcharts-annotation-rect,
.apexcharts-area-series .apexcharts-area,
.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,
.apexcharts-gridline,
.apexcharts-line,
.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,
.apexcharts-point-annotation-label,
.apexcharts-radar-series path,
.apexcharts-radar-series polygon,
.apexcharts-toolbar svg,
.apexcharts-tooltip .apexcharts-marker,
.apexcharts-xaxis-annotation-label,
.apexcharts-yaxis-annotation-label,
.apexcharts-zoom-rect {
  pointer-events: none
}

.apexcharts-marker {
  transition: .15s ease all
}

.resize-triggers {
  animation: 1ms resizeanim;
  visibility: hidden;
  opacity: 0;
  height: 100%;
  width: 100%;
  overflow: hidden
}

.contract-trigger:before,
.resize-triggers,
.resize-triggers>div {
  content: " ";
  display: block;
  position: absolute;
  top: 0;
  left: 0
}

.resize-triggers>div {
  height: 100%;
  width: 100%;
  background: #eee;
  overflow: auto
}

.contract-trigger:before {
  overflow: hidden;
  width: 200%;
  height: 200%
}

.apexcharts-bar-goals-markers {
  pointer-events: none
}

.apexcharts-bar-shadows {
  pointer-events: none
}

.apexcharts-rangebar-goals-markers {
  pointer-events: none
}`;var A=((_=r.opts.chart)===null||_===void 0?void 0:_.nonce)||r.w.config.chart.nonce;A&&y.setAttribute("nonce",A),f?d.prepend(y):v.head.appendChild(y)}var E=r.create(r.w.config.series,{});if(!E)return a(r);r.mount(E).then(function(){typeof r.w.config.chart.events.mounted=="function"&&r.w.config.chart.events.mounted(r,r.w),r.events.fireEvent("mounted",[r,r.w]),a(E)}).catch(function(T){l(T)})}else l(new Error("Element not found"))})}},{key:"create",value:function(r,a){var l=this.w;new ve(this).initModules();var u=this.w.globals;if(u.noData=!1,u.animationEnded=!1,this.responsive.checkResponsiveConfig(a),l.config.xaxis.convertedCatToNumeric&&new we(l.config).convertCatToNumericXaxis(l.config,this.ctx),this.el===null||(this.core.setupElements(),l.config.chart.type==="treemap"&&(l.config.grid.show=!1,l.config.yaxis[0].show=!1),u.svgWidth===0))return u.animationEnded=!0,null;var d=J.checkComboSeries(r,l.config.chart.type);u.comboCharts=d.comboCharts,u.comboBarCount=d.comboBarCount;var f=r.every(function(A){return A.data&&A.data.length===0});(r.length===0||f&&u.collapsedSeries.length<1)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(r),this.theme.init(),new Te(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),u.noData&&u.collapsedSeries.length!==u.series.length&&!l.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),u.axisCharts&&(this.core.coreCalculations(),l.config.xaxis.type!=="category"&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=l.globals.minX,this.ctx.toolbar.maxX=l.globals.maxX),this.formatters.heatmapLabelFormatters(),new J(this).getLargestMarkerSize(),this.dimensions.plotCoords();var v=this.core.xySettings();this.grid.createGridMask();var y=this.core.plotChartType(r,v),_=new Je(this);return _.bringForward(),l.config.dataLabels.background.enabled&&_.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:y,xyRatios:v,dimensions:{plot:{left:l.globals.translateX,top:l.globals.translateY,width:l.globals.gridWidth,height:l.globals.gridHeight}}}}},{key:"mount",value:function(){var r=this,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,l=this,u=l.w;return new Promise(function(d,f){if(l.el===null)return f(new Error("Not enough data to display or target element not found"));(a===null||u.globals.allSeriesCollapsed)&&l.series.handleNoData(),l.grid=new Ot(l);var v,y,_=l.grid.drawGrid();if(l.annotations=new Ae(l),l.annotations.drawImageAnnos(),l.annotations.drawTextAnnos(),u.config.grid.position==="back"&&(_&&u.globals.dom.elGraphical.add(_.el),_!=null&&(v=_.elGridBorders)!==null&&v!==void 0&&v.node&&u.globals.dom.elGraphical.add(_.elGridBorders)),Array.isArray(a.elGraph))for(var A=0;A<a.elGraph.length;A++)u.globals.dom.elGraphical.add(a.elGraph[A]);else u.globals.dom.elGraphical.add(a.elGraph);u.config.grid.position==="front"&&(_&&u.globals.dom.elGraphical.add(_.el),_!=null&&(y=_.elGridBorders)!==null&&y!==void 0&&y.node&&u.globals.dom.elGraphical.add(_.elGridBorders)),u.config.xaxis.crosshairs.position==="front"&&l.crosshairs.drawXCrosshairs(),u.config.yaxis[0].crosshairs.position==="front"&&l.crosshairs.drawYCrosshairs(),u.config.chart.type!=="treemap"&&l.axes.drawAxis(u.config.chart.type,_);var E=new Ct(r.ctx,_),T=new Ze(r.ctx,_);if(_!==null&&(E.xAxisLabelCorrections(_.xAxisTickWidth),T.setYAxisTextAlignments(),u.config.yaxis.map(function(U,H){u.globals.ignoreYAxisIndexes.indexOf(H)===-1&&T.yAxisTitleRotate(H,U.opposite)})),l.annotations.drawAxesAnnotations(),!u.globals.noData){if(u.config.tooltip.enabled&&!u.globals.noData&&l.w.globals.tooltip.drawTooltip(a.xyRatios),u.globals.axisCharts&&(u.globals.isXNumeric||u.config.xaxis.convertedCatToNumeric||u.globals.isRangeBar))(u.config.chart.zoom.enabled||u.config.chart.selection&&u.config.chart.selection.enabled||u.config.chart.pan&&u.config.chart.pan.enabled)&&l.zoomPanSelection.init({xyRatios:a.xyRatios});else{var N=u.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach(function(U){N[U]=!1})}u.config.chart.toolbar.show&&!u.globals.allSeriesCollapsed&&l.toolbar.createToolbar()}u.globals.memory.methodsToExec.length>0&&u.globals.memory.methodsToExec.forEach(function(U){U.method(U.params,!1,U.context)}),u.globals.axisCharts||u.globals.noData||l.core.resizeNonAxisCharts(),d(l)})}},{key:"destroy",value:function(){var r,a;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,r=this.parentResizeHandler,(a=ke.get(r))&&(a.disconnect(),ke.delete(r));var l=this.w.config.chart.id;l&&Apex._chartInstances.forEach(function(u,d){u.id===R.escapeString(l)&&Apex._chartInstances.splice(d,1)}),new Ee(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(r){var a=this,l=arguments.length>1&&arguments[1]!==void 0&&arguments[1],u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],d=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3],f=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],v=this.w;return v.globals.selection=void 0,r.series&&(this.series.resetSeries(!1,!0,!1),r.series.length&&r.series[0].data&&(r.series=r.series.map(function(y,_){return a.updateHelpers._extendSeries(y,_)})),this.updateHelpers.revertDefaultAxisMinMax()),r.xaxis&&(r=this.updateHelpers.forceXAxisUpdate(r)),r.yaxis&&(r=this.updateHelpers.forceYAxisUpdate(r)),v.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),r.theme&&(r=this.theme.updateThemeOptions(r)),this.updateHelpers._updateOptions(r,l,u,d,f)}},{key:"updateSeries",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(r,a,l)}},{key:"appendSeries",value:function(r){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],l=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],u=this.w.config.series.slice();return u.push(r),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(u,a,l)}},{key:"appendData",value:function(r){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],l=this;l.w.globals.dataChanged=!0,l.series.getPreviousPaths();for(var u=l.w.config.series.slice(),d=0;d<u.length;d++)if(r[d]!==null&&r[d]!==void 0)for(var f=0;f<r[d].data.length;f++)u[d].data.push(r[d].data[f]);return l.w.config.series=u,a&&(l.w.globals.initialSeries=R.clone(l.w.config.series)),this.update()}},{key:"update",value:function(r){var a=this;return new Promise(function(l,u){new Ee(a.ctx).clear({isUpdating:!0});var d=a.create(a.w.config.series,r);if(!d)return l(a);a.mount(d).then(function(){typeof a.w.config.chart.events.updated=="function"&&a.w.config.chart.events.updated(a,a.w),a.events.fireEvent("updated",[a,a.w]),a.w.globals.isDirty=!0,l(a)}).catch(function(f){u(f)})})}},{key:"getSyncedCharts",value:function(){var r=this.getGroupedCharts(),a=[this];return r.length&&(a=[],r.forEach(function(l){a.push(l)})),a}},{key:"getGroupedCharts",value:function(){var r=this;return Apex._chartInstances.filter(function(a){if(a.group)return!0}).map(function(a){return r.w.config.chart.group===a.group?a.chart:r})}},{key:"toggleSeries",value:function(r){return this.series.toggleSeries(r)}},{key:"highlightSeriesOnLegendHover",value:function(r,a){return this.series.toggleSeriesOnHover(r,a)}},{key:"showSeries",value:function(r){this.series.showSeries(r)}},{key:"hideSeries",value:function(r){this.series.hideSeries(r)}},{key:"isSeriesHidden",value:function(r){this.series.isSeriesHidden(r)}},{key:"resetSeries",value:function(){var r=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0],a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];this.series.resetSeries(r,a)}},{key:"addEventListener",value:function(r,a){this.events.addEventListener(r,a)}},{key:"removeEventListener",value:function(r,a){this.events.removeEventListener(r,a)}},{key:"addXaxisAnnotation",value:function(r){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,u=this;l&&(u=l),u.annotations.addXaxisAnnotationExternal(r,a,u)}},{key:"addYaxisAnnotation",value:function(r){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,u=this;l&&(u=l),u.annotations.addYaxisAnnotationExternal(r,a,u)}},{key:"addPointAnnotation",value:function(r){var a=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,u=this;l&&(u=l),u.annotations.addPointAnnotationExternal(r,a,u)}},{key:"clearAnnotations",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,a=this;r&&(a=r),a.annotations.clearAnnotations(a)}},{key:"removeAnnotation",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,l=this;a&&(l=a),l.annotations.removeAnnotation(l,r)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(r,a){return this.coreUtils.getSeriesTotalsXRange(r,a)}},{key:"getHighestValueInSeries",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new je(this.ctx).getMinYMaxY(r).highestY}},{key:"getLowestValueInSeries",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return new je(this.ctx).getMinYMaxY(r).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(r,a){return this.updateHelpers.toggleDataPointSelection(r,a)}},{key:"zoomX",value:function(r,a){this.ctx.toolbar.zoomUpdateOptions(r,a)}},{key:"setLocale",value:function(r){this.localization.setCurrentLocaleValues(r)}},{key:"dataURI",value:function(r){return new Nt(this.ctx).dataURI(r)}},{key:"exportToCSV",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return new Nt(this.ctx).exportToCSV(r)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var r=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout(function(){r.w.globals.resized=!0,r.w.globals.dataChanged=!1,r.ctx.update()},150)}},{key:"_windowResizeHandler",value:function(){var r=this.w.config.chart.redrawOnWindowResize;typeof r=="function"&&(r=r()),r&&this._windowResize()}}],[{key:"getChartByID",value:function(r){var a=R.escapeString(r);if(Apex._chartInstances){var l=Apex._chartInstances.filter(function(u){return u.id===a})[0];return l&&l.chart}}},{key:"initOnLoad",value:function(){for(var r=document.querySelectorAll("[data-apexcharts]"),a=0;a<r.length;a++)new G(r[a],JSON.parse(r[a].getAttribute("data-options"))).render()}},{key:"exec",value:function(r,a){var l=this.getChartByID(r);if(l){l.w.globals.isExecCalled=!0;var u=null;if(l.publicMethods.indexOf(a)!==-1){for(var d=arguments.length,f=new Array(d>2?d-2:0),v=2;v<d;v++)f[v-2]=arguments[v];u=l[a].apply(l,f)}return u}}},{key:"merge",value:function(r,a){return R.extend(r,a)}}]),G}();n.exports=Se})(hy,hy.exports);var w4=hy.exports,J2;Object.defineProperty(K2,"__esModule",{value:!0});var S4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_4=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t,i=arguments[e];for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}return n},M4=function(){function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}}(),A4=w4,$2=nw(A4),Q2=dt,Nu=nw(Q2),C4=WB,Vs=nw(C4);function nw(n){return n&&n.__esModule?n:{default:n}}function E4(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function T4(n,e){var t,i={};for(t in n)0<=e.indexOf(t)||Object.prototype.hasOwnProperty.call(n,t)&&(i[t]=n[t]);return i}function P4(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function k4(n,e){if(n)return!e||typeof e!="object"&&typeof e!="function"?n:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}function R4(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}window.ApexCharts=$2.default;var GM=function(){function n(e){P4(this,n);var t=k4(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return Nu.default.createRef?t.chartRef=Nu.default.createRef():t.setRef=function(i){return t.chartRef=i},t.chart=null,t}return R4(n,Q2.Component),M4(n,[{key:"render",value:function(){var e=T4(this.props,[]);return Nu.default.createElement("div",_4({ref:Nu.default.createRef?this.chartRef:this.setRef},e))}},{key:"componentDidMount",value:function(){var e=Nu.default.createRef?this.chartRef.current:this.chartRef;this.chart=new $2.default(e,this.getConfig()),this.chart.render()}},{key:"getConfig",value:function(){var o=this.props,e=o.type,t=o.height,i=o.width,s=o.series,o=o.options;return this.extend(o,{chart:{type:e,height:t,width:i},series:s})}},{key:"isObject",value:function(e){return e&&(e===void 0?"undefined":S4(e))==="object"&&!Array.isArray(e)&&e!=null}},{key:"extend",value:function(e,t){var i=this,s=(typeof Object.assign!="function"&&(Object.assign=function(o){if(o==null)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(o),h=1;h<arguments.length;h++){var m=arguments[h];if(m!=null)for(var x in m)m.hasOwnProperty(x)&&(c[x]=m[x])}return c}),Object.assign({},e));return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(o){i.isObject(t[o])&&o in e?s[o]=i.extend(e[o],t[o]):Object.assign(s,E4({},o,t[o]))}),s}},{key:"componentDidUpdate",value:function(e){if(!this.chart)return null;var s=this.props,h=s.options,t=s.series,i=s.height,s=s.width,o=JSON.stringify(e.options),c=JSON.stringify(e.series),h=JSON.stringify(h),m=JSON.stringify(t);o===h&&c===m&&i===e.height&&s===e.width||(c!==m&&o===h&&i===e.height&&s===e.width?this.chart.updateSeries(t):this.chart.updateOptions(this.getConfig()))}},{key:"componentWillUnmount",value:function(){this.chart&&typeof this.chart.destroy=="function"&&this.chart.destroy()}}]),n}();(J2=K2.default=GM).propTypes={type:Vs.default.string.isRequired,width:Vs.default.oneOfType([Vs.default.string,Vs.default.number]),height:Vs.default.oneOfType([Vs.default.string,Vs.default.number]),series:Vs.default.array.isRequired,options:Vs.default.object.isRequired},GM.defaultProps={type:"line",width:"100%",height:"auto"};function L4(){const n=kg(),e=n.status==="POSITIVE"?"#00FFAB":"#FF204E",t={chart:{type:"area",sparkline:{enabled:!0}},stroke:{curve:"smooth",width:5},fill:{opacity:1,type:"gradient",gradient:{shade:"light",type:"vertical",shadeIntensity:0,opacityFrom:.5,opacityTo:0}},series:[{name:"Sales",data:n.history}],colors:[e],title:{text:`$${n.current.price}`,style:{fontSize:"24px",color:e}},subtitle:{text:"LBKHND",style:{fontSize:"14px",color:"#8e8e8e"}}};return Kt.jsx(J2,{options:t,series:t.series,type:"area"})}function I4(){const n=Z2();return Kt.jsx(Kt.Fragment,{children:Kt.jsx("div",{className:"fixed top-0 left-0 right-0 mx-auto w-full h-full max-w-[450px] border shadow-xl",children:Kt.jsxs("div",{className:"flex flex-col h-full justify-between",children:[Kt.jsxs("div",{children:[Kt.jsx(L4,{}),Kt.jsxs("div",{className:"flex justify-center items-center gap-2",children:[Kt.jsx("span",{style:{fontSize:"2rem"},children:""}),Kt.jsx("span",{className:"text-4xl font-bold",children:n.coins})]})]}),Kt.jsxs("div",{className:"flex",children:[Kt.jsx(WM,{onClick:()=>n.buy(),block:!0,type:"green",children:"BUY"}),Kt.jsx(WM,{onClick:()=>n.sell(),block:!0,type:"red",children:"SELL"})]})]})})})}function D4(){const e=b4("LBKHND"),t=kg(i=>i.updateSymbol);return dt.useEffect(()=>{const i=setInterval(()=>{t(e.generate())},100);return()=>clearInterval(i)},[]),Kt.jsxs(Kt.Fragment,{children:[Kt.jsx(y4,{}),Kt.jsx(I4,{})]})}Jx.createRoot(document.getElementById("root")).render(Kt.jsx(tA.StrictMode,{children:Kt.jsx(D4,{})}));
